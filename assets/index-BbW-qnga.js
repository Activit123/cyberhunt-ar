(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();var a0={exports:{}},ru={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function iL(){if(Q_)return ru;Q_=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var c in r)c!=="key"&&(a[c]=r[c])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:a}}return ru.Fragment=t,ru.jsx=e,ru.jsxs=e,ru}var z_;function rL(){return z_||(z_=1,a0.exports=iL()),a0.exports}var _o=rL(),o0={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function sL(){if(G_)return xe;G_=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),m=Symbol.iterator;function g(V){return V===null||typeof V!="object"?null:(V=m&&V[m]||V["@@iterator"],typeof V=="function"?V:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function y(V,rt,yt){this.props=V,this.context=rt,this.refs=E,this.updater=yt||b}y.prototype.isReactComponent={},y.prototype.setState=function(V,rt){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,rt,"setState")},y.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function _(){}_.prototype=y.prototype;function w(V,rt,yt){this.props=V,this.context=rt,this.refs=E,this.updater=yt||b}var S=w.prototype=new _;S.constructor=w,x(S,y.prototype),S.isPureReactComponent=!0;var R=Array.isArray;function U(){}var L={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function D(V,rt,yt){var Et=yt.ref;return{$$typeof:n,type:V,key:rt,ref:Et!==void 0?Et:null,props:yt}}function O(V,rt){return D(V.type,rt,V.props)}function z(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function J(V){var rt={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(yt){return rt[yt]})}var $=/\/+/g;function nt(V,rt){return typeof V=="object"&&V!==null&&V.key!=null?J(""+V.key):rt.toString(36)}function At(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(U,U):(V.status="pending",V.then(function(rt){V.status==="pending"&&(V.status="fulfilled",V.value=rt)},function(rt){V.status==="pending"&&(V.status="rejected",V.reason=rt)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function G(V,rt,yt,Et,Ot){var Gt=typeof V;(Gt==="undefined"||Gt==="boolean")&&(V=null);var Lt=!1;if(V===null)Lt=!0;else switch(Gt){case"bigint":case"string":case"number":Lt=!0;break;case"object":switch(V.$$typeof){case n:case t:Lt=!0;break;case f:return Lt=V._init,G(Lt(V._payload),rt,yt,Et,Ot)}}if(Lt)return Ot=Ot(V),Lt=Et===""?"."+nt(V,0):Et,R(Ot)?(yt="",Lt!=null&&(yt=Lt.replace($,"$&/")+"/"),G(Ot,rt,yt,"",function(Ft){return Ft})):Ot!=null&&(z(Ot)&&(Ot=O(Ot,yt+(Ot.key==null||V&&V.key===Ot.key?"":(""+Ot.key).replace($,"$&/")+"/")+Lt)),rt.push(Ot)),1;Lt=0;var ft=Et===""?".":Et+":";if(R(V))for(var It=0;It<V.length;It++)Et=V[It],Gt=ft+nt(Et,It),Lt+=G(Et,rt,yt,Gt,Ot);else if(It=g(V),typeof It=="function")for(V=It.call(V),It=0;!(Et=V.next()).done;)Et=Et.value,Gt=ft+nt(Et,It++),Lt+=G(Et,rt,yt,Gt,Ot);else if(Gt==="object"){if(typeof V.then=="function")return G(At(V),rt,yt,Et,Ot);throw rt=String(V),Error("Objects are not valid as a React child (found: "+(rt==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":rt)+"). If you meant to render a collection of children, use an array instead.")}return Lt}function X(V,rt,yt){if(V==null)return V;var Et=[],Ot=0;return G(V,Et,"","",function(Gt){return rt.call(yt,Gt,Ot++)}),Et}function tt(V){if(V._status===-1){var rt=V._result;rt=rt(),rt.then(function(yt){(V._status===0||V._status===-1)&&(V._status=1,V._result=yt)},function(yt){(V._status===0||V._status===-1)&&(V._status=2,V._result=yt)}),V._status===-1&&(V._status=0,V._result=rt)}if(V._status===1)return V._result.default;throw V._result}var ut=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var rt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(rt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},xt={map:X,forEach:function(V,rt,yt){X(V,function(){rt.apply(this,arguments)},yt)},count:function(V){var rt=0;return X(V,function(){rt++}),rt},toArray:function(V){return X(V,function(rt){return rt})||[]},only:function(V){if(!z(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return xe.Activity=A,xe.Children=xt,xe.Component=y,xe.Fragment=e,xe.Profiler=r,xe.PureComponent=w,xe.StrictMode=i,xe.Suspense=u,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,xe.__COMPILER_RUNTIME={__proto__:null,c:function(V){return L.H.useMemoCache(V)}},xe.cache=function(V){return function(){return V.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(V,rt,yt){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var Et=x({},V.props),Ot=V.key;if(rt!=null)for(Gt in rt.key!==void 0&&(Ot=""+rt.key),rt)!F.call(rt,Gt)||Gt==="key"||Gt==="__self"||Gt==="__source"||Gt==="ref"&&rt.ref===void 0||(Et[Gt]=rt[Gt]);var Gt=arguments.length-2;if(Gt===1)Et.children=yt;else if(1<Gt){for(var Lt=Array(Gt),ft=0;ft<Gt;ft++)Lt[ft]=arguments[ft+2];Et.children=Lt}return D(V.type,Ot,Et)},xe.createContext=function(V){return V={$$typeof:l,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:a,_context:V},V},xe.createElement=function(V,rt,yt){var Et,Ot={},Gt=null;if(rt!=null)for(Et in rt.key!==void 0&&(Gt=""+rt.key),rt)F.call(rt,Et)&&Et!=="key"&&Et!=="__self"&&Et!=="__source"&&(Ot[Et]=rt[Et]);var Lt=arguments.length-2;if(Lt===1)Ot.children=yt;else if(1<Lt){for(var ft=Array(Lt),It=0;It<Lt;It++)ft[It]=arguments[It+2];Ot.children=ft}if(V&&V.defaultProps)for(Et in Lt=V.defaultProps,Lt)Ot[Et]===void 0&&(Ot[Et]=Lt[Et]);return D(V,Gt,Ot)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(V){return{$$typeof:c,render:V}},xe.isValidElement=z,xe.lazy=function(V){return{$$typeof:f,_payload:{_status:-1,_result:V},_init:tt}},xe.memo=function(V,rt){return{$$typeof:d,type:V,compare:rt===void 0?null:rt}},xe.startTransition=function(V){var rt=L.T,yt={};L.T=yt;try{var Et=V(),Ot=L.S;Ot!==null&&Ot(yt,Et),typeof Et=="object"&&Et!==null&&typeof Et.then=="function"&&Et.then(U,ut)}catch(Gt){ut(Gt)}finally{rt!==null&&yt.types!==null&&(rt.types=yt.types),L.T=rt}},xe.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},xe.use=function(V){return L.H.use(V)},xe.useActionState=function(V,rt,yt){return L.H.useActionState(V,rt,yt)},xe.useCallback=function(V,rt){return L.H.useCallback(V,rt)},xe.useContext=function(V){return L.H.useContext(V)},xe.useDebugValue=function(){},xe.useDeferredValue=function(V,rt){return L.H.useDeferredValue(V,rt)},xe.useEffect=function(V,rt){return L.H.useEffect(V,rt)},xe.useEffectEvent=function(V){return L.H.useEffectEvent(V)},xe.useId=function(){return L.H.useId()},xe.useImperativeHandle=function(V,rt,yt){return L.H.useImperativeHandle(V,rt,yt)},xe.useInsertionEffect=function(V,rt){return L.H.useInsertionEffect(V,rt)},xe.useLayoutEffect=function(V,rt){return L.H.useLayoutEffect(V,rt)},xe.useMemo=function(V,rt){return L.H.useMemo(V,rt)},xe.useOptimistic=function(V,rt){return L.H.useOptimistic(V,rt)},xe.useReducer=function(V,rt,yt){return L.H.useReducer(V,rt,yt)},xe.useRef=function(V){return L.H.useRef(V)},xe.useState=function(V){return L.H.useState(V)},xe.useSyncExternalStore=function(V,rt,yt){return L.H.useSyncExternalStore(V,rt,yt)},xe.useTransition=function(){return L.H.useTransition()},xe.version="19.2.0",xe}var H_;function ph(){return H_||(H_=1,o0.exports=sL()),o0.exports}var aL=ph(),l0={exports:{}},su={},c0={exports:{}},u0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function oL(){return V_||(V_=1,(function(n){function t(G,X){var tt=G.length;G.push(X);t:for(;0<tt;){var ut=tt-1>>>1,xt=G[ut];if(0<r(xt,X))G[ut]=X,G[tt]=xt,tt=ut;else break t}}function e(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var X=G[0],tt=G.pop();if(tt!==X){G[0]=tt;t:for(var ut=0,xt=G.length,V=xt>>>1;ut<V;){var rt=2*(ut+1)-1,yt=G[rt],Et=rt+1,Ot=G[Et];if(0>r(yt,tt))Et<xt&&0>r(Ot,yt)?(G[ut]=Ot,G[Et]=tt,ut=Et):(G[ut]=yt,G[rt]=tt,ut=rt);else if(Et<xt&&0>r(Ot,tt))G[ut]=Ot,G[Et]=tt,ut=Et;else break t}}return X}function r(G,X){var tt=G.sortIndex-X.sortIndex;return tt!==0?tt:G.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var u=[],d=[],f=1,A=null,m=3,g=!1,b=!1,x=!1,E=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function S(G){for(var X=e(d);X!==null;){if(X.callback===null)i(d);else if(X.startTime<=G)i(d),X.sortIndex=X.expirationTime,t(u,X);else break;X=e(d)}}function R(G){if(x=!1,S(G),!b)if(e(u)!==null)b=!0,U||(U=!0,J());else{var X=e(d);X!==null&&At(R,X.startTime-G)}}var U=!1,L=-1,F=5,D=-1;function O(){return E?!0:!(n.unstable_now()-D<F)}function z(){if(E=!1,U){var G=n.unstable_now();D=G;var X=!0;try{t:{b=!1,x&&(x=!1,_(L),L=-1),g=!0;var tt=m;try{e:{for(S(G),A=e(u);A!==null&&!(A.expirationTime>G&&O());){var ut=A.callback;if(typeof ut=="function"){A.callback=null,m=A.priorityLevel;var xt=ut(A.expirationTime<=G);if(G=n.unstable_now(),typeof xt=="function"){A.callback=xt,S(G),X=!0;break e}A===e(u)&&i(u),S(G)}else i(u);A=e(u)}if(A!==null)X=!0;else{var V=e(d);V!==null&&At(R,V.startTime-G),X=!1}}break t}finally{A=null,m=tt,g=!1}X=void 0}}finally{X?J():U=!1}}}var J;if(typeof w=="function")J=function(){w(z)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,nt=$.port2;$.port1.onmessage=z,J=function(){nt.postMessage(null)}}else J=function(){y(z,0)};function At(G,X){L=y(function(){G(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(G){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var tt=m;m=X;try{return G()}finally{m=tt}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(G,X){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var tt=m;m=G;try{return X()}finally{m=tt}},n.unstable_scheduleCallback=function(G,X,tt){var ut=n.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?ut+tt:ut):tt=ut,G){case 1:var xt=-1;break;case 2:xt=250;break;case 5:xt=1073741823;break;case 4:xt=1e4;break;default:xt=5e3}return xt=tt+xt,G={id:f++,callback:X,priorityLevel:G,startTime:tt,expirationTime:xt,sortIndex:-1},tt>ut?(G.sortIndex=tt,t(d,G),e(u)===null&&G===e(d)&&(x?(_(L),L=-1):x=!0,At(R,tt-ut))):(G.sortIndex=xt,t(u,G),b||g||(b=!0,U||(U=!0,J()))),G},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(G){var X=m;return function(){var tt=m;m=X;try{return G.apply(this,arguments)}finally{m=tt}}}})(u0)),u0}var q_;function lL(){return q_||(q_=1,c0.exports=oL()),c0.exports}var h0={exports:{}},ii={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function cL(){if(W_)return ii;W_=1;var n=ph();function t(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(u,d,f){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:A==null?null:""+A,children:u,containerInfo:d,implementation:f}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ii.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ii.createPortal=function(u,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return a(u,d,null,f)},ii.flushSync=function(u){var d=l.T,f=i.p;try{if(l.T=null,i.p=2,u)return u()}finally{l.T=d,i.p=f,i.d.f()}},ii.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(u,d))},ii.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},ii.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var f=d.as,A=c(f,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,g=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?i.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:A,integrity:m,fetchPriority:g}):f==="script"&&i.d.X(u,{crossOrigin:A,integrity:m,fetchPriority:g,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ii.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=c(d.as,d.crossOrigin);i.d.M(u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(u)},ii.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,A=c(f,d.crossOrigin);i.d.L(u,f,{crossOrigin:A,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ii.preloadModule=function(u,d){if(typeof u=="string")if(d){var f=c(d.as,d.crossOrigin);i.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(u)},ii.requestFormReset=function(u){i.d.r(u)},ii.unstable_batchedUpdates=function(u,d){return u(d)},ii.useFormState=function(u,d,f){return l.H.useFormState(u,d,f)},ii.useFormStatus=function(){return l.H.useHostTransitionStatus()},ii.version="19.2.0",ii}var j_;function uL(){if(j_)return h0.exports;j_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),h0.exports=cL(),h0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function hL(){if(X_)return su;X_=1;var n=lL(),t=ph(),e=uL();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,h=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(h=o.return),s=o.return;while(s)}return o.tag===3?h:null}function l(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function c(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(i(188))}function d(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var h=s,p=o;;){var v=h.return;if(v===null)break;var C=v.alternate;if(C===null){if(p=v.return,p!==null){h=p;continue}break}if(v.child===C.child){for(C=v.child;C;){if(C===h)return u(v),s;if(C===p)return u(v),o;C=C.sibling}throw Error(i(188))}if(h.return!==p.return)h=v,p=C;else{for(var I=!1,k=v.child;k;){if(k===h){I=!0,h=v,p=C;break}if(k===p){I=!0,p=v,h=C;break}k=k.sibling}if(!I){for(k=C.child;k;){if(k===h){I=!0,h=C,p=v;break}if(k===p){I=!0,p=C,h=v;break}k=k.sibling}if(!I)throw Error(i(189))}}if(h.alternate!==p)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?s:o}function f(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=f(s),o!==null)return o;s=s.sibling}return null}var A=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),w=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function J(s){return s===null||typeof s!="object"?null:(s=z&&s[z]||s["@@iterator"],typeof s=="function"?s:null)}var $=Symbol.for("react.client.reference");function nt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===$?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case x:return"Fragment";case y:return"Profiler";case E:return"StrictMode";case R:return"Suspense";case U:return"SuspenseList";case D:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case w:return s.displayName||"Context";case _:return(s._context.displayName||"Context")+".Consumer";case S:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return o=s.displayName||null,o!==null?o:nt(s.type)||"Memo";case F:o=s._payload,s=s._init;try{return nt(s(o))}catch{}}return null}var At=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt={pending:!1,data:null,method:null,action:null},ut=[],xt=-1;function V(s){return{current:s}}function rt(s){0>xt||(s.current=ut[xt],ut[xt]=null,xt--)}function yt(s,o){xt++,ut[xt]=s.current,s.current=o}var Et=V(null),Ot=V(null),Gt=V(null),Lt=V(null);function ft(s,o){switch(yt(Gt,o),yt(Ot,s),yt(Et,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?c_(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=c_(o),s=u_(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}rt(Et),yt(Et,s)}function It(){rt(Et),rt(Ot),rt(Gt)}function Ft(s){s.memoizedState!==null&&yt(Lt,s);var o=Et.current,h=u_(o,s.type);o!==h&&(yt(Ot,s),yt(Et,h))}function Jt(s){Ot.current===s&&(rt(Et),rt(Ot)),Lt.current===s&&(rt(Lt),tu._currentValue=tt)}var Ct,Rt;function Tt(s){if(Ct===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);Ct=o&&o[1]||"",Rt=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ct+s+Rt}var j=!1;function zt(s,o){if(!s||j)return"";j=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(o){var Bt=function(){throw Error()};if(Object.defineProperty(Bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Bt,[])}catch(vt){var pt=vt}Reflect.construct(s,[],Bt)}else{try{Bt.call()}catch(vt){pt=vt}s.call(Bt.prototype)}}else{try{throw Error()}catch(vt){pt=vt}(Bt=s())&&typeof Bt.catch=="function"&&Bt.catch(function(){})}}catch(vt){if(vt&&pt&&typeof vt.stack=="string")return[vt.stack,pt.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=p.DetermineComponentFrameRoot(),I=C[0],k=C[1];if(I&&k){var K=I.split(`
`),dt=k.split(`
`);for(v=p=0;p<K.length&&!K[p].includes("DetermineComponentFrameRoot");)p++;for(;v<dt.length&&!dt[v].includes("DetermineComponentFrameRoot");)v++;if(p===K.length||v===dt.length)for(p=K.length-1,v=dt.length-1;1<=p&&0<=v&&K[p]!==dt[v];)v--;for(;1<=p&&0<=v;p--,v--)if(K[p]!==dt[v]){if(p!==1||v!==1)do if(p--,v--,0>v||K[p]!==dt[v]){var _t=`
`+K[p].replace(" at new "," at ");return s.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",s.displayName)),_t}while(1<=p&&0<=v);break}}}finally{j=!1,Error.prepareStackTrace=h}return(h=s?s.displayName||s.name:"")?Tt(h):""}function Vt(s,o){switch(s.tag){case 26:case 27:case 5:return Tt(s.type);case 16:return Tt("Lazy");case 13:return s.child!==o&&o!==null?Tt("Suspense Fallback"):Tt("Suspense");case 19:return Tt("SuspenseList");case 0:case 15:return zt(s.type,!1);case 11:return zt(s.type.render,!1);case 1:return zt(s.type,!0);case 31:return Tt("Activity");default:return""}}function B(s){try{var o="",h=null;do o+=Vt(s,h),h=s,s=s.return;while(s);return o}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var T=Object.prototype.hasOwnProperty,P=n.unstable_scheduleCallback,q=n.unstable_cancelCallback,Y=n.unstable_shouldYield,lt=n.unstable_requestPaint,gt=n.unstable_now,ne=n.unstable_getCurrentPriorityLevel,H=n.unstable_ImmediatePriority,N=n.unstable_UserBlockingPriority,it=n.unstable_NormalPriority,bt=n.unstable_LowPriority,Dt=n.unstable_IdlePriority,Mt=n.log,te=n.unstable_setDisableYieldValue,Pt=null,Ht=null;function pe(s){if(typeof Mt=="function"&&te(s),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(Pt,s)}catch{}}var Qt=Math.clz32?Math.clz32:Z,ue=Math.log,Le=Math.LN2;function Z(s){return s>>>=0,s===0?32:31-(ue(s)/Le|0)|0}var wt=256,kt=262144,jt=4194304;function qt(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Zt(s,o,h){var p=s.pendingLanes;if(p===0)return 0;var v=0,C=s.suspendedLanes,I=s.pingedLanes;s=s.warmLanes;var k=p&134217727;return k!==0?(p=k&~C,p!==0?v=qt(p):(I&=k,I!==0?v=qt(I):h||(h=k&~s,h!==0&&(v=qt(h))))):(k=p&~C,k!==0?v=qt(k):I!==0?v=qt(I):h||(h=p&~s,h!==0&&(v=qt(h)))),v===0?0:o!==0&&o!==v&&(o&C)===0&&(C=v&-v,h=o&-o,C>=h||C===32&&(h&4194048)!==0)?o:v}function Ae(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function Xt(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yt(){var s=jt;return jt<<=1,(jt&62914560)===0&&(jt=4194304),s}function se(s){for(var o=[],h=0;31>h;h++)o.push(s);return o}function De(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function _n(s,o,h,p,v,C){var I=s.pendingLanes;s.pendingLanes=h,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=h,s.entangledLanes&=h,s.errorRecoveryDisabledLanes&=h,s.shellSuspendCounter=0;var k=s.entanglements,K=s.expirationTimes,dt=s.hiddenUpdates;for(h=I&~h;0<h;){var _t=31-Qt(h),Bt=1<<_t;k[_t]=0,K[_t]=-1;var pt=dt[_t];if(pt!==null)for(dt[_t]=null,_t=0;_t<pt.length;_t++){var vt=pt[_t];vt!==null&&(vt.lane&=-536870913)}h&=~Bt}p!==0&&zo(s,p,0),C!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=C&~(I&~o))}function zo(s,o,h){s.pendingLanes|=o,s.suspendedLanes&=~o;var p=31-Qt(o);s.entangledLanes|=o,s.entanglements[p]=s.entanglements[p]|1073741824|h&261930}function Sh(s,o){var h=s.entangledLanes|=o;for(s=s.entanglements;h;){var p=31-Qt(h),v=1<<p;v&o|s[p]&o&&(s[p]|=o),h&=~v}}function pc(s,o){var h=o&-o;return h=(h&42)!==0?1:Go(h),(h&(s.suspendedLanes|o))!==0?0:h}function Go(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function hr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ho(){var s=X.p;return s!==0?s:(s=window.event,s===void 0?32:D_(s.type))}function Vo(s,o){var h=X.p;try{return X.p=s,o()}finally{X.p=h}}var dr=Math.random().toString(36).slice(2),yn="__reactFiber$"+dr,jn="__reactProps$"+dr,fr="__reactContainer$"+dr,qo="__reactEvents$"+dr,Bh="__reactListeners$"+dr,em="__reactHandles$"+dr,Th="__reactResources$"+dr,Na="__reactMarker$"+dr;function Ac(s){delete s[yn],delete s[jn],delete s[qo],delete s[Bh],delete s[em]}function ks(s){var o=s[yn];if(o)return o;for(var h=s.parentNode;h;){if(o=h[fr]||h[yn]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(s=g_(s);s!==null;){if(h=s[yn])return h;s=g_(s)}return o}s=h,h=s.parentNode}return null}function Qs(s){if(s=s[yn]||s[fr]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function Q(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function st(s){var o=s[Th];return o||(o=s[Th]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function ct(s){s[Na]=!0}var mt=new Set,ot={};function Nt(s,o){Wt(s,o),Wt(s+"Capture",o)}function Wt(s,o){for(ot[s]=o,s=0;s<o.length;s++)mt.add(o[s])}var ee=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ie={},ye={};function Ee(s){return T.call(ye,s)?!0:T.call(ie,s)?!1:ee.test(s)?ye[s]=!0:(ie[s]=!0,!1)}function ce(s,o,h){if(Ee(o))if(h===null)s.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var p=o.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+h)}}function Ue(s,o,h){if(h===null)s.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+h)}}function Re(s,o,h,p){if(p===null)s.removeAttribute(h);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttributeNS(o,h,""+p)}}function qe(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function An(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Qe(s,o,h){var p=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var v=p.get,C=p.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return v.call(this)},set:function(I){h=""+I,C.call(this,I)}}),Object.defineProperty(s,o,{enumerable:p.enumerable}),{getValue:function(){return h},setValue:function(I){h=""+I},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function In(s){if(!s._valueTracker){var o=An(s)?"checked":"value";s._valueTracker=Qe(s,o,""+s[o])}}function he(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var h=o.getValue(),p="";return s&&(p=An(s)?s.checked?"true":"false":s.value),s=p,s!==h?(o.setValue(s),!0):!1}function Rr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var We=/[\n"\\]/g;function hn(s){return s.replace(We,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function xi(s,o,h,p,v,C,I,k){s.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.type=I:s.removeAttribute("type"),o!=null?I==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+qe(o)):s.value!==""+qe(o)&&(s.value=""+qe(o)):I!=="submit"&&I!=="reset"||s.removeAttribute("value"),o!=null?Dr(s,I,qe(o)):h!=null?Dr(s,I,qe(h)):p!=null&&s.removeAttribute("value"),v==null&&C!=null&&(s.defaultChecked=!!C),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?s.name=""+qe(k):s.removeAttribute("name")}function Lr(s,o,h,p,v,C,I,k){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.type=C),o!=null||h!=null){if(!(C!=="submit"&&C!=="reset"||o!=null)){In(s);return}h=h!=null?""+qe(h):"",o=o!=null?""+qe(o):h,k||o===s.value||(s.value=o),s.defaultValue=o}p=p??v,p=typeof p!="function"&&typeof p!="symbol"&&!!p,s.checked=k?s.checked:!!p,s.defaultChecked=!!p,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(s.name=I),In(s)}function Dr(s,o,h){o==="number"&&Rr(s.ownerDocument)===s||s.defaultValue===""+h||(s.defaultValue=""+h)}function ze(s,o,h,p){if(s=s.options,o){o={};for(var v=0;v<h.length;v++)o["$"+h[v]]=!0;for(h=0;h<s.length;h++)v=o.hasOwnProperty("$"+s[h].value),s[h].selected!==v&&(s[h].selected=v),v&&p&&(s[h].defaultSelected=!0)}else{for(h=""+qe(h),o=null,v=0;v<s.length;v++){if(s[v].value===h){s[v].selected=!0,p&&(s[v].defaultSelected=!0);return}o!==null||s[v].disabled||(o=s[v])}o!==null&&(o.selected=!0)}}function Rn(s,o,h){if(o!=null&&(o=""+qe(o),o!==s.value&&(s.value=o),h==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=h!=null?""+qe(h):""}function pr(s,o,h,p){if(o==null){if(p!=null){if(h!=null)throw Error(i(92));if(At(p)){if(1<p.length)throw Error(i(93));p=p[0]}h=p}h==null&&(h=""),o=h}h=qe(o),s.defaultValue=h,p=s.textContent,p===h&&p!==""&&p!==null&&(s.value=p),In(s)}function cn(s,o){if(o){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=o;return}}s.textContent=o}var zs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yr(s,o,h){var p=o.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?p?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":p?s.setProperty(o,h):typeof h!="number"||h===0||zs.has(o)?o==="float"?s.cssFloat=h:s[o]=(""+h).trim():s[o]=h+"px"}function mc(s,o,h){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,h!=null){for(var p in h)!h.hasOwnProperty(p)||o!=null&&o.hasOwnProperty(p)||(p.indexOf("--")===0?s.setProperty(p,""):p==="float"?s.cssFloat="":s[p]="");for(var v in o)p=o[v],o.hasOwnProperty(v)&&h[v]!==p&&Yr(s,v,p)}else for(var C in o)o.hasOwnProperty(C)&&Yr(s,C,o[C])}function nm(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $T=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tI=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ih(s){return tI.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Kr(){}var im=null;function rm(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Wo=null,jo=null;function lb(s){var o=Qs(s);if(o&&(s=o.stateNode)){var h=s[jn]||null;t:switch(s=o.stateNode,o.type){case"input":if(xi(s,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),o=h.name,h.type==="radio"&&o!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+hn(""+o)+'"][type="radio"]'),o=0;o<h.length;o++){var p=h[o];if(p!==s&&p.form===s.form){var v=p[jn]||null;if(!v)throw Error(i(90));xi(p,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<h.length;o++)p=h[o],p.form===s.form&&he(p)}break t;case"textarea":Rn(s,h.value,h.defaultValue);break t;case"select":o=h.value,o!=null&&ze(s,!!h.multiple,o,!1)}}}var sm=!1;function cb(s,o,h){if(sm)return s(o,h);sm=!0;try{var p=s(o);return p}finally{if(sm=!1,(Wo!==null||jo!==null)&&(gd(),Wo&&(o=Wo,s=jo,jo=Wo=null,lb(o),s)))for(o=0;o<s.length;o++)lb(s[o])}}function gc(s,o){var h=s.stateNode;if(h===null)return null;var p=h[jn]||null;if(p===null)return null;h=p[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break t;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(i(231,o,typeof h));return h}var Jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),am=!1;if(Jr)try{var vc={};Object.defineProperty(vc,"passive",{get:function(){am=!0}}),window.addEventListener("test",vc,vc),window.removeEventListener("test",vc,vc)}catch{am=!1}var Gs=null,om=null,Rh=null;function ub(){if(Rh)return Rh;var s,o=om,h=o.length,p,v="value"in Gs?Gs.value:Gs.textContent,C=v.length;for(s=0;s<h&&o[s]===v[s];s++);var I=h-s;for(p=1;p<=I&&o[h-p]===v[C-p];p++);return Rh=v.slice(s,1<p?1-p:void 0)}function Lh(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Dh(){return!0}function hb(){return!1}function Ci(s){function o(h,p,v,C,I){this._reactName=h,this._targetInst=v,this.type=p,this.nativeEvent=C,this.target=I,this.currentTarget=null;for(var k in s)s.hasOwnProperty(k)&&(h=s[k],this[k]=h?h(C):C[k]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Dh:hb,this.isPropagationStopped=hb,this}return A(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Dh)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Dh)},persist:function(){},isPersistent:Dh}),o}var Pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uh=Ci(Pa),yc=A({},Pa,{view:0,detail:0}),eI=Ci(yc),lm,cm,Ec,Oh=A({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hm,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ec&&(Ec&&s.type==="mousemove"?(lm=s.screenX-Ec.screenX,cm=s.screenY-Ec.screenY):cm=lm=0,Ec=s),lm)},movementY:function(s){return"movementY"in s?s.movementY:cm}}),db=Ci(Oh),nI=A({},Oh,{dataTransfer:0}),iI=Ci(nI),rI=A({},yc,{relatedTarget:0}),um=Ci(rI),sI=A({},Pa,{animationName:0,elapsedTime:0,pseudoElement:0}),aI=Ci(sI),oI=A({},Pa,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),lI=Ci(oI),cI=A({},Pa,{data:0}),fb=Ci(cI),uI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fI(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=dI[s])?!!o[s]:!1}function hm(){return fI}var pI=A({},yc,{key:function(s){if(s.key){var o=uI[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Lh(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?hI[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hm,charCode:function(s){return s.type==="keypress"?Lh(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Lh(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),AI=Ci(pI),mI=A({},Oh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pb=Ci(mI),gI=A({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hm}),vI=Ci(gI),yI=A({},Pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),EI=Ci(yI),bI=A({},Oh,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),xI=Ci(bI),CI=A({},Pa,{newState:0,oldState:0}),_I=Ci(CI),wI=[9,13,27,32],dm=Jr&&"CompositionEvent"in window,bc=null;Jr&&"documentMode"in document&&(bc=document.documentMode);var MI=Jr&&"TextEvent"in window&&!bc,Ab=Jr&&(!dm||bc&&8<bc&&11>=bc),mb=" ",gb=!1;function vb(s,o){switch(s){case"keyup":return wI.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yb(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Xo=!1;function SI(s,o){switch(s){case"compositionend":return yb(o);case"keypress":return o.which!==32?null:(gb=!0,mb);case"textInput":return s=o.data,s===mb&&gb?null:s;default:return null}}function BI(s,o){if(Xo)return s==="compositionend"||!dm&&vb(s,o)?(s=ub(),Rh=om=Gs=null,Xo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ab&&o.locale!=="ko"?null:o.data;default:return null}}var TI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eb(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!TI[s.type]:o==="textarea"}function bb(s,o,h,p){Wo?jo?jo.push(p):jo=[p]:Wo=p,o=_d(o,"onChange"),0<o.length&&(h=new Uh("onChange","change",null,h,p),s.push({event:h,listeners:o}))}var xc=null,Cc=null;function II(s){i_(s,0)}function Nh(s){var o=Q(s);if(he(o))return s}function xb(s,o){if(s==="change")return o}var Cb=!1;if(Jr){var fm;if(Jr){var pm="oninput"in document;if(!pm){var _b=document.createElement("div");_b.setAttribute("oninput","return;"),pm=typeof _b.oninput=="function"}fm=pm}else fm=!1;Cb=fm&&(!document.documentMode||9<document.documentMode)}function wb(){xc&&(xc.detachEvent("onpropertychange",Mb),Cc=xc=null)}function Mb(s){if(s.propertyName==="value"&&Nh(Cc)){var o=[];bb(o,Cc,s,rm(s)),cb(II,o)}}function RI(s,o,h){s==="focusin"?(wb(),xc=o,Cc=h,xc.attachEvent("onpropertychange",Mb)):s==="focusout"&&wb()}function LI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Nh(Cc)}function DI(s,o){if(s==="click")return Nh(o)}function UI(s,o){if(s==="input"||s==="change")return Nh(o)}function OI(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Pi=typeof Object.is=="function"?Object.is:OI;function _c(s,o){if(Pi(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var h=Object.keys(s),p=Object.keys(o);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var v=h[p];if(!T.call(o,v)||!Pi(s[v],o[v]))return!1}return!0}function Sb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Bb(s,o){var h=Sb(s);s=0;for(var p;h;){if(h.nodeType===3){if(p=s+h.textContent.length,s<=o&&p>=o)return{node:h,offset:o-s};s=p}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=Sb(h)}}function Tb(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Tb(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Ib(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Rr(s.document);o instanceof s.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)s=o.contentWindow;else break;o=Rr(s.document)}return o}function Am(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var NI=Jr&&"documentMode"in document&&11>=document.documentMode,Yo=null,mm=null,wc=null,gm=!1;function Rb(s,o,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;gm||Yo==null||Yo!==Rr(p)||(p=Yo,"selectionStart"in p&&Am(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),wc&&_c(wc,p)||(wc=p,p=_d(mm,"onSelect"),0<p.length&&(o=new Uh("onSelect","select",null,o,h),s.push({event:o,listeners:p}),o.target=Yo)))}function Fa(s,o){var h={};return h[s.toLowerCase()]=o.toLowerCase(),h["Webkit"+s]="webkit"+o,h["Moz"+s]="moz"+o,h}var Ko={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionrun:Fa("Transition","TransitionRun"),transitionstart:Fa("Transition","TransitionStart"),transitioncancel:Fa("Transition","TransitionCancel"),transitionend:Fa("Transition","TransitionEnd")},vm={},Lb={};Jr&&(Lb=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function ka(s){if(vm[s])return vm[s];if(!Ko[s])return s;var o=Ko[s],h;for(h in o)if(o.hasOwnProperty(h)&&h in Lb)return vm[s]=o[h];return s}var Db=ka("animationend"),Ub=ka("animationiteration"),Ob=ka("animationstart"),PI=ka("transitionrun"),FI=ka("transitionstart"),kI=ka("transitioncancel"),Nb=ka("transitionend"),Pb=new Map,ym="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ym.push("scrollEnd");function Ar(s,o){Pb.set(s,o),Nt(o,[s])}var Ph=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Ji=[],Jo=0,Em=0;function Fh(){for(var s=Jo,o=Em=Jo=0;o<s;){var h=Ji[o];Ji[o++]=null;var p=Ji[o];Ji[o++]=null;var v=Ji[o];Ji[o++]=null;var C=Ji[o];if(Ji[o++]=null,p!==null&&v!==null){var I=p.pending;I===null?v.next=v:(v.next=I.next,I.next=v),p.pending=v}C!==0&&Fb(h,v,C)}}function kh(s,o,h,p){Ji[Jo++]=s,Ji[Jo++]=o,Ji[Jo++]=h,Ji[Jo++]=p,Em|=p,s.lanes|=p,s=s.alternate,s!==null&&(s.lanes|=p)}function bm(s,o,h,p){return kh(s,o,h,p),Qh(s)}function Qa(s,o){return kh(s,null,null,o),Qh(s)}function Fb(s,o,h){s.lanes|=h;var p=s.alternate;p!==null&&(p.lanes|=h);for(var v=!1,C=s.return;C!==null;)C.childLanes|=h,p=C.alternate,p!==null&&(p.childLanes|=h),C.tag===22&&(s=C.stateNode,s===null||s._visibility&1||(v=!0)),s=C,C=C.return;return s.tag===3?(C=s.stateNode,v&&o!==null&&(v=31-Qt(h),s=C.hiddenUpdates,p=s[v],p===null?s[v]=[o]:p.push(o),o.lane=h|536870912),C):null}function Qh(s){if(50<jc)throw jc=0,Ig=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Zo={};function QI(s,o,h,p){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fi(s,o,h,p){return new QI(s,o,h,p)}function xm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Zr(s,o){var h=s.alternate;return h===null?(h=Fi(s.tag,o,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=o,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&65011712,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,o=s.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h.refCleanup=s.refCleanup,h}function kb(s,o){s.flags&=65011714;var h=s.alternate;return h===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=h.childLanes,s.lanes=h.lanes,s.child=h.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=h.memoizedProps,s.memoizedState=h.memoizedState,s.updateQueue=h.updateQueue,s.type=h.type,o=h.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function zh(s,o,h,p,v,C){var I=0;if(p=s,typeof s=="function")xm(s)&&(I=1);else if(typeof s=="string")I=qR(s,h,Et.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case D:return s=Fi(31,h,o,v),s.elementType=D,s.lanes=C,s;case x:return za(h.children,v,C,o);case E:I=8,v|=24;break;case y:return s=Fi(12,h,o,v|2),s.elementType=y,s.lanes=C,s;case R:return s=Fi(13,h,o,v),s.elementType=R,s.lanes=C,s;case U:return s=Fi(19,h,o,v),s.elementType=U,s.lanes=C,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case w:I=10;break t;case _:I=9;break t;case S:I=11;break t;case L:I=14;break t;case F:I=16,p=null;break t}I=29,h=Error(i(130,s===null?"null":typeof s,"")),p=null}return o=Fi(I,h,o,v),o.elementType=s,o.type=p,o.lanes=C,o}function za(s,o,h,p){return s=Fi(7,s,p,o),s.lanes=h,s}function Cm(s,o,h){return s=Fi(6,s,null,o),s.lanes=h,s}function Qb(s){var o=Fi(18,null,null,0);return o.stateNode=s,o}function _m(s,o,h){return o=Fi(4,s.children!==null?s.children:[],s.key,o),o.lanes=h,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var zb=new WeakMap;function Zi(s,o){if(typeof s=="object"&&s!==null){var h=zb.get(s);return h!==void 0?h:(o={value:s,source:o,stack:B(o)},zb.set(s,o),o)}return{value:s,source:o,stack:B(o)}}var $o=[],tl=0,Gh=null,Mc=0,$i=[],tr=0,Hs=null,Ur=1,Or="";function $r(s,o){$o[tl++]=Mc,$o[tl++]=Gh,Gh=s,Mc=o}function Gb(s,o,h){$i[tr++]=Ur,$i[tr++]=Or,$i[tr++]=Hs,Hs=s;var p=Ur;s=Or;var v=32-Qt(p)-1;p&=~(1<<v),h+=1;var C=32-Qt(o)+v;if(30<C){var I=v-v%5;C=(p&(1<<I)-1).toString(32),p>>=I,v-=I,Ur=1<<32-Qt(o)+v|h<<v|p,Or=C+s}else Ur=1<<C|h<<v|p,Or=s}function wm(s){s.return!==null&&($r(s,1),Gb(s,1,0))}function Mm(s){for(;s===Gh;)Gh=$o[--tl],$o[tl]=null,Mc=$o[--tl],$o[tl]=null;for(;s===Hs;)Hs=$i[--tr],$i[tr]=null,Or=$i[--tr],$i[tr]=null,Ur=$i[--tr],$i[tr]=null}function Hb(s,o){$i[tr++]=Ur,$i[tr++]=Or,$i[tr++]=Hs,Ur=o.id,Or=o.overflow,Hs=s}var Xn=null,dn=null,Ge=!1,Vs=null,er=!1,Sm=Error(i(519));function qs(s){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sc(Zi(o,s)),Sm}function Vb(s){var o=s.stateNode,h=s.type,p=s.memoizedProps;switch(o[yn]=s,o[jn]=p,h){case"dialog":Ne("cancel",o),Ne("close",o);break;case"iframe":case"object":case"embed":Ne("load",o);break;case"video":case"audio":for(h=0;h<Yc.length;h++)Ne(Yc[h],o);break;case"source":Ne("error",o);break;case"img":case"image":case"link":Ne("error",o),Ne("load",o);break;case"details":Ne("toggle",o);break;case"input":Ne("invalid",o),Lr(o,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":Ne("invalid",o);break;case"textarea":Ne("invalid",o),pr(o,p.value,p.defaultValue,p.children)}h=p.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||o.textContent===""+h||p.suppressHydrationWarning===!0||o_(o.textContent,h)?(p.popover!=null&&(Ne("beforetoggle",o),Ne("toggle",o)),p.onScroll!=null&&Ne("scroll",o),p.onScrollEnd!=null&&Ne("scrollend",o),p.onClick!=null&&(o.onclick=Kr),o=!0):o=!1,o||qs(s,!0)}function qb(s){for(Xn=s.return;Xn;)switch(Xn.tag){case 5:case 31:case 13:er=!1;return;case 27:case 3:er=!0;return;default:Xn=Xn.return}}function el(s){if(s!==Xn)return!1;if(!Ge)return qb(s),Ge=!0,!1;var o=s.tag,h;if((h=o!==3&&o!==27)&&((h=o===5)&&(h=s.type,h=!(h!=="form"&&h!=="button")||qg(s.type,s.memoizedProps)),h=!h),h&&dn&&qs(s),qb(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));dn=m_(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));dn=m_(s)}else o===27?(o=dn,sa(s.type)?(s=Kg,Kg=null,dn=s):dn=o):dn=Xn?ir(s.stateNode.nextSibling):null;return!0}function Ga(){dn=Xn=null,Ge=!1}function Bm(){var s=Vs;return s!==null&&(Si===null?Si=s:Si.push.apply(Si,s),Vs=null),s}function Sc(s){Vs===null?Vs=[s]:Vs.push(s)}var Tm=V(null),Ha=null,ts=null;function Ws(s,o,h){yt(Tm,o._currentValue),o._currentValue=h}function es(s){s._currentValue=Tm.current,rt(Tm)}function Im(s,o,h){for(;s!==null;){var p=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),s===h)break;s=s.return}}function Rm(s,o,h,p){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var C=v.dependencies;if(C!==null){var I=v.child;C=C.firstContext;t:for(;C!==null;){var k=C;C=v;for(var K=0;K<o.length;K++)if(k.context===o[K]){C.lanes|=h,k=C.alternate,k!==null&&(k.lanes|=h),Im(C.return,h,s),p||(I=null);break t}C=k.next}}else if(v.tag===18){if(I=v.return,I===null)throw Error(i(341));I.lanes|=h,C=I.alternate,C!==null&&(C.lanes|=h),Im(I,h,s),I=null}else I=v.child;if(I!==null)I.return=v;else for(I=v;I!==null;){if(I===s){I=null;break}if(v=I.sibling,v!==null){v.return=I.return,I=v;break}I=I.return}v=I}}function nl(s,o,h,p){s=null;for(var v=o,C=!1;v!==null;){if(!C){if((v.flags&524288)!==0)C=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var I=v.alternate;if(I===null)throw Error(i(387));if(I=I.memoizedProps,I!==null){var k=v.type;Pi(v.pendingProps.value,I.value)||(s!==null?s.push(k):s=[k])}}else if(v===Lt.current){if(I=v.alternate,I===null)throw Error(i(387));I.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(tu):s=[tu])}v=v.return}s!==null&&Rm(o,s,h,p),o.flags|=262144}function Hh(s){for(s=s.firstContext;s!==null;){if(!Pi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Va(s){Ha=s,ts=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Yn(s){return Wb(Ha,s)}function Vh(s,o){return Ha===null&&Va(s),Wb(s,o)}function Wb(s,o){var h=o._currentValue;if(o={context:o,memoizedValue:h,next:null},ts===null){if(s===null)throw Error(i(308));ts=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else ts=ts.next=o;return h}var zI=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(h,p){s.push(p)}};this.abort=function(){o.aborted=!0,s.forEach(function(h){return h()})}},GI=n.unstable_scheduleCallback,HI=n.unstable_NormalPriority,Ln={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lm(){return{controller:new zI,data:new Map,refCount:0}}function Bc(s){s.refCount--,s.refCount===0&&GI(HI,function(){s.controller.abort()})}var Tc=null,Dm=0,il=0,rl=null;function VI(s,o){if(Tc===null){var h=Tc=[];Dm=0,il=Ng(),rl={status:"pending",value:void 0,then:function(p){h.push(p)}}}return Dm++,o.then(jb,jb),o}function jb(){if(--Dm===0&&Tc!==null){rl!==null&&(rl.status="fulfilled");var s=Tc;Tc=null,il=0,rl=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function qI(s,o){var h=[],p={status:"pending",value:null,reason:null,then:function(v){h.push(v)}};return s.then(function(){p.status="fulfilled",p.value=o;for(var v=0;v<h.length;v++)(0,h[v])(o)},function(v){for(p.status="rejected",p.reason=v,v=0;v<h.length;v++)(0,h[v])(void 0)}),p}var Xb=G.S;G.S=function(s,o){RC=gt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&VI(s,o),Xb!==null&&Xb(s,o)};var qa=V(null);function Um(){var s=qa.current;return s!==null?s:un.pooledCache}function qh(s,o){o===null?yt(qa,qa.current):yt(qa,o.pool)}function Yb(){var s=Um();return s===null?null:{parent:Ln._currentValue,pool:s}}var sl=Error(i(460)),Om=Error(i(474)),Wh=Error(i(542)),jh={then:function(){}};function Kb(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Jb(s,o,h){switch(h=s[h],h===void 0?s.push(o):h!==o&&(o.then(Kr,Kr),o=h),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,$b(s),s;default:if(typeof o.status=="string")o.then(Kr,Kr);else{if(s=un,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(p){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=p}},function(p){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=p}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,$b(s),s}throw ja=o,sl}}function Wa(s){try{var o=s._init;return o(s._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(ja=h,sl):h}}var ja=null;function Zb(){if(ja===null)throw Error(i(459));var s=ja;return ja=null,s}function $b(s){if(s===sl||s===Wh)throw Error(i(483))}var al=null,Ic=0;function Xh(s){var o=Ic;return Ic+=1,al===null&&(al=[]),Jb(al,s,o)}function Rc(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Yh(s,o){throw o.$$typeof===m?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function tx(s){function o(at,et){if(s){var ht=at.deletions;ht===null?(at.deletions=[et],at.flags|=16):ht.push(et)}}function h(at,et){if(!s)return null;for(;et!==null;)o(at,et),et=et.sibling;return null}function p(at){for(var et=new Map;at!==null;)at.key!==null?et.set(at.key,at):et.set(at.index,at),at=at.sibling;return et}function v(at,et){return at=Zr(at,et),at.index=0,at.sibling=null,at}function C(at,et,ht){return at.index=ht,s?(ht=at.alternate,ht!==null?(ht=ht.index,ht<et?(at.flags|=67108866,et):ht):(at.flags|=67108866,et)):(at.flags|=1048576,et)}function I(at){return s&&at.alternate===null&&(at.flags|=67108866),at}function k(at,et,ht,St){return et===null||et.tag!==6?(et=Cm(ht,at.mode,St),et.return=at,et):(et=v(et,ht),et.return=at,et)}function K(at,et,ht,St){var fe=ht.type;return fe===x?_t(at,et,ht.props.children,St,ht.key):et!==null&&(et.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===F&&Wa(fe)===et.type)?(et=v(et,ht.props),Rc(et,ht),et.return=at,et):(et=zh(ht.type,ht.key,ht.props,null,at.mode,St),Rc(et,ht),et.return=at,et)}function dt(at,et,ht,St){return et===null||et.tag!==4||et.stateNode.containerInfo!==ht.containerInfo||et.stateNode.implementation!==ht.implementation?(et=_m(ht,at.mode,St),et.return=at,et):(et=v(et,ht.children||[]),et.return=at,et)}function _t(at,et,ht,St,fe){return et===null||et.tag!==7?(et=za(ht,at.mode,St,fe),et.return=at,et):(et=v(et,ht),et.return=at,et)}function Bt(at,et,ht){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return et=Cm(""+et,at.mode,ht),et.return=at,et;if(typeof et=="object"&&et!==null){switch(et.$$typeof){case g:return ht=zh(et.type,et.key,et.props,null,at.mode,ht),Rc(ht,et),ht.return=at,ht;case b:return et=_m(et,at.mode,ht),et.return=at,et;case F:return et=Wa(et),Bt(at,et,ht)}if(At(et)||J(et))return et=za(et,at.mode,ht,null),et.return=at,et;if(typeof et.then=="function")return Bt(at,Xh(et),ht);if(et.$$typeof===w)return Bt(at,Vh(at,et),ht);Yh(at,et)}return null}function pt(at,et,ht,St){var fe=et!==null?et.key:null;if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return fe!==null?null:k(at,et,""+ht,St);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case g:return ht.key===fe?K(at,et,ht,St):null;case b:return ht.key===fe?dt(at,et,ht,St):null;case F:return ht=Wa(ht),pt(at,et,ht,St)}if(At(ht)||J(ht))return fe!==null?null:_t(at,et,ht,St,null);if(typeof ht.then=="function")return pt(at,et,Xh(ht),St);if(ht.$$typeof===w)return pt(at,et,Vh(at,ht),St);Yh(at,ht)}return null}function vt(at,et,ht,St,fe){if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return at=at.get(ht)||null,k(et,at,""+St,fe);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case g:return at=at.get(St.key===null?ht:St.key)||null,K(et,at,St,fe);case b:return at=at.get(St.key===null?ht:St.key)||null,dt(et,at,St,fe);case F:return St=Wa(St),vt(at,et,ht,St,fe)}if(At(St)||J(St))return at=at.get(ht)||null,_t(et,at,St,fe,null);if(typeof St.then=="function")return vt(at,et,ht,Xh(St),fe);if(St.$$typeof===w)return vt(at,et,ht,Vh(et,St),fe);Yh(et,St)}return null}function re(at,et,ht,St){for(var fe=null,Ke=null,ae=et,Be=et=0,ke=null;ae!==null&&Be<ht.length;Be++){ae.index>Be?(ke=ae,ae=null):ke=ae.sibling;var Je=pt(at,ae,ht[Be],St);if(Je===null){ae===null&&(ae=ke);break}s&&ae&&Je.alternate===null&&o(at,ae),et=C(Je,et,Be),Ke===null?fe=Je:Ke.sibling=Je,Ke=Je,ae=ke}if(Be===ht.length)return h(at,ae),Ge&&$r(at,Be),fe;if(ae===null){for(;Be<ht.length;Be++)ae=Bt(at,ht[Be],St),ae!==null&&(et=C(ae,et,Be),Ke===null?fe=ae:Ke.sibling=ae,Ke=ae);return Ge&&$r(at,Be),fe}for(ae=p(ae);Be<ht.length;Be++)ke=vt(ae,at,Be,ht[Be],St),ke!==null&&(s&&ke.alternate!==null&&ae.delete(ke.key===null?Be:ke.key),et=C(ke,et,Be),Ke===null?fe=ke:Ke.sibling=ke,Ke=ke);return s&&ae.forEach(function(ua){return o(at,ua)}),Ge&&$r(at,Be),fe}function ge(at,et,ht,St){if(ht==null)throw Error(i(151));for(var fe=null,Ke=null,ae=et,Be=et=0,ke=null,Je=ht.next();ae!==null&&!Je.done;Be++,Je=ht.next()){ae.index>Be?(ke=ae,ae=null):ke=ae.sibling;var ua=pt(at,ae,Je.value,St);if(ua===null){ae===null&&(ae=ke);break}s&&ae&&ua.alternate===null&&o(at,ae),et=C(ua,et,Be),Ke===null?fe=ua:Ke.sibling=ua,Ke=ua,ae=ke}if(Je.done)return h(at,ae),Ge&&$r(at,Be),fe;if(ae===null){for(;!Je.done;Be++,Je=ht.next())Je=Bt(at,Je.value,St),Je!==null&&(et=C(Je,et,Be),Ke===null?fe=Je:Ke.sibling=Je,Ke=Je);return Ge&&$r(at,Be),fe}for(ae=p(ae);!Je.done;Be++,Je=ht.next())Je=vt(ae,at,Be,Je.value,St),Je!==null&&(s&&Je.alternate!==null&&ae.delete(Je.key===null?Be:Je.key),et=C(Je,et,Be),Ke===null?fe=Je:Ke.sibling=Je,Ke=Je);return s&&ae.forEach(function(nL){return o(at,nL)}),Ge&&$r(at,Be),fe}function on(at,et,ht,St){if(typeof ht=="object"&&ht!==null&&ht.type===x&&ht.key===null&&(ht=ht.props.children),typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case g:t:{for(var fe=ht.key;et!==null;){if(et.key===fe){if(fe=ht.type,fe===x){if(et.tag===7){h(at,et.sibling),St=v(et,ht.props.children),St.return=at,at=St;break t}}else if(et.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===F&&Wa(fe)===et.type){h(at,et.sibling),St=v(et,ht.props),Rc(St,ht),St.return=at,at=St;break t}h(at,et);break}else o(at,et);et=et.sibling}ht.type===x?(St=za(ht.props.children,at.mode,St,ht.key),St.return=at,at=St):(St=zh(ht.type,ht.key,ht.props,null,at.mode,St),Rc(St,ht),St.return=at,at=St)}return I(at);case b:t:{for(fe=ht.key;et!==null;){if(et.key===fe)if(et.tag===4&&et.stateNode.containerInfo===ht.containerInfo&&et.stateNode.implementation===ht.implementation){h(at,et.sibling),St=v(et,ht.children||[]),St.return=at,at=St;break t}else{h(at,et);break}else o(at,et);et=et.sibling}St=_m(ht,at.mode,St),St.return=at,at=St}return I(at);case F:return ht=Wa(ht),on(at,et,ht,St)}if(At(ht))return re(at,et,ht,St);if(J(ht)){if(fe=J(ht),typeof fe!="function")throw Error(i(150));return ht=fe.call(ht),ge(at,et,ht,St)}if(typeof ht.then=="function")return on(at,et,Xh(ht),St);if(ht.$$typeof===w)return on(at,et,Vh(at,ht),St);Yh(at,ht)}return typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint"?(ht=""+ht,et!==null&&et.tag===6?(h(at,et.sibling),St=v(et,ht),St.return=at,at=St):(h(at,et),St=Cm(ht,at.mode,St),St.return=at,at=St),I(at)):h(at,et)}return function(at,et,ht,St){try{Ic=0;var fe=on(at,et,ht,St);return al=null,fe}catch(ae){if(ae===sl||ae===Wh)throw ae;var Ke=Fi(29,ae,null,at.mode);return Ke.lanes=St,Ke.return=at,Ke}finally{}}}var Xa=tx(!0),ex=tx(!1),js=!1;function Nm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pm(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Xs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ys(s,o,h){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,($e&2)!==0){var v=p.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),p.pending=o,o=Qh(s),Fb(s,null,h),o}return kh(s,p,o,h),Qh(s)}function Lc(s,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194048)!==0)){var p=o.lanes;p&=s.pendingLanes,h|=p,o.lanes=h,Sh(s,h)}}function Fm(s,o){var h=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var v=null,C=null;if(h=h.firstBaseUpdate,h!==null){do{var I={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};C===null?v=C=I:C=C.next=I,h=h.next}while(h!==null);C===null?v=C=o:C=C.next=o}else v=C=o;h={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:C,shared:p.shared,callbacks:p.callbacks},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=o:s.next=o,h.lastBaseUpdate=o}var km=!1;function Dc(){if(km){var s=rl;if(s!==null)throw s}}function Uc(s,o,h,p){km=!1;var v=s.updateQueue;js=!1;var C=v.firstBaseUpdate,I=v.lastBaseUpdate,k=v.shared.pending;if(k!==null){v.shared.pending=null;var K=k,dt=K.next;K.next=null,I===null?C=dt:I.next=dt,I=K;var _t=s.alternate;_t!==null&&(_t=_t.updateQueue,k=_t.lastBaseUpdate,k!==I&&(k===null?_t.firstBaseUpdate=dt:k.next=dt,_t.lastBaseUpdate=K))}if(C!==null){var Bt=v.baseState;I=0,_t=dt=K=null,k=C;do{var pt=k.lane&-536870913,vt=pt!==k.lane;if(vt?(Fe&pt)===pt:(p&pt)===pt){pt!==0&&pt===il&&(km=!0),_t!==null&&(_t=_t.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});t:{var re=s,ge=k;pt=o;var on=h;switch(ge.tag){case 1:if(re=ge.payload,typeof re=="function"){Bt=re.call(on,Bt,pt);break t}Bt=re;break t;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ge.payload,pt=typeof re=="function"?re.call(on,Bt,pt):re,pt==null)break t;Bt=A({},Bt,pt);break t;case 2:js=!0}}pt=k.callback,pt!==null&&(s.flags|=64,vt&&(s.flags|=8192),vt=v.callbacks,vt===null?v.callbacks=[pt]:vt.push(pt))}else vt={lane:pt,tag:k.tag,payload:k.payload,callback:k.callback,next:null},_t===null?(dt=_t=vt,K=Bt):_t=_t.next=vt,I|=pt;if(k=k.next,k===null){if(k=v.shared.pending,k===null)break;vt=k,k=vt.next,vt.next=null,v.lastBaseUpdate=vt,v.shared.pending=null}}while(!0);_t===null&&(K=Bt),v.baseState=K,v.firstBaseUpdate=dt,v.lastBaseUpdate=_t,C===null&&(v.shared.lanes=0),ta|=I,s.lanes=I,s.memoizedState=Bt}}function nx(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function ix(s,o){var h=s.callbacks;if(h!==null)for(s.callbacks=null,s=0;s<h.length;s++)nx(h[s],o)}var ol=V(null),Kh=V(0);function rx(s,o){s=us,yt(Kh,s),yt(ol,o),us=s|o.baseLanes}function Qm(){yt(Kh,us),yt(ol,ol.current)}function zm(){us=Kh.current,rt(ol),rt(Kh)}var ki=V(null),nr=null;function Ks(s){var o=s.alternate;yt(wn,wn.current&1),yt(ki,s),nr===null&&(o===null||ol.current!==null||o.memoizedState!==null)&&(nr=s)}function Gm(s){yt(wn,wn.current),yt(ki,s),nr===null&&(nr=s)}function sx(s){s.tag===22?(yt(wn,wn.current),yt(ki,s),nr===null&&(nr=s)):Js()}function Js(){yt(wn,wn.current),yt(ki,ki.current)}function Qi(s){rt(ki),nr===s&&(nr=null),rt(wn)}var wn=V(0);function Jh(s){for(var o=s;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Xg(h)||Yg(h)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ns=0,Me=null,sn=null,Dn=null,Zh=!1,ll=!1,Ya=!1,$h=0,Oc=0,cl=null,WI=0;function En(){throw Error(i(321))}function Hm(s,o){if(o===null)return!1;for(var h=0;h<o.length&&h<s.length;h++)if(!Pi(s[h],o[h]))return!1;return!0}function Vm(s,o,h,p,v,C){return ns=C,Me=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,G.H=s===null||s.memoizedState===null?Gx:sg,Ya=!1,C=h(p,v),Ya=!1,ll&&(C=ox(o,h,p,v)),ax(s),C}function ax(s){G.H=Fc;var o=sn!==null&&sn.next!==null;if(ns=0,Dn=sn=Me=null,Zh=!1,Oc=0,cl=null,o)throw Error(i(300));s===null||Un||(s=s.dependencies,s!==null&&Hh(s)&&(Un=!0))}function ox(s,o,h,p){Me=s;var v=0;do{if(ll&&(cl=null),Oc=0,ll=!1,25<=v)throw Error(i(301));if(v+=1,Dn=sn=null,s.updateQueue!=null){var C=s.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}G.H=Hx,C=o(h,p)}while(ll);return C}function jI(){var s=G.H,o=s.useState()[0];return o=typeof o.then=="function"?Nc(o):o,s=s.useState()[0],(sn!==null?sn.memoizedState:null)!==s&&(Me.flags|=1024),o}function qm(){var s=$h!==0;return $h=0,s}function Wm(s,o,h){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~h}function jm(s){if(Zh){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Zh=!1}ns=0,Dn=sn=Me=null,ll=!1,Oc=$h=0,cl=null}function ui(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?Me.memoizedState=Dn=s:Dn=Dn.next=s,Dn}function Mn(){if(sn===null){var s=Me.alternate;s=s!==null?s.memoizedState:null}else s=sn.next;var o=Dn===null?Me.memoizedState:Dn.next;if(o!==null)Dn=o,sn=s;else{if(s===null)throw Me.alternate===null?Error(i(467)):Error(i(310));sn=s,s={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},Dn===null?Me.memoizedState=Dn=s:Dn=Dn.next=s}return Dn}function td(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nc(s){var o=Oc;return Oc+=1,cl===null&&(cl=[]),s=Jb(cl,s,o),o=Me,(Dn===null?o.memoizedState:Dn.next)===null&&(o=o.alternate,G.H=o===null||o.memoizedState===null?Gx:sg),s}function ed(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Nc(s);if(s.$$typeof===w)return Yn(s)}throw Error(i(438,String(s)))}function Xm(s){var o=null,h=Me.updateQueue;if(h!==null&&(o=h.memoCache),o==null){var p=Me.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(o={data:p.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),h===null&&(h=td(),Me.updateQueue=h),h.memoCache=o,h=o.data[o.index],h===void 0)for(h=o.data[o.index]=Array(s),p=0;p<s;p++)h[p]=O;return o.index++,h}function is(s,o){return typeof o=="function"?o(s):o}function nd(s){var o=Mn();return Ym(o,sn,s)}function Ym(s,o,h){var p=s.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=h;var v=s.baseQueue,C=p.pending;if(C!==null){if(v!==null){var I=v.next;v.next=C.next,C.next=I}o.baseQueue=v=C,p.pending=null}if(C=s.baseState,v===null)s.memoizedState=C;else{o=v.next;var k=I=null,K=null,dt=o,_t=!1;do{var Bt=dt.lane&-536870913;if(Bt!==dt.lane?(Fe&Bt)===Bt:(ns&Bt)===Bt){var pt=dt.revertLane;if(pt===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),Bt===il&&(_t=!0);else if((ns&pt)===pt){dt=dt.next,pt===il&&(_t=!0);continue}else Bt={lane:0,revertLane:dt.revertLane,gesture:null,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},K===null?(k=K=Bt,I=C):K=K.next=Bt,Me.lanes|=pt,ta|=pt;Bt=dt.action,Ya&&h(C,Bt),C=dt.hasEagerState?dt.eagerState:h(C,Bt)}else pt={lane:Bt,revertLane:dt.revertLane,gesture:dt.gesture,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},K===null?(k=K=pt,I=C):K=K.next=pt,Me.lanes|=Bt,ta|=Bt;dt=dt.next}while(dt!==null&&dt!==o);if(K===null?I=C:K.next=k,!Pi(C,s.memoizedState)&&(Un=!0,_t&&(h=rl,h!==null)))throw h;s.memoizedState=C,s.baseState=I,s.baseQueue=K,p.lastRenderedState=C}return v===null&&(p.lanes=0),[s.memoizedState,p.dispatch]}function Km(s){var o=Mn(),h=o.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=s;var p=h.dispatch,v=h.pending,C=o.memoizedState;if(v!==null){h.pending=null;var I=v=v.next;do C=s(C,I.action),I=I.next;while(I!==v);Pi(C,o.memoizedState)||(Un=!0),o.memoizedState=C,o.baseQueue===null&&(o.baseState=C),h.lastRenderedState=C}return[C,p]}function lx(s,o,h){var p=Me,v=Mn(),C=Ge;if(C){if(h===void 0)throw Error(i(407));h=h()}else h=o();var I=!Pi((sn||v).memoizedState,h);if(I&&(v.memoizedState=h,Un=!0),v=v.queue,$m(hx.bind(null,p,v,s),[s]),v.getSnapshot!==o||I||Dn!==null&&Dn.memoizedState.tag&1){if(p.flags|=2048,ul(9,{destroy:void 0},ux.bind(null,p,v,h,o),null),un===null)throw Error(i(349));C||(ns&127)!==0||cx(p,o,h)}return h}function cx(s,o,h){s.flags|=16384,s={getSnapshot:o,value:h},o=Me.updateQueue,o===null?(o=td(),Me.updateQueue=o,o.stores=[s]):(h=o.stores,h===null?o.stores=[s]:h.push(s))}function ux(s,o,h,p){o.value=h,o.getSnapshot=p,dx(o)&&fx(s)}function hx(s,o,h){return h(function(){dx(o)&&fx(s)})}function dx(s){var o=s.getSnapshot;s=s.value;try{var h=o();return!Pi(s,h)}catch{return!0}}function fx(s){var o=Qa(s,2);o!==null&&Bi(o,s,2)}function Jm(s){var o=ui();if(typeof s=="function"){var h=s;if(s=h(),Ya){pe(!0);try{h()}finally{pe(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:s},o}function px(s,o,h,p){return s.baseState=h,Ym(s,sn,typeof p=="function"?p:is)}function XI(s,o,h,p,v){if(sd(s))throw Error(i(485));if(s=o.action,s!==null){var C={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){C.listeners.push(I)}};G.T!==null?h(!0):C.isTransition=!1,p(C),h=o.pending,h===null?(C.next=o.pending=C,Ax(o,C)):(C.next=h.next,o.pending=h.next=C)}}function Ax(s,o){var h=o.action,p=o.payload,v=s.state;if(o.isTransition){var C=G.T,I={};G.T=I;try{var k=h(v,p),K=G.S;K!==null&&K(I,k),mx(s,o,k)}catch(dt){Zm(s,o,dt)}finally{C!==null&&I.types!==null&&(C.types=I.types),G.T=C}}else try{C=h(v,p),mx(s,o,C)}catch(dt){Zm(s,o,dt)}}function mx(s,o,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(p){gx(s,o,p)},function(p){return Zm(s,o,p)}):gx(s,o,h)}function gx(s,o,h){o.status="fulfilled",o.value=h,vx(o),s.state=h,o=s.pending,o!==null&&(h=o.next,h===o?s.pending=null:(h=h.next,o.next=h,Ax(s,h)))}function Zm(s,o,h){var p=s.pending;if(s.pending=null,p!==null){p=p.next;do o.status="rejected",o.reason=h,vx(o),o=o.next;while(o!==p)}s.action=null}function vx(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function yx(s,o){return o}function Ex(s,o){if(Ge){var h=un.formState;if(h!==null){t:{var p=Me;if(Ge){if(dn){e:{for(var v=dn,C=er;v.nodeType!==8;){if(!C){v=null;break e}if(v=ir(v.nextSibling),v===null){v=null;break e}}C=v.data,v=C==="F!"||C==="F"?v:null}if(v){dn=ir(v.nextSibling),p=v.data==="F!";break t}}qs(p)}p=!1}p&&(o=h[0])}}return h=ui(),h.memoizedState=h.baseState=o,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yx,lastRenderedState:o},h.queue=p,h=kx.bind(null,Me,p),p.dispatch=h,p=Jm(!1),C=rg.bind(null,Me,!1,p.queue),p=ui(),v={state:o,dispatch:null,action:s,pending:null},p.queue=v,h=XI.bind(null,Me,v,C,h),v.dispatch=h,p.memoizedState=s,[o,h,!1]}function bx(s){var o=Mn();return xx(o,sn,s)}function xx(s,o,h){if(o=Ym(s,o,yx)[0],s=nd(is)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var p=Nc(o)}catch(I){throw I===sl?Wh:I}else p=o;o=Mn();var v=o.queue,C=v.dispatch;return h!==o.memoizedState&&(Me.flags|=2048,ul(9,{destroy:void 0},YI.bind(null,v,h),null)),[p,C,s]}function YI(s,o){s.action=o}function Cx(s){var o=Mn(),h=sn;if(h!==null)return xx(o,h,s);Mn(),o=o.memoizedState,h=Mn();var p=h.queue.dispatch;return h.memoizedState=s,[o,p,!1]}function ul(s,o,h,p){return s={tag:s,create:h,deps:p,inst:o,next:null},o=Me.updateQueue,o===null&&(o=td(),Me.updateQueue=o),h=o.lastEffect,h===null?o.lastEffect=s.next=s:(p=h.next,h.next=s,s.next=p,o.lastEffect=s),s}function _x(){return Mn().memoizedState}function id(s,o,h,p){var v=ui();Me.flags|=s,v.memoizedState=ul(1|o,{destroy:void 0},h,p===void 0?null:p)}function rd(s,o,h,p){var v=Mn();p=p===void 0?null:p;var C=v.memoizedState.inst;sn!==null&&p!==null&&Hm(p,sn.memoizedState.deps)?v.memoizedState=ul(o,C,h,p):(Me.flags|=s,v.memoizedState=ul(1|o,C,h,p))}function wx(s,o){id(8390656,8,s,o)}function $m(s,o){rd(2048,8,s,o)}function KI(s){Me.flags|=4;var o=Me.updateQueue;if(o===null)o=td(),Me.updateQueue=o,o.events=[s];else{var h=o.events;h===null?o.events=[s]:h.push(s)}}function Mx(s){var o=Mn().memoizedState;return KI({ref:o,nextImpl:s}),function(){if(($e&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function Sx(s,o){return rd(4,2,s,o)}function Bx(s,o){return rd(4,4,s,o)}function Tx(s,o){if(typeof o=="function"){s=s();var h=o(s);return function(){typeof h=="function"?h():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Ix(s,o,h){h=h!=null?h.concat([s]):null,rd(4,4,Tx.bind(null,o,s),h)}function tg(){}function Rx(s,o){var h=Mn();o=o===void 0?null:o;var p=h.memoizedState;return o!==null&&Hm(o,p[1])?p[0]:(h.memoizedState=[s,o],s)}function Lx(s,o){var h=Mn();o=o===void 0?null:o;var p=h.memoizedState;if(o!==null&&Hm(o,p[1]))return p[0];if(p=s(),Ya){pe(!0);try{s()}finally{pe(!1)}}return h.memoizedState=[p,o],p}function eg(s,o,h){return h===void 0||(ns&1073741824)!==0&&(Fe&261930)===0?s.memoizedState=o:(s.memoizedState=h,s=DC(),Me.lanes|=s,ta|=s,h)}function Dx(s,o,h,p){return Pi(h,o)?h:ol.current!==null?(s=eg(s,h,p),Pi(s,o)||(Un=!0),s):(ns&42)===0||(ns&1073741824)!==0&&(Fe&261930)===0?(Un=!0,s.memoizedState=h):(s=DC(),Me.lanes|=s,ta|=s,o)}function Ux(s,o,h,p,v){var C=X.p;X.p=C!==0&&8>C?C:8;var I=G.T,k={};G.T=k,rg(s,!1,o,h);try{var K=v(),dt=G.S;if(dt!==null&&dt(k,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var _t=qI(K,p);Pc(s,o,_t,Hi(s))}else Pc(s,o,p,Hi(s))}catch(Bt){Pc(s,o,{then:function(){},status:"rejected",reason:Bt},Hi())}finally{X.p=C,I!==null&&k.types!==null&&(I.types=k.types),G.T=I}}function JI(){}function ng(s,o,h,p){if(s.tag!==5)throw Error(i(476));var v=Ox(s).queue;Ux(s,v,o,tt,h===null?JI:function(){return Nx(s),h(p)})}function Ox(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:tt,baseState:tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:tt},next:null};var h={};return o.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:h},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function Nx(s){var o=Ox(s);o.next===null&&(o=s.alternate.memoizedState),Pc(s,o.next.queue,{},Hi())}function ig(){return Yn(tu)}function Px(){return Mn().memoizedState}function Fx(){return Mn().memoizedState}function ZI(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var h=Hi();s=Xs(h);var p=Ys(o,s,h);p!==null&&(Bi(p,o,h),Lc(p,o,h)),o={cache:Lm()},s.payload=o;return}o=o.return}}function $I(s,o,h){var p=Hi();h={lane:p,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},sd(s)?Qx(o,h):(h=bm(s,o,h,p),h!==null&&(Bi(h,s,p),zx(h,o,p)))}function kx(s,o,h){var p=Hi();Pc(s,o,h,p)}function Pc(s,o,h,p){var v={lane:p,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(sd(s))Qx(o,v);else{var C=s.alternate;if(s.lanes===0&&(C===null||C.lanes===0)&&(C=o.lastRenderedReducer,C!==null))try{var I=o.lastRenderedState,k=C(I,h);if(v.hasEagerState=!0,v.eagerState=k,Pi(k,I))return kh(s,o,v,0),un===null&&Fh(),!1}catch{}finally{}if(h=bm(s,o,v,p),h!==null)return Bi(h,s,p),zx(h,o,p),!0}return!1}function rg(s,o,h,p){if(p={lane:2,revertLane:Ng(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},sd(s)){if(o)throw Error(i(479))}else o=bm(s,h,p,2),o!==null&&Bi(o,s,2)}function sd(s){var o=s.alternate;return s===Me||o!==null&&o===Me}function Qx(s,o){ll=Zh=!0;var h=s.pending;h===null?o.next=o:(o.next=h.next,h.next=o),s.pending=o}function zx(s,o,h){if((h&4194048)!==0){var p=o.lanes;p&=s.pendingLanes,h|=p,o.lanes=h,Sh(s,h)}}var Fc={readContext:Yn,use:ed,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En};Fc.useEffectEvent=En;var Gx={readContext:Yn,use:ed,useCallback:function(s,o){return ui().memoizedState=[s,o===void 0?null:o],s},useContext:Yn,useEffect:wx,useImperativeHandle:function(s,o,h){h=h!=null?h.concat([s]):null,id(4194308,4,Tx.bind(null,o,s),h)},useLayoutEffect:function(s,o){return id(4194308,4,s,o)},useInsertionEffect:function(s,o){id(4,2,s,o)},useMemo:function(s,o){var h=ui();o=o===void 0?null:o;var p=s();if(Ya){pe(!0);try{s()}finally{pe(!1)}}return h.memoizedState=[p,o],p},useReducer:function(s,o,h){var p=ui();if(h!==void 0){var v=h(o);if(Ya){pe(!0);try{h(o)}finally{pe(!1)}}}else v=o;return p.memoizedState=p.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},p.queue=s,s=s.dispatch=$I.bind(null,Me,s),[p.memoizedState,s]},useRef:function(s){var o=ui();return s={current:s},o.memoizedState=s},useState:function(s){s=Jm(s);var o=s.queue,h=kx.bind(null,Me,o);return o.dispatch=h,[s.memoizedState,h]},useDebugValue:tg,useDeferredValue:function(s,o){var h=ui();return eg(h,s,o)},useTransition:function(){var s=Jm(!1);return s=Ux.bind(null,Me,s.queue,!0,!1),ui().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,h){var p=Me,v=ui();if(Ge){if(h===void 0)throw Error(i(407));h=h()}else{if(h=o(),un===null)throw Error(i(349));(Fe&127)!==0||cx(p,o,h)}v.memoizedState=h;var C={value:h,getSnapshot:o};return v.queue=C,wx(hx.bind(null,p,C,s),[s]),p.flags|=2048,ul(9,{destroy:void 0},ux.bind(null,p,C,h,o),null),h},useId:function(){var s=ui(),o=un.identifierPrefix;if(Ge){var h=Or,p=Ur;h=(p&~(1<<32-Qt(p)-1)).toString(32)+h,o="_"+o+"R_"+h,h=$h++,0<h&&(o+="H"+h.toString(32)),o+="_"}else h=WI++,o="_"+o+"r_"+h.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:ig,useFormState:Ex,useActionState:Ex,useOptimistic:function(s){var o=ui();o.memoizedState=o.baseState=s;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=h,o=rg.bind(null,Me,!0,h),h.dispatch=o,[s,o]},useMemoCache:Xm,useCacheRefresh:function(){return ui().memoizedState=ZI.bind(null,Me)},useEffectEvent:function(s){var o=ui(),h={impl:s};return o.memoizedState=h,function(){if(($e&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},sg={readContext:Yn,use:ed,useCallback:Rx,useContext:Yn,useEffect:$m,useImperativeHandle:Ix,useInsertionEffect:Sx,useLayoutEffect:Bx,useMemo:Lx,useReducer:nd,useRef:_x,useState:function(){return nd(is)},useDebugValue:tg,useDeferredValue:function(s,o){var h=Mn();return Dx(h,sn.memoizedState,s,o)},useTransition:function(){var s=nd(is)[0],o=Mn().memoizedState;return[typeof s=="boolean"?s:Nc(s),o]},useSyncExternalStore:lx,useId:Px,useHostTransitionStatus:ig,useFormState:bx,useActionState:bx,useOptimistic:function(s,o){var h=Mn();return px(h,sn,s,o)},useMemoCache:Xm,useCacheRefresh:Fx};sg.useEffectEvent=Mx;var Hx={readContext:Yn,use:ed,useCallback:Rx,useContext:Yn,useEffect:$m,useImperativeHandle:Ix,useInsertionEffect:Sx,useLayoutEffect:Bx,useMemo:Lx,useReducer:Km,useRef:_x,useState:function(){return Km(is)},useDebugValue:tg,useDeferredValue:function(s,o){var h=Mn();return sn===null?eg(h,s,o):Dx(h,sn.memoizedState,s,o)},useTransition:function(){var s=Km(is)[0],o=Mn().memoizedState;return[typeof s=="boolean"?s:Nc(s),o]},useSyncExternalStore:lx,useId:Px,useHostTransitionStatus:ig,useFormState:Cx,useActionState:Cx,useOptimistic:function(s,o){var h=Mn();return sn!==null?px(h,sn,s,o):(h.baseState=s,[s,h.queue.dispatch])},useMemoCache:Xm,useCacheRefresh:Fx};Hx.useEffectEvent=Mx;function ag(s,o,h,p){o=s.memoizedState,h=h(p,o),h=h==null?o:A({},o,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var og={enqueueSetState:function(s,o,h){s=s._reactInternals;var p=Hi(),v=Xs(p);v.payload=o,h!=null&&(v.callback=h),o=Ys(s,v,p),o!==null&&(Bi(o,s,p),Lc(o,s,p))},enqueueReplaceState:function(s,o,h){s=s._reactInternals;var p=Hi(),v=Xs(p);v.tag=1,v.payload=o,h!=null&&(v.callback=h),o=Ys(s,v,p),o!==null&&(Bi(o,s,p),Lc(o,s,p))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var h=Hi(),p=Xs(h);p.tag=2,o!=null&&(p.callback=o),o=Ys(s,p,h),o!==null&&(Bi(o,s,h),Lc(o,s,h))}};function Vx(s,o,h,p,v,C,I){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,C,I):o.prototype&&o.prototype.isPureReactComponent?!_c(h,p)||!_c(v,C):!0}function qx(s,o,h,p){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,p),o.state!==s&&og.enqueueReplaceState(o,o.state,null)}function Ka(s,o){var h=o;if("ref"in o){h={};for(var p in o)p!=="ref"&&(h[p]=o[p])}if(s=s.defaultProps){h===o&&(h=A({},h));for(var v in s)h[v]===void 0&&(h[v]=s[v])}return h}function Wx(s){Ph(s)}function jx(s){console.error(s)}function Xx(s){Ph(s)}function ad(s,o){try{var h=s.onUncaughtError;h(o.value,{componentStack:o.stack})}catch(p){setTimeout(function(){throw p})}}function Yx(s,o,h){try{var p=s.onCaughtError;p(h.value,{componentStack:h.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function lg(s,o,h){return h=Xs(h),h.tag=3,h.payload={element:null},h.callback=function(){ad(s,o)},h}function Kx(s){return s=Xs(s),s.tag=3,s}function Jx(s,o,h,p){var v=h.type.getDerivedStateFromError;if(typeof v=="function"){var C=p.value;s.payload=function(){return v(C)},s.callback=function(){Yx(o,h,p)}}var I=h.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(s.callback=function(){Yx(o,h,p),typeof v!="function"&&(ea===null?ea=new Set([this]):ea.add(this));var k=p.stack;this.componentDidCatch(p.value,{componentStack:k!==null?k:""})})}function tR(s,o,h,p,v){if(h.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(o=h.alternate,o!==null&&nl(o,h,v,!0),h=ki.current,h!==null){switch(h.tag){case 31:case 13:return nr===null?vd():h.alternate===null&&bn===0&&(bn=3),h.flags&=-257,h.flags|=65536,h.lanes=v,p===jh?h.flags|=16384:(o=h.updateQueue,o===null?h.updateQueue=new Set([p]):o.add(p),Dg(s,p,v)),!1;case 22:return h.flags|=65536,p===jh?h.flags|=16384:(o=h.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([p])},h.updateQueue=o):(h=o.retryQueue,h===null?o.retryQueue=new Set([p]):h.add(p)),Dg(s,p,v)),!1}throw Error(i(435,h.tag))}return Dg(s,p,v),vd(),!1}if(Ge)return o=ki.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,p!==Sm&&(s=Error(i(422),{cause:p}),Sc(Zi(s,h)))):(p!==Sm&&(o=Error(i(423),{cause:p}),Sc(Zi(o,h))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,p=Zi(p,h),v=lg(s.stateNode,p,v),Fm(s,v),bn!==4&&(bn=2)),!1;var C=Error(i(520),{cause:p});if(C=Zi(C,h),Wc===null?Wc=[C]:Wc.push(C),bn!==4&&(bn=2),o===null)return!0;p=Zi(p,h),h=o;do{switch(h.tag){case 3:return h.flags|=65536,s=v&-v,h.lanes|=s,s=lg(h.stateNode,p,s),Fm(h,s),!1;case 1:if(o=h.type,C=h.stateNode,(h.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ea===null||!ea.has(C))))return h.flags|=65536,v&=-v,h.lanes|=v,v=Kx(v),Jx(v,s,h,p),Fm(h,v),!1}h=h.return}while(h!==null);return!1}var cg=Error(i(461)),Un=!1;function Kn(s,o,h,p){o.child=s===null?ex(o,null,h,p):Xa(o,s.child,h,p)}function Zx(s,o,h,p,v){h=h.render;var C=o.ref;if("ref"in p){var I={};for(var k in p)k!=="ref"&&(I[k]=p[k])}else I=p;return Va(o),p=Vm(s,o,h,I,C,v),k=qm(),s!==null&&!Un?(Wm(s,o,v),rs(s,o,v)):(Ge&&k&&wm(o),o.flags|=1,Kn(s,o,p,v),o.child)}function $x(s,o,h,p,v){if(s===null){var C=h.type;return typeof C=="function"&&!xm(C)&&C.defaultProps===void 0&&h.compare===null?(o.tag=15,o.type=C,tC(s,o,C,p,v)):(s=zh(h.type,null,p,o,o.mode,v),s.ref=o.ref,s.return=o,o.child=s)}if(C=s.child,!gg(s,v)){var I=C.memoizedProps;if(h=h.compare,h=h!==null?h:_c,h(I,p)&&s.ref===o.ref)return rs(s,o,v)}return o.flags|=1,s=Zr(C,p),s.ref=o.ref,s.return=o,o.child=s}function tC(s,o,h,p,v){if(s!==null){var C=s.memoizedProps;if(_c(C,p)&&s.ref===o.ref)if(Un=!1,o.pendingProps=p=C,gg(s,v))(s.flags&131072)!==0&&(Un=!0);else return o.lanes=s.lanes,rs(s,o,v)}return ug(s,o,h,p,v)}function eC(s,o,h,p){var v=p.children,C=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((o.flags&128)!==0){if(C=C!==null?C.baseLanes|h:h,s!==null){for(p=o.child=s.child,v=0;p!==null;)v=v|p.lanes|p.childLanes,p=p.sibling;p=v&~C}else p=0,o.child=null;return nC(s,o,C,h,p)}if((h&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&qh(o,C!==null?C.cachePool:null),C!==null?rx(o,C):Qm(),sx(o);else return p=o.lanes=536870912,nC(s,o,C!==null?C.baseLanes|h:h,h,p)}else C!==null?(qh(o,C.cachePool),rx(o,C),Js(),o.memoizedState=null):(s!==null&&qh(o,null),Qm(),Js());return Kn(s,o,v,h),o.child}function kc(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function nC(s,o,h,p,v){var C=Um();return C=C===null?null:{parent:Ln._currentValue,pool:C},o.memoizedState={baseLanes:h,cachePool:C},s!==null&&qh(o,null),Qm(),sx(o),s!==null&&nl(s,o,p,!0),o.childLanes=v,null}function od(s,o){return o=cd({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function iC(s,o,h){return Xa(o,s.child,null,h),s=od(o,o.pendingProps),s.flags|=2,Qi(o),o.memoizedState=null,s}function eR(s,o,h){var p=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(Ge){if(p.mode==="hidden")return s=od(o,p),o.lanes=536870912,kc(null,s);if(Gm(o),(s=dn)?(s=A_(s,er),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Hs!==null?{id:Ur,overflow:Or}:null,retryLane:536870912,hydrationErrors:null},h=Qb(s),h.return=o,o.child=h,Xn=o,dn=null)):s=null,s===null)throw qs(o);return o.lanes=536870912,null}return od(o,p)}var C=s.memoizedState;if(C!==null){var I=C.dehydrated;if(Gm(o),v)if(o.flags&256)o.flags&=-257,o=iC(s,o,h);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(i(558));else if(Un||nl(s,o,h,!1),v=(h&s.childLanes)!==0,Un||v){if(p=un,p!==null&&(I=pc(p,h),I!==0&&I!==C.retryLane))throw C.retryLane=I,Qa(s,I),Bi(p,s,I),cg;vd(),o=iC(s,o,h)}else s=C.treeContext,dn=ir(I.nextSibling),Xn=o,Ge=!0,Vs=null,er=!1,s!==null&&Hb(o,s),o=od(o,p),o.flags|=4096;return o}return s=Zr(s.child,{mode:p.mode,children:p.children}),s.ref=o.ref,o.child=s,s.return=o,s}function ld(s,o){var h=o.ref;if(h===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(s===null||s.ref!==h)&&(o.flags|=4194816)}}function ug(s,o,h,p,v){return Va(o),h=Vm(s,o,h,p,void 0,v),p=qm(),s!==null&&!Un?(Wm(s,o,v),rs(s,o,v)):(Ge&&p&&wm(o),o.flags|=1,Kn(s,o,h,v),o.child)}function rC(s,o,h,p,v,C){return Va(o),o.updateQueue=null,h=ox(o,p,h,v),ax(s),p=qm(),s!==null&&!Un?(Wm(s,o,C),rs(s,o,C)):(Ge&&p&&wm(o),o.flags|=1,Kn(s,o,h,C),o.child)}function sC(s,o,h,p,v){if(Va(o),o.stateNode===null){var C=Zo,I=h.contextType;typeof I=="object"&&I!==null&&(C=Yn(I)),C=new h(p,C),o.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=og,o.stateNode=C,C._reactInternals=o,C=o.stateNode,C.props=p,C.state=o.memoizedState,C.refs={},Nm(o),I=h.contextType,C.context=typeof I=="object"&&I!==null?Yn(I):Zo,C.state=o.memoizedState,I=h.getDerivedStateFromProps,typeof I=="function"&&(ag(o,h,I,p),C.state=o.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(I=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),I!==C.state&&og.enqueueReplaceState(C,C.state,null),Uc(o,p,C,v),Dc(),C.state=o.memoizedState),typeof C.componentDidMount=="function"&&(o.flags|=4194308),p=!0}else if(s===null){C=o.stateNode;var k=o.memoizedProps,K=Ka(h,k);C.props=K;var dt=C.context,_t=h.contextType;I=Zo,typeof _t=="object"&&_t!==null&&(I=Yn(_t));var Bt=h.getDerivedStateFromProps;_t=typeof Bt=="function"||typeof C.getSnapshotBeforeUpdate=="function",k=o.pendingProps!==k,_t||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(k||dt!==I)&&qx(o,C,p,I),js=!1;var pt=o.memoizedState;C.state=pt,Uc(o,p,C,v),Dc(),dt=o.memoizedState,k||pt!==dt||js?(typeof Bt=="function"&&(ag(o,h,Bt,p),dt=o.memoizedState),(K=js||Vx(o,h,K,p,pt,dt,I))?(_t||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(o.flags|=4194308)):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=dt),C.props=p,C.state=dt,C.context=I,p=K):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{C=o.stateNode,Pm(s,o),I=o.memoizedProps,_t=Ka(h,I),C.props=_t,Bt=o.pendingProps,pt=C.context,dt=h.contextType,K=Zo,typeof dt=="object"&&dt!==null&&(K=Yn(dt)),k=h.getDerivedStateFromProps,(dt=typeof k=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(I!==Bt||pt!==K)&&qx(o,C,p,K),js=!1,pt=o.memoizedState,C.state=pt,Uc(o,p,C,v),Dc();var vt=o.memoizedState;I!==Bt||pt!==vt||js||s!==null&&s.dependencies!==null&&Hh(s.dependencies)?(typeof k=="function"&&(ag(o,h,k,p),vt=o.memoizedState),(_t=js||Vx(o,h,_t,p,pt,vt,K)||s!==null&&s.dependencies!==null&&Hh(s.dependencies))?(dt||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,vt,K),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,vt,K)),typeof C.componentDidUpdate=="function"&&(o.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof C.componentDidUpdate!="function"||I===s.memoizedProps&&pt===s.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&pt===s.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=vt),C.props=p,C.state=vt,C.context=K,p=_t):(typeof C.componentDidUpdate!="function"||I===s.memoizedProps&&pt===s.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&pt===s.memoizedState||(o.flags|=1024),p=!1)}return C=p,ld(s,o),p=(o.flags&128)!==0,C||p?(C=o.stateNode,h=p&&typeof h.getDerivedStateFromError!="function"?null:C.render(),o.flags|=1,s!==null&&p?(o.child=Xa(o,s.child,null,v),o.child=Xa(o,null,h,v)):Kn(s,o,h,v),o.memoizedState=C.state,s=o.child):s=rs(s,o,v),s}function aC(s,o,h,p){return Ga(),o.flags|=256,Kn(s,o,h,p),o.child}var hg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dg(s){return{baseLanes:s,cachePool:Yb()}}function fg(s,o,h){return s=s!==null?s.childLanes&~h:0,o&&(s|=Gi),s}function oC(s,o,h){var p=o.pendingProps,v=!1,C=(o.flags&128)!==0,I;if((I=C)||(I=s!==null&&s.memoizedState===null?!1:(wn.current&2)!==0),I&&(v=!0,o.flags&=-129),I=(o.flags&32)!==0,o.flags&=-33,s===null){if(Ge){if(v?Ks(o):Js(),(s=dn)?(s=A_(s,er),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Hs!==null?{id:Ur,overflow:Or}:null,retryLane:536870912,hydrationErrors:null},h=Qb(s),h.return=o,o.child=h,Xn=o,dn=null)):s=null,s===null)throw qs(o);return Yg(s)?o.lanes=32:o.lanes=536870912,null}var k=p.children;return p=p.fallback,v?(Js(),v=o.mode,k=cd({mode:"hidden",children:k},v),p=za(p,v,h,null),k.return=o,p.return=o,k.sibling=p,o.child=k,p=o.child,p.memoizedState=dg(h),p.childLanes=fg(s,I,h),o.memoizedState=hg,kc(null,p)):(Ks(o),pg(o,k))}var K=s.memoizedState;if(K!==null&&(k=K.dehydrated,k!==null)){if(C)o.flags&256?(Ks(o),o.flags&=-257,o=Ag(s,o,h)):o.memoizedState!==null?(Js(),o.child=s.child,o.flags|=128,o=null):(Js(),k=p.fallback,v=o.mode,p=cd({mode:"visible",children:p.children},v),k=za(k,v,h,null),k.flags|=2,p.return=o,k.return=o,p.sibling=k,o.child=p,Xa(o,s.child,null,h),p=o.child,p.memoizedState=dg(h),p.childLanes=fg(s,I,h),o.memoizedState=hg,o=kc(null,p));else if(Ks(o),Yg(k)){if(I=k.nextSibling&&k.nextSibling.dataset,I)var dt=I.dgst;I=dt,p=Error(i(419)),p.stack="",p.digest=I,Sc({value:p,source:null,stack:null}),o=Ag(s,o,h)}else if(Un||nl(s,o,h,!1),I=(h&s.childLanes)!==0,Un||I){if(I=un,I!==null&&(p=pc(I,h),p!==0&&p!==K.retryLane))throw K.retryLane=p,Qa(s,p),Bi(I,s,p),cg;Xg(k)||vd(),o=Ag(s,o,h)}else Xg(k)?(o.flags|=192,o.child=s.child,o=null):(s=K.treeContext,dn=ir(k.nextSibling),Xn=o,Ge=!0,Vs=null,er=!1,s!==null&&Hb(o,s),o=pg(o,p.children),o.flags|=4096);return o}return v?(Js(),k=p.fallback,v=o.mode,K=s.child,dt=K.sibling,p=Zr(K,{mode:"hidden",children:p.children}),p.subtreeFlags=K.subtreeFlags&65011712,dt!==null?k=Zr(dt,k):(k=za(k,v,h,null),k.flags|=2),k.return=o,p.return=o,p.sibling=k,o.child=p,kc(null,p),p=o.child,k=s.child.memoizedState,k===null?k=dg(h):(v=k.cachePool,v!==null?(K=Ln._currentValue,v=v.parent!==K?{parent:K,pool:K}:v):v=Yb(),k={baseLanes:k.baseLanes|h,cachePool:v}),p.memoizedState=k,p.childLanes=fg(s,I,h),o.memoizedState=hg,kc(s.child,p)):(Ks(o),h=s.child,s=h.sibling,h=Zr(h,{mode:"visible",children:p.children}),h.return=o,h.sibling=null,s!==null&&(I=o.deletions,I===null?(o.deletions=[s],o.flags|=16):I.push(s)),o.child=h,o.memoizedState=null,h)}function pg(s,o){return o=cd({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function cd(s,o){return s=Fi(22,s,null,o),s.lanes=0,s}function Ag(s,o,h){return Xa(o,s.child,null,h),s=pg(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function lC(s,o,h){s.lanes|=o;var p=s.alternate;p!==null&&(p.lanes|=o),Im(s.return,o,h)}function mg(s,o,h,p,v,C){var I=s.memoizedState;I===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:v,treeForkCount:C}:(I.isBackwards=o,I.rendering=null,I.renderingStartTime=0,I.last=p,I.tail=h,I.tailMode=v,I.treeForkCount=C)}function cC(s,o,h){var p=o.pendingProps,v=p.revealOrder,C=p.tail;p=p.children;var I=wn.current,k=(I&2)!==0;if(k?(I=I&1|2,o.flags|=128):I&=1,yt(wn,I),Kn(s,o,p,h),p=Ge?Mc:0,!k&&s!==null&&(s.flags&128)!==0)t:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&lC(s,h,o);else if(s.tag===19)lC(s,h,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break t;for(;s.sibling===null;){if(s.return===null||s.return===o)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(v){case"forwards":for(h=o.child,v=null;h!==null;)s=h.alternate,s!==null&&Jh(s)===null&&(v=h),h=h.sibling;h=v,h===null?(v=o.child,o.child=null):(v=h.sibling,h.sibling=null),mg(o,!1,v,h,C,p);break;case"backwards":case"unstable_legacy-backwards":for(h=null,v=o.child,o.child=null;v!==null;){if(s=v.alternate,s!==null&&Jh(s)===null){o.child=v;break}s=v.sibling,v.sibling=h,h=v,v=s}mg(o,!0,h,null,C,p);break;case"together":mg(o,!1,null,null,void 0,p);break;default:o.memoizedState=null}return o.child}function rs(s,o,h){if(s!==null&&(o.dependencies=s.dependencies),ta|=o.lanes,(h&o.childLanes)===0)if(s!==null){if(nl(s,o,h,!1),(h&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,h=Zr(s,s.pendingProps),o.child=h,h.return=o;s.sibling!==null;)s=s.sibling,h=h.sibling=Zr(s,s.pendingProps),h.return=o;h.sibling=null}return o.child}function gg(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Hh(s)))}function nR(s,o,h){switch(o.tag){case 3:ft(o,o.stateNode.containerInfo),Ws(o,Ln,s.memoizedState.cache),Ga();break;case 27:case 5:Ft(o);break;case 4:ft(o,o.stateNode.containerInfo);break;case 10:Ws(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Gm(o),null;break;case 13:var p=o.memoizedState;if(p!==null)return p.dehydrated!==null?(Ks(o),o.flags|=128,null):(h&o.child.childLanes)!==0?oC(s,o,h):(Ks(o),s=rs(s,o,h),s!==null?s.sibling:null);Ks(o);break;case 19:var v=(s.flags&128)!==0;if(p=(h&o.childLanes)!==0,p||(nl(s,o,h,!1),p=(h&o.childLanes)!==0),v){if(p)return cC(s,o,h);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),yt(wn,wn.current),p)break;return null;case 22:return o.lanes=0,eC(s,o,h,o.pendingProps);case 24:Ws(o,Ln,s.memoizedState.cache)}return rs(s,o,h)}function uC(s,o,h){if(s!==null)if(s.memoizedProps!==o.pendingProps)Un=!0;else{if(!gg(s,h)&&(o.flags&128)===0)return Un=!1,nR(s,o,h);Un=(s.flags&131072)!==0}else Un=!1,Ge&&(o.flags&1048576)!==0&&Gb(o,Mc,o.index);switch(o.lanes=0,o.tag){case 16:t:{var p=o.pendingProps;if(s=Wa(o.elementType),o.type=s,typeof s=="function")xm(s)?(p=Ka(s,p),o.tag=1,o=sC(null,o,s,p,h)):(o.tag=0,o=ug(null,o,s,p,h));else{if(s!=null){var v=s.$$typeof;if(v===S){o.tag=11,o=Zx(null,o,s,p,h);break t}else if(v===L){o.tag=14,o=$x(null,o,s,p,h);break t}}throw o=nt(s)||s,Error(i(306,o,""))}}return o;case 0:return ug(s,o,o.type,o.pendingProps,h);case 1:return p=o.type,v=Ka(p,o.pendingProps),sC(s,o,p,v,h);case 3:t:{if(ft(o,o.stateNode.containerInfo),s===null)throw Error(i(387));p=o.pendingProps;var C=o.memoizedState;v=C.element,Pm(s,o),Uc(o,p,null,h);var I=o.memoizedState;if(p=I.cache,Ws(o,Ln,p),p!==C.cache&&Rm(o,[Ln],h,!0),Dc(),p=I.element,C.isDehydrated)if(C={element:p,isDehydrated:!1,cache:I.cache},o.updateQueue.baseState=C,o.memoizedState=C,o.flags&256){o=aC(s,o,p,h);break t}else if(p!==v){v=Zi(Error(i(424)),o),Sc(v),o=aC(s,o,p,h);break t}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(dn=ir(s.firstChild),Xn=o,Ge=!0,Vs=null,er=!0,h=ex(o,null,p,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Ga(),p===v){o=rs(s,o,h);break t}Kn(s,o,p,h)}o=o.child}return o;case 26:return ld(s,o),s===null?(h=b_(o.type,null,o.pendingProps,null))?o.memoizedState=h:Ge||(h=o.type,s=o.pendingProps,p=wd(Gt.current).createElement(h),p[yn]=o,p[jn]=s,Jn(p,h,s),ct(p),o.stateNode=p):o.memoizedState=b_(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Ft(o),s===null&&Ge&&(p=o.stateNode=v_(o.type,o.pendingProps,Gt.current),Xn=o,er=!0,v=dn,sa(o.type)?(Kg=v,dn=ir(p.firstChild)):dn=v),Kn(s,o,o.pendingProps.children,h),ld(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Ge&&((v=p=dn)&&(p=LR(p,o.type,o.pendingProps,er),p!==null?(o.stateNode=p,Xn=o,dn=ir(p.firstChild),er=!1,v=!0):v=!1),v||qs(o)),Ft(o),v=o.type,C=o.pendingProps,I=s!==null?s.memoizedProps:null,p=C.children,qg(v,C)?p=null:I!==null&&qg(v,I)&&(o.flags|=32),o.memoizedState!==null&&(v=Vm(s,o,jI,null,null,h),tu._currentValue=v),ld(s,o),Kn(s,o,p,h),o.child;case 6:return s===null&&Ge&&((s=h=dn)&&(h=DR(h,o.pendingProps,er),h!==null?(o.stateNode=h,Xn=o,dn=null,s=!0):s=!1),s||qs(o)),null;case 13:return oC(s,o,h);case 4:return ft(o,o.stateNode.containerInfo),p=o.pendingProps,s===null?o.child=Xa(o,null,p,h):Kn(s,o,p,h),o.child;case 11:return Zx(s,o,o.type,o.pendingProps,h);case 7:return Kn(s,o,o.pendingProps,h),o.child;case 8:return Kn(s,o,o.pendingProps.children,h),o.child;case 12:return Kn(s,o,o.pendingProps.children,h),o.child;case 10:return p=o.pendingProps,Ws(o,o.type,p.value),Kn(s,o,p.children,h),o.child;case 9:return v=o.type._context,p=o.pendingProps.children,Va(o),v=Yn(v),p=p(v),o.flags|=1,Kn(s,o,p,h),o.child;case 14:return $x(s,o,o.type,o.pendingProps,h);case 15:return tC(s,o,o.type,o.pendingProps,h);case 19:return cC(s,o,h);case 31:return eR(s,o,h);case 22:return eC(s,o,h,o.pendingProps);case 24:return Va(o),p=Yn(Ln),s===null?(v=Um(),v===null&&(v=un,C=Lm(),v.pooledCache=C,C.refCount++,C!==null&&(v.pooledCacheLanes|=h),v=C),o.memoizedState={parent:p,cache:v},Nm(o),Ws(o,Ln,v)):((s.lanes&h)!==0&&(Pm(s,o),Uc(o,null,null,h),Dc()),v=s.memoizedState,C=o.memoizedState,v.parent!==p?(v={parent:p,cache:p},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),Ws(o,Ln,p)):(p=C.cache,Ws(o,Ln,p),p!==v.cache&&Rm(o,[Ln],h,!0))),Kn(s,o,o.pendingProps.children,h),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function ss(s){s.flags|=4}function vg(s,o,h,p,v){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(v&335544128)===v)if(s.stateNode.complete)s.flags|=8192;else if(PC())s.flags|=8192;else throw ja=jh,Om}else s.flags&=-16777217}function hC(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!M_(o))if(PC())s.flags|=8192;else throw ja=jh,Om}function ud(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Yt():536870912,s.lanes|=o,pl|=o)}function Qc(s,o){if(!Ge)switch(s.tailMode){case"hidden":o=s.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function fn(s){var o=s.alternate!==null&&s.alternate.child===s.child,h=0,p=0;if(o)for(var v=s.child;v!==null;)h|=v.lanes|v.childLanes,p|=v.subtreeFlags&65011712,p|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)h|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=p,s.childLanes=h,o}function iR(s,o,h){var p=o.pendingProps;switch(Mm(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(o),null;case 1:return fn(o),null;case 3:return h=o.stateNode,p=null,s!==null&&(p=s.memoizedState.cache),o.memoizedState.cache!==p&&(o.flags|=2048),es(Ln),It(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(el(o)?ss(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Bm())),fn(o),null;case 26:var v=o.type,C=o.memoizedState;return s===null?(ss(o),C!==null?(fn(o),hC(o,C)):(fn(o),vg(o,v,null,p,h))):C?C!==s.memoizedState?(ss(o),fn(o),hC(o,C)):(fn(o),o.flags&=-16777217):(s=s.memoizedProps,s!==p&&ss(o),fn(o),vg(o,v,s,p,h)),null;case 27:if(Jt(o),h=Gt.current,v=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==p&&ss(o);else{if(!p){if(o.stateNode===null)throw Error(i(166));return fn(o),null}s=Et.current,el(o)?Vb(o):(s=v_(v,p,h),o.stateNode=s,ss(o))}return fn(o),null;case 5:if(Jt(o),v=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==p&&ss(o);else{if(!p){if(o.stateNode===null)throw Error(i(166));return fn(o),null}if(C=Et.current,el(o))Vb(o);else{var I=wd(Gt.current);switch(C){case 1:C=I.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:C=I.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":C=I.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":C=I.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":C=I.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof p.is=="string"?I.createElement("select",{is:p.is}):I.createElement("select"),p.multiple?C.multiple=!0:p.size&&(C.size=p.size);break;default:C=typeof p.is=="string"?I.createElement(v,{is:p.is}):I.createElement(v)}}C[yn]=o,C[jn]=p;t:for(I=o.child;I!==null;){if(I.tag===5||I.tag===6)C.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===o)break t;for(;I.sibling===null;){if(I.return===null||I.return===o)break t;I=I.return}I.sibling.return=I.return,I=I.sibling}o.stateNode=C;t:switch(Jn(C,v,p),v){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break t;case"img":p=!0;break t;default:p=!1}p&&ss(o)}}return fn(o),vg(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,h),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==p&&ss(o);else{if(typeof p!="string"&&o.stateNode===null)throw Error(i(166));if(s=Gt.current,el(o)){if(s=o.stateNode,h=o.memoizedProps,p=null,v=Xn,v!==null)switch(v.tag){case 27:case 5:p=v.memoizedProps}s[yn]=o,s=!!(s.nodeValue===h||p!==null&&p.suppressHydrationWarning===!0||o_(s.nodeValue,h)),s||qs(o,!0)}else s=wd(s).createTextNode(p),s[yn]=o,o.stateNode=s}return fn(o),null;case 31:if(h=o.memoizedState,s===null||s.memoizedState!==null){if(p=el(o),h!==null){if(s===null){if(!p)throw Error(i(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[yn]=o}else Ga(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;fn(o),s=!1}else h=Bm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=h),s=!0;if(!s)return o.flags&256?(Qi(o),o):(Qi(o),null);if((o.flags&128)!==0)throw Error(i(558))}return fn(o),null;case 13:if(p=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=el(o),p!==null&&p.dehydrated!==null){if(s===null){if(!v)throw Error(i(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[yn]=o}else Ga(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;fn(o),v=!1}else v=Bm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(Qi(o),o):(Qi(o),null)}return Qi(o),(o.flags&128)!==0?(o.lanes=h,o):(h=p!==null,s=s!==null&&s.memoizedState!==null,h&&(p=o.child,v=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(v=p.alternate.memoizedState.cachePool.pool),C=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),C!==v&&(p.flags|=2048)),h!==s&&h&&(o.child.flags|=8192),ud(o,o.updateQueue),fn(o),null);case 4:return It(),s===null&&Qg(o.stateNode.containerInfo),fn(o),null;case 10:return es(o.type),fn(o),null;case 19:if(rt(wn),p=o.memoizedState,p===null)return fn(o),null;if(v=(o.flags&128)!==0,C=p.rendering,C===null)if(v)Qc(p,!1);else{if(bn!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(C=Jh(s),C!==null){for(o.flags|=128,Qc(p,!1),s=C.updateQueue,o.updateQueue=s,ud(o,s),o.subtreeFlags=0,s=h,h=o.child;h!==null;)kb(h,s),h=h.sibling;return yt(wn,wn.current&1|2),Ge&&$r(o,p.treeForkCount),o.child}s=s.sibling}p.tail!==null&&gt()>Ad&&(o.flags|=128,v=!0,Qc(p,!1),o.lanes=4194304)}else{if(!v)if(s=Jh(C),s!==null){if(o.flags|=128,v=!0,s=s.updateQueue,o.updateQueue=s,ud(o,s),Qc(p,!0),p.tail===null&&p.tailMode==="hidden"&&!C.alternate&&!Ge)return fn(o),null}else 2*gt()-p.renderingStartTime>Ad&&h!==536870912&&(o.flags|=128,v=!0,Qc(p,!1),o.lanes=4194304);p.isBackwards?(C.sibling=o.child,o.child=C):(s=p.last,s!==null?s.sibling=C:o.child=C,p.last=C)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=gt(),s.sibling=null,h=wn.current,yt(wn,v?h&1|2:h&1),Ge&&$r(o,p.treeForkCount),s):(fn(o),null);case 22:case 23:return Qi(o),zm(),p=o.memoizedState!==null,s!==null?s.memoizedState!==null!==p&&(o.flags|=8192):p&&(o.flags|=8192),p?(h&536870912)!==0&&(o.flags&128)===0&&(fn(o),o.subtreeFlags&6&&(o.flags|=8192)):fn(o),h=o.updateQueue,h!==null&&ud(o,h.retryQueue),h=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==h&&(o.flags|=2048),s!==null&&rt(qa),null;case 24:return h=null,s!==null&&(h=s.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),es(Ln),fn(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function rR(s,o){switch(Mm(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return es(Ln),It(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Jt(o),null;case 31:if(o.memoizedState!==null){if(Qi(o),o.alternate===null)throw Error(i(340));Ga()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(Qi(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Ga()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return rt(wn),null;case 4:return It(),null;case 10:return es(o.type),null;case 22:case 23:return Qi(o),zm(),s!==null&&rt(qa),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return es(Ln),null;case 25:return null;default:return null}}function dC(s,o){switch(Mm(o),o.tag){case 3:es(Ln),It();break;case 26:case 27:case 5:Jt(o);break;case 4:It();break;case 31:o.memoizedState!==null&&Qi(o);break;case 13:Qi(o);break;case 19:rt(wn);break;case 10:es(o.type);break;case 22:case 23:Qi(o),zm(),s!==null&&rt(qa);break;case 24:es(Ln)}}function zc(s,o){try{var h=o.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var v=p.next;h=v;do{if((h.tag&s)===s){p=void 0;var C=h.create,I=h.inst;p=C(),I.destroy=p}h=h.next}while(h!==v)}}catch(k){nn(o,o.return,k)}}function Zs(s,o,h){try{var p=o.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var C=v.next;p=C;do{if((p.tag&s)===s){var I=p.inst,k=I.destroy;if(k!==void 0){I.destroy=void 0,v=o;var K=h,dt=k;try{dt()}catch(_t){nn(v,K,_t)}}}p=p.next}while(p!==C)}}catch(_t){nn(o,o.return,_t)}}function fC(s){var o=s.updateQueue;if(o!==null){var h=s.stateNode;try{ix(o,h)}catch(p){nn(s,s.return,p)}}}function pC(s,o,h){h.props=Ka(s.type,s.memoizedProps),h.state=s.memoizedState;try{h.componentWillUnmount()}catch(p){nn(s,o,p)}}function Gc(s,o){try{var h=s.ref;if(h!==null){switch(s.tag){case 26:case 27:case 5:var p=s.stateNode;break;case 30:p=s.stateNode;break;default:p=s.stateNode}typeof h=="function"?s.refCleanup=h(p):h.current=p}}catch(v){nn(s,o,v)}}function Nr(s,o){var h=s.ref,p=s.refCleanup;if(h!==null)if(typeof p=="function")try{p()}catch(v){nn(s,o,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(v){nn(s,o,v)}else h.current=null}function AC(s){var o=s.type,h=s.memoizedProps,p=s.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":h.autoFocus&&p.focus();break t;case"img":h.src?p.src=h.src:h.srcSet&&(p.srcset=h.srcSet)}}catch(v){nn(s,s.return,v)}}function yg(s,o,h){try{var p=s.stateNode;MR(p,s.type,h,o),p[jn]=o}catch(v){nn(s,s.return,v)}}function mC(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&sa(s.type)||s.tag===4}function Eg(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||mC(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&sa(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function bg(s,o,h){var p=s.tag;if(p===5||p===6)s=s.stateNode,o?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(s,o):(o=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,o.appendChild(s),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=Kr));else if(p!==4&&(p===27&&sa(s.type)&&(h=s.stateNode,o=null),s=s.child,s!==null))for(bg(s,o,h),s=s.sibling;s!==null;)bg(s,o,h),s=s.sibling}function hd(s,o,h){var p=s.tag;if(p===5||p===6)s=s.stateNode,o?h.insertBefore(s,o):h.appendChild(s);else if(p!==4&&(p===27&&sa(s.type)&&(h=s.stateNode),s=s.child,s!==null))for(hd(s,o,h),s=s.sibling;s!==null;)hd(s,o,h),s=s.sibling}function gC(s){var o=s.stateNode,h=s.memoizedProps;try{for(var p=s.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);Jn(o,p,h),o[yn]=s,o[jn]=h}catch(C){nn(s,s.return,C)}}var as=!1,On=!1,xg=!1,vC=typeof WeakSet=="function"?WeakSet:Set,qn=null;function sR(s,o){if(s=s.containerInfo,Hg=Ld,s=Ib(s),Am(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else t:{h=(h=s.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var v=p.anchorOffset,C=p.focusNode;p=p.focusOffset;try{h.nodeType,C.nodeType}catch{h=null;break t}var I=0,k=-1,K=-1,dt=0,_t=0,Bt=s,pt=null;e:for(;;){for(var vt;Bt!==h||v!==0&&Bt.nodeType!==3||(k=I+v),Bt!==C||p!==0&&Bt.nodeType!==3||(K=I+p),Bt.nodeType===3&&(I+=Bt.nodeValue.length),(vt=Bt.firstChild)!==null;)pt=Bt,Bt=vt;for(;;){if(Bt===s)break e;if(pt===h&&++dt===v&&(k=I),pt===C&&++_t===p&&(K=I),(vt=Bt.nextSibling)!==null)break;Bt=pt,pt=Bt.parentNode}Bt=vt}h=k===-1||K===-1?null:{start:k,end:K}}else h=null}h=h||{start:0,end:0}}else h=null;for(Vg={focusedElem:s,selectionRange:h},Ld=!1,qn=o;qn!==null;)if(o=qn,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,qn=s;else for(;qn!==null;){switch(o=qn,C=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(h=0;h<s.length;h++)v=s[h],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&C!==null){s=void 0,h=o,v=C.memoizedProps,C=C.memoizedState,p=h.stateNode;try{var re=Ka(h.type,v);s=p.getSnapshotBeforeUpdate(re,C),p.__reactInternalSnapshotBeforeUpdate=s}catch(ge){nn(h,h.return,ge)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,h=s.nodeType,h===9)jg(s);else if(h===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":jg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,qn=s;break}qn=o.return}}function yC(s,o,h){var p=h.flags;switch(h.tag){case 0:case 11:case 15:ls(s,h),p&4&&zc(5,h);break;case 1:if(ls(s,h),p&4)if(s=h.stateNode,o===null)try{s.componentDidMount()}catch(I){nn(h,h.return,I)}else{var v=Ka(h.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(v,o,s.__reactInternalSnapshotBeforeUpdate)}catch(I){nn(h,h.return,I)}}p&64&&fC(h),p&512&&Gc(h,h.return);break;case 3:if(ls(s,h),p&64&&(s=h.updateQueue,s!==null)){if(o=null,h.child!==null)switch(h.child.tag){case 27:case 5:o=h.child.stateNode;break;case 1:o=h.child.stateNode}try{ix(s,o)}catch(I){nn(h,h.return,I)}}break;case 27:o===null&&p&4&&gC(h);case 26:case 5:ls(s,h),o===null&&p&4&&AC(h),p&512&&Gc(h,h.return);break;case 12:ls(s,h);break;case 31:ls(s,h),p&4&&xC(s,h);break;case 13:ls(s,h),p&4&&CC(s,h),p&64&&(s=h.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(h=pR.bind(null,h),UR(s,h))));break;case 22:if(p=h.memoizedState!==null||as,!p){o=o!==null&&o.memoizedState!==null||On,v=as;var C=On;as=p,(On=o)&&!C?cs(s,h,(h.subtreeFlags&8772)!==0):ls(s,h),as=v,On=C}break;case 30:break;default:ls(s,h)}}function EC(s){var o=s.alternate;o!==null&&(s.alternate=null,EC(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Ac(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var mn=null,_i=!1;function os(s,o,h){for(h=h.child;h!==null;)bC(s,o,h),h=h.sibling}function bC(s,o,h){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Pt,h)}catch{}switch(h.tag){case 26:On||Nr(h,o),os(s,o,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:On||Nr(h,o);var p=mn,v=_i;sa(h.type)&&(mn=h.stateNode,_i=!1),os(s,o,h),Jc(h.stateNode),mn=p,_i=v;break;case 5:On||Nr(h,o);case 6:if(p=mn,v=_i,mn=null,os(s,o,h),mn=p,_i=v,mn!==null)if(_i)try{(mn.nodeType===9?mn.body:mn.nodeName==="HTML"?mn.ownerDocument.body:mn).removeChild(h.stateNode)}catch(C){nn(h,o,C)}else try{mn.removeChild(h.stateNode)}catch(C){nn(h,o,C)}break;case 18:mn!==null&&(_i?(s=mn,f_(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,h.stateNode),xl(s)):f_(mn,h.stateNode));break;case 4:p=mn,v=_i,mn=h.stateNode.containerInfo,_i=!0,os(s,o,h),mn=p,_i=v;break;case 0:case 11:case 14:case 15:Zs(2,h,o),On||Zs(4,h,o),os(s,o,h);break;case 1:On||(Nr(h,o),p=h.stateNode,typeof p.componentWillUnmount=="function"&&pC(h,o,p)),os(s,o,h);break;case 21:os(s,o,h);break;case 22:On=(p=On)||h.memoizedState!==null,os(s,o,h),On=p;break;default:os(s,o,h)}}function xC(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{xl(s)}catch(h){nn(o,o.return,h)}}}function CC(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{xl(s)}catch(h){nn(o,o.return,h)}}function aR(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new vC),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new vC),o;default:throw Error(i(435,s.tag))}}function dd(s,o){var h=aR(s);o.forEach(function(p){if(!h.has(p)){h.add(p);var v=AR.bind(null,s,p);p.then(v,v)}})}function wi(s,o){var h=o.deletions;if(h!==null)for(var p=0;p<h.length;p++){var v=h[p],C=s,I=o,k=I;t:for(;k!==null;){switch(k.tag){case 27:if(sa(k.type)){mn=k.stateNode,_i=!1;break t}break;case 5:mn=k.stateNode,_i=!1;break t;case 3:case 4:mn=k.stateNode.containerInfo,_i=!0;break t}k=k.return}if(mn===null)throw Error(i(160));bC(C,I,v),mn=null,_i=!1,C=v.alternate,C!==null&&(C.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)_C(o,s),o=o.sibling}var mr=null;function _C(s,o){var h=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:wi(o,s),Mi(s),p&4&&(Zs(3,s,s.return),zc(3,s),Zs(5,s,s.return));break;case 1:wi(o,s),Mi(s),p&512&&(On||h===null||Nr(h,h.return)),p&64&&as&&(s=s.updateQueue,s!==null&&(p=s.callbacks,p!==null&&(h=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=h===null?p:h.concat(p))));break;case 26:var v=mr;if(wi(o,s),Mi(s),p&512&&(On||h===null||Nr(h,h.return)),p&4){var C=h!==null?h.memoizedState:null;if(p=s.memoizedState,h===null)if(p===null)if(s.stateNode===null){t:{p=s.type,h=s.memoizedProps,v=v.ownerDocument||v;e:switch(p){case"title":C=v.getElementsByTagName("title")[0],(!C||C[Na]||C[yn]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=v.createElement(p),v.head.insertBefore(C,v.querySelector("head > title"))),Jn(C,p,h),C[yn]=s,ct(C),p=C;break t;case"link":var I=__("link","href",v).get(p+(h.href||""));if(I){for(var k=0;k<I.length;k++)if(C=I[k],C.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&C.getAttribute("rel")===(h.rel==null?null:h.rel)&&C.getAttribute("title")===(h.title==null?null:h.title)&&C.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){I.splice(k,1);break e}}C=v.createElement(p),Jn(C,p,h),v.head.appendChild(C);break;case"meta":if(I=__("meta","content",v).get(p+(h.content||""))){for(k=0;k<I.length;k++)if(C=I[k],C.getAttribute("content")===(h.content==null?null:""+h.content)&&C.getAttribute("name")===(h.name==null?null:h.name)&&C.getAttribute("property")===(h.property==null?null:h.property)&&C.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&C.getAttribute("charset")===(h.charSet==null?null:h.charSet)){I.splice(k,1);break e}}C=v.createElement(p),Jn(C,p,h),v.head.appendChild(C);break;default:throw Error(i(468,p))}C[yn]=s,ct(C),p=C}s.stateNode=p}else w_(v,s.type,s.stateNode);else s.stateNode=C_(v,p,s.memoizedProps);else C!==p?(C===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):C.count--,p===null?w_(v,s.type,s.stateNode):C_(v,p,s.memoizedProps)):p===null&&s.stateNode!==null&&yg(s,s.memoizedProps,h.memoizedProps)}break;case 27:wi(o,s),Mi(s),p&512&&(On||h===null||Nr(h,h.return)),h!==null&&p&4&&yg(s,s.memoizedProps,h.memoizedProps);break;case 5:if(wi(o,s),Mi(s),p&512&&(On||h===null||Nr(h,h.return)),s.flags&32){v=s.stateNode;try{cn(v,"")}catch(re){nn(s,s.return,re)}}p&4&&s.stateNode!=null&&(v=s.memoizedProps,yg(s,v,h!==null?h.memoizedProps:v)),p&1024&&(xg=!0);break;case 6:if(wi(o,s),Mi(s),p&4){if(s.stateNode===null)throw Error(i(162));p=s.memoizedProps,h=s.stateNode;try{h.nodeValue=p}catch(re){nn(s,s.return,re)}}break;case 3:if(Bd=null,v=mr,mr=Md(o.containerInfo),wi(o,s),mr=v,Mi(s),p&4&&h!==null&&h.memoizedState.isDehydrated)try{xl(o.containerInfo)}catch(re){nn(s,s.return,re)}xg&&(xg=!1,wC(s));break;case 4:p=mr,mr=Md(s.stateNode.containerInfo),wi(o,s),Mi(s),mr=p;break;case 12:wi(o,s),Mi(s);break;case 31:wi(o,s),Mi(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,dd(s,p)));break;case 13:wi(o,s),Mi(s),s.child.flags&8192&&s.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(pd=gt()),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,dd(s,p)));break;case 22:v=s.memoizedState!==null;var K=h!==null&&h.memoizedState!==null,dt=as,_t=On;if(as=dt||v,On=_t||K,wi(o,s),On=_t,as=dt,Mi(s),p&8192)t:for(o=s.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(h===null||K||as||On||Ja(s)),h=null,o=s;;){if(o.tag===5||o.tag===26){if(h===null){K=h=o;try{if(C=K.stateNode,v)I=C.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{k=K.stateNode;var Bt=K.memoizedProps.style,pt=Bt!=null&&Bt.hasOwnProperty("display")?Bt.display:null;k.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(re){nn(K,K.return,re)}}}else if(o.tag===6){if(h===null){K=o;try{K.stateNode.nodeValue=v?"":K.memoizedProps}catch(re){nn(K,K.return,re)}}}else if(o.tag===18){if(h===null){K=o;try{var vt=K.stateNode;v?p_(vt,!0):p_(K.stateNode,!1)}catch(re){nn(K,K.return,re)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break t;for(;o.sibling===null;){if(o.return===null||o.return===s)break t;h===o&&(h=null),o=o.return}h===o&&(h=null),o.sibling.return=o.return,o=o.sibling}p&4&&(p=s.updateQueue,p!==null&&(h=p.retryQueue,h!==null&&(p.retryQueue=null,dd(s,h))));break;case 19:wi(o,s),Mi(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,dd(s,p)));break;case 30:break;case 21:break;default:wi(o,s),Mi(s)}}function Mi(s){var o=s.flags;if(o&2){try{for(var h,p=s.return;p!==null;){if(mC(p)){h=p;break}p=p.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var v=h.stateNode,C=Eg(s);hd(s,C,v);break;case 5:var I=h.stateNode;h.flags&32&&(cn(I,""),h.flags&=-33);var k=Eg(s);hd(s,k,I);break;case 3:case 4:var K=h.stateNode.containerInfo,dt=Eg(s);bg(s,dt,K);break;default:throw Error(i(161))}}catch(_t){nn(s,s.return,_t)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function wC(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;wC(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function ls(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)yC(s,o.alternate,o),o=o.sibling}function Ja(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Zs(4,o,o.return),Ja(o);break;case 1:Nr(o,o.return);var h=o.stateNode;typeof h.componentWillUnmount=="function"&&pC(o,o.return,h),Ja(o);break;case 27:Jc(o.stateNode);case 26:case 5:Nr(o,o.return),Ja(o);break;case 22:o.memoizedState===null&&Ja(o);break;case 30:Ja(o);break;default:Ja(o)}s=s.sibling}}function cs(s,o,h){for(h=h&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var p=o.alternate,v=s,C=o,I=C.flags;switch(C.tag){case 0:case 11:case 15:cs(v,C,h),zc(4,C);break;case 1:if(cs(v,C,h),p=C,v=p.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(dt){nn(p,p.return,dt)}if(p=C,v=p.updateQueue,v!==null){var k=p.stateNode;try{var K=v.shared.hiddenCallbacks;if(K!==null)for(v.shared.hiddenCallbacks=null,v=0;v<K.length;v++)nx(K[v],k)}catch(dt){nn(p,p.return,dt)}}h&&I&64&&fC(C),Gc(C,C.return);break;case 27:gC(C);case 26:case 5:cs(v,C,h),h&&p===null&&I&4&&AC(C),Gc(C,C.return);break;case 12:cs(v,C,h);break;case 31:cs(v,C,h),h&&I&4&&xC(v,C);break;case 13:cs(v,C,h),h&&I&4&&CC(v,C);break;case 22:C.memoizedState===null&&cs(v,C,h),Gc(C,C.return);break;case 30:break;default:cs(v,C,h)}o=o.sibling}}function Cg(s,o){var h=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==h&&(s!=null&&s.refCount++,h!=null&&Bc(h))}function _g(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Bc(s))}function gr(s,o,h,p){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)MC(s,o,h,p),o=o.sibling}function MC(s,o,h,p){var v=o.flags;switch(o.tag){case 0:case 11:case 15:gr(s,o,h,p),v&2048&&zc(9,o);break;case 1:gr(s,o,h,p);break;case 3:gr(s,o,h,p),v&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Bc(s)));break;case 12:if(v&2048){gr(s,o,h,p),s=o.stateNode;try{var C=o.memoizedProps,I=C.id,k=C.onPostCommit;typeof k=="function"&&k(I,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(K){nn(o,o.return,K)}}else gr(s,o,h,p);break;case 31:gr(s,o,h,p);break;case 13:gr(s,o,h,p);break;case 23:break;case 22:C=o.stateNode,I=o.alternate,o.memoizedState!==null?C._visibility&2?gr(s,o,h,p):Hc(s,o):C._visibility&2?gr(s,o,h,p):(C._visibility|=2,hl(s,o,h,p,(o.subtreeFlags&10256)!==0||!1)),v&2048&&Cg(I,o);break;case 24:gr(s,o,h,p),v&2048&&_g(o.alternate,o);break;default:gr(s,o,h,p)}}function hl(s,o,h,p,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var C=s,I=o,k=h,K=p,dt=I.flags;switch(I.tag){case 0:case 11:case 15:hl(C,I,k,K,v),zc(8,I);break;case 23:break;case 22:var _t=I.stateNode;I.memoizedState!==null?_t._visibility&2?hl(C,I,k,K,v):Hc(C,I):(_t._visibility|=2,hl(C,I,k,K,v)),v&&dt&2048&&Cg(I.alternate,I);break;case 24:hl(C,I,k,K,v),v&&dt&2048&&_g(I.alternate,I);break;default:hl(C,I,k,K,v)}o=o.sibling}}function Hc(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var h=s,p=o,v=p.flags;switch(p.tag){case 22:Hc(h,p),v&2048&&Cg(p.alternate,p);break;case 24:Hc(h,p),v&2048&&_g(p.alternate,p);break;default:Hc(h,p)}o=o.sibling}}var Vc=8192;function dl(s,o,h){if(s.subtreeFlags&Vc)for(s=s.child;s!==null;)SC(s,o,h),s=s.sibling}function SC(s,o,h){switch(s.tag){case 26:dl(s,o,h),s.flags&Vc&&s.memoizedState!==null&&WR(h,mr,s.memoizedState,s.memoizedProps);break;case 5:dl(s,o,h);break;case 3:case 4:var p=mr;mr=Md(s.stateNode.containerInfo),dl(s,o,h),mr=p;break;case 22:s.memoizedState===null&&(p=s.alternate,p!==null&&p.memoizedState!==null?(p=Vc,Vc=16777216,dl(s,o,h),Vc=p):dl(s,o,h));break;default:dl(s,o,h)}}function BC(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function qc(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var p=o[h];qn=p,IC(p,s)}BC(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)TC(s),s=s.sibling}function TC(s){switch(s.tag){case 0:case 11:case 15:qc(s),s.flags&2048&&Zs(9,s,s.return);break;case 3:qc(s);break;case 12:qc(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,fd(s)):qc(s);break;default:qc(s)}}function fd(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var p=o[h];qn=p,IC(p,s)}BC(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Zs(8,o,o.return),fd(o);break;case 22:h=o.stateNode,h._visibility&2&&(h._visibility&=-3,fd(o));break;default:fd(o)}s=s.sibling}}function IC(s,o){for(;qn!==null;){var h=qn;switch(h.tag){case 0:case 11:case 15:Zs(8,h,o);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var p=h.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Bc(h.memoizedState.cache)}if(p=h.child,p!==null)p.return=h,qn=p;else t:for(h=s;qn!==null;){p=qn;var v=p.sibling,C=p.return;if(EC(p),p===h){qn=null;break t}if(v!==null){v.return=C,qn=v;break t}qn=C}}}var oR={getCacheForType:function(s){var o=Yn(Ln),h=o.data.get(s);return h===void 0&&(h=s(),o.data.set(s,h)),h},cacheSignal:function(){return Yn(Ln).controller.signal}},lR=typeof WeakMap=="function"?WeakMap:Map,$e=0,un=null,Oe=null,Fe=0,en=0,zi=null,$s=!1,fl=!1,wg=!1,us=0,bn=0,ta=0,Za=0,Mg=0,Gi=0,pl=0,Wc=null,Si=null,Sg=!1,pd=0,RC=0,Ad=1/0,md=null,ea=null,Fn=0,na=null,Al=null,hs=0,Bg=0,Tg=null,LC=null,jc=0,Ig=null;function Hi(){return($e&2)!==0&&Fe!==0?Fe&-Fe:G.T!==null?Ng():Ho()}function DC(){if(Gi===0)if((Fe&536870912)===0||Ge){var s=kt;kt<<=1,(kt&3932160)===0&&(kt=262144),Gi=s}else Gi=536870912;return s=ki.current,s!==null&&(s.flags|=32),Gi}function Bi(s,o,h){(s===un&&(en===2||en===9)||s.cancelPendingCommit!==null)&&(ml(s,0),ia(s,Fe,Gi,!1)),De(s,h),(($e&2)===0||s!==un)&&(s===un&&(($e&2)===0&&(Za|=h),bn===4&&ia(s,Fe,Gi,!1)),Pr(s))}function UC(s,o,h){if(($e&6)!==0)throw Error(i(327));var p=!h&&(o&127)===0&&(o&s.expiredLanes)===0||Ae(s,o),v=p?hR(s,o):Lg(s,o,!0),C=p;do{if(v===0){fl&&!p&&ia(s,o,0,!1);break}else{if(h=s.current.alternate,C&&!cR(h)){v=Lg(s,o,!1),C=!1;continue}if(v===2){if(C=o,s.errorRecoveryDisabledLanes&C)var I=0;else I=s.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){o=I;t:{var k=s;v=Wc;var K=k.current.memoizedState.isDehydrated;if(K&&(ml(k,I).flags|=256),I=Lg(k,I,!1),I!==2){if(wg&&!K){k.errorRecoveryDisabledLanes|=C,Za|=C,v=4;break t}C=Si,Si=v,C!==null&&(Si===null?Si=C:Si.push.apply(Si,C))}v=I}if(C=!1,v!==2)continue}}if(v===1){ml(s,0),ia(s,o,0,!0);break}t:{switch(p=s,C=v,C){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:ia(p,o,Gi,!$s);break t;case 2:Si=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(v=pd+300-gt(),10<v)){if(ia(p,o,Gi,!$s),Zt(p,0,!0)!==0)break t;hs=o,p.timeoutHandle=h_(OC.bind(null,p,h,Si,md,Sg,o,Gi,Za,pl,$s,C,"Throttled",-0,0),v);break t}OC(p,h,Si,md,Sg,o,Gi,Za,pl,$s,C,null,-0,0)}}break}while(!0);Pr(s)}function OC(s,o,h,p,v,C,I,k,K,dt,_t,Bt,pt,vt){if(s.timeoutHandle=-1,Bt=o.subtreeFlags,Bt&8192||(Bt&16785408)===16785408){Bt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Kr},SC(o,C,Bt);var re=(C&62914560)===C?pd-gt():(C&4194048)===C?RC-gt():0;if(re=jR(Bt,re),re!==null){hs=C,s.cancelPendingCommit=re(HC.bind(null,s,o,C,h,p,v,I,k,K,_t,Bt,null,pt,vt)),ia(s,C,I,!dt);return}}HC(s,o,C,h,p,v,I,k,K)}function cR(s){for(var o=s;;){var h=o.tag;if((h===0||h===11||h===15)&&o.flags&16384&&(h=o.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var p=0;p<h.length;p++){var v=h[p],C=v.getSnapshot;v=v.value;try{if(!Pi(C(),v))return!1}catch{return!1}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ia(s,o,h,p){o&=~Mg,o&=~Za,s.suspendedLanes|=o,s.pingedLanes&=~o,p&&(s.warmLanes|=o),p=s.expirationTimes;for(var v=o;0<v;){var C=31-Qt(v),I=1<<C;p[C]=-1,v&=~I}h!==0&&zo(s,h,o)}function gd(){return($e&6)===0?(Xc(0),!1):!0}function Rg(){if(Oe!==null){if(en===0)var s=Oe.return;else s=Oe,ts=Ha=null,jm(s),al=null,Ic=0,s=Oe;for(;s!==null;)dC(s.alternate,s),s=s.return;Oe=null}}function ml(s,o){var h=s.timeoutHandle;h!==-1&&(s.timeoutHandle=-1,TR(h)),h=s.cancelPendingCommit,h!==null&&(s.cancelPendingCommit=null,h()),hs=0,Rg(),un=s,Oe=h=Zr(s.current,null),Fe=o,en=0,zi=null,$s=!1,fl=Ae(s,o),wg=!1,pl=Gi=Mg=Za=ta=bn=0,Si=Wc=null,Sg=!1,(o&8)!==0&&(o|=o&32);var p=s.entangledLanes;if(p!==0)for(s=s.entanglements,p&=o;0<p;){var v=31-Qt(p),C=1<<v;o|=s[v],p&=~C}return us=o,Fh(),h}function NC(s,o){Me=null,G.H=Fc,o===sl||o===Wh?(o=Zb(),en=3):o===Om?(o=Zb(),en=4):en=o===cg?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,zi=o,Oe===null&&(bn=1,ad(s,Zi(o,s.current)))}function PC(){var s=ki.current;return s===null?!0:(Fe&4194048)===Fe?nr===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?s===nr:!1}function FC(){var s=G.H;return G.H=Fc,s===null?Fc:s}function kC(){var s=G.A;return G.A=oR,s}function vd(){bn=4,$s||(Fe&4194048)!==Fe&&ki.current!==null||(fl=!0),(ta&134217727)===0&&(Za&134217727)===0||un===null||ia(un,Fe,Gi,!1)}function Lg(s,o,h){var p=$e;$e|=2;var v=FC(),C=kC();(un!==s||Fe!==o)&&(md=null,ml(s,o)),o=!1;var I=bn;t:do try{if(en!==0&&Oe!==null){var k=Oe,K=zi;switch(en){case 8:Rg(),I=6;break t;case 3:case 2:case 9:case 6:ki.current===null&&(o=!0);var dt=en;if(en=0,zi=null,gl(s,k,K,dt),h&&fl){I=0;break t}break;default:dt=en,en=0,zi=null,gl(s,k,K,dt)}}uR(),I=bn;break}catch(_t){NC(s,_t)}while(!0);return o&&s.shellSuspendCounter++,ts=Ha=null,$e=p,G.H=v,G.A=C,Oe===null&&(un=null,Fe=0,Fh()),I}function uR(){for(;Oe!==null;)QC(Oe)}function hR(s,o){var h=$e;$e|=2;var p=FC(),v=kC();un!==s||Fe!==o?(md=null,Ad=gt()+500,ml(s,o)):fl=Ae(s,o);t:do try{if(en!==0&&Oe!==null){o=Oe;var C=zi;e:switch(en){case 1:en=0,zi=null,gl(s,o,C,1);break;case 2:case 9:if(Kb(C)){en=0,zi=null,zC(o);break}o=function(){en!==2&&en!==9||un!==s||(en=7),Pr(s)},C.then(o,o);break t;case 3:en=7;break t;case 4:en=5;break t;case 7:Kb(C)?(en=0,zi=null,zC(o)):(en=0,zi=null,gl(s,o,C,7));break;case 5:var I=null;switch(Oe.tag){case 26:I=Oe.memoizedState;case 5:case 27:var k=Oe;if(I?M_(I):k.stateNode.complete){en=0,zi=null;var K=k.sibling;if(K!==null)Oe=K;else{var dt=k.return;dt!==null?(Oe=dt,yd(dt)):Oe=null}break e}}en=0,zi=null,gl(s,o,C,5);break;case 6:en=0,zi=null,gl(s,o,C,6);break;case 8:Rg(),bn=6;break t;default:throw Error(i(462))}}dR();break}catch(_t){NC(s,_t)}while(!0);return ts=Ha=null,G.H=p,G.A=v,$e=h,Oe!==null?0:(un=null,Fe=0,Fh(),bn)}function dR(){for(;Oe!==null&&!Y();)QC(Oe)}function QC(s){var o=uC(s.alternate,s,us);s.memoizedProps=s.pendingProps,o===null?yd(s):Oe=o}function zC(s){var o=s,h=o.alternate;switch(o.tag){case 15:case 0:o=rC(h,o,o.pendingProps,o.type,void 0,Fe);break;case 11:o=rC(h,o,o.pendingProps,o.type.render,o.ref,Fe);break;case 5:jm(o);default:dC(h,o),o=Oe=kb(o,us),o=uC(h,o,us)}s.memoizedProps=s.pendingProps,o===null?yd(s):Oe=o}function gl(s,o,h,p){ts=Ha=null,jm(o),al=null,Ic=0;var v=o.return;try{if(tR(s,v,o,h,Fe)){bn=1,ad(s,Zi(h,s.current)),Oe=null;return}}catch(C){if(v!==null)throw Oe=v,C;bn=1,ad(s,Zi(h,s.current)),Oe=null;return}o.flags&32768?(Ge||p===1?s=!0:fl||(Fe&536870912)!==0?s=!1:($s=s=!0,(p===2||p===9||p===3||p===6)&&(p=ki.current,p!==null&&p.tag===13&&(p.flags|=16384))),GC(o,s)):yd(o)}function yd(s){var o=s;do{if((o.flags&32768)!==0){GC(o,$s);return}s=o.return;var h=iR(o.alternate,o,us);if(h!==null){Oe=h;return}if(o=o.sibling,o!==null){Oe=o;return}Oe=o=s}while(o!==null);bn===0&&(bn=5)}function GC(s,o){do{var h=rR(s.alternate,s);if(h!==null){h.flags&=32767,Oe=h;return}if(h=s.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!o&&(s=s.sibling,s!==null)){Oe=s;return}Oe=s=h}while(s!==null);bn=6,Oe=null}function HC(s,o,h,p,v,C,I,k,K){s.cancelPendingCommit=null;do Ed();while(Fn!==0);if(($e&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(C=o.lanes|o.childLanes,C|=Em,_n(s,h,C,I,k,K),s===un&&(Oe=un=null,Fe=0),Al=o,na=s,hs=h,Bg=C,Tg=v,LC=p,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,mR(it,function(){return XC(),null})):(s.callbackNode=null,s.callbackPriority=0),p=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||p){p=G.T,G.T=null,v=X.p,X.p=2,I=$e,$e|=4;try{sR(s,o,h)}finally{$e=I,X.p=v,G.T=p}}Fn=1,VC(),qC(),WC()}}function VC(){if(Fn===1){Fn=0;var s=na,o=Al,h=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||h){h=G.T,G.T=null;var p=X.p;X.p=2;var v=$e;$e|=4;try{_C(o,s);var C=Vg,I=Ib(s.containerInfo),k=C.focusedElem,K=C.selectionRange;if(I!==k&&k&&k.ownerDocument&&Tb(k.ownerDocument.documentElement,k)){if(K!==null&&Am(k)){var dt=K.start,_t=K.end;if(_t===void 0&&(_t=dt),"selectionStart"in k)k.selectionStart=dt,k.selectionEnd=Math.min(_t,k.value.length);else{var Bt=k.ownerDocument||document,pt=Bt&&Bt.defaultView||window;if(pt.getSelection){var vt=pt.getSelection(),re=k.textContent.length,ge=Math.min(K.start,re),on=K.end===void 0?ge:Math.min(K.end,re);!vt.extend&&ge>on&&(I=on,on=ge,ge=I);var at=Bb(k,ge),et=Bb(k,on);if(at&&et&&(vt.rangeCount!==1||vt.anchorNode!==at.node||vt.anchorOffset!==at.offset||vt.focusNode!==et.node||vt.focusOffset!==et.offset)){var ht=Bt.createRange();ht.setStart(at.node,at.offset),vt.removeAllRanges(),ge>on?(vt.addRange(ht),vt.extend(et.node,et.offset)):(ht.setEnd(et.node,et.offset),vt.addRange(ht))}}}}for(Bt=[],vt=k;vt=vt.parentNode;)vt.nodeType===1&&Bt.push({element:vt,left:vt.scrollLeft,top:vt.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<Bt.length;k++){var St=Bt[k];St.element.scrollLeft=St.left,St.element.scrollTop=St.top}}Ld=!!Hg,Vg=Hg=null}finally{$e=v,X.p=p,G.T=h}}s.current=o,Fn=2}}function qC(){if(Fn===2){Fn=0;var s=na,o=Al,h=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||h){h=G.T,G.T=null;var p=X.p;X.p=2;var v=$e;$e|=4;try{yC(s,o.alternate,o)}finally{$e=v,X.p=p,G.T=h}}Fn=3}}function WC(){if(Fn===4||Fn===3){Fn=0,lt();var s=na,o=Al,h=hs,p=LC;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Fn=5:(Fn=0,Al=na=null,jC(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(ea=null),hr(h),o=o.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Pt,o,void 0,(o.current.flags&128)===128)}catch{}if(p!==null){o=G.T,v=X.p,X.p=2,G.T=null;try{for(var C=s.onRecoverableError,I=0;I<p.length;I++){var k=p[I];C(k.value,{componentStack:k.stack})}}finally{G.T=o,X.p=v}}(hs&3)!==0&&Ed(),Pr(s),v=s.pendingLanes,(h&261930)!==0&&(v&42)!==0?s===Ig?jc++:(jc=0,Ig=s):jc=0,Xc(0)}}function jC(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Bc(o)))}function Ed(){return VC(),qC(),WC(),XC()}function XC(){if(Fn!==5)return!1;var s=na,o=Bg;Bg=0;var h=hr(hs),p=G.T,v=X.p;try{X.p=32>h?32:h,G.T=null,h=Tg,Tg=null;var C=na,I=hs;if(Fn=0,Al=na=null,hs=0,($e&6)!==0)throw Error(i(331));var k=$e;if($e|=4,TC(C.current),MC(C,C.current,I,h),$e=k,Xc(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Pt,C)}catch{}return!0}finally{X.p=v,G.T=p,jC(s,o)}}function YC(s,o,h){o=Zi(h,o),o=lg(s.stateNode,o,2),s=Ys(s,o,2),s!==null&&(De(s,2),Pr(s))}function nn(s,o,h){if(s.tag===3)YC(s,s,h);else for(;o!==null;){if(o.tag===3){YC(o,s,h);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ea===null||!ea.has(p))){s=Zi(h,s),h=Kx(2),p=Ys(o,h,2),p!==null&&(Jx(h,p,o,s),De(p,2),Pr(p));break}}o=o.return}}function Dg(s,o,h){var p=s.pingCache;if(p===null){p=s.pingCache=new lR;var v=new Set;p.set(o,v)}else v=p.get(o),v===void 0&&(v=new Set,p.set(o,v));v.has(h)||(wg=!0,v.add(h),s=fR.bind(null,s,o,h),o.then(s,s))}function fR(s,o,h){var p=s.pingCache;p!==null&&p.delete(o),s.pingedLanes|=s.suspendedLanes&h,s.warmLanes&=~h,un===s&&(Fe&h)===h&&(bn===4||bn===3&&(Fe&62914560)===Fe&&300>gt()-pd?($e&2)===0&&ml(s,0):Mg|=h,pl===Fe&&(pl=0)),Pr(s)}function KC(s,o){o===0&&(o=Yt()),s=Qa(s,o),s!==null&&(De(s,o),Pr(s))}function pR(s){var o=s.memoizedState,h=0;o!==null&&(h=o.retryLane),KC(s,h)}function AR(s,o){var h=0;switch(s.tag){case 31:case 13:var p=s.stateNode,v=s.memoizedState;v!==null&&(h=v.retryLane);break;case 19:p=s.stateNode;break;case 22:p=s.stateNode._retryCache;break;default:throw Error(i(314))}p!==null&&p.delete(o),KC(s,h)}function mR(s,o){return P(s,o)}var bd=null,vl=null,Ug=!1,xd=!1,Og=!1,ra=0;function Pr(s){s!==vl&&s.next===null&&(vl===null?bd=vl=s:vl=vl.next=s),xd=!0,Ug||(Ug=!0,vR())}function Xc(s,o){if(!Og&&xd){Og=!0;do for(var h=!1,p=bd;p!==null;){if(s!==0){var v=p.pendingLanes;if(v===0)var C=0;else{var I=p.suspendedLanes,k=p.pingedLanes;C=(1<<31-Qt(42|s)+1)-1,C&=v&~(I&~k),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(h=!0,t_(p,C))}else C=Fe,C=Zt(p,p===un?C:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(C&3)===0||Ae(p,C)||(h=!0,t_(p,C));p=p.next}while(h);Og=!1}}function gR(){JC()}function JC(){xd=Ug=!1;var s=0;ra!==0&&BR()&&(s=ra);for(var o=gt(),h=null,p=bd;p!==null;){var v=p.next,C=ZC(p,o);C===0?(p.next=null,h===null?bd=v:h.next=v,v===null&&(vl=h)):(h=p,(s!==0||(C&3)!==0)&&(xd=!0)),p=v}Fn!==0&&Fn!==5||Xc(s),ra!==0&&(ra=0)}function ZC(s,o){for(var h=s.suspendedLanes,p=s.pingedLanes,v=s.expirationTimes,C=s.pendingLanes&-62914561;0<C;){var I=31-Qt(C),k=1<<I,K=v[I];K===-1?((k&h)===0||(k&p)!==0)&&(v[I]=Xt(k,o)):K<=o&&(s.expiredLanes|=k),C&=~k}if(o=un,h=Fe,h=Zt(s,s===o?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p=s.callbackNode,h===0||s===o&&(en===2||en===9)||s.cancelPendingCommit!==null)return p!==null&&p!==null&&q(p),s.callbackNode=null,s.callbackPriority=0;if((h&3)===0||Ae(s,h)){if(o=h&-h,o===s.callbackPriority)return o;switch(p!==null&&q(p),hr(h)){case 2:case 8:h=N;break;case 32:h=it;break;case 268435456:h=Dt;break;default:h=it}return p=$C.bind(null,s),h=P(h,p),s.callbackPriority=o,s.callbackNode=h,o}return p!==null&&p!==null&&q(p),s.callbackPriority=2,s.callbackNode=null,2}function $C(s,o){if(Fn!==0&&Fn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var h=s.callbackNode;if(Ed()&&s.callbackNode!==h)return null;var p=Fe;return p=Zt(s,s===un?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p===0?null:(UC(s,p,o),ZC(s,gt()),s.callbackNode!=null&&s.callbackNode===h?$C.bind(null,s):null)}function t_(s,o){if(Ed())return null;UC(s,o,!0)}function vR(){IR(function(){($e&6)!==0?P(H,gR):JC()})}function Ng(){if(ra===0){var s=il;s===0&&(s=wt,wt<<=1,(wt&261888)===0&&(wt=256)),ra=s}return ra}function e_(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ih(""+s)}function n_(s,o){var h=o.ownerDocument.createElement("input");return h.name=o.name,h.value=o.value,s.id&&h.setAttribute("form",s.id),o.parentNode.insertBefore(h,o),s=new FormData(s),h.parentNode.removeChild(h),s}function yR(s,o,h,p,v){if(o==="submit"&&h&&h.stateNode===v){var C=e_((v[jn]||null).action),I=p.submitter;I&&(o=(o=I[jn]||null)?e_(o.formAction):I.getAttribute("formAction"),o!==null&&(C=o,I=null));var k=new Uh("action","action",null,p,v);s.push({event:k,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(ra!==0){var K=I?n_(v,I):new FormData(v);ng(h,{pending:!0,data:K,method:v.method,action:C},null,K)}}else typeof C=="function"&&(k.preventDefault(),K=I?n_(v,I):new FormData(v),ng(h,{pending:!0,data:K,method:v.method,action:C},C,K))},currentTarget:v}]})}}for(var Pg=0;Pg<ym.length;Pg++){var Fg=ym[Pg],ER=Fg.toLowerCase(),bR=Fg[0].toUpperCase()+Fg.slice(1);Ar(ER,"on"+bR)}Ar(Db,"onAnimationEnd"),Ar(Ub,"onAnimationIteration"),Ar(Ob,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(PI,"onTransitionRun"),Ar(FI,"onTransitionStart"),Ar(kI,"onTransitionCancel"),Ar(Nb,"onTransitionEnd"),Wt("onMouseEnter",["mouseout","mouseover"]),Wt("onMouseLeave",["mouseout","mouseover"]),Wt("onPointerEnter",["pointerout","pointerover"]),Wt("onPointerLeave",["pointerout","pointerover"]),Nt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Nt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Nt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Nt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Nt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Nt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yc));function i_(s,o){o=(o&4)!==0;for(var h=0;h<s.length;h++){var p=s[h],v=p.event;p=p.listeners;t:{var C=void 0;if(o)for(var I=p.length-1;0<=I;I--){var k=p[I],K=k.instance,dt=k.currentTarget;if(k=k.listener,K!==C&&v.isPropagationStopped())break t;C=k,v.currentTarget=dt;try{C(v)}catch(_t){Ph(_t)}v.currentTarget=null,C=K}else for(I=0;I<p.length;I++){if(k=p[I],K=k.instance,dt=k.currentTarget,k=k.listener,K!==C&&v.isPropagationStopped())break t;C=k,v.currentTarget=dt;try{C(v)}catch(_t){Ph(_t)}v.currentTarget=null,C=K}}}}function Ne(s,o){var h=o[qo];h===void 0&&(h=o[qo]=new Set);var p=s+"__bubble";h.has(p)||(r_(o,s,2,!1),h.add(p))}function kg(s,o,h){var p=0;o&&(p|=4),r_(h,s,p,o)}var Cd="_reactListening"+Math.random().toString(36).slice(2);function Qg(s){if(!s[Cd]){s[Cd]=!0,mt.forEach(function(h){h!=="selectionchange"&&(xR.has(h)||kg(h,!1,s),kg(h,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Cd]||(o[Cd]=!0,kg("selectionchange",!1,o))}}function r_(s,o,h,p){switch(D_(o)){case 2:var v=KR;break;case 8:v=JR;break;default:v=e0}h=v.bind(null,o,h,s),v=void 0,!am||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),p?v!==void 0?s.addEventListener(o,h,{capture:!0,passive:v}):s.addEventListener(o,h,!0):v!==void 0?s.addEventListener(o,h,{passive:v}):s.addEventListener(o,h,!1)}function zg(s,o,h,p,v){var C=p;if((o&1)===0&&(o&2)===0&&p!==null)t:for(;;){if(p===null)return;var I=p.tag;if(I===3||I===4){var k=p.stateNode.containerInfo;if(k===v)break;if(I===4)for(I=p.return;I!==null;){var K=I.tag;if((K===3||K===4)&&I.stateNode.containerInfo===v)return;I=I.return}for(;k!==null;){if(I=ks(k),I===null)return;if(K=I.tag,K===5||K===6||K===26||K===27){p=C=I;continue t}k=k.parentNode}}p=p.return}cb(function(){var dt=C,_t=rm(h),Bt=[];t:{var pt=Pb.get(s);if(pt!==void 0){var vt=Uh,re=s;switch(s){case"keypress":if(Lh(h)===0)break t;case"keydown":case"keyup":vt=AI;break;case"focusin":re="focus",vt=um;break;case"focusout":re="blur",vt=um;break;case"beforeblur":case"afterblur":vt=um;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vt=db;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vt=iI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vt=vI;break;case Db:case Ub:case Ob:vt=aI;break;case Nb:vt=EI;break;case"scroll":case"scrollend":vt=eI;break;case"wheel":vt=xI;break;case"copy":case"cut":case"paste":vt=lI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vt=pb;break;case"toggle":case"beforetoggle":vt=_I}var ge=(o&4)!==0,on=!ge&&(s==="scroll"||s==="scrollend"),at=ge?pt!==null?pt+"Capture":null:pt;ge=[];for(var et=dt,ht;et!==null;){var St=et;if(ht=St.stateNode,St=St.tag,St!==5&&St!==26&&St!==27||ht===null||at===null||(St=gc(et,at),St!=null&&ge.push(Kc(et,St,ht))),on)break;et=et.return}0<ge.length&&(pt=new vt(pt,re,null,h,_t),Bt.push({event:pt,listeners:ge}))}}if((o&7)===0){t:{if(pt=s==="mouseover"||s==="pointerover",vt=s==="mouseout"||s==="pointerout",pt&&h!==im&&(re=h.relatedTarget||h.fromElement)&&(ks(re)||re[fr]))break t;if((vt||pt)&&(pt=_t.window===_t?_t:(pt=_t.ownerDocument)?pt.defaultView||pt.parentWindow:window,vt?(re=h.relatedTarget||h.toElement,vt=dt,re=re?ks(re):null,re!==null&&(on=a(re),ge=re.tag,re!==on||ge!==5&&ge!==27&&ge!==6)&&(re=null)):(vt=null,re=dt),vt!==re)){if(ge=db,St="onMouseLeave",at="onMouseEnter",et="mouse",(s==="pointerout"||s==="pointerover")&&(ge=pb,St="onPointerLeave",at="onPointerEnter",et="pointer"),on=vt==null?pt:Q(vt),ht=re==null?pt:Q(re),pt=new ge(St,et+"leave",vt,h,_t),pt.target=on,pt.relatedTarget=ht,St=null,ks(_t)===dt&&(ge=new ge(at,et+"enter",re,h,_t),ge.target=ht,ge.relatedTarget=on,St=ge),on=St,vt&&re)e:{for(ge=CR,at=vt,et=re,ht=0,St=at;St;St=ge(St))ht++;St=0;for(var fe=et;fe;fe=ge(fe))St++;for(;0<ht-St;)at=ge(at),ht--;for(;0<St-ht;)et=ge(et),St--;for(;ht--;){if(at===et||et!==null&&at===et.alternate){ge=at;break e}at=ge(at),et=ge(et)}ge=null}else ge=null;vt!==null&&s_(Bt,pt,vt,ge,!1),re!==null&&on!==null&&s_(Bt,on,re,ge,!0)}}t:{if(pt=dt?Q(dt):window,vt=pt.nodeName&&pt.nodeName.toLowerCase(),vt==="select"||vt==="input"&&pt.type==="file")var Ke=xb;else if(Eb(pt))if(Cb)Ke=UI;else{Ke=LI;var ae=RI}else vt=pt.nodeName,!vt||vt.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?dt&&nm(dt.elementType)&&(Ke=xb):Ke=DI;if(Ke&&(Ke=Ke(s,dt))){bb(Bt,Ke,h,_t);break t}ae&&ae(s,pt,dt),s==="focusout"&&dt&&pt.type==="number"&&dt.memoizedProps.value!=null&&Dr(pt,"number",pt.value)}switch(ae=dt?Q(dt):window,s){case"focusin":(Eb(ae)||ae.contentEditable==="true")&&(Yo=ae,mm=dt,wc=null);break;case"focusout":wc=mm=Yo=null;break;case"mousedown":gm=!0;break;case"contextmenu":case"mouseup":case"dragend":gm=!1,Rb(Bt,h,_t);break;case"selectionchange":if(NI)break;case"keydown":case"keyup":Rb(Bt,h,_t)}var Be;if(dm)t:{switch(s){case"compositionstart":var ke="onCompositionStart";break t;case"compositionend":ke="onCompositionEnd";break t;case"compositionupdate":ke="onCompositionUpdate";break t}ke=void 0}else Xo?vb(s,h)&&(ke="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(ke="onCompositionStart");ke&&(Ab&&h.locale!=="ko"&&(Xo||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Xo&&(Be=ub()):(Gs=_t,om="value"in Gs?Gs.value:Gs.textContent,Xo=!0)),ae=_d(dt,ke),0<ae.length&&(ke=new fb(ke,s,null,h,_t),Bt.push({event:ke,listeners:ae}),Be?ke.data=Be:(Be=yb(h),Be!==null&&(ke.data=Be)))),(Be=MI?SI(s,h):BI(s,h))&&(ke=_d(dt,"onBeforeInput"),0<ke.length&&(ae=new fb("onBeforeInput","beforeinput",null,h,_t),Bt.push({event:ae,listeners:ke}),ae.data=Be)),yR(Bt,s,dt,h,_t)}i_(Bt,o)})}function Kc(s,o,h){return{instance:s,listener:o,currentTarget:h}}function _d(s,o){for(var h=o+"Capture",p=[];s!==null;){var v=s,C=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||C===null||(v=gc(s,h),v!=null&&p.unshift(Kc(s,v,C)),v=gc(s,o),v!=null&&p.push(Kc(s,v,C))),s.tag===3)return p;s=s.return}return[]}function CR(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function s_(s,o,h,p,v){for(var C=o._reactName,I=[];h!==null&&h!==p;){var k=h,K=k.alternate,dt=k.stateNode;if(k=k.tag,K!==null&&K===p)break;k!==5&&k!==26&&k!==27||dt===null||(K=dt,v?(dt=gc(h,C),dt!=null&&I.unshift(Kc(h,dt,K))):v||(dt=gc(h,C),dt!=null&&I.push(Kc(h,dt,K)))),h=h.return}I.length!==0&&s.push({event:o,listeners:I})}var _R=/\r\n?/g,wR=/\u0000|\uFFFD/g;function a_(s){return(typeof s=="string"?s:""+s).replace(_R,`
`).replace(wR,"")}function o_(s,o){return o=a_(o),a_(s)===o}function an(s,o,h,p,v,C){switch(h){case"children":typeof p=="string"?o==="body"||o==="textarea"&&p===""||cn(s,p):(typeof p=="number"||typeof p=="bigint")&&o!=="body"&&cn(s,""+p);break;case"className":Ue(s,"class",p);break;case"tabIndex":Ue(s,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Ue(s,h,p);break;case"style":mc(s,p,C);break;case"data":if(o!=="object"){Ue(s,"data",p);break}case"src":case"href":if(p===""&&(o!=="a"||h!=="href")){s.removeAttribute(h);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(h);break}p=Ih(""+p),s.setAttribute(h,p);break;case"action":case"formAction":if(typeof p=="function"){s.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(h==="formAction"?(o!=="input"&&an(s,o,"name",v.name,v,null),an(s,o,"formEncType",v.formEncType,v,null),an(s,o,"formMethod",v.formMethod,v,null),an(s,o,"formTarget",v.formTarget,v,null)):(an(s,o,"encType",v.encType,v,null),an(s,o,"method",v.method,v,null),an(s,o,"target",v.target,v,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(h);break}p=Ih(""+p),s.setAttribute(h,p);break;case"onClick":p!=null&&(s.onclick=Kr);break;case"onScroll":p!=null&&Ne("scroll",s);break;case"onScrollEnd":p!=null&&Ne("scrollend",s);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(h=p.__html,h!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=h}}break;case"multiple":s.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":s.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){s.removeAttribute("xlink:href");break}h=Ih(""+p),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(h,""+p):s.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(h,""):s.removeAttribute(h);break;case"capture":case"download":p===!0?s.setAttribute(h,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(h,p):s.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?s.setAttribute(h,p):s.removeAttribute(h);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?s.removeAttribute(h):s.setAttribute(h,p);break;case"popover":Ne("beforetoggle",s),Ne("toggle",s),ce(s,"popover",p);break;case"xlinkActuate":Re(s,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Re(s,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Re(s,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Re(s,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Re(s,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Re(s,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Re(s,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Re(s,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Re(s,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":ce(s,"is",p);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=$T.get(h)||h,ce(s,h,p))}}function Gg(s,o,h,p,v,C){switch(h){case"style":mc(s,p,C);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(h=p.__html,h!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=h}}break;case"children":typeof p=="string"?cn(s,p):(typeof p=="number"||typeof p=="bigint")&&cn(s,""+p);break;case"onScroll":p!=null&&Ne("scroll",s);break;case"onScrollEnd":p!=null&&Ne("scrollend",s);break;case"onClick":p!=null&&(s.onclick=Kr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ot.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(v=h.endsWith("Capture"),o=h.slice(2,v?h.length-7:void 0),C=s[jn]||null,C=C!=null?C[h]:null,typeof C=="function"&&s.removeEventListener(o,C,v),typeof p=="function")){typeof C!="function"&&C!==null&&(h in s?s[h]=null:s.hasAttribute(h)&&s.removeAttribute(h)),s.addEventListener(o,p,v);break t}h in s?s[h]=p:p===!0?s.setAttribute(h,""):ce(s,h,p)}}}function Jn(s,o,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",s),Ne("load",s);var p=!1,v=!1,C;for(C in h)if(h.hasOwnProperty(C)){var I=h[C];if(I!=null)switch(C){case"src":p=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:an(s,o,C,I,h,null)}}v&&an(s,o,"srcSet",h.srcSet,h,null),p&&an(s,o,"src",h.src,h,null);return;case"input":Ne("invalid",s);var k=C=I=v=null,K=null,dt=null;for(p in h)if(h.hasOwnProperty(p)){var _t=h[p];if(_t!=null)switch(p){case"name":v=_t;break;case"type":I=_t;break;case"checked":K=_t;break;case"defaultChecked":dt=_t;break;case"value":C=_t;break;case"defaultValue":k=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(i(137,o));break;default:an(s,o,p,_t,h,null)}}Lr(s,C,k,K,dt,I,v,!1);return;case"select":Ne("invalid",s),p=I=C=null;for(v in h)if(h.hasOwnProperty(v)&&(k=h[v],k!=null))switch(v){case"value":C=k;break;case"defaultValue":I=k;break;case"multiple":p=k;default:an(s,o,v,k,h,null)}o=C,h=I,s.multiple=!!p,o!=null?ze(s,!!p,o,!1):h!=null&&ze(s,!!p,h,!0);return;case"textarea":Ne("invalid",s),C=v=p=null;for(I in h)if(h.hasOwnProperty(I)&&(k=h[I],k!=null))switch(I){case"value":p=k;break;case"defaultValue":v=k;break;case"children":C=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:an(s,o,I,k,h,null)}pr(s,p,v,C);return;case"option":for(K in h)if(h.hasOwnProperty(K)&&(p=h[K],p!=null))switch(K){case"selected":s.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:an(s,o,K,p,h,null)}return;case"dialog":Ne("beforetoggle",s),Ne("toggle",s),Ne("cancel",s),Ne("close",s);break;case"iframe":case"object":Ne("load",s);break;case"video":case"audio":for(p=0;p<Yc.length;p++)Ne(Yc[p],s);break;case"image":Ne("error",s),Ne("load",s);break;case"details":Ne("toggle",s);break;case"embed":case"source":case"link":Ne("error",s),Ne("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(dt in h)if(h.hasOwnProperty(dt)&&(p=h[dt],p!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:an(s,o,dt,p,h,null)}return;default:if(nm(o)){for(_t in h)h.hasOwnProperty(_t)&&(p=h[_t],p!==void 0&&Gg(s,o,_t,p,h,void 0));return}}for(k in h)h.hasOwnProperty(k)&&(p=h[k],p!=null&&an(s,o,k,p,h,null))}function MR(s,o,h,p){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,C=null,I=null,k=null,K=null,dt=null,_t=null;for(vt in h){var Bt=h[vt];if(h.hasOwnProperty(vt)&&Bt!=null)switch(vt){case"checked":break;case"value":break;case"defaultValue":K=Bt;default:p.hasOwnProperty(vt)||an(s,o,vt,null,p,Bt)}}for(var pt in p){var vt=p[pt];if(Bt=h[pt],p.hasOwnProperty(pt)&&(vt!=null||Bt!=null))switch(pt){case"type":C=vt;break;case"name":v=vt;break;case"checked":dt=vt;break;case"defaultChecked":_t=vt;break;case"value":I=vt;break;case"defaultValue":k=vt;break;case"children":case"dangerouslySetInnerHTML":if(vt!=null)throw Error(i(137,o));break;default:vt!==Bt&&an(s,o,pt,vt,p,Bt)}}xi(s,I,k,K,dt,_t,C,v);return;case"select":vt=I=k=pt=null;for(C in h)if(K=h[C],h.hasOwnProperty(C)&&K!=null)switch(C){case"value":break;case"multiple":vt=K;default:p.hasOwnProperty(C)||an(s,o,C,null,p,K)}for(v in p)if(C=p[v],K=h[v],p.hasOwnProperty(v)&&(C!=null||K!=null))switch(v){case"value":pt=C;break;case"defaultValue":k=C;break;case"multiple":I=C;default:C!==K&&an(s,o,v,C,p,K)}o=k,h=I,p=vt,pt!=null?ze(s,!!h,pt,!1):!!p!=!!h&&(o!=null?ze(s,!!h,o,!0):ze(s,!!h,h?[]:"",!1));return;case"textarea":vt=pt=null;for(k in h)if(v=h[k],h.hasOwnProperty(k)&&v!=null&&!p.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:an(s,o,k,null,p,v)}for(I in p)if(v=p[I],C=h[I],p.hasOwnProperty(I)&&(v!=null||C!=null))switch(I){case"value":pt=v;break;case"defaultValue":vt=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==C&&an(s,o,I,v,p,C)}Rn(s,pt,vt);return;case"option":for(var re in h)if(pt=h[re],h.hasOwnProperty(re)&&pt!=null&&!p.hasOwnProperty(re))switch(re){case"selected":s.selected=!1;break;default:an(s,o,re,null,p,pt)}for(K in p)if(pt=p[K],vt=h[K],p.hasOwnProperty(K)&&pt!==vt&&(pt!=null||vt!=null))switch(K){case"selected":s.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:an(s,o,K,pt,p,vt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in h)pt=h[ge],h.hasOwnProperty(ge)&&pt!=null&&!p.hasOwnProperty(ge)&&an(s,o,ge,null,p,pt);for(dt in p)if(pt=p[dt],vt=h[dt],p.hasOwnProperty(dt)&&pt!==vt&&(pt!=null||vt!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(i(137,o));break;default:an(s,o,dt,pt,p,vt)}return;default:if(nm(o)){for(var on in h)pt=h[on],h.hasOwnProperty(on)&&pt!==void 0&&!p.hasOwnProperty(on)&&Gg(s,o,on,void 0,p,pt);for(_t in p)pt=p[_t],vt=h[_t],!p.hasOwnProperty(_t)||pt===vt||pt===void 0&&vt===void 0||Gg(s,o,_t,pt,p,vt);return}}for(var at in h)pt=h[at],h.hasOwnProperty(at)&&pt!=null&&!p.hasOwnProperty(at)&&an(s,o,at,null,p,pt);for(Bt in p)pt=p[Bt],vt=h[Bt],!p.hasOwnProperty(Bt)||pt===vt||pt==null&&vt==null||an(s,o,Bt,pt,p,vt)}function l_(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function SR(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,h=performance.getEntriesByType("resource"),p=0;p<h.length;p++){var v=h[p],C=v.transferSize,I=v.initiatorType,k=v.duration;if(C&&k&&l_(I)){for(I=0,k=v.responseEnd,p+=1;p<h.length;p++){var K=h[p],dt=K.startTime;if(dt>k)break;var _t=K.transferSize,Bt=K.initiatorType;_t&&l_(Bt)&&(K=K.responseEnd,I+=_t*(K<k?1:(k-dt)/(K-dt)))}if(--p,o+=8*(C+I)/(v.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Hg=null,Vg=null;function wd(s){return s.nodeType===9?s:s.ownerDocument}function c_(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function u_(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function qg(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Wg=null;function BR(){var s=window.event;return s&&s.type==="popstate"?s===Wg?!1:(Wg=s,!0):(Wg=null,!1)}var h_=typeof setTimeout=="function"?setTimeout:void 0,TR=typeof clearTimeout=="function"?clearTimeout:void 0,d_=typeof Promise=="function"?Promise:void 0,IR=typeof queueMicrotask=="function"?queueMicrotask:typeof d_<"u"?function(s){return d_.resolve(null).then(s).catch(RR)}:h_;function RR(s){setTimeout(function(){throw s})}function sa(s){return s==="head"}function f_(s,o){var h=o,p=0;do{var v=h.nextSibling;if(s.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"||h==="/&"){if(p===0){s.removeChild(v),xl(o);return}p--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")p++;else if(h==="html")Jc(s.ownerDocument.documentElement);else if(h==="head"){h=s.ownerDocument.head,Jc(h);for(var C=h.firstChild;C;){var I=C.nextSibling,k=C.nodeName;C[Na]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&C.rel.toLowerCase()==="stylesheet"||h.removeChild(C),C=I}}else h==="body"&&Jc(s.ownerDocument.body);h=v}while(h);xl(o)}function p_(s,o){var h=s;s=0;do{var p=h.nextSibling;if(h.nodeType===1?o?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(o?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),p&&p.nodeType===8)if(h=p.data,h==="/$"){if(s===0)break;s--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||s++;h=p}while(h)}function jg(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var h=o;switch(o=o.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":jg(h),Ac(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}s.removeChild(h)}}function LR(s,o,h,p){for(;s.nodeType===1;){var v=h;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!p&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(p){if(!s[Na])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(C=s.getAttribute("rel"),C==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(C!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(C=s.getAttribute("src"),(C!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&C&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var C=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===C)return s}else return s;if(s=ir(s.nextSibling),s===null)break}return null}function DR(s,o,h){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!h||(s=ir(s.nextSibling),s===null))return null;return s}function A_(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=ir(s.nextSibling),s===null))return null;return s}function Xg(s){return s.data==="$?"||s.data==="$~"}function Yg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function UR(s,o){var h=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||h.readyState!=="loading")o();else{var p=function(){o(),h.removeEventListener("DOMContentLoaded",p)};h.addEventListener("DOMContentLoaded",p),s._reactRetry=p}}function ir(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var Kg=null;function m_(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"||h==="/&"){if(o===0)return ir(s.nextSibling);o--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||o++}s=s.nextSibling}return null}function g_(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(o===0)return s;o--}else h!=="/$"&&h!=="/&"||o++}s=s.previousSibling}return null}function v_(s,o,h){switch(o=wd(h),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Jc(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Ac(s)}var rr=new Map,y_=new Set;function Md(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ds=X.d;X.d={f:OR,r:NR,D:PR,C:FR,L:kR,m:QR,X:GR,S:zR,M:HR};function OR(){var s=ds.f(),o=gd();return s||o}function NR(s){var o=Qs(s);o!==null&&o.tag===5&&o.type==="form"?Nx(o):ds.r(s)}var yl=typeof document>"u"?null:document;function E_(s,o,h){var p=yl;if(p&&typeof o=="string"&&o){var v=hn(o);v='link[rel="'+s+'"][href="'+v+'"]',typeof h=="string"&&(v+='[crossorigin="'+h+'"]'),y_.has(v)||(y_.add(v),s={rel:s,crossOrigin:h,href:o},p.querySelector(v)===null&&(o=p.createElement("link"),Jn(o,"link",s),ct(o),p.head.appendChild(o)))}}function PR(s){ds.D(s),E_("dns-prefetch",s,null)}function FR(s,o){ds.C(s,o),E_("preconnect",s,o)}function kR(s,o,h){ds.L(s,o,h);var p=yl;if(p&&s&&o){var v='link[rel="preload"][as="'+hn(o)+'"]';o==="image"&&h&&h.imageSrcSet?(v+='[imagesrcset="'+hn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(v+='[imagesizes="'+hn(h.imageSizes)+'"]')):v+='[href="'+hn(s)+'"]';var C=v;switch(o){case"style":C=El(s);break;case"script":C=bl(s)}rr.has(C)||(s=A({rel:"preload",href:o==="image"&&h&&h.imageSrcSet?void 0:s,as:o},h),rr.set(C,s),p.querySelector(v)!==null||o==="style"&&p.querySelector(Zc(C))||o==="script"&&p.querySelector($c(C))||(o=p.createElement("link"),Jn(o,"link",s),ct(o),p.head.appendChild(o)))}}function QR(s,o){ds.m(s,o);var h=yl;if(h&&s){var p=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+hn(p)+'"][href="'+hn(s)+'"]',C=v;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=bl(s)}if(!rr.has(C)&&(s=A({rel:"modulepreload",href:s},o),rr.set(C,s),h.querySelector(v)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector($c(C)))return}p=h.createElement("link"),Jn(p,"link",s),ct(p),h.head.appendChild(p)}}}function zR(s,o,h){ds.S(s,o,h);var p=yl;if(p&&s){var v=st(p).hoistableStyles,C=El(s);o=o||"default";var I=v.get(C);if(!I){var k={loading:0,preload:null};if(I=p.querySelector(Zc(C)))k.loading=5;else{s=A({rel:"stylesheet",href:s,"data-precedence":o},h),(h=rr.get(C))&&Jg(s,h);var K=I=p.createElement("link");ct(K),Jn(K,"link",s),K._p=new Promise(function(dt,_t){K.onload=dt,K.onerror=_t}),K.addEventListener("load",function(){k.loading|=1}),K.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Sd(I,o,p)}I={type:"stylesheet",instance:I,count:1,state:k},v.set(C,I)}}}function GR(s,o){ds.X(s,o);var h=yl;if(h&&s){var p=st(h).hoistableScripts,v=bl(s),C=p.get(v);C||(C=h.querySelector($c(v)),C||(s=A({src:s,async:!0},o),(o=rr.get(v))&&Zg(s,o),C=h.createElement("script"),ct(C),Jn(C,"link",s),h.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},p.set(v,C))}}function HR(s,o){ds.M(s,o);var h=yl;if(h&&s){var p=st(h).hoistableScripts,v=bl(s),C=p.get(v);C||(C=h.querySelector($c(v)),C||(s=A({src:s,async:!0,type:"module"},o),(o=rr.get(v))&&Zg(s,o),C=h.createElement("script"),ct(C),Jn(C,"link",s),h.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},p.set(v,C))}}function b_(s,o,h,p){var v=(v=Gt.current)?Md(v):null;if(!v)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(o=El(h.href),h=st(v).hoistableStyles,p=h.get(o),p||(p={type:"style",instance:null,count:0,state:null},h.set(o,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){s=El(h.href);var C=st(v).hoistableStyles,I=C.get(s);if(I||(v=v.ownerDocument||v,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(s,I),(C=v.querySelector(Zc(s)))&&!C._p&&(I.instance=C,I.state.loading=5),rr.has(s)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},rr.set(s,h),C||VR(v,s,h,I.state))),o&&p===null)throw Error(i(528,""));return I}if(o&&p!==null)throw Error(i(529,""));return null;case"script":return o=h.async,h=h.src,typeof h=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=bl(h),h=st(v).hoistableScripts,p=h.get(o),p||(p={type:"script",instance:null,count:0,state:null},h.set(o,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function El(s){return'href="'+hn(s)+'"'}function Zc(s){return'link[rel="stylesheet"]['+s+"]"}function x_(s){return A({},s,{"data-precedence":s.precedence,precedence:null})}function VR(s,o,h,p){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?p.loading=1:(o=s.createElement("link"),p.preload=o,o.addEventListener("load",function(){return p.loading|=1}),o.addEventListener("error",function(){return p.loading|=2}),Jn(o,"link",h),ct(o),s.head.appendChild(o))}function bl(s){return'[src="'+hn(s)+'"]'}function $c(s){return"script[async]"+s}function C_(s,o,h){if(o.count++,o.instance===null)switch(o.type){case"style":var p=s.querySelector('style[data-href~="'+hn(h.href)+'"]');if(p)return o.instance=p,ct(p),p;var v=A({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return p=(s.ownerDocument||s).createElement("style"),ct(p),Jn(p,"style",v),Sd(p,h.precedence,s),o.instance=p;case"stylesheet":v=El(h.href);var C=s.querySelector(Zc(v));if(C)return o.state.loading|=4,o.instance=C,ct(C),C;p=x_(h),(v=rr.get(v))&&Jg(p,v),C=(s.ownerDocument||s).createElement("link"),ct(C);var I=C;return I._p=new Promise(function(k,K){I.onload=k,I.onerror=K}),Jn(C,"link",p),o.state.loading|=4,Sd(C,h.precedence,s),o.instance=C;case"script":return C=bl(h.src),(v=s.querySelector($c(C)))?(o.instance=v,ct(v),v):(p=h,(v=rr.get(C))&&(p=A({},h),Zg(p,v)),s=s.ownerDocument||s,v=s.createElement("script"),ct(v),Jn(v,"link",p),s.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(p=o.instance,o.state.loading|=4,Sd(p,h.precedence,s));return o.instance}function Sd(s,o,h){for(var p=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=p.length?p[p.length-1]:null,C=v,I=0;I<p.length;I++){var k=p[I];if(k.dataset.precedence===o)C=k;else if(C!==v)break}C?C.parentNode.insertBefore(s,C.nextSibling):(o=h.nodeType===9?h.head:h,o.insertBefore(s,o.firstChild))}function Jg(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function Zg(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Bd=null;function __(s,o,h){if(Bd===null){var p=new Map,v=Bd=new Map;v.set(h,p)}else v=Bd,p=v.get(h),p||(p=new Map,v.set(h,p));if(p.has(s))return p;for(p.set(s,null),h=h.getElementsByTagName(s),v=0;v<h.length;v++){var C=h[v];if(!(C[Na]||C[yn]||s==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var I=C.getAttribute(o)||"";I=s+I;var k=p.get(I);k?k.push(C):p.set(I,[C])}}return p}function w_(s,o,h){s=s.ownerDocument||s,s.head.insertBefore(h,o==="title"?s.querySelector("head > title"):null)}function qR(s,o,h){if(h===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function M_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function WR(s,o,h,p){if(h.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var v=El(p.href),C=o.querySelector(Zc(v));if(C){o=C._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=Td.bind(s),o.then(s,s)),h.state.loading|=4,h.instance=C,ct(C);return}C=o.ownerDocument||o,p=x_(p),(v=rr.get(v))&&Jg(p,v),C=C.createElement("link"),ct(C);var I=C;I._p=new Promise(function(k,K){I.onload=k,I.onerror=K}),Jn(C,"link",p),h.instance=C}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(h,o),(o=h.state.preload)&&(h.state.loading&3)===0&&(s.count++,h=Td.bind(s),o.addEventListener("load",h),o.addEventListener("error",h))}}var $g=0;function jR(s,o){return s.stylesheets&&s.count===0&&Rd(s,s.stylesheets),0<s.count||0<s.imgCount?function(h){var p=setTimeout(function(){if(s.stylesheets&&Rd(s,s.stylesheets),s.unsuspend){var C=s.unsuspend;s.unsuspend=null,C()}},6e4+o);0<s.imgBytes&&$g===0&&($g=62500*SR());var v=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Rd(s,s.stylesheets),s.unsuspend)){var C=s.unsuspend;s.unsuspend=null,C()}},(s.imgBytes>$g?50:800)+o);return s.unsuspend=h,function(){s.unsuspend=null,clearTimeout(p),clearTimeout(v)}}:null}function Td(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Id=null;function Rd(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Id=new Map,o.forEach(XR,s),Id=null,Td.call(s))}function XR(s,o){if(!(o.state.loading&4)){var h=Id.get(s);if(h)var p=h.get(null);else{h=new Map,Id.set(s,h);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<v.length;C++){var I=v[C];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(h.set(I.dataset.precedence,I),p=I)}p&&h.set(null,p)}v=o.instance,I=v.getAttribute("data-precedence"),C=h.get(I)||p,C===p&&h.set(null,v),h.set(I,v),this.count++,p=Td.bind(this),v.addEventListener("load",p),v.addEventListener("error",p),C?C.parentNode.insertBefore(v,C.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),o.state.loading|=4}}var tu={$$typeof:w,Provider:null,Consumer:null,_currentValue:tt,_currentValue2:tt,_threadCount:0};function YR(s,o,h,p,v,C,I,k,K){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=se(0),this.hiddenUpdates=se(null),this.identifierPrefix=p,this.onUncaughtError=v,this.onCaughtError=C,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function S_(s,o,h,p,v,C,I,k,K,dt,_t,Bt){return s=new YR(s,o,h,I,K,dt,_t,Bt,k),o=1,C===!0&&(o|=24),C=Fi(3,null,null,o),s.current=C,C.stateNode=s,o=Lm(),o.refCount++,s.pooledCache=o,o.refCount++,C.memoizedState={element:p,isDehydrated:h,cache:o},Nm(C),s}function B_(s){return s?(s=Zo,s):Zo}function T_(s,o,h,p,v,C){v=B_(v),p.context===null?p.context=v:p.pendingContext=v,p=Xs(o),p.payload={element:h},C=C===void 0?null:C,C!==null&&(p.callback=C),h=Ys(s,p,o),h!==null&&(Bi(h,s,o),Lc(h,s,o))}function I_(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<o?h:o}}function t0(s,o){I_(s,o),(s=s.alternate)&&I_(s,o)}function R_(s){if(s.tag===13||s.tag===31){var o=Qa(s,67108864);o!==null&&Bi(o,s,67108864),t0(s,67108864)}}function L_(s){if(s.tag===13||s.tag===31){var o=Hi();o=Go(o);var h=Qa(s,o);h!==null&&Bi(h,s,o),t0(s,o)}}var Ld=!0;function KR(s,o,h,p){var v=G.T;G.T=null;var C=X.p;try{X.p=2,e0(s,o,h,p)}finally{X.p=C,G.T=v}}function JR(s,o,h,p){var v=G.T;G.T=null;var C=X.p;try{X.p=8,e0(s,o,h,p)}finally{X.p=C,G.T=v}}function e0(s,o,h,p){if(Ld){var v=n0(p);if(v===null)zg(s,o,p,Dd,h),U_(s,p);else if($R(v,s,o,h,p))p.stopPropagation();else if(U_(s,p),o&4&&-1<ZR.indexOf(s)){for(;v!==null;){var C=Qs(v);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var I=qt(C.pendingLanes);if(I!==0){var k=C;for(k.pendingLanes|=2,k.entangledLanes|=2;I;){var K=1<<31-Qt(I);k.entanglements[1]|=K,I&=~K}Pr(C),($e&6)===0&&(Ad=gt()+500,Xc(0))}}break;case 31:case 13:k=Qa(C,2),k!==null&&Bi(k,C,2),gd(),t0(C,2)}if(C=n0(p),C===null&&zg(s,o,p,Dd,h),C===v)break;v=C}v!==null&&p.stopPropagation()}else zg(s,o,p,null,h)}}function n0(s){return s=rm(s),i0(s)}var Dd=null;function i0(s){if(Dd=null,s=ks(s),s!==null){var o=a(s);if(o===null)s=null;else{var h=o.tag;if(h===13){if(s=l(o),s!==null)return s;s=null}else if(h===31){if(s=c(o),s!==null)return s;s=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Dd=s,null}function D_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case H:return 2;case N:return 8;case it:case bt:return 32;case Dt:return 268435456;default:return 32}default:return 32}}var r0=!1,aa=null,oa=null,la=null,eu=new Map,nu=new Map,ca=[],ZR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U_(s,o){switch(s){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":oa=null;break;case"mouseover":case"mouseout":la=null;break;case"pointerover":case"pointerout":eu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":nu.delete(o.pointerId)}}function iu(s,o,h,p,v,C){return s===null||s.nativeEvent!==C?(s={blockedOn:o,domEventName:h,eventSystemFlags:p,nativeEvent:C,targetContainers:[v]},o!==null&&(o=Qs(o),o!==null&&R_(o)),s):(s.eventSystemFlags|=p,o=s.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),s)}function $R(s,o,h,p,v){switch(o){case"focusin":return aa=iu(aa,s,o,h,p,v),!0;case"dragenter":return oa=iu(oa,s,o,h,p,v),!0;case"mouseover":return la=iu(la,s,o,h,p,v),!0;case"pointerover":var C=v.pointerId;return eu.set(C,iu(eu.get(C)||null,s,o,h,p,v)),!0;case"gotpointercapture":return C=v.pointerId,nu.set(C,iu(nu.get(C)||null,s,o,h,p,v)),!0}return!1}function O_(s){var o=ks(s.target);if(o!==null){var h=a(o);if(h!==null){if(o=h.tag,o===13){if(o=l(h),o!==null){s.blockedOn=o,Vo(s.priority,function(){L_(h)});return}}else if(o===31){if(o=c(h),o!==null){s.blockedOn=o,Vo(s.priority,function(){L_(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ud(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var h=n0(s.nativeEvent);if(h===null){h=s.nativeEvent;var p=new h.constructor(h.type,h);im=p,h.target.dispatchEvent(p),im=null}else return o=Qs(h),o!==null&&R_(o),s.blockedOn=h,!1;o.shift()}return!0}function N_(s,o,h){Ud(s)&&h.delete(o)}function tL(){r0=!1,aa!==null&&Ud(aa)&&(aa=null),oa!==null&&Ud(oa)&&(oa=null),la!==null&&Ud(la)&&(la=null),eu.forEach(N_),nu.forEach(N_)}function Od(s,o){s.blockedOn===o&&(s.blockedOn=null,r0||(r0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,tL)))}var Nd=null;function P_(s){Nd!==s&&(Nd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Nd===s&&(Nd=null);for(var o=0;o<s.length;o+=3){var h=s[o],p=s[o+1],v=s[o+2];if(typeof p!="function"){if(i0(p||h)===null)continue;break}var C=Qs(h);C!==null&&(s.splice(o,3),o-=3,ng(C,{pending:!0,data:v,method:h.method,action:p},p,v))}}))}function xl(s){function o(K){return Od(K,s)}aa!==null&&Od(aa,s),oa!==null&&Od(oa,s),la!==null&&Od(la,s),eu.forEach(o),nu.forEach(o);for(var h=0;h<ca.length;h++){var p=ca[h];p.blockedOn===s&&(p.blockedOn=null)}for(;0<ca.length&&(h=ca[0],h.blockedOn===null);)O_(h),h.blockedOn===null&&ca.shift();if(h=(s.ownerDocument||s).$$reactFormReplay,h!=null)for(p=0;p<h.length;p+=3){var v=h[p],C=h[p+1],I=v[jn]||null;if(typeof C=="function")I||P_(h);else if(I){var k=null;if(C&&C.hasAttribute("formAction")){if(v=C,I=C[jn]||null)k=I.formAction;else if(i0(v)!==null)continue}else k=I.action;typeof k=="function"?h[p+1]=k:(h.splice(p,3),p-=3),P_(h)}}}function F_(){function s(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(I){return v=I})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),p||setTimeout(h,20)}function h(){if(!p&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,v=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(h,100),function(){p=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function s0(s){this._internalRoot=s}Pd.prototype.render=s0.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var h=o.current,p=Hi();T_(h,p,s,o,null,null)},Pd.prototype.unmount=s0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;T_(s.current,2,null,s,null,null),gd(),o[fr]=null}};function Pd(s){this._internalRoot=s}Pd.prototype.unstable_scheduleHydration=function(s){if(s){var o=Ho();s={blockedOn:null,target:s,priority:o};for(var h=0;h<ca.length&&o!==0&&o<ca[h].priority;h++);ca.splice(h,0,s),h===0&&O_(s)}};var k_=t.version;if(k_!=="19.2.0")throw Error(i(527,k_,"19.2.0"));X.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(o),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var eL={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fd.isDisabled&&Fd.supportsFiber)try{Pt=Fd.inject(eL),Ht=Fd}catch{}}return su.createRoot=function(s,o){if(!r(s))throw Error(i(299));var h=!1,p="",v=Wx,C=jx,I=Xx;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(C=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError)),o=S_(s,1,!1,null,null,h,p,null,v,C,I,F_),s[fr]=o.current,Qg(s),new s0(o)},su.hydrateRoot=function(s,o,h){if(!r(s))throw Error(i(299));var p=!1,v="",C=Wx,I=jx,k=Xx,K=null;return h!=null&&(h.unstable_strictMode===!0&&(p=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onUncaughtError!==void 0&&(C=h.onUncaughtError),h.onCaughtError!==void 0&&(I=h.onCaughtError),h.onRecoverableError!==void 0&&(k=h.onRecoverableError),h.formState!==void 0&&(K=h.formState)),o=S_(s,1,!0,o,h??null,p,v,K,C,I,k,F_),o.context=B_(null),h=o.current,p=Hi(),p=Go(p),v=Xs(p),v.callback=null,Ys(h,v,p),h=p,o.current.lanes=h,De(o,h),Pr(o),s[fr]=o.current,Qg(s),new Pd(o)},su.version="19.2.0",su}var Y_;function dL(){if(Y_)return l0.exports;Y_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),l0.exports=hL(),l0.exports}var fL=dL(),d0={exports:{}},f0={};/**
 * @license React
 * react-compiler-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function pL(){if(K_)return f0;K_=1;var n=ph().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return f0.c=function(t){return n.H.useMemoCache(t)},f0}var J_;function AL(){return J_||(J_=1,d0.exports=pL()),d0.exports}var mL=AL();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const pA="173",gL={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},vL={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},LM=0,Jv=1,DM=2,yL=3,EL=0,Vy=1,UM=2,kr=3,Os=0,yi=1,zr=2,Is=0,Io=1,Zv=2,$v=3,ty=4,OM=5,_a=100,NM=101,PM=102,FM=103,kM=104,QM=200,zM=201,GM=202,HM=203,fp=204,pp=205,VM=206,qM=207,WM=208,jM=209,XM=210,YM=211,KM=212,JM=213,ZM=214,Ap=0,mp=1,gp=2,Uo=3,vp=4,yp=5,Ep=6,bp=7,Ah=0,$M=1,tS=2,Rs=0,eS=1,nS=2,iS=3,rS=4,sS=5,aS=6,oS=7,ey="attached",lS="detached",AA=300,Ns=301,Ba=302,qu=303,Wu=304,lc=306,ju=1e3,lr=1001,Xu=1002,ni=1003,qy=1004,bL=1004,Yl=1005,xL=1005,Gn=1006,Uu=1007,CL=1007,Gr=1008,_L=1008,Wr=1009,Wy=1010,jy=1011,ic=1012,mA=1013,Ps=1014,Ai=1015,cc=1016,gA=1017,vA=1018,wa=1020,Xy=35902,Yy=1021,Ky=1022,vi=1023,Jy=1024,Zy=1025,Ma=1026,Sa=1027,yA=1028,mh=1029,$y=1030,EA=1031,wL=1032,bA=1033,Ou=33776,Nu=33777,Pu=33778,Fu=33779,xp=35840,Cp=35841,_p=35842,wp=35843,Mp=36196,Sp=37492,Bp=37496,Tp=37808,Ip=37809,Rp=37810,Lp=37811,Dp=37812,Up=37813,Op=37814,Np=37815,Pp=37816,Fp=37817,kp=37818,Qp=37819,zp=37820,Gp=37821,ku=36492,Hp=36494,Vp=36495,tE=36283,qp=36284,Wp=36285,jp=36286,cS=2200,uS=2201,hS=2202,Yu=2300,Xp=2301,ip=2302,Mo=2400,So=2401,Ku=2402,xA=2500,eE=2501,ML=0,SL=1,BL=2,dS=3200,fS=3201,TL=3202,IL=3203,La=0,pS=1,_s="",Li="srgb",Oo="srgb-linear",Ju="linear",rn="srgb",RL=0,xo=7680,LL=7681,DL=7682,UL=7683,OL=34055,NL=34056,PL=5386,FL=512,kL=513,QL=514,zL=515,GL=516,HL=517,VL=518,ny=519,AS=512,mS=513,gS=514,nE=515,vS=516,yS=517,ES=518,bS=519,Zu=35044,qL=35048,WL=35040,jL=35045,XL=35049,YL=35041,KL=35046,JL=35050,ZL=35042,$L="100",iy="300 es",Mr=2e3,$u=2001,tD={COMPUTE:"compute",RENDER:"render"};class jr{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){const i=this._listeners;return i===void 0?!1:i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){const i=this._listeners;if(i===void 0)return;const r=i[t];if(r!==void 0){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const i=e[t.type];if(i!==void 0){t.target=this;const r=i.slice(0);for(let a=0,l=r.length;a<l;a++)r[a].call(this,t);t.target=null}}}const ri=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Z_=1234567;const Ro=Math.PI/180,rc=180/Math.PI;function Xi(){const n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ri[n&255]+ri[n>>8&255]+ri[n>>16&255]+ri[n>>24&255]+"-"+ri[t&255]+ri[t>>8&255]+"-"+ri[t>>16&15|64]+ri[t>>24&255]+"-"+ri[e&63|128]+ri[e>>8&255]+"-"+ri[e>>16&255]+ri[e>>24&255]+ri[i&255]+ri[i>>8&255]+ri[i>>16&255]+ri[i>>24&255]).toLowerCase()}function _e(n,t,e){return Math.max(t,Math.min(e,n))}function iE(n,t){return(n%t+t)%t}function eD(n,t,e,i,r){return i+(n-t)*(r-i)/(e-t)}function nD(n,t,e){return n!==t?(e-n)/(t-n):0}function Qu(n,t,e){return(1-e)*n+e*t}function iD(n,t,e,i){return Qu(n,t,1-Math.exp(-e*i))}function rD(n,t=1){return t-Math.abs(iE(n,t*2)-t)}function sD(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function aD(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function oD(n,t){return n+Math.floor(Math.random()*(t-n+1))}function lD(n,t){return n+Math.random()*(t-n)}function cD(n){return n*(.5-Math.random())}function uD(n){n!==void 0&&(Z_=n);let t=Z_+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function hD(n){return n*Ro}function dD(n){return n*rc}function fD(n){return(n&n-1)===0&&n!==0}function pD(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function AD(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function mD(n,t,e,i,r){const a=Math.cos,l=Math.sin,c=a(e/2),u=l(e/2),d=a((t+i)/2),f=l((t+i)/2),A=a((t-i)/2),m=l((t-i)/2),g=a((i-t)/2),b=l((i-t)/2);switch(r){case"XYX":n.set(c*f,u*A,u*m,c*d);break;case"YZY":n.set(u*m,c*f,u*A,c*d);break;case"ZXZ":n.set(u*A,u*m,c*f,c*d);break;case"XZX":n.set(c*f,u*b,u*g,c*d);break;case"YXY":n.set(u*g,c*f,u*b,c*d);break;case"ZYZ":n.set(u*b,u*g,c*f,c*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function mi(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Se(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const gD={DEG2RAD:Ro,RAD2DEG:rc,generateUUID:Xi,clamp:_e,euclideanModulo:iE,mapLinear:eD,inverseLerp:nD,lerp:Qu,damp:iD,pingpong:rD,smoothstep:sD,smootherstep:aD,randInt:oD,randFloat:lD,randFloatSpread:cD,seededRandom:uD,degToRad:hD,radToDeg:dD,isPowerOfTwo:fD,ceilPowerOfTwo:pD,floorPowerOfTwo:AD,setQuaternionFromProperEuler:mD,normalize:Se,denormalize:mi};class Ut{constructor(t=0,e=0){Ut.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=_e(this.x,t.x,e.x),this.y=_e(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=_e(this.x,t,e),this.y=_e(this.y,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(_e(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(_e(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),r=Math.sin(e),a=this.x-t.x,l=this.y-t.y;return this.x=a*i-l*r+t.x,this.y=a*r+l*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ce{constructor(t,e,i,r,a,l,c,u,d){Ce.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,r,a,l,c,u,d)}set(t,e,i,r,a,l,c,u,d){const f=this.elements;return f[0]=t,f[1]=r,f[2]=c,f[3]=e,f[4]=a,f[5]=u,f[6]=i,f[7]=l,f[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,a=this.elements,l=i[0],c=i[3],u=i[6],d=i[1],f=i[4],A=i[7],m=i[2],g=i[5],b=i[8],x=r[0],E=r[3],y=r[6],_=r[1],w=r[4],S=r[7],R=r[2],U=r[5],L=r[8];return a[0]=l*x+c*_+u*R,a[3]=l*E+c*w+u*U,a[6]=l*y+c*S+u*L,a[1]=d*x+f*_+A*R,a[4]=d*E+f*w+A*U,a[7]=d*y+f*S+A*L,a[2]=m*x+g*_+b*R,a[5]=m*E+g*w+b*U,a[8]=m*y+g*S+b*L,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],r=t[2],a=t[3],l=t[4],c=t[5],u=t[6],d=t[7],f=t[8];return e*l*f-e*c*d-i*a*f+i*c*u+r*a*d-r*l*u}invert(){const t=this.elements,e=t[0],i=t[1],r=t[2],a=t[3],l=t[4],c=t[5],u=t[6],d=t[7],f=t[8],A=f*l-c*d,m=c*u-f*a,g=d*a-l*u,b=e*A+i*m+r*g;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/b;return t[0]=A*x,t[1]=(r*d-f*i)*x,t[2]=(c*i-r*l)*x,t[3]=m*x,t[4]=(f*e-r*u)*x,t[5]=(r*a-c*e)*x,t[6]=g*x,t[7]=(i*u-d*e)*x,t[8]=(l*e-i*a)*x,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,a,l,c){const u=Math.cos(a),d=Math.sin(a);return this.set(i*u,i*d,-i*(u*l+d*c)+l+t,-r*d,r*u,-r*(-d*l+u*c)+c+e,0,0,1),this}scale(t,e){return this.premultiply(p0.makeScale(t,e)),this}rotate(t){return this.premultiply(p0.makeRotation(-t)),this}translate(t,e){return this.premultiply(p0.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,i=t.elements;for(let r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const p0=new Ce;function xS(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}const vD={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Kl(n,t){return new vD[n](t)}function th(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function CS(){const n=th("canvas");return n.style.display="block",n}const $_={};function Xl(n){n in $_||($_[n]=!0,console.warn(n))}function yD(n,t,e){return new Promise(function(i,r){function a(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(a,e);break;default:i()}}setTimeout(a,e)})}function ED(n){const t=n.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function bD(n){const t=n.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const t1=new Ce().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),e1=new Ce().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function xD(){const n={enabled:!0,workingColorSpace:Oo,spaces:{},convert:function(r,a,l){return this.enabled===!1||a===l||!a||!l||(this.spaces[a].transfer===rn&&(r.r=Ls(r.r),r.g=Ls(r.g),r.b=Ls(r.b)),this.spaces[a].primaries!==this.spaces[l].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[l].fromXYZ)),this.spaces[l].transfer===rn&&(r.r=ec(r.r),r.g=ec(r.g),r.b=ec(r.b))),r},fromWorkingColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},toWorkingColorSpace:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===_s?Ju:this.spaces[r].transfer},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,l){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[l].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Oo]:{primaries:t,whitePoint:i,transfer:Ju,toXYZ:t1,fromXYZ:e1,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Li},outputColorSpaceConfig:{drawingBufferColorSpace:Li}},[Li]:{primaries:t,whitePoint:i,transfer:rn,toXYZ:t1,fromXYZ:e1,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Li}}}),n}const Ve=xD();function Ls(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function ec(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Cl;class _S{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Cl===void 0&&(Cl=th("canvas")),Cl.width=t.width,Cl.height=t.height;const i=Cl.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Cl}return e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=th("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const r=i.getImageData(0,0,t.width,t.height),a=r.data;for(let l=0;l<a.length;l++)a[l]=Ls(a[l]/255)*255;return i.putImageData(r,0,0),e}else if(t.data){const e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(Ls(e[i]/255)*255):e[i]=Ls(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let CD=0;class Bo{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:CD++}),this.uuid=Xi(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let l=0,c=r.length;l<c;l++)r[l].isDataTexture?a.push(A0(r[l].image)):a.push(A0(r[l]))}else a=A0(r);i.url=a}return e||(t.images[this.uuid]=i),i}}function A0(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?_S.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _D=0;class Cn extends jr{constructor(t=Cn.DEFAULT_IMAGE,e=Cn.DEFAULT_MAPPING,i=lr,r=lr,a=Gn,l=Gr,c=vi,u=Wr,d=Cn.DEFAULT_ANISOTROPY,f=_s){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_D++}),this.uuid=Xi(),this.name="",this.source=new Bo(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=l,this.anisotropy=d,this.format=c,this.internalFormat=null,this.type=u,this.offset=new Ut(0,0),this.repeat=new Ut(1,1),this.center=new Ut(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ce,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==AA)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ju:t.x=t.x-Math.floor(t.x);break;case lr:t.x=t.x<0?0:1;break;case Xu:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case ju:t.y=t.y-Math.floor(t.y);break;case lr:t.y=t.y<0?0:1;break;case Xu:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}Cn.DEFAULT_IMAGE=null;Cn.DEFAULT_MAPPING=AA;Cn.DEFAULT_ANISOTROPY=1;class Xe{constructor(t=0,e=0,i=0,r=1){Xe.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,a=this.w,l=t.elements;return this.x=l[0]*e+l[4]*i+l[8]*r+l[12]*a,this.y=l[1]*e+l[5]*i+l[9]*r+l[13]*a,this.z=l[2]*e+l[6]*i+l[10]*r+l[14]*a,this.w=l[3]*e+l[7]*i+l[11]*r+l[15]*a,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,a;const u=t.elements,d=u[0],f=u[4],A=u[8],m=u[1],g=u[5],b=u[9],x=u[2],E=u[6],y=u[10];if(Math.abs(f-m)<.01&&Math.abs(A-x)<.01&&Math.abs(b-E)<.01){if(Math.abs(f+m)<.1&&Math.abs(A+x)<.1&&Math.abs(b+E)<.1&&Math.abs(d+g+y-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const w=(d+1)/2,S=(g+1)/2,R=(y+1)/2,U=(f+m)/4,L=(A+x)/4,F=(b+E)/4;return w>S&&w>R?w<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(w),r=U/i,a=L/i):S>R?S<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(S),i=U/r,a=F/r):R<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(R),i=L/a,r=F/a),this.set(i,r,a,e),this}let _=Math.sqrt((E-b)*(E-b)+(A-x)*(A-x)+(m-f)*(m-f));return Math.abs(_)<.001&&(_=1),this.x=(E-b)/_,this.y=(A-x)/_,this.z=(m-f)/_,this.w=Math.acos((d+g+y-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=_e(this.x,t.x,e.x),this.y=_e(this.y,t.y,e.y),this.z=_e(this.z,t.z,e.z),this.w=_e(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=_e(this.x,t,e),this.y=_e(this.y,t,e),this.z=_e(this.z,t,e),this.w=_e(this.w,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(_e(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class CA extends jr{constructor(t=1,e=1,i={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Xe(0,0,t,e),this.scissorTest=!1,this.viewport=new Xe(0,0,t,e);const r={width:t,height:e,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Gn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const a=new Cn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);a.flipY=!1,a.generateMipmaps=i.generateMipmaps,a.internalFormat=i.internalFormat,this.textures=[];const l=i.count;for(let c=0;c<l;c++)this.textures[c]=a.clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let i=0,r=t.textures.length;i<r;i++)this.textures[i]=t.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;const e=Object.assign({},t.texture.image);return this.texture.source=new Bo(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Sr extends CA{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}}class gh extends Cn{constructor(t=null,e=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=ni,this.minFilter=ni,this.wrapR=lr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class wD extends Sr{constructor(t=1,e=1,i=1,r={}){super(t,e,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new gh(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class _A extends Cn{constructor(t=null,e=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=ni,this.minFilter=ni,this.wrapR=lr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class MD extends Sr{constructor(t=1,e=1,i=1,r={}){super(t,e,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new _A(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class Oi{constructor(t=0,e=0,i=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=r}static slerpFlat(t,e,i,r,a,l,c){let u=i[r+0],d=i[r+1],f=i[r+2],A=i[r+3];const m=a[l+0],g=a[l+1],b=a[l+2],x=a[l+3];if(c===0){t[e+0]=u,t[e+1]=d,t[e+2]=f,t[e+3]=A;return}if(c===1){t[e+0]=m,t[e+1]=g,t[e+2]=b,t[e+3]=x;return}if(A!==x||u!==m||d!==g||f!==b){let E=1-c;const y=u*m+d*g+f*b+A*x,_=y>=0?1:-1,w=1-y*y;if(w>Number.EPSILON){const R=Math.sqrt(w),U=Math.atan2(R,y*_);E=Math.sin(E*U)/R,c=Math.sin(c*U)/R}const S=c*_;if(u=u*E+m*S,d=d*E+g*S,f=f*E+b*S,A=A*E+x*S,E===1-c){const R=1/Math.sqrt(u*u+d*d+f*f+A*A);u*=R,d*=R,f*=R,A*=R}}t[e]=u,t[e+1]=d,t[e+2]=f,t[e+3]=A}static multiplyQuaternionsFlat(t,e,i,r,a,l){const c=i[r],u=i[r+1],d=i[r+2],f=i[r+3],A=a[l],m=a[l+1],g=a[l+2],b=a[l+3];return t[e]=c*b+f*A+u*g-d*m,t[e+1]=u*b+f*m+d*A-c*g,t[e+2]=d*b+f*g+c*m-u*A,t[e+3]=f*b-c*A-u*m-d*g,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const i=t._x,r=t._y,a=t._z,l=t._order,c=Math.cos,u=Math.sin,d=c(i/2),f=c(r/2),A=c(a/2),m=u(i/2),g=u(r/2),b=u(a/2);switch(l){case"XYZ":this._x=m*f*A+d*g*b,this._y=d*g*A-m*f*b,this._z=d*f*b+m*g*A,this._w=d*f*A-m*g*b;break;case"YXZ":this._x=m*f*A+d*g*b,this._y=d*g*A-m*f*b,this._z=d*f*b-m*g*A,this._w=d*f*A+m*g*b;break;case"ZXY":this._x=m*f*A-d*g*b,this._y=d*g*A+m*f*b,this._z=d*f*b+m*g*A,this._w=d*f*A-m*g*b;break;case"ZYX":this._x=m*f*A-d*g*b,this._y=d*g*A+m*f*b,this._z=d*f*b-m*g*A,this._w=d*f*A+m*g*b;break;case"YZX":this._x=m*f*A+d*g*b,this._y=d*g*A+m*f*b,this._z=d*f*b-m*g*A,this._w=d*f*A-m*g*b;break;case"XZY":this._x=m*f*A-d*g*b,this._y=d*g*A-m*f*b,this._z=d*f*b+m*g*A,this._w=d*f*A+m*g*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],r=e[4],a=e[8],l=e[1],c=e[5],u=e[9],d=e[2],f=e[6],A=e[10],m=i+c+A;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(f-u)*g,this._y=(a-d)*g,this._z=(l-r)*g}else if(i>c&&i>A){const g=2*Math.sqrt(1+i-c-A);this._w=(f-u)/g,this._x=.25*g,this._y=(r+l)/g,this._z=(a+d)/g}else if(c>A){const g=2*Math.sqrt(1+c-i-A);this._w=(a-d)/g,this._x=(r+l)/g,this._y=.25*g,this._z=(u+f)/g}else{const g=2*Math.sqrt(1+A-i-c);this._w=(l-r)/g,this._x=(a+d)/g,this._y=(u+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(_e(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(i===0)return this;const r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,r=t._y,a=t._z,l=t._w,c=e._x,u=e._y,d=e._z,f=e._w;return this._x=i*f+l*c+r*d-a*u,this._y=r*f+l*u+a*c-i*d,this._z=a*f+l*d+i*u-r*c,this._w=l*f-i*c-r*u-a*d,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const i=this._x,r=this._y,a=this._z,l=this._w;let c=l*t._w+i*t._x+r*t._y+a*t._z;if(c<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,c=-c):this.copy(t),c>=1)return this._w=l,this._x=i,this._y=r,this._z=a,this;const u=1-c*c;if(u<=Number.EPSILON){const g=1-e;return this._w=g*l+e*this._w,this._x=g*i+e*this._x,this._y=g*r+e*this._y,this._z=g*a+e*this._z,this.normalize(),this}const d=Math.sqrt(u),f=Math.atan2(d,c),A=Math.sin((1-e)*f)/d,m=Math.sin(e*f)/d;return this._w=l*A+this._w*m,this._x=i*A+this._x*m,this._y=r*A+this._y*m,this._z=a*A+this._z*m,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(t),r*Math.cos(t),a*Math.sin(e),a*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class W{constructor(t=0,e=0,i=0){W.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(n1.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(n1.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,r=this.z,a=t.elements;return this.x=a[0]*e+a[3]*i+a[6]*r,this.y=a[1]*e+a[4]*i+a[7]*r,this.z=a[2]*e+a[5]*i+a[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,a=t.elements,l=1/(a[3]*e+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*e+a[4]*i+a[8]*r+a[12])*l,this.y=(a[1]*e+a[5]*i+a[9]*r+a[13])*l,this.z=(a[2]*e+a[6]*i+a[10]*r+a[14])*l,this}applyQuaternion(t){const e=this.x,i=this.y,r=this.z,a=t.x,l=t.y,c=t.z,u=t.w,d=2*(l*r-c*i),f=2*(c*e-a*r),A=2*(a*i-l*e);return this.x=e+u*d+l*A-c*f,this.y=i+u*f+c*d-a*A,this.z=r+u*A+a*f-l*d,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,r=this.z,a=t.elements;return this.x=a[0]*e+a[4]*i+a[8]*r,this.y=a[1]*e+a[5]*i+a[9]*r,this.z=a[2]*e+a[6]*i+a[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=_e(this.x,t.x,e.x),this.y=_e(this.y,t.y,e.y),this.z=_e(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=_e(this.x,t,e),this.y=_e(this.y,t,e),this.z=_e(this.z,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(_e(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,r=t.y,a=t.z,l=e.x,c=e.y,u=e.z;return this.x=r*u-a*c,this.y=a*l-i*u,this.z=i*c-r*l,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return m0.copy(this).projectOnVector(t),this.sub(m0)}reflect(t){return this.sub(m0.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(_e(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const m0=new W,n1=new Oi;class Ei{constructor(t=new W(1/0,1/0,1/0),e=new W(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(vr.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(vr.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=vr.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(i!==void 0){const a=i.getAttribute("position");if(e===!0&&a!==void 0&&t.isInstancedMesh!==!0)for(let l=0,c=a.count;l<c;l++)t.isMesh===!0?t.getVertexPosition(l,vr):vr.fromBufferAttribute(a,l),vr.applyMatrix4(t.matrixWorld),this.expandByPoint(vr);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),kd.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),kd.copy(i.boundingBox)),kd.applyMatrix4(t.matrixWorld),this.union(kd)}const r=t.children;for(let a=0,l=r.length;a<l;a++)this.expandByObject(r[a],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,vr),vr.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(au),Qd.subVectors(this.max,au),_l.subVectors(t.a,au),wl.subVectors(t.b,au),Ml.subVectors(t.c,au),ha.subVectors(wl,_l),da.subVectors(Ml,wl),$a.subVectors(_l,Ml);let e=[0,-ha.z,ha.y,0,-da.z,da.y,0,-$a.z,$a.y,ha.z,0,-ha.x,da.z,0,-da.x,$a.z,0,-$a.x,-ha.y,ha.x,0,-da.y,da.x,0,-$a.y,$a.x,0];return!g0(e,_l,wl,Ml,Qd)||(e=[1,0,0,0,1,0,0,0,1],!g0(e,_l,wl,Ml,Qd))?!1:(zd.crossVectors(ha,da),e=[zd.x,zd.y,zd.z],g0(e,_l,wl,Ml,Qd))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,vr).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(vr).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(fs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),fs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),fs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),fs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),fs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),fs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),fs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),fs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(fs),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const fs=[new W,new W,new W,new W,new W,new W,new W,new W],vr=new W,kd=new Ei,_l=new W,wl=new W,Ml=new W,ha=new W,da=new W,$a=new W,au=new W,Qd=new W,zd=new W,to=new W;function g0(n,t,e,i,r){for(let a=0,l=n.length-3;a<=l;a+=3){to.fromArray(n,a);const c=r.x*Math.abs(to.x)+r.y*Math.abs(to.y)+r.z*Math.abs(to.z),u=t.dot(to),d=e.dot(to),f=i.dot(to);if(Math.max(-Math.max(u,d,f),Math.min(u,d,f))>c)return!1}return!0}const SD=new Ei,ou=new W,v0=new W;class li{constructor(t=new W,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;e!==void 0?i.copy(e):SD.setFromPoints(t).getCenter(i);let r=0;for(let a=0,l=t.length;a<l;a++)r=Math.max(r,i.distanceToSquared(t[a]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;ou.subVectors(t,this.center);const e=ou.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),r=(i-this.radius)*.5;this.center.addScaledVector(ou,r/i),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(v0.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(ou.copy(t.center).add(v0)),this.expandByPoint(ou.copy(t.center).sub(v0))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ps=new W,y0=new W,Gd=new W,fa=new W,E0=new W,Hd=new W,b0=new W;class uc{constructor(t=new W,e=new W(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,ps)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=ps.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(ps.copy(this.origin).addScaledVector(this.direction,e),ps.distanceToSquared(t))}distanceSqToSegment(t,e,i,r){y0.copy(t).add(e).multiplyScalar(.5),Gd.copy(e).sub(t).normalize(),fa.copy(this.origin).sub(y0);const a=t.distanceTo(e)*.5,l=-this.direction.dot(Gd),c=fa.dot(this.direction),u=-fa.dot(Gd),d=fa.lengthSq(),f=Math.abs(1-l*l);let A,m,g,b;if(f>0)if(A=l*u-c,m=l*c-u,b=a*f,A>=0)if(m>=-b)if(m<=b){const x=1/f;A*=x,m*=x,g=A*(A+l*m+2*c)+m*(l*A+m+2*u)+d}else m=a,A=Math.max(0,-(l*m+c)),g=-A*A+m*(m+2*u)+d;else m=-a,A=Math.max(0,-(l*m+c)),g=-A*A+m*(m+2*u)+d;else m<=-b?(A=Math.max(0,-(-l*a+c)),m=A>0?-a:Math.min(Math.max(-a,-u),a),g=-A*A+m*(m+2*u)+d):m<=b?(A=0,m=Math.min(Math.max(-a,-u),a),g=m*(m+2*u)+d):(A=Math.max(0,-(l*a+c)),m=A>0?a:Math.min(Math.max(-a,-u),a),g=-A*A+m*(m+2*u)+d);else m=l>0?-a:a,A=Math.max(0,-(l*m+c)),g=-A*A+m*(m+2*u)+d;return i&&i.copy(this.origin).addScaledVector(this.direction,A),r&&r.copy(y0).addScaledVector(Gd,m),g}intersectSphere(t,e){ps.subVectors(t.center,this.origin);const i=ps.dot(this.direction),r=ps.dot(ps)-i*i,a=t.radius*t.radius;if(r>a)return null;const l=Math.sqrt(a-r),c=i-l,u=i+l;return u<0?null:c<0?this.at(u,e):this.at(c,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,r,a,l,c,u;const d=1/this.direction.x,f=1/this.direction.y,A=1/this.direction.z,m=this.origin;return d>=0?(i=(t.min.x-m.x)*d,r=(t.max.x-m.x)*d):(i=(t.max.x-m.x)*d,r=(t.min.x-m.x)*d),f>=0?(a=(t.min.y-m.y)*f,l=(t.max.y-m.y)*f):(a=(t.max.y-m.y)*f,l=(t.min.y-m.y)*f),i>l||a>r||((a>i||isNaN(i))&&(i=a),(l<r||isNaN(r))&&(r=l),A>=0?(c=(t.min.z-m.z)*A,u=(t.max.z-m.z)*A):(c=(t.max.z-m.z)*A,u=(t.min.z-m.z)*A),i>u||c>r)||((c>i||i!==i)&&(i=c),(u<r||r!==r)&&(r=u),r<0)?null:this.at(i>=0?i:r,e)}intersectsBox(t){return this.intersectBox(t,ps)!==null}intersectTriangle(t,e,i,r,a){E0.subVectors(e,t),Hd.subVectors(i,t),b0.crossVectors(E0,Hd);let l=this.direction.dot(b0),c;if(l>0){if(r)return null;c=1}else if(l<0)c=-1,l=-l;else return null;fa.subVectors(this.origin,t);const u=c*this.direction.dot(Hd.crossVectors(fa,Hd));if(u<0)return null;const d=c*this.direction.dot(E0.cross(fa));if(d<0||u+d>l)return null;const f=-c*fa.dot(b0);return f<0?null:this.at(f/l,a)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ve{constructor(t,e,i,r,a,l,c,u,d,f,A,m,g,b,x,E){ve.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,r,a,l,c,u,d,f,A,m,g,b,x,E)}set(t,e,i,r,a,l,c,u,d,f,A,m,g,b,x,E){const y=this.elements;return y[0]=t,y[4]=e,y[8]=i,y[12]=r,y[1]=a,y[5]=l,y[9]=c,y[13]=u,y[2]=d,y[6]=f,y[10]=A,y[14]=m,y[3]=g,y[7]=b,y[11]=x,y[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ve().fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,r=1/Sl.setFromMatrixColumn(t,0).length(),a=1/Sl.setFromMatrixColumn(t,1).length(),l=1/Sl.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*a,e[5]=i[5]*a,e[6]=i[6]*a,e[7]=0,e[8]=i[8]*l,e[9]=i[9]*l,e[10]=i[10]*l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,r=t.y,a=t.z,l=Math.cos(i),c=Math.sin(i),u=Math.cos(r),d=Math.sin(r),f=Math.cos(a),A=Math.sin(a);if(t.order==="XYZ"){const m=l*f,g=l*A,b=c*f,x=c*A;e[0]=u*f,e[4]=-u*A,e[8]=d,e[1]=g+b*d,e[5]=m-x*d,e[9]=-c*u,e[2]=x-m*d,e[6]=b+g*d,e[10]=l*u}else if(t.order==="YXZ"){const m=u*f,g=u*A,b=d*f,x=d*A;e[0]=m+x*c,e[4]=b*c-g,e[8]=l*d,e[1]=l*A,e[5]=l*f,e[9]=-c,e[2]=g*c-b,e[6]=x+m*c,e[10]=l*u}else if(t.order==="ZXY"){const m=u*f,g=u*A,b=d*f,x=d*A;e[0]=m-x*c,e[4]=-l*A,e[8]=b+g*c,e[1]=g+b*c,e[5]=l*f,e[9]=x-m*c,e[2]=-l*d,e[6]=c,e[10]=l*u}else if(t.order==="ZYX"){const m=l*f,g=l*A,b=c*f,x=c*A;e[0]=u*f,e[4]=b*d-g,e[8]=m*d+x,e[1]=u*A,e[5]=x*d+m,e[9]=g*d-b,e[2]=-d,e[6]=c*u,e[10]=l*u}else if(t.order==="YZX"){const m=l*u,g=l*d,b=c*u,x=c*d;e[0]=u*f,e[4]=x-m*A,e[8]=b*A+g,e[1]=A,e[5]=l*f,e[9]=-c*f,e[2]=-d*f,e[6]=g*A+b,e[10]=m-x*A}else if(t.order==="XZY"){const m=l*u,g=l*d,b=c*u,x=c*d;e[0]=u*f,e[4]=-A,e[8]=d*f,e[1]=m*A+x,e[5]=l*f,e[9]=g*A-b,e[2]=b*A-g,e[6]=c*f,e[10]=x*A+m}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(BD,t,TD)}lookAt(t,e,i){const r=this.elements;return Vi.subVectors(t,e),Vi.lengthSq()===0&&(Vi.z=1),Vi.normalize(),pa.crossVectors(i,Vi),pa.lengthSq()===0&&(Math.abs(i.z)===1?Vi.x+=1e-4:Vi.z+=1e-4,Vi.normalize(),pa.crossVectors(i,Vi)),pa.normalize(),Vd.crossVectors(Vi,pa),r[0]=pa.x,r[4]=Vd.x,r[8]=Vi.x,r[1]=pa.y,r[5]=Vd.y,r[9]=Vi.y,r[2]=pa.z,r[6]=Vd.z,r[10]=Vi.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,a=this.elements,l=i[0],c=i[4],u=i[8],d=i[12],f=i[1],A=i[5],m=i[9],g=i[13],b=i[2],x=i[6],E=i[10],y=i[14],_=i[3],w=i[7],S=i[11],R=i[15],U=r[0],L=r[4],F=r[8],D=r[12],O=r[1],z=r[5],J=r[9],$=r[13],nt=r[2],At=r[6],G=r[10],X=r[14],tt=r[3],ut=r[7],xt=r[11],V=r[15];return a[0]=l*U+c*O+u*nt+d*tt,a[4]=l*L+c*z+u*At+d*ut,a[8]=l*F+c*J+u*G+d*xt,a[12]=l*D+c*$+u*X+d*V,a[1]=f*U+A*O+m*nt+g*tt,a[5]=f*L+A*z+m*At+g*ut,a[9]=f*F+A*J+m*G+g*xt,a[13]=f*D+A*$+m*X+g*V,a[2]=b*U+x*O+E*nt+y*tt,a[6]=b*L+x*z+E*At+y*ut,a[10]=b*F+x*J+E*G+y*xt,a[14]=b*D+x*$+E*X+y*V,a[3]=_*U+w*O+S*nt+R*tt,a[7]=_*L+w*z+S*At+R*ut,a[11]=_*F+w*J+S*G+R*xt,a[15]=_*D+w*$+S*X+R*V,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],r=t[8],a=t[12],l=t[1],c=t[5],u=t[9],d=t[13],f=t[2],A=t[6],m=t[10],g=t[14],b=t[3],x=t[7],E=t[11],y=t[15];return b*(+a*u*A-r*d*A-a*c*m+i*d*m+r*c*g-i*u*g)+x*(+e*u*g-e*d*m+a*l*m-r*l*g+r*d*f-a*u*f)+E*(+e*d*A-e*c*g-a*l*A+i*l*g+a*c*f-i*d*f)+y*(-r*c*f-e*u*A+e*c*m+r*l*A-i*l*m+i*u*f)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],r=t[2],a=t[3],l=t[4],c=t[5],u=t[6],d=t[7],f=t[8],A=t[9],m=t[10],g=t[11],b=t[12],x=t[13],E=t[14],y=t[15],_=A*E*d-x*m*d+x*u*g-c*E*g-A*u*y+c*m*y,w=b*m*d-f*E*d-b*u*g+l*E*g+f*u*y-l*m*y,S=f*x*d-b*A*d+b*c*g-l*x*g-f*c*y+l*A*y,R=b*A*u-f*x*u-b*c*m+l*x*m+f*c*E-l*A*E,U=e*_+i*w+r*S+a*R;if(U===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/U;return t[0]=_*L,t[1]=(x*m*a-A*E*a-x*r*g+i*E*g+A*r*y-i*m*y)*L,t[2]=(c*E*a-x*u*a+x*r*d-i*E*d-c*r*y+i*u*y)*L,t[3]=(A*u*a-c*m*a-A*r*d+i*m*d+c*r*g-i*u*g)*L,t[4]=w*L,t[5]=(f*E*a-b*m*a+b*r*g-e*E*g-f*r*y+e*m*y)*L,t[6]=(b*u*a-l*E*a-b*r*d+e*E*d+l*r*y-e*u*y)*L,t[7]=(l*m*a-f*u*a+f*r*d-e*m*d-l*r*g+e*u*g)*L,t[8]=S*L,t[9]=(b*A*a-f*x*a-b*i*g+e*x*g+f*i*y-e*A*y)*L,t[10]=(l*x*a-b*c*a+b*i*d-e*x*d-l*i*y+e*c*y)*L,t[11]=(f*c*a-l*A*a-f*i*d+e*A*d+l*i*g-e*c*g)*L,t[12]=R*L,t[13]=(f*x*r-b*A*r+b*i*m-e*x*m-f*i*E+e*A*E)*L,t[14]=(b*c*r-l*x*r-b*i*u+e*x*u+l*i*E-e*c*E)*L,t[15]=(l*A*r-f*c*r+f*i*u-e*A*u-l*i*m+e*c*m)*L,this}scale(t){const e=this.elements,i=t.x,r=t.y,a=t.z;return e[0]*=i,e[4]*=r,e[8]*=a,e[1]*=i,e[5]*=r,e[9]*=a,e[2]*=i,e[6]*=r,e[10]*=a,e[3]*=i,e[7]*=r,e[11]*=a,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),r=Math.sin(e),a=1-i,l=t.x,c=t.y,u=t.z,d=a*l,f=a*c;return this.set(d*l+i,d*c-r*u,d*u+r*c,0,d*c+r*u,f*c+i,f*u-r*l,0,d*u-r*c,f*u+r*l,a*u*u+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,r,a,l){return this.set(1,i,a,0,t,1,l,0,e,r,1,0,0,0,0,1),this}compose(t,e,i){const r=this.elements,a=e._x,l=e._y,c=e._z,u=e._w,d=a+a,f=l+l,A=c+c,m=a*d,g=a*f,b=a*A,x=l*f,E=l*A,y=c*A,_=u*d,w=u*f,S=u*A,R=i.x,U=i.y,L=i.z;return r[0]=(1-(x+y))*R,r[1]=(g+S)*R,r[2]=(b-w)*R,r[3]=0,r[4]=(g-S)*U,r[5]=(1-(m+y))*U,r[6]=(E+_)*U,r[7]=0,r[8]=(b+w)*L,r[9]=(E-_)*L,r[10]=(1-(m+x))*L,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){const r=this.elements;let a=Sl.set(r[0],r[1],r[2]).length();const l=Sl.set(r[4],r[5],r[6]).length(),c=Sl.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),t.x=r[12],t.y=r[13],t.z=r[14],yr.copy(this);const d=1/a,f=1/l,A=1/c;return yr.elements[0]*=d,yr.elements[1]*=d,yr.elements[2]*=d,yr.elements[4]*=f,yr.elements[5]*=f,yr.elements[6]*=f,yr.elements[8]*=A,yr.elements[9]*=A,yr.elements[10]*=A,e.setFromRotationMatrix(yr),i.x=a,i.y=l,i.z=c,this}makePerspective(t,e,i,r,a,l,c=Mr){const u=this.elements,d=2*a/(e-t),f=2*a/(i-r),A=(e+t)/(e-t),m=(i+r)/(i-r);let g,b;if(c===Mr)g=-(l+a)/(l-a),b=-2*l*a/(l-a);else if(c===$u)g=-l/(l-a),b=-l*a/(l-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return u[0]=d,u[4]=0,u[8]=A,u[12]=0,u[1]=0,u[5]=f,u[9]=m,u[13]=0,u[2]=0,u[6]=0,u[10]=g,u[14]=b,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(t,e,i,r,a,l,c=Mr){const u=this.elements,d=1/(e-t),f=1/(i-r),A=1/(l-a),m=(e+t)*d,g=(i+r)*f;let b,x;if(c===Mr)b=(l+a)*A,x=-2*A;else if(c===$u)b=a*A,x=-1*A;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return u[0]=2*d,u[4]=0,u[8]=0,u[12]=-m,u[1]=0,u[5]=2*f,u[9]=0,u[13]=-g,u[2]=0,u[6]=0,u[10]=x,u[14]=-b,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const Sl=new W,yr=new ve,BD=new W(0,0,0),TD=new W(1,1,1),pa=new W,Vd=new W,Vi=new W,i1=new ve,r1=new Oi;class Yi{constructor(t=0,e=0,i=0,r=Yi.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,r=this._order){return this._x=t,this._y=e,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const r=t.elements,a=r[0],l=r[4],c=r[8],u=r[1],d=r[5],f=r[9],A=r[2],m=r[6],g=r[10];switch(e){case"XYZ":this._y=Math.asin(_e(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,g),this._z=Math.atan2(-l,a)):(this._x=Math.atan2(m,d),this._z=0);break;case"YXZ":this._x=Math.asin(-_e(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(c,g),this._z=Math.atan2(u,d)):(this._y=Math.atan2(-A,a),this._z=0);break;case"ZXY":this._x=Math.asin(_e(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-A,g),this._z=Math.atan2(-l,d)):(this._y=0,this._z=Math.atan2(u,a));break;case"ZYX":this._y=Math.asin(-_e(A,-1,1)),Math.abs(A)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-l,d));break;case"YZX":this._z=Math.asin(_e(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-f,d),this._y=Math.atan2(-A,a)):(this._x=0,this._y=Math.atan2(c,g));break;case"XZY":this._z=Math.asin(-_e(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(m,d),this._y=Math.atan2(c,a)):(this._x=Math.atan2(-f,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return i1.makeRotationFromQuaternion(t),this.setFromRotationMatrix(i1,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return r1.setFromEuler(this),this.setFromQuaternion(r1,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Yi.DEFAULT_ORDER="XYZ";class wA{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let ID=0;const s1=new W,Bl=new Oi,As=new ve,qd=new W,lu=new W,RD=new W,LD=new Oi,a1=new W(1,0,0),o1=new W(0,1,0),l1=new W(0,0,1),c1={type:"added"},DD={type:"removed"},Tl={type:"childadded",child:null},x0={type:"childremoved",child:null};class Ye extends jr{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ID++}),this.uuid=Xi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ye.DEFAULT_UP.clone();const t=new W,e=new Yi,i=new Oi,r=new W(1,1,1);function a(){i.setFromEuler(e,!1)}function l(){e.setFromQuaternion(i,void 0,!1)}e._onChange(a),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ve},normalMatrix:{value:new Ce}}),this.matrix=new ve,this.matrixWorld=new ve,this.matrixAutoUpdate=Ye.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ye.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new wA,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Bl.setFromAxisAngle(t,e),this.quaternion.multiply(Bl),this}rotateOnWorldAxis(t,e){return Bl.setFromAxisAngle(t,e),this.quaternion.premultiply(Bl),this}rotateX(t){return this.rotateOnAxis(a1,t)}rotateY(t){return this.rotateOnAxis(o1,t)}rotateZ(t){return this.rotateOnAxis(l1,t)}translateOnAxis(t,e){return s1.copy(t).applyQuaternion(this.quaternion),this.position.add(s1.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(a1,t)}translateY(t){return this.translateOnAxis(o1,t)}translateZ(t){return this.translateOnAxis(l1,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(As.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?qd.copy(t):qd.set(t,e,i);const r=this.parent;this.updateWorldMatrix(!0,!1),lu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?As.lookAt(lu,qd,this.up):As.lookAt(qd,lu,this.up),this.quaternion.setFromRotationMatrix(As),r&&(As.extractRotation(r.matrixWorld),Bl.setFromRotationMatrix(As),this.quaternion.premultiply(Bl.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(c1),Tl.child=t,this.dispatchEvent(Tl),Tl.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(DD),x0.child=t,this.dispatchEvent(x0),x0.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),As.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),As.multiply(t.parent.matrixWorld)),t.applyMatrix4(As),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(c1),Tl.child=t,this.dispatchEvent(Tl),Tl.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,r=this.children.length;i<r;i++){const l=this.children[i].getObjectByProperty(t,e);if(l!==void 0)return l}}getObjectsByProperty(t,e,i=[]){this[t]===e&&i.push(this);const r=this.children;for(let a=0,l=r.length;a<l;a++)r[a].getObjectsByProperty(t,e,i);return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lu,t,RD),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lu,LD,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){const i=this.parent;if(t===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const r=this.children;for(let a=0,l=r.length;a<l;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function a(c,u){return c[u.uuid]===void 0&&(c[u.uuid]=u.toJSON(t)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(t.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const u=c.shapes;if(Array.isArray(u))for(let d=0,f=u.length;d<f;d++){const A=u[d];a(t.shapes,A)}else a(t.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let u=0,d=this.material.length;u<d;u++)c.push(a(t.materials,this.material[u]));r.material=c}else r.material=a(t.materials,this.material);if(this.children.length>0){r.children=[];for(let c=0;c<this.children.length;c++)r.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let c=0;c<this.animations.length;c++){const u=this.animations[c];r.animations.push(a(t.animations,u))}}if(e){const c=l(t.geometries),u=l(t.materials),d=l(t.textures),f=l(t.images),A=l(t.shapes),m=l(t.skeletons),g=l(t.animations),b=l(t.nodes);c.length>0&&(i.geometries=c),u.length>0&&(i.materials=u),d.length>0&&(i.textures=d),f.length>0&&(i.images=f),A.length>0&&(i.shapes=A),m.length>0&&(i.skeletons=m),g.length>0&&(i.animations=g),b.length>0&&(i.nodes=b)}return i.object=r,i;function l(c){const u=[];for(const d in c){const f=c[d];delete f.metadata,u.push(f)}return u}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let i=0;i<t.children.length;i++){const r=t.children[i];this.add(r.clone())}return this}}Ye.DEFAULT_UP=new W(0,1,0);Ye.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ye.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Er=new W,ms=new W,C0=new W,gs=new W,Il=new W,Rl=new W,u1=new W,_0=new W,w0=new W,M0=new W,S0=new Xe,B0=new Xe,T0=new Xe;class Di{constructor(t=new W,e=new W,i=new W){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,r){r.subVectors(i,e),Er.subVectors(t,e),r.cross(Er);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(t,e,i,r,a){Er.subVectors(r,e),ms.subVectors(i,e),C0.subVectors(t,e);const l=Er.dot(Er),c=Er.dot(ms),u=Er.dot(C0),d=ms.dot(ms),f=ms.dot(C0),A=l*d-c*c;if(A===0)return a.set(0,0,0),null;const m=1/A,g=(d*u-c*f)*m,b=(l*f-c*u)*m;return a.set(1-g-b,b,g)}static containsPoint(t,e,i,r){return this.getBarycoord(t,e,i,r,gs)===null?!1:gs.x>=0&&gs.y>=0&&gs.x+gs.y<=1}static getInterpolation(t,e,i,r,a,l,c,u){return this.getBarycoord(t,e,i,r,gs)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(a,gs.x),u.addScaledVector(l,gs.y),u.addScaledVector(c,gs.z),u)}static getInterpolatedAttribute(t,e,i,r,a,l){return S0.setScalar(0),B0.setScalar(0),T0.setScalar(0),S0.fromBufferAttribute(t,e),B0.fromBufferAttribute(t,i),T0.fromBufferAttribute(t,r),l.setScalar(0),l.addScaledVector(S0,a.x),l.addScaledVector(B0,a.y),l.addScaledVector(T0,a.z),l}static isFrontFacing(t,e,i,r){return Er.subVectors(i,e),ms.subVectors(t,e),Er.cross(ms).dot(r)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,i,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Er.subVectors(this.c,this.b),ms.subVectors(this.a,this.b),Er.cross(ms).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Di.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Di.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,r,a){return Di.getInterpolation(t,this.a,this.b,this.c,e,i,r,a)}containsPoint(t){return Di.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Di.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,r=this.b,a=this.c;let l,c;Il.subVectors(r,i),Rl.subVectors(a,i),_0.subVectors(t,i);const u=Il.dot(_0),d=Rl.dot(_0);if(u<=0&&d<=0)return e.copy(i);w0.subVectors(t,r);const f=Il.dot(w0),A=Rl.dot(w0);if(f>=0&&A<=f)return e.copy(r);const m=u*A-f*d;if(m<=0&&u>=0&&f<=0)return l=u/(u-f),e.copy(i).addScaledVector(Il,l);M0.subVectors(t,a);const g=Il.dot(M0),b=Rl.dot(M0);if(b>=0&&g<=b)return e.copy(a);const x=g*d-u*b;if(x<=0&&d>=0&&b<=0)return c=d/(d-b),e.copy(i).addScaledVector(Rl,c);const E=f*b-g*A;if(E<=0&&A-f>=0&&g-b>=0)return u1.subVectors(a,r),c=(A-f)/(A-f+(g-b)),e.copy(r).addScaledVector(u1,c);const y=1/(E+x+m);return l=x*y,c=m*y,e.copy(i).addScaledVector(Il,l).addScaledVector(Rl,c)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const wS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Aa={h:0,s:0,l:0},Wd={h:0,s:0,l:0};function I0(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}class $t{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){const r=t;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Li){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Ve.toWorkingColorSpace(this,e),this}setRGB(t,e,i,r=Ve.workingColorSpace){return this.r=t,this.g=e,this.b=i,Ve.toWorkingColorSpace(this,r),this}setHSL(t,e,i,r=Ve.workingColorSpace){if(t=iE(t,1),e=_e(e,0,1),i=_e(i,0,1),e===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+e):i+e-i*e,l=2*i-a;this.r=I0(l,a,t+1/3),this.g=I0(l,a,t),this.b=I0(l,a,t-1/3)}return Ve.toWorkingColorSpace(this,r),this}setStyle(t,e=Li){function i(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let a;const l=r[1],c=r[2];switch(l){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,e);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,e);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const a=r[1],l=a.length;if(l===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,e);if(l===6)return this.setHex(parseInt(a,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Li){const i=wS[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ls(t.r),this.g=Ls(t.g),this.b=Ls(t.b),this}copyLinearToSRGB(t){return this.r=ec(t.r),this.g=ec(t.g),this.b=ec(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Li){return Ve.fromWorkingColorSpace(si.copy(this),t),Math.round(_e(si.r*255,0,255))*65536+Math.round(_e(si.g*255,0,255))*256+Math.round(_e(si.b*255,0,255))}getHexString(t=Li){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Ve.workingColorSpace){Ve.fromWorkingColorSpace(si.copy(this),e);const i=si.r,r=si.g,a=si.b,l=Math.max(i,r,a),c=Math.min(i,r,a);let u,d;const f=(c+l)/2;if(c===l)u=0,d=0;else{const A=l-c;switch(d=f<=.5?A/(l+c):A/(2-l-c),l){case i:u=(r-a)/A+(r<a?6:0);break;case r:u=(a-i)/A+2;break;case a:u=(i-r)/A+4;break}u/=6}return t.h=u,t.s=d,t.l=f,t}getRGB(t,e=Ve.workingColorSpace){return Ve.fromWorkingColorSpace(si.copy(this),e),t.r=si.r,t.g=si.g,t.b=si.b,t}getStyle(t=Li){Ve.fromWorkingColorSpace(si.copy(this),t);const e=si.r,i=si.g,r=si.b;return t!==Li?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(t,e,i){return this.getHSL(Aa),this.setHSL(Aa.h+t,Aa.s+e,Aa.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Aa),t.getHSL(Wd);const i=Qu(Aa.h,Wd.h,e),r=Qu(Aa.s,Wd.s,e),a=Qu(Aa.l,Wd.l,e);return this.setHSL(i,r,a),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,i=this.g,r=this.b,a=t.elements;return this.r=a[0]*e+a[3]*i+a[6]*r,this.g=a[1]*e+a[4]*i+a[7]*r,this.b=a[2]*e+a[5]*i+a[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const si=new $t;$t.NAMES=wS;let UD=0;class ci extends jr{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:UD++}),this.uuid=Xi(),this.name="",this.type="Material",this.blending=Io,this.side=Os,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=fp,this.blendDst=pp,this.blendEquation=_a,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new $t(0,0,0),this.blendAlpha=0,this.depthFunc=Uo,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ny,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=xo,this.stencilZFail=xo,this.stencilZPass=xo,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const i=t[e];if(i===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];if(r===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Io&&(i.blending=this.blending),this.side!==Os&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==fp&&(i.blendSrc=this.blendSrc),this.blendDst!==pp&&(i.blendDst=this.blendDst),this.blendEquation!==_a&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Uo&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ny&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==xo&&(i.stencilFail=this.stencilFail),this.stencilZFail!==xo&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==xo&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}if(e){const a=r(t.textures),l=r(t.images);a.length>0&&(i.textures=a),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(e!==null){const r=e.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=e[a].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Da extends ci{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new $t(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Yi,this.combine=Ah,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const ws=OD();function OD(){const n=new ArrayBuffer(4),t=new Float32Array(n),e=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let u=0;u<256;++u){const d=u-127;d<-27?(i[u]=0,i[u|256]=32768,r[u]=24,r[u|256]=24):d<-14?(i[u]=1024>>-d-14,i[u|256]=1024>>-d-14|32768,r[u]=-d-1,r[u|256]=-d-1):d<=15?(i[u]=d+15<<10,i[u|256]=d+15<<10|32768,r[u]=13,r[u|256]=13):d<128?(i[u]=31744,i[u|256]=64512,r[u]=24,r[u|256]=24):(i[u]=31744,i[u|256]=64512,r[u]=13,r[u|256]=13)}const a=new Uint32Array(2048),l=new Uint32Array(64),c=new Uint32Array(64);for(let u=1;u<1024;++u){let d=u<<13,f=0;for(;(d&8388608)===0;)d<<=1,f-=8388608;d&=-8388609,f+=947912704,a[u]=d|f}for(let u=1024;u<2048;++u)a[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)l[u]=u<<23;l[31]=1199570944,l[32]=2147483648;for(let u=33;u<63;++u)l[u]=2147483648+(u-32<<23);l[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(c[u]=1024);return{floatView:t,uint32View:e,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:l,offsetTable:c}}function Ii(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=_e(n,-65504,65504),ws.floatView[0]=n;const t=ws.uint32View[0],e=t>>23&511;return ws.baseTable[e]+((t&8388607)>>ws.shiftTable[e])}function Iu(n){const t=n>>10;return ws.uint32View[0]=ws.mantissaTable[ws.offsetTable[t]+(n&1023)]+ws.exponentTable[t],ws.floatView[0]}const ND={toHalfFloat:Ii,fromHalfFloat:Iu},Nn=new W,jd=new Ut;let PD=0;class ln{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:PD++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=Zu,this.updateRanges=[],this.gpuType=Ai,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[t+r]=e.array[i+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)jd.fromBufferAttribute(this,e),jd.applyMatrix3(t),this.setXY(e,jd.x,jd.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)Nn.fromBufferAttribute(this,e),Nn.applyMatrix3(t),this.setXYZ(e,Nn.x,Nn.y,Nn.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)Nn.fromBufferAttribute(this,e),Nn.applyMatrix4(t),this.setXYZ(e,Nn.x,Nn.y,Nn.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Nn.fromBufferAttribute(this,e),Nn.applyNormalMatrix(t),this.setXYZ(e,Nn.x,Nn.y,Nn.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Nn.fromBufferAttribute(this,e),Nn.transformDirection(t),this.setXYZ(e,Nn.x,Nn.y,Nn.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=mi(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=Se(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=mi(e,this.array)),e}setX(t,e){return this.normalized&&(e=Se(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=mi(e,this.array)),e}setY(t,e){return this.normalized&&(e=Se(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=mi(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Se(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=mi(e,this.array)),e}setW(t,e){return this.normalized&&(e=Se(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Se(e,this.array),i=Se(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=Se(e,this.array),i=Se(i,this.array),r=Se(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,e,i,r,a){return t*=this.itemSize,this.normalized&&(e=Se(e,this.array),i=Se(i,this.array),r=Se(r,this.array),a=Se(a,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=a,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==Zu&&(t.usage=this.usage),t}}class FD extends ln{constructor(t,e,i){super(new Int8Array(t),e,i)}}class kD extends ln{constructor(t,e,i){super(new Uint8Array(t),e,i)}}class QD extends ln{constructor(t,e,i){super(new Uint8ClampedArray(t),e,i)}}class zD extends ln{constructor(t,e,i){super(new Int16Array(t),e,i)}}class rE extends ln{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class GD extends ln{constructor(t,e,i){super(new Int32Array(t),e,i)}}class sE extends ln{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class HD extends ln{constructor(t,e,i){super(new Uint16Array(t),e,i),this.isFloat16BufferAttribute=!0}getX(t){let e=Iu(this.array[t*this.itemSize]);return this.normalized&&(e=mi(e,this.array)),e}setX(t,e){return this.normalized&&(e=Se(e,this.array)),this.array[t*this.itemSize]=Ii(e),this}getY(t){let e=Iu(this.array[t*this.itemSize+1]);return this.normalized&&(e=mi(e,this.array)),e}setY(t,e){return this.normalized&&(e=Se(e,this.array)),this.array[t*this.itemSize+1]=Ii(e),this}getZ(t){let e=Iu(this.array[t*this.itemSize+2]);return this.normalized&&(e=mi(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Se(e,this.array)),this.array[t*this.itemSize+2]=Ii(e),this}getW(t){let e=Iu(this.array[t*this.itemSize+3]);return this.normalized&&(e=mi(e,this.array)),e}setW(t,e){return this.normalized&&(e=Se(e,this.array)),this.array[t*this.itemSize+3]=Ii(e),this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Se(e,this.array),i=Se(i,this.array)),this.array[t+0]=Ii(e),this.array[t+1]=Ii(i),this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=Se(e,this.array),i=Se(i,this.array),r=Se(r,this.array)),this.array[t+0]=Ii(e),this.array[t+1]=Ii(i),this.array[t+2]=Ii(r),this}setXYZW(t,e,i,r,a){return t*=this.itemSize,this.normalized&&(e=Se(e,this.array),i=Se(i,this.array),r=Se(r,this.array),a=Se(a,this.array)),this.array[t+0]=Ii(e),this.array[t+1]=Ii(i),this.array[t+2]=Ii(r),this.array[t+3]=Ii(a),this}}class oe extends ln{constructor(t,e,i){super(new Float32Array(t),e,i)}}let VD=0;const sr=new ve,R0=new Ye,Ll=new W,qi=new Ei,cu=new Ei,Wn=new W;class Ie extends jr{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:VD++}),this.uuid=Xi(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(xS(t)?sE:rE)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new Ce().getNormalMatrix(t);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return sr.makeRotationFromQuaternion(t),this.applyMatrix4(sr),this}rotateX(t){return sr.makeRotationX(t),this.applyMatrix4(sr),this}rotateY(t){return sr.makeRotationY(t),this.applyMatrix4(sr),this}rotateZ(t){return sr.makeRotationZ(t),this.applyMatrix4(sr),this}translate(t,e,i){return sr.makeTranslation(t,e,i),this.applyMatrix4(sr),this}scale(t,e,i){return sr.makeScale(t,e,i),this.applyMatrix4(sr),this}lookAt(t){return R0.lookAt(t),R0.updateMatrix(),this.applyMatrix4(R0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ll).negate(),this.translate(Ll.x,Ll.y,Ll.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const i=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];i.push(l.x,l.y,l.z||0)}this.setAttribute("position",new oe(i,3))}else{const i=Math.min(t.length,e.count);for(let r=0;r<i;r++){const a=t[r];e.setXYZ(r,a.x,a.y,a.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ei);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new W(-1/0,-1/0,-1/0),new W(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,r=e.length;i<r;i++){const a=e[i];qi.setFromBufferAttribute(a),this.morphTargetsRelative?(Wn.addVectors(this.boundingBox.min,qi.min),this.boundingBox.expandByPoint(Wn),Wn.addVectors(this.boundingBox.max,qi.max),this.boundingBox.expandByPoint(Wn)):(this.boundingBox.expandByPoint(qi.min),this.boundingBox.expandByPoint(qi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new li);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new W,1/0);return}if(t){const i=this.boundingSphere.center;if(qi.setFromBufferAttribute(t),e)for(let a=0,l=e.length;a<l;a++){const c=e[a];cu.setFromBufferAttribute(c),this.morphTargetsRelative?(Wn.addVectors(qi.min,cu.min),qi.expandByPoint(Wn),Wn.addVectors(qi.max,cu.max),qi.expandByPoint(Wn)):(qi.expandByPoint(cu.min),qi.expandByPoint(cu.max))}qi.getCenter(i);let r=0;for(let a=0,l=t.count;a<l;a++)Wn.fromBufferAttribute(t,a),r=Math.max(r,i.distanceToSquared(Wn));if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a],u=this.morphTargetsRelative;for(let d=0,f=c.count;d<f;d++)Wn.fromBufferAttribute(c,d),u&&(Ll.fromBufferAttribute(t,d),Wn.add(Ll)),r=Math.max(r,i.distanceToSquared(Wn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.position,r=e.normal,a=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ln(new Float32Array(4*i.count),4));const l=this.getAttribute("tangent"),c=[],u=[];for(let F=0;F<i.count;F++)c[F]=new W,u[F]=new W;const d=new W,f=new W,A=new W,m=new Ut,g=new Ut,b=new Ut,x=new W,E=new W;function y(F,D,O){d.fromBufferAttribute(i,F),f.fromBufferAttribute(i,D),A.fromBufferAttribute(i,O),m.fromBufferAttribute(a,F),g.fromBufferAttribute(a,D),b.fromBufferAttribute(a,O),f.sub(d),A.sub(d),g.sub(m),b.sub(m);const z=1/(g.x*b.y-b.x*g.y);isFinite(z)&&(x.copy(f).multiplyScalar(b.y).addScaledVector(A,-g.y).multiplyScalar(z),E.copy(A).multiplyScalar(g.x).addScaledVector(f,-b.x).multiplyScalar(z),c[F].add(x),c[D].add(x),c[O].add(x),u[F].add(E),u[D].add(E),u[O].add(E))}let _=this.groups;_.length===0&&(_=[{start:0,count:t.count}]);for(let F=0,D=_.length;F<D;++F){const O=_[F],z=O.start,J=O.count;for(let $=z,nt=z+J;$<nt;$+=3)y(t.getX($+0),t.getX($+1),t.getX($+2))}const w=new W,S=new W,R=new W,U=new W;function L(F){R.fromBufferAttribute(r,F),U.copy(R);const D=c[F];w.copy(D),w.sub(R.multiplyScalar(R.dot(D))).normalize(),S.crossVectors(U,D);const z=S.dot(u[F])<0?-1:1;l.setXYZW(F,w.x,w.y,w.z,z)}for(let F=0,D=_.length;F<D;++F){const O=_[F],z=O.start,J=O.count;for(let $=z,nt=z+J;$<nt;$+=3)L(t.getX($+0)),L(t.getX($+1)),L(t.getX($+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ln(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let m=0,g=i.count;m<g;m++)i.setXYZ(m,0,0,0);const r=new W,a=new W,l=new W,c=new W,u=new W,d=new W,f=new W,A=new W;if(t)for(let m=0,g=t.count;m<g;m+=3){const b=t.getX(m+0),x=t.getX(m+1),E=t.getX(m+2);r.fromBufferAttribute(e,b),a.fromBufferAttribute(e,x),l.fromBufferAttribute(e,E),f.subVectors(l,a),A.subVectors(r,a),f.cross(A),c.fromBufferAttribute(i,b),u.fromBufferAttribute(i,x),d.fromBufferAttribute(i,E),c.add(f),u.add(f),d.add(f),i.setXYZ(b,c.x,c.y,c.z),i.setXYZ(x,u.x,u.y,u.z),i.setXYZ(E,d.x,d.y,d.z)}else for(let m=0,g=e.count;m<g;m+=3)r.fromBufferAttribute(e,m+0),a.fromBufferAttribute(e,m+1),l.fromBufferAttribute(e,m+2),f.subVectors(l,a),A.subVectors(r,a),f.cross(A),i.setXYZ(m+0,f.x,f.y,f.z),i.setXYZ(m+1,f.x,f.y,f.z),i.setXYZ(m+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Wn.fromBufferAttribute(t,e),Wn.normalize(),t.setXYZ(e,Wn.x,Wn.y,Wn.z)}toNonIndexed(){function t(c,u){const d=c.array,f=c.itemSize,A=c.normalized,m=new d.constructor(u.length*f);let g=0,b=0;for(let x=0,E=u.length;x<E;x++){c.isInterleavedBufferAttribute?g=u[x]*c.data.stride+c.offset:g=u[x]*f;for(let y=0;y<f;y++)m[b++]=d[g++]}return new ln(m,f,A)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Ie,i=this.index.array,r=this.attributes;for(const c in r){const u=r[c],d=t(u,i);e.setAttribute(c,d)}const a=this.morphAttributes;for(const c in a){const u=[],d=a[c];for(let f=0,A=d.length;f<A;f++){const m=d[f],g=t(m,i);u.push(g)}e.morphAttributes[c]=u}e.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let c=0,u=l.length;c<u;c++){const d=l[c];e.addGroup(d.start,d.count,d.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const d in u)u[d]!==void 0&&(t[d]=u[d]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const u in i){const d=i[u];t.data.attributes[u]=d.toJSON(t.data)}const r={};let a=!1;for(const u in this.morphAttributes){const d=this.morphAttributes[u],f=[];for(let A=0,m=d.length;A<m;A++){const g=d[A];f.push(g.toJSON(t.data))}f.length>0&&(r[u]=f,a=!0)}a&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(t.data.groups=JSON.parse(JSON.stringify(l)));const c=this.boundingSphere;return c!==null&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;i!==null&&this.setIndex(i.clone(e));const r=t.attributes;for(const d in r){const f=r[d];this.setAttribute(d,f.clone(e))}const a=t.morphAttributes;for(const d in a){const f=[],A=a[d];for(let m=0,g=A.length;m<g;m++)f.push(A[m].clone(e));this.morphAttributes[d]=f}this.morphTargetsRelative=t.morphTargetsRelative;const l=t.groups;for(let d=0,f=l.length;d<f;d++){const A=l[d];this.addGroup(A.start,A.count,A.materialIndex)}const c=t.boundingBox;c!==null&&(this.boundingBox=c.clone());const u=t.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const h1=new ve,eo=new uc,Xd=new li,d1=new W,Yd=new W,Kd=new W,Jd=new W,L0=new W,Zd=new W,f1=new W,$d=new W;class Pn extends Ye{constructor(t=new Ie,e=new Da){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=r.length;a<l;a++){const c=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}getVertexPosition(t,e){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,l=i.morphTargetsRelative;e.fromBufferAttribute(r,t);const c=this.morphTargetInfluences;if(a&&c){Zd.set(0,0,0);for(let u=0,d=a.length;u<d;u++){const f=c[u],A=a[u];f!==0&&(L0.fromBufferAttribute(A,t),l?Zd.addScaledVector(L0,f):Zd.addScaledVector(L0.sub(e),f))}e.add(Zd)}return e}raycast(t,e){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Xd.copy(i.boundingSphere),Xd.applyMatrix4(a),eo.copy(t.ray).recast(t.near),!(Xd.containsPoint(eo.origin)===!1&&(eo.intersectSphere(Xd,d1)===null||eo.origin.distanceToSquared(d1)>(t.far-t.near)**2))&&(h1.copy(a).invert(),eo.copy(t.ray).applyMatrix4(h1),!(i.boundingBox!==null&&eo.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,eo)))}_computeIntersections(t,e,i){let r;const a=this.geometry,l=this.material,c=a.index,u=a.attributes.position,d=a.attributes.uv,f=a.attributes.uv1,A=a.attributes.normal,m=a.groups,g=a.drawRange;if(c!==null)if(Array.isArray(l))for(let b=0,x=m.length;b<x;b++){const E=m[b],y=l[E.materialIndex],_=Math.max(E.start,g.start),w=Math.min(c.count,Math.min(E.start+E.count,g.start+g.count));for(let S=_,R=w;S<R;S+=3){const U=c.getX(S),L=c.getX(S+1),F=c.getX(S+2);r=tf(this,y,t,i,d,f,A,U,L,F),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=E.materialIndex,e.push(r))}}else{const b=Math.max(0,g.start),x=Math.min(c.count,g.start+g.count);for(let E=b,y=x;E<y;E+=3){const _=c.getX(E),w=c.getX(E+1),S=c.getX(E+2);r=tf(this,l,t,i,d,f,A,_,w,S),r&&(r.faceIndex=Math.floor(E/3),e.push(r))}}else if(u!==void 0)if(Array.isArray(l))for(let b=0,x=m.length;b<x;b++){const E=m[b],y=l[E.materialIndex],_=Math.max(E.start,g.start),w=Math.min(u.count,Math.min(E.start+E.count,g.start+g.count));for(let S=_,R=w;S<R;S+=3){const U=S,L=S+1,F=S+2;r=tf(this,y,t,i,d,f,A,U,L,F),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=E.materialIndex,e.push(r))}}else{const b=Math.max(0,g.start),x=Math.min(u.count,g.start+g.count);for(let E=b,y=x;E<y;E+=3){const _=E,w=E+1,S=E+2;r=tf(this,l,t,i,d,f,A,_,w,S),r&&(r.faceIndex=Math.floor(E/3),e.push(r))}}}}function qD(n,t,e,i,r,a,l,c){let u;if(t.side===yi?u=i.intersectTriangle(l,a,r,!0,c):u=i.intersectTriangle(r,a,l,t.side===Os,c),u===null)return null;$d.copy(c),$d.applyMatrix4(n.matrixWorld);const d=e.ray.origin.distanceTo($d);return d<e.near||d>e.far?null:{distance:d,point:$d.clone(),object:n}}function tf(n,t,e,i,r,a,l,c,u,d){n.getVertexPosition(c,Yd),n.getVertexPosition(u,Kd),n.getVertexPosition(d,Jd);const f=qD(n,t,e,i,Yd,Kd,Jd,f1);if(f){const A=new W;Di.getBarycoord(f1,Yd,Kd,Jd,A),r&&(f.uv=Di.getInterpolatedAttribute(r,c,u,d,A,new Ut)),a&&(f.uv1=Di.getInterpolatedAttribute(a,c,u,d,A,new Ut)),l&&(f.normal=Di.getInterpolatedAttribute(l,c,u,d,A,new W),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));const m={a:c,b:u,c:d,normal:new W,materialIndex:0};Di.getNormal(Yd,Kd,Jd,m.normal),f.face=m,f.barycoord=A}return f}class Fo extends Ie{constructor(t=1,e=1,i=1,r=1,a=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:a,depthSegments:l};const c=this;r=Math.floor(r),a=Math.floor(a),l=Math.floor(l);const u=[],d=[],f=[],A=[];let m=0,g=0;b("z","y","x",-1,-1,i,e,t,l,a,0),b("z","y","x",1,-1,i,e,-t,l,a,1),b("x","z","y",1,1,t,i,e,r,l,2),b("x","z","y",1,-1,t,i,-e,r,l,3),b("x","y","z",1,-1,t,e,i,r,a,4),b("x","y","z",-1,-1,t,e,-i,r,a,5),this.setIndex(u),this.setAttribute("position",new oe(d,3)),this.setAttribute("normal",new oe(f,3)),this.setAttribute("uv",new oe(A,2));function b(x,E,y,_,w,S,R,U,L,F,D){const O=S/L,z=R/F,J=S/2,$=R/2,nt=U/2,At=L+1,G=F+1;let X=0,tt=0;const ut=new W;for(let xt=0;xt<G;xt++){const V=xt*z-$;for(let rt=0;rt<At;rt++){const yt=rt*O-J;ut[x]=yt*_,ut[E]=V*w,ut[y]=nt,d.push(ut.x,ut.y,ut.z),ut[x]=0,ut[E]=0,ut[y]=U>0?1:-1,f.push(ut.x,ut.y,ut.z),A.push(rt/L),A.push(1-xt/F),X+=1}}for(let xt=0;xt<F;xt++)for(let V=0;V<L;V++){const rt=m+V+At*xt,yt=m+V+At*(xt+1),Et=m+(V+1)+At*(xt+1),Ot=m+(V+1)+At*xt;u.push(rt,yt,Ot),u.push(yt,Et,Ot),tt+=6}c.addGroup(g,tt,D),g+=tt,m+=X}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Fo(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function sc(n){const t={};for(const e in n){t[e]={};for(const i in n[e]){const r=n[e][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][i]=null):t[e][i]=r.clone():Array.isArray(r)?t[e][i]=r.slice():t[e][i]=r}}return t}function fi(n){const t={};for(let e=0;e<n.length;e++){const i=sc(n[e]);for(const r in i)t[r]=i[r]}return t}function WD(n){const t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function MS(n){const t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Ve.workingColorSpace}const SS={clone:sc,merge:fi};var jD=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,XD=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Br extends ci{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=jD,this.fragmentShader=XD,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=sc(t.uniforms),this.uniformsGroups=WD(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const l=this.uniforms[r].value;l&&l.isTexture?e.uniforms[r]={type:"t",value:l.toJSON(t).uuid}:l&&l.isColor?e.uniforms[r]={type:"c",value:l.getHex()}:l&&l.isVector2?e.uniforms[r]={type:"v2",value:l.toArray()}:l&&l.isVector3?e.uniforms[r]={type:"v3",value:l.toArray()}:l&&l.isVector4?e.uniforms[r]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?e.uniforms[r]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?e.uniforms[r]={type:"m4",value:l.toArray()}:e.uniforms[r]={value:l}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}class MA extends Ye{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ve,this.projectionMatrix=new ve,this.projectionMatrixInverse=new ve,this.coordinateSystem=Mr}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ma=new W,p1=new Ut,A1=new Ut;class $n extends MA{constructor(t=50,e=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=rc*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(Ro*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return rc*2*Math.atan(Math.tan(Ro*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){ma.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(ma.x,ma.y).multiplyScalar(-t/ma.z),ma.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(ma.x,ma.y).multiplyScalar(-t/ma.z)}getViewSize(t,e){return this.getViewBounds(t,p1,A1),e.subVectors(A1,p1)}setViewOffset(t,e,i,r,a,l){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(Ro*.5*this.fov)/this.zoom,i=2*e,r=this.aspect*i,a=-.5*r;const l=this.view;if(this.view!==null&&this.view.enabled){const u=l.fullWidth,d=l.fullHeight;a+=l.offsetX*r/u,e-=l.offsetY*i/d,r*=l.width/u,i*=l.height/d}const c=this.filmOffset;c!==0&&(a+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,e,e-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Dl=-90,Ul=1;class BS extends Ye{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new $n(Dl,Ul,t,e);r.layers=this.layers,this.add(r);const a=new $n(Dl,Ul,t,e);a.layers=this.layers,this.add(a);const l=new $n(Dl,Ul,t,e);l.layers=this.layers,this.add(l);const c=new $n(Dl,Ul,t,e);c.layers=this.layers,this.add(c);const u=new $n(Dl,Ul,t,e);u.layers=this.layers,this.add(u);const d=new $n(Dl,Ul,t,e);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[i,r,a,l,c,u]=e;for(const d of e)this.remove(d);if(t===Mr)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(t===$u)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const d of e)this.add(d),d.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[a,l,c,u,d,f]=this.children,A=t.getRenderTarget(),m=t.getActiveCubeFace(),g=t.getActiveMipmapLevel(),b=t.xr.enabled;t.xr.enabled=!1;const x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,r),t.render(e,a),t.setRenderTarget(i,1,r),t.render(e,l),t.setRenderTarget(i,2,r),t.render(e,c),t.setRenderTarget(i,3,r),t.render(e,u),t.setRenderTarget(i,4,r),t.render(e,d),i.texture.generateMipmaps=x,t.setRenderTarget(i,5,r),t.render(e,f),t.setRenderTarget(A,m,g),t.xr.enabled=b,i.texture.needsPMREMUpdate=!0}}class vh extends Cn{constructor(t,e,i,r,a,l,c,u,d,f){t=t!==void 0?t:[],e=e!==void 0?e:Ns,super(t,e,i,r,a,l,c,u,d,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class TS extends Sr{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const i={width:t,height:t,depth:1},r=[i,i,i,i,i,i];this.texture=new vh(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:Gn}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Fo(5,5,5),a=new Br({name:"CubemapFromEquirect",uniforms:sc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:yi,blending:Is});a.uniforms.tEquirect.value=e;const l=new Pn(r,a),c=e.minFilter;return e.minFilter===Gr&&(e.minFilter=Gn),new BS(1,10,this).update(t,l),e.minFilter=c,l.geometry.dispose(),l.material.dispose(),this}clear(t,e,i,r){const a=t.getRenderTarget();for(let l=0;l<6;l++)t.setRenderTarget(this,l),t.clear(e,i,r);t.setRenderTarget(a)}}class Jl extends Ye{constructor(){super(),this.isGroup=!0,this.type="Group"}}const YD={type:"move"};class rp{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Jl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Jl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new W,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new W),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Jl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new W,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new W),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let r=null,a=null,l=null;const c=this._targetRay,u=this._grip,d=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(d&&t.hand){l=!0;for(const x of t.hand.values()){const E=e.getJointPose(x,i),y=this._getHandJoint(d,x);E!==null&&(y.matrix.fromArray(E.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=E.radius),y.visible=E!==null}const f=d.joints["index-finger-tip"],A=d.joints["thumb-tip"],m=f.position.distanceTo(A.position),g=.02,b=.005;d.inputState.pinching&&m>g+b?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!d.inputState.pinching&&m<=g-b&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else u!==null&&t.gripSpace&&(a=e.getPose(t.gripSpace,i),a!==null&&(u.matrix.fromArray(a.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,a.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(a.linearVelocity)):u.hasLinearVelocity=!1,a.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(a.angularVelocity)):u.hasAngularVelocity=!1));c!==null&&(r=e.getPose(t.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,r.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(r.linearVelocity)):c.hasLinearVelocity=!1,r.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(r.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(YD)))}return c!==null&&(c.visible=r!==null),u!==null&&(u.visible=a!==null),d!==null&&(d.visible=l!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const i=new Jl;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}}class SA{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new $t(t),this.density=e}clone(){return new SA(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class BA{constructor(t,e=1,i=1e3){this.isFog=!0,this.name="",this.color=new $t(t),this.near=e,this.far=i}clone(){return new BA(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class IS extends Ye{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Yi,this.environmentIntensity=1,this.environmentRotation=new Yi,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class TA{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Zu,this.updateRanges=[],this.version=0,this.uuid=Xi()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let r=0,a=this.stride;r<a;r++)this.array[t+r]=e.array[i+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Xi()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Xi()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const hi=new W;class No{constructor(t,e,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)hi.fromBufferAttribute(this,e),hi.applyMatrix4(t),this.setXYZ(e,hi.x,hi.y,hi.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)hi.fromBufferAttribute(this,e),hi.applyNormalMatrix(t),this.setXYZ(e,hi.x,hi.y,hi.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)hi.fromBufferAttribute(this,e),hi.transformDirection(t),this.setXYZ(e,hi.x,hi.y,hi.z);return this}getComponent(t,e){let i=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(i=mi(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=Se(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}setX(t,e){return this.normalized&&(e=Se(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Se(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Se(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Se(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=mi(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=mi(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=mi(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=mi(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=Se(e,this.array),i=Se(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=Se(e,this.array),i=Se(i,this.array),r=Se(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this}setXYZW(t,e,i,r,a){return t=t*this.data.stride+this.offset,this.normalized&&(e=Se(e,this.array),i=Se(i,this.array),r=Se(r,this.array),a=Se(a,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this.data.array[t+3]=a,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)e.push(this.data.array[r+a])}return new ln(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new No(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)e.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class aE extends ci{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new $t(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Ol;const uu=new W,Nl=new W,Pl=new W,Fl=new Ut,hu=new Ut,RS=new ve,ef=new W,du=new W,nf=new W,m1=new Ut,D0=new Ut,g1=new Ut;class LS extends Ye{constructor(t=new aE){if(super(),this.isSprite=!0,this.type="Sprite",Ol===void 0){Ol=new Ie;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new TA(e,5);Ol.setIndex([0,1,2,0,2,3]),Ol.setAttribute("position",new No(i,3,0,!1)),Ol.setAttribute("uv",new No(i,2,3,!1))}this.geometry=Ol,this.material=t,this.center=new Ut(.5,.5)}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Nl.setFromMatrixScale(this.matrixWorld),RS.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Pl.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Nl.multiplyScalar(-Pl.z);const i=this.material.rotation;let r,a;i!==0&&(a=Math.cos(i),r=Math.sin(i));const l=this.center;rf(ef.set(-.5,-.5,0),Pl,l,Nl,r,a),rf(du.set(.5,-.5,0),Pl,l,Nl,r,a),rf(nf.set(.5,.5,0),Pl,l,Nl,r,a),m1.set(0,0),D0.set(1,0),g1.set(1,1);let c=t.ray.intersectTriangle(ef,du,nf,!1,uu);if(c===null&&(rf(du.set(-.5,.5,0),Pl,l,Nl,r,a),D0.set(0,1),c=t.ray.intersectTriangle(ef,nf,du,!1,uu),c===null))return;const u=t.ray.origin.distanceTo(uu);u<t.near||u>t.far||e.push({distance:u,point:uu.clone(),uv:Di.getInterpolation(uu,ef,du,nf,m1,D0,g1,new Ut),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function rf(n,t,e,i,r,a){Fl.subVectors(n,e).addScalar(.5).multiply(i),r!==void 0?(hu.x=a*Fl.x-r*Fl.y,hu.y=r*Fl.x+a*Fl.y):hu.copy(Fl),n.copy(t),n.x+=hu.x,n.y+=hu.y,n.applyMatrix4(RS)}const sf=new W,v1=new W;class DS extends Ye{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let i=0,r=e.length;i<r;i++){const a=e[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,i=0){e=Math.abs(e);const r=this.levels;let a;for(a=0;a<r.length&&!(e<r[a].distance);a++);return r.splice(a,0,{distance:e,hysteresis:i,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let i=0;i<e.length;i++)if(e[i].distance===t){const r=e.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let i,r;for(i=1,r=e.length;i<r;i++){let a=e[i].distance;if(e[i].object.visible&&(a-=a*e[i].hysteresis),t<a)break}return e[i-1].object}return null}raycast(t,e){if(this.levels.length>0){sf.setFromMatrixPosition(this.matrixWorld);const r=t.ray.origin.distanceTo(sf);this.getObjectForDistance(r).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){sf.setFromMatrixPosition(t.matrixWorld),v1.setFromMatrixPosition(this.matrixWorld);const i=sf.distanceTo(v1)/t.zoom;e[0].object.visible=!0;let r,a;for(r=1,a=e.length;r<a;r++){let l=e[r].distance;if(e[r].object.visible&&(l-=l*e[r].hysteresis),i>=l)e[r-1].object.visible=!1,e[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)e[r].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const i=this.levels;for(let r=0,a=i.length;r<a;r++){const l=i[r];e.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return e}}const y1=new W,E1=new Xe,b1=new Xe,KD=new W,x1=new ve,af=new W,U0=new li,C1=new ve,O0=new uc;class US extends Pn{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=ey,this.bindMatrix=new ve,this.bindMatrixInverse=new ve,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ei),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,af),this.boundingBox.expandByPoint(af)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new li),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,af),this.boundingSphere.expandByPoint(af)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),U0.copy(this.boundingSphere),U0.applyMatrix4(r),t.ray.intersectsSphere(U0)!==!1&&(C1.copy(r).invert(),O0.copy(t.ray).applyMatrix4(C1),!(this.boundingBox!==null&&O0.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,O0)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Xe,e=this.geometry.attributes.skinWeight;for(let i=0,r=e.count;i<r;i++){t.fromBufferAttribute(e,i);const a=1/t.manhattanLength();a!==1/0?t.multiplyScalar(a):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===ey?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===lS?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const i=this.skeleton,r=this.geometry;E1.fromBufferAttribute(r.attributes.skinIndex,t),b1.fromBufferAttribute(r.attributes.skinWeight,t),y1.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let a=0;a<4;a++){const l=b1.getComponent(a);if(l!==0){const c=E1.getComponent(a);x1.multiplyMatrices(i.bones[c].matrixWorld,i.boneInverses[c]),e.addScaledVector(KD.copy(y1).applyMatrix4(x1),l)}}return e.applyMatrix4(this.bindMatrixInverse)}}class oE extends Ye{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Vr extends Cn{constructor(t=null,e=1,i=1,r,a,l,c,u,d=ni,f=ni,A,m){super(null,l,c,u,d,f,r,a,A,m),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _1=new ve,JD=new ve;class IA{constructor(t=[],e=[]){this.uuid=Xi(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ve)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const i=new ve;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const t=this.bones,e=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,l=t.length;a<l;a++){const c=t[a]?t[a].matrixWorld:JD;_1.multiplyMatrices(c,e[a]),_1.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new IA(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const i=new Vr(e,t,t,vi,Ai);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){const r=this.bones[e];if(r.name===t)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,r=t.bones.length;i<r;i++){const a=t.bones[i];let l=e[a];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),l=new oE),this.bones.push(l),this.boneInverses.push(new ve().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,i=this.boneInverses;for(let r=0,a=e.length;r<a;r++){const l=e[r];t.bones.push(l.uuid);const c=i[r];t.boneInverses.push(c.toArray())}return t}}class ac extends ln{constructor(t,e,i,r=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const kl=new ve,w1=new ve,of=[],M1=new Ei,ZD=new ve,fu=new Pn,pu=new li;class OS extends Pn{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new ac(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,ZD)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new Ei),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,kl),M1.copy(t.boundingBox).applyMatrix4(kl),this.boundingBox.union(M1)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new li),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,kl),pu.copy(t.boundingSphere).applyMatrix4(kl),this.boundingSphere.union(pu)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const i=e.morphTargetInfluences,r=this.morphTexture.source.data.data,a=i.length+1,l=t*a+1;for(let c=0;c<i.length;c++)i[c]=r[l+c]}raycast(t,e){const i=this.matrixWorld,r=this.count;if(fu.geometry=this.geometry,fu.material=this.material,fu.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),pu.copy(this.boundingSphere),pu.applyMatrix4(i),t.ray.intersectsSphere(pu)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,kl),w1.multiplyMatrices(i,kl),fu.matrixWorld=w1,fu.raycast(t,of);for(let l=0,c=of.length;l<c;l++){const u=of[l];u.instanceId=a,u.object=this,e.push(u)}of.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new ac(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const i=e.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Vr(new Float32Array(r*this.count),r,this.count,yA,Ai));const a=this.morphTexture.source.data.data;let l=0;for(let d=0;d<i.length;d++)l+=i[d];const c=this.geometry.morphTargetsRelative?1:1-l,u=r*t;a[u]=c,a.set(i,u+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const N0=new W,$D=new W,tU=new Ce;class xa{constructor(t=new W(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const r=N0.subVectors(i,e).cross($D.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const i=t.delta(N0),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const a=-(t.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:e.copy(t.start).addScaledVector(i,a)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||tU.getNormalMatrix(t),r=this.coplanarPoint(N0).applyMatrix4(t),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const no=new li,lf=new W;class yh{constructor(t=new xa,e=new xa,i=new xa,r=new xa,a=new xa,l=new xa){this.planes=[t,e,i,r,a,l]}set(t,e,i,r,a,l){const c=this.planes;return c[0].copy(t),c[1].copy(e),c[2].copy(i),c[3].copy(r),c[4].copy(a),c[5].copy(l),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=Mr){const i=this.planes,r=t.elements,a=r[0],l=r[1],c=r[2],u=r[3],d=r[4],f=r[5],A=r[6],m=r[7],g=r[8],b=r[9],x=r[10],E=r[11],y=r[12],_=r[13],w=r[14],S=r[15];if(i[0].setComponents(u-a,m-d,E-g,S-y).normalize(),i[1].setComponents(u+a,m+d,E+g,S+y).normalize(),i[2].setComponents(u+l,m+f,E+b,S+_).normalize(),i[3].setComponents(u-l,m-f,E-b,S-_).normalize(),i[4].setComponents(u-c,m-A,E-x,S-w).normalize(),e===Mr)i[5].setComponents(u+c,m+A,E+x,S+w).normalize();else if(e===$u)i[5].setComponents(c,A,x,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),no.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),no.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(no)}intersectsSprite(t){return no.center.set(0,0,0),no.radius=.7071067811865476,no.applyMatrix4(t.matrixWorld),this.intersectsSphere(no)}intersectsSphere(t){const e=this.planes,i=t.center,r=-t.radius;for(let a=0;a<6;a++)if(e[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const r=e[i];if(lf.x=r.normal.x>0?t.max.x:t.min.x,lf.y=r.normal.y>0?t.max.y:t.min.y,lf.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(lf)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function P0(n,t){return n-t}function eU(n,t){return n.z-t.z}function nU(n,t){return t.z-n.z}class iU{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,i,r){const a=this.pool,l=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const c=a[this.index];l.push(c),this.index++,c.start=t,c.count=e,c.z=i,c.index=r}reset(){this.list.length=0,this.index=0}}const Ti=new ve,rU=new $t(1,1,1),F0=new yh,cf=new Ei,io=new li,Au=new W,S1=new W,sU=new W,k0=new iU,ai=new Pn,uf=[];function aU(n,t,e=0){const i=t.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==t.array.constructor){const r=n.count;for(let a=0;a<r;a++)for(let l=0;l<i;l++)t.setComponent(a+e,l,n.getComponent(a,l))}else t.array.set(n.array,e*i);t.needsUpdate=!0}function ro(n,t){if(n.constructor!==t.constructor){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++)t[i]=n[i]}else{const e=Math.min(n.length,t.length);t.set(new n.constructor(n.buffer,0,e))}}class NS extends Pn{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(t,e,i=e*2,r){super(new Ie,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4),i=new Vr(e,t,t,vi,Ai);this._matricesTexture=i}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),i=new Vr(e,t,t,mh,Ps);this._indirectTexture=i}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),i=new Vr(e,t,t,vi,Ai);i.colorSpace=Ve.workingColorSpace,this._colorsTexture=i}_initializeGeometry(t){const e=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in t.attributes){const l=t.getAttribute(a),{array:c,itemSize:u,normalized:d}=l,f=new c.constructor(i*u),A=new ln(f,u,d);e.setAttribute(a,A)}if(t.getIndex()!==null){const a=i>65535?new Uint32Array(r):new Uint16Array(r);e.setIndex(new ln(a,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in e.attributes){if(!t.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=t.getAttribute(i),a=e.getAttribute(i);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ei);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let i=0,r=e.length;i<r;i++){if(e[i].active===!1)continue;const a=e[i].geometryIndex;this.getMatrixAt(i,Ti),this.getBoundingBoxAt(a,cf).applyMatrix4(Ti),t.union(cf)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new li);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let i=0,r=e.length;i<r;i++){if(e[i].active===!1)continue;const a=e[i].geometryIndex;this.getMatrixAt(i,Ti),this.getBoundingSphereAt(a,io).applyMatrix4(Ti),t.union(io)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:t};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(P0),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;Ti.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const l=this._colorsTexture;return l&&(rU.toArray(l.image.data,r*4),l.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(t,e=-1,i=-1){this._initializeGeometry(t),this._validateGeometry(t);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=e===-1?t.getAttribute("position").count:e;const l=t.getIndex();if(l!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?l.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(P0),u=this._availableGeometryIds.shift(),a[u]=r):(u=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(u,t),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,u}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const i=this.geometry,r=i.getIndex()!==null,a=i.getIndex(),l=e.getIndex(),c=this._geometryInfo[t];if(r&&l.count>c.reservedIndexCount||e.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const u=c.vertexStart,d=c.reservedVertexCount;c.vertexCount=e.getAttribute("position").count;for(const f in i.attributes){const A=e.getAttribute(f),m=i.getAttribute(f);aU(A,m,u);const g=A.itemSize;for(let b=A.count,x=d;b<x;b++){const E=u+b;for(let y=0;y<g;y++)m.setComponent(E,y,0)}m.needsUpdate=!0,m.addUpdateRange(u*g,d*g)}if(r){const f=c.indexStart,A=c.reservedIndexCount;c.indexCount=e.getIndex().count;for(let m=0;m<l.count;m++)a.setX(f+m,u+l.getX(m));for(let m=l.count,g=A;m<g;m++)a.setX(f+m,u);a.needsUpdate=!0,a.addUpdateRange(f,c.reservedIndexCount)}return c.start=r?c.indexStart:c.vertexStart,c.count=r?c.indexCount:c.vertexCount,c.boundingBox=null,e.boundingBox!==null&&(c.boundingBox=e.boundingBox.clone()),c.boundingSphere=null,e.boundingSphere!==null&&(c.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||e[t].active===!1)return this;const i=this._instanceInfo;for(let r=0,a=i.length;r<a;r++)i[r].active&&i[r].geometryIndex===t&&this.deleteInstance(r);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const i=this._geometryInfo,r=i.map((l,c)=>c).sort((l,c)=>i[l].vertexStart-i[c].vertexStart),a=this.geometry;for(let l=0,c=i.length;l<c;l++){const u=r[l],d=i[u];if(d.active!==!1){if(a.index!==null){if(d.indexStart!==e){const{indexStart:f,vertexStart:A,reservedIndexCount:m}=d,g=a.index,b=g.array,x=t-A;for(let E=f;E<f+m;E++)b[E]=b[E]+x;g.array.copyWithin(e,f,f+m),g.addUpdateRange(e,m),d.indexStart=e}e+=d.reservedIndexCount}if(d.vertexStart!==t){const{vertexStart:f,reservedVertexCount:A}=d,m=a.attributes;for(const g in m){const b=m[g],{array:x,itemSize:E}=b;x.copyWithin(t*E,f*E,(f+A)*E),b.addUpdateRange(t*E,A*E)}d.vertexStart=t}t+=d.reservedVertexCount,d.start=a.index?d.indexStart:d.vertexStart,this._nextIndexStart=a.index?d.indexStart+d.reservedIndexCount:0,this._nextVertexStart=d.vertexStart+d.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[t];if(r.boundingBox===null){const a=new Ei,l=i.index,c=i.attributes.position;for(let u=r.start,d=r.start+r.count;u<d;u++){let f=u;l&&(f=l.getX(f)),a.expandByPoint(Au.fromBufferAttribute(c,f))}r.boundingBox=a}return e.copy(r.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[t];if(r.boundingSphere===null){const a=new li;this.getBoundingBoxAt(t,cf),cf.getCenter(a.center);const l=i.index,c=i.attributes.position;let u=0;for(let d=r.start,f=r.start+r.count;d<f;d++){let A=d;l&&(A=l.getX(A)),Au.fromBufferAttribute(c,A),u=Math.max(u,a.center.distanceToSquared(Au))}a.radius=Math.sqrt(u),r.boundingSphere=a}return e.copy(r.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const i=this._matricesTexture,r=this._matricesTexture.image.data;return e.toArray(r,t*16),i.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const i=this._geometryInfo[t];return e.vertexStart=i.vertexStart,e.vertexCount=i.vertexCount,e.reservedVertexCount=i.reservedVertexCount,e.indexStart=i.indexStart,e.indexCount=i.indexCount,e.reservedIndexCount=i.reservedIndexCount,e.start=i.start,e.count=i.count,e}setInstanceCount(t){const e=this._availableInstanceIds,i=this._instanceInfo;for(e.sort(P0);e[e.length-1]===i.length;)i.pop(),e.pop();if(t<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const r=new Int32Array(t),a=new Int32Array(t);ro(this._multiDrawCounts,r),ro(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=t;const l=this._indirectTexture,c=this._matricesTexture,u=this._colorsTexture;l.dispose(),this._initIndirectTexture(),ro(l.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),ro(c.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),ro(u.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const i=[...this._geometryInfo].filter(c=>c.active);if(Math.max(...i.map(c=>c.vertexStart+c.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(u=>u.indexStart+u.reservedIndexCount))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Ie,this._initializeGeometry(a));const l=this.geometry;a.index&&ro(a.index.array,l.index.array);for(const c in a.attributes)ro(a.attributes[c].array,l.attributes[c].array)}raycast(t,e){const i=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,l=this.geometry;ai.material=this.material,ai.geometry.index=l.index,ai.geometry.attributes=l.attributes,ai.geometry.boundingBox===null&&(ai.geometry.boundingBox=new Ei),ai.geometry.boundingSphere===null&&(ai.geometry.boundingSphere=new li);for(let c=0,u=i.length;c<u;c++){if(!i[c].visible||!i[c].active)continue;const d=i[c].geometryIndex,f=r[d];ai.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(c,ai.matrixWorld).premultiply(a),this.getBoundingBoxAt(d,ai.geometry.boundingBox),this.getBoundingSphereAt(d,ai.geometry.boundingSphere),ai.raycast(t,uf);for(let A=0,m=uf.length;A<m;A++){const g=uf[A];g.object=this,g.batchId=c,e.push(g)}uf.length=0}ai.material=null,ai.geometry.index=null,ai.geometry.attributes={},ai.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=>({...e})),this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(t,e,i,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const l=r.getIndex(),c=l===null?1:l.array.BYTES_PER_ELEMENT,u=this._instanceInfo,d=this._multiDrawStarts,f=this._multiDrawCounts,A=this._geometryInfo,m=this.perObjectFrustumCulled,g=this._indirectTexture,b=g.image.data;m&&(Ti.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),F0.setFromProjectionMatrix(Ti,t.coordinateSystem));let x=0;if(this.sortObjects){Ti.copy(this.matrixWorld).invert(),Au.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Ti),S1.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Ti);for(let _=0,w=u.length;_<w;_++)if(u[_].visible&&u[_].active){const S=u[_].geometryIndex;this.getMatrixAt(_,Ti),this.getBoundingSphereAt(S,io).applyMatrix4(Ti);let R=!1;if(m&&(R=!F0.intersectsSphere(io)),!R){const U=A[S],L=sU.subVectors(io.center,Au).dot(S1);k0.push(U.start,U.count,L,_)}}const E=k0.list,y=this.customSort;y===null?E.sort(a.transparent?nU:eU):y.call(this,E,i);for(let _=0,w=E.length;_<w;_++){const S=E[_];d[x]=S.start*c,f[x]=S.count,b[x]=S.index,x++}k0.reset()}else for(let E=0,y=u.length;E<y;E++)if(u[E].visible&&u[E].active){const _=u[E].geometryIndex;let w=!1;if(m&&(this.getMatrixAt(E,Ti),this.getBoundingSphereAt(_,io).applyMatrix4(Ti),w=!F0.intersectsSphere(io)),!w){const S=A[_];d[x]=S.start*c,f[x]=S.count,b[x]=E,x++}}g.needsUpdate=!0,this._multiDrawCount=x,this._visibilityChanged=!1}onBeforeShadow(t,e,i,r,a,l){this.onBeforeRender(t,null,r,a,l)}}class bi extends ci{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new $t(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Yp=new W,Kp=new W,B1=new ve,mu=new uc,hf=new li,Q0=new W,T1=new W;class Ta extends Ye{constructor(t=new Ie,e=new bi){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[0];for(let r=1,a=e.count;r<a;r++)Yp.fromBufferAttribute(e,r-1),Kp.fromBufferAttribute(e,r),i[r]=i[r-1],i[r]+=Yp.distanceTo(Kp);t.setAttribute("lineDistance",new oe(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const i=this.geometry,r=this.matrixWorld,a=t.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),hf.copy(i.boundingSphere),hf.applyMatrix4(r),hf.radius+=a,t.ray.intersectsSphere(hf)===!1)return;B1.copy(r).invert(),mu.copy(t.ray).applyMatrix4(B1);const c=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=c*c,d=this.isLineSegments?2:1,f=i.index,m=i.attributes.position;if(f!==null){const g=Math.max(0,l.start),b=Math.min(f.count,l.start+l.count);for(let x=g,E=b-1;x<E;x+=d){const y=f.getX(x),_=f.getX(x+1),w=df(this,t,mu,u,y,_,x);w&&e.push(w)}if(this.isLineLoop){const x=f.getX(b-1),E=f.getX(g),y=df(this,t,mu,u,x,E,b-1);y&&e.push(y)}}else{const g=Math.max(0,l.start),b=Math.min(m.count,l.start+l.count);for(let x=g,E=b-1;x<E;x+=d){const y=df(this,t,mu,u,x,x+1,x);y&&e.push(y)}if(this.isLineLoop){const x=df(this,t,mu,u,b-1,g,b-1);x&&e.push(x)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=r.length;a<l;a++){const c=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}}function df(n,t,e,i,r,a,l){const c=n.geometry.attributes.position;if(Yp.fromBufferAttribute(c,r),Kp.fromBufferAttribute(c,a),e.distanceSqToSegment(Yp,Kp,Q0,T1)>i)return;Q0.applyMatrix4(n.matrixWorld);const d=t.ray.origin.distanceTo(Q0);if(!(d<t.near||d>t.far))return{distance:d,point:T1.clone().applyMatrix4(n.matrixWorld),index:l,face:null,faceIndex:null,barycoord:null,object:n}}const I1=new W,R1=new W;class Xr extends Ta{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[];for(let r=0,a=e.count;r<a;r+=2)I1.fromBufferAttribute(e,r),R1.fromBufferAttribute(e,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+I1.distanceTo(R1);t.setAttribute("lineDistance",new oe(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class PS extends Ta{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class lE extends ci{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new $t(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const L1=new ve,ry=new uc,ff=new li,pf=new W;class FS extends Ye{constructor(t=new Ie,e=new lE){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const i=this.geometry,r=this.matrixWorld,a=t.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ff.copy(i.boundingSphere),ff.applyMatrix4(r),ff.radius+=a,t.ray.intersectsSphere(ff)===!1)return;L1.copy(r).invert(),ry.copy(t.ray).applyMatrix4(L1);const c=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=c*c,d=i.index,A=i.attributes.position;if(d!==null){const m=Math.max(0,l.start),g=Math.min(d.count,l.start+l.count);for(let b=m,x=g;b<x;b++){const E=d.getX(b);pf.fromBufferAttribute(A,E),D1(pf,E,u,r,t,e,this)}}else{const m=Math.max(0,l.start),g=Math.min(A.count,l.start+l.count);for(let b=m,x=g;b<x;b++)pf.fromBufferAttribute(A,b),D1(pf,b,u,r,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=r.length;a<l;a++){const c=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}}function D1(n,t,e,i,r,a,l){const c=ry.distanceSqToPoint(n);if(c<e){const u=new W;ry.closestPointToPoint(n,u),u.applyMatrix4(i);const d=r.ray.origin.distanceTo(u);if(d<r.near||d>r.far)return;a.push({distance:d,distanceToRay:Math.sqrt(c),point:u,index:t,face:null,faceIndex:null,barycoord:null,object:l})}}class kS extends Cn{constructor(t,e,i,r,a,l,c,u,d){super(t,e,i,r,a,l,c,u,d),this.isVideoTexture=!0,this.minFilter=l!==void 0?l:Gn,this.magFilter=a!==void 0?a:Gn,this.generateMipmaps=!1;const f=this;function A(){f.needsUpdate=!0,t.requestVideoFrameCallback(A)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(A)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class oU extends kS{constructor(t,e,i,r,a,l,c,u){super({},t,e,i,r,a,l,c,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class lU extends Cn{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=ni,this.minFilter=ni,this.generateMipmaps=!1,this.needsUpdate=!0}}class RA extends Cn{constructor(t,e,i,r,a,l,c,u,d,f,A,m){super(null,l,c,u,d,f,r,a,A,m),this.isCompressedTexture=!0,this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class cU extends RA{constructor(t,e,i,r,a,l){super(t,e,i,a,l),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=lr,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class uU extends RA{constructor(t,e,i){super(void 0,t[0].width,t[0].height,e,i,Ns),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class hU extends Cn{constructor(t,e,i,r,a,l,c,u,d){super(t,e,i,r,a,l,c,u,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class cE extends Cn{constructor(t,e,i,r,a,l,c,u,d,f=Ma){if(f!==Ma&&f!==Sa)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===Ma&&(i=Ps),i===void 0&&f===Sa&&(i=wa),super(null,r,a,l,c,u,f,i,d),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=c!==void 0?c:ni,this.minFilter=u!==void 0?u:ni,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class Tr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,r=this.getPoint(0),a=0;e.push(0);for(let l=1;l<=t;l++)i=this.getPoint(l/t),a+=i.distanceTo(r),e.push(a),r=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const i=this.getLengths();let r=0;const a=i.length;let l;e?l=e:l=t*i[a-1];let c=0,u=a-1,d;for(;c<=u;)if(r=Math.floor(c+(u-c)/2),d=i[r]-l,d<0)c=r+1;else if(d>0)u=r-1;else{u=r;break}if(r=u,i[r]===l)return r/(a-1);const f=i[r],m=i[r+1]-f,g=(l-f)/m;return(r+g)/(a-1)}getTangent(t,e){let r=t-1e-4,a=t+1e-4;r<0&&(r=0),a>1&&(a=1);const l=this.getPoint(r),c=this.getPoint(a),u=e||(l.isVector2?new Ut:new W);return u.copy(c).sub(l).normalize(),u}getTangentAt(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e){const i=new W,r=[],a=[],l=[],c=new W,u=new ve;for(let g=0;g<=t;g++){const b=g/t;r[g]=this.getTangentAt(b,new W)}a[0]=new W,l[0]=new W;let d=Number.MAX_VALUE;const f=Math.abs(r[0].x),A=Math.abs(r[0].y),m=Math.abs(r[0].z);f<=d&&(d=f,i.set(1,0,0)),A<=d&&(d=A,i.set(0,1,0)),m<=d&&i.set(0,0,1),c.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],c),l[0].crossVectors(r[0],a[0]);for(let g=1;g<=t;g++){if(a[g]=a[g-1].clone(),l[g]=l[g-1].clone(),c.crossVectors(r[g-1],r[g]),c.length()>Number.EPSILON){c.normalize();const b=Math.acos(_e(r[g-1].dot(r[g]),-1,1));a[g].applyMatrix4(u.makeRotationAxis(c,b))}l[g].crossVectors(r[g],a[g])}if(e===!0){let g=Math.acos(_e(a[0].dot(a[t]),-1,1));g/=t,r[0].dot(c.crossVectors(a[0],a[t]))>0&&(g=-g);for(let b=1;b<=t;b++)a[b].applyMatrix4(u.makeRotationAxis(r[b],g*b)),l[b].crossVectors(r[b],a[b])}return{tangents:r,normals:a,binormals:l}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class LA extends Tr{constructor(t=0,e=0,i=1,r=1,a=0,l=Math.PI*2,c=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=l,this.aClockwise=c,this.aRotation=u}getPoint(t,e=new Ut){const i=e,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const l=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(l?a=0:a=r),this.aClockwise===!0&&!l&&(a===r?a=-r:a=a-r);const c=this.aStartAngle+t*a;let u=this.aX+this.xRadius*Math.cos(c),d=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const f=Math.cos(this.aRotation),A=Math.sin(this.aRotation),m=u-this.aX,g=d-this.aY;u=m*f-g*A+this.aX,d=m*A+g*f+this.aY}return i.set(u,d)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class QS extends LA{constructor(t,e,i,r,a,l){super(t,e,i,i,r,a,l),this.isArcCurve=!0,this.type="ArcCurve"}}function uE(){let n=0,t=0,e=0,i=0;function r(a,l,c,u){n=a,t=c,e=-3*a+3*l-2*c-u,i=2*a-2*l+c+u}return{initCatmullRom:function(a,l,c,u,d){r(l,c,d*(c-a),d*(u-l))},initNonuniformCatmullRom:function(a,l,c,u,d,f,A){let m=(l-a)/d-(c-a)/(d+f)+(c-l)/f,g=(c-l)/f-(u-l)/(f+A)+(u-c)/A;m*=f,g*=f,r(l,c,m,g)},calc:function(a){const l=a*a,c=l*a;return n+t*a+e*l+i*c}}}const Af=new W,z0=new uE,G0=new uE,H0=new uE;class zS extends Tr{constructor(t=[],e=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=r}getPoint(t,e=new W){const i=e,r=this.points,a=r.length,l=(a-(this.closed?0:1))*t;let c=Math.floor(l),u=l-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/a)+1)*a:u===0&&c===a-1&&(c=a-2,u=1);let d,f;this.closed||c>0?d=r[(c-1)%a]:(Af.subVectors(r[0],r[1]).add(r[0]),d=Af);const A=r[c%a],m=r[(c+1)%a];if(this.closed||c+2<a?f=r[(c+2)%a]:(Af.subVectors(r[a-1],r[a-2]).add(r[a-1]),f=Af),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let b=Math.pow(d.distanceToSquared(A),g),x=Math.pow(A.distanceToSquared(m),g),E=Math.pow(m.distanceToSquared(f),g);x<1e-4&&(x=1),b<1e-4&&(b=x),E<1e-4&&(E=x),z0.initNonuniformCatmullRom(d.x,A.x,m.x,f.x,b,x,E),G0.initNonuniformCatmullRom(d.y,A.y,m.y,f.y,b,x,E),H0.initNonuniformCatmullRom(d.z,A.z,m.z,f.z,b,x,E)}else this.curveType==="catmullrom"&&(z0.initCatmullRom(d.x,A.x,m.x,f.x,this.tension),G0.initCatmullRom(d.y,A.y,m.y,f.y,this.tension),H0.initCatmullRom(d.z,A.z,m.z,f.z,this.tension));return i.set(z0.calc(u),G0.calc(u),H0.calc(u)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const r=t.points[e];this.points.push(new W().fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function U1(n,t,e,i,r){const a=(i-t)*.5,l=(r-e)*.5,c=n*n,u=n*c;return(2*e-2*i+a+l)*u+(-3*e+3*i-2*a-l)*c+a*n+e}function dU(n,t){const e=1-n;return e*e*t}function fU(n,t){return 2*(1-n)*n*t}function pU(n,t){return n*n*t}function zu(n,t,e,i){return dU(n,t)+fU(n,e)+pU(n,i)}function AU(n,t){const e=1-n;return e*e*e*t}function mU(n,t){const e=1-n;return 3*e*e*n*t}function gU(n,t){return 3*(1-n)*n*n*t}function vU(n,t){return n*n*n*t}function Gu(n,t,e,i,r){return AU(n,t)+mU(n,e)+gU(n,i)+vU(n,r)}class hE extends Tr{constructor(t=new Ut,e=new Ut,i=new Ut,r=new Ut){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=r}getPoint(t,e=new Ut){const i=e,r=this.v0,a=this.v1,l=this.v2,c=this.v3;return i.set(Gu(t,r.x,a.x,l.x,c.x),Gu(t,r.y,a.y,l.y,c.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class GS extends Tr{constructor(t=new W,e=new W,i=new W,r=new W){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=r}getPoint(t,e=new W){const i=e,r=this.v0,a=this.v1,l=this.v2,c=this.v3;return i.set(Gu(t,r.x,a.x,l.x,c.x),Gu(t,r.y,a.y,l.y,c.y),Gu(t,r.z,a.z,l.z,c.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class dE extends Tr{constructor(t=new Ut,e=new Ut){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Ut){const i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Ut){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class HS extends Tr{constructor(t=new W,e=new W){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new W){const i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new W){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class fE extends Tr{constructor(t=new Ut,e=new Ut,i=new Ut){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new Ut){const i=e,r=this.v0,a=this.v1,l=this.v2;return i.set(zu(t,r.x,a.x,l.x),zu(t,r.y,a.y,l.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class pE extends Tr{constructor(t=new W,e=new W,i=new W){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new W){const i=e,r=this.v0,a=this.v1,l=this.v2;return i.set(zu(t,r.x,a.x,l.x),zu(t,r.y,a.y,l.y),zu(t,r.z,a.z,l.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class AE extends Tr{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Ut){const i=e,r=this.points,a=(r.length-1)*t,l=Math.floor(a),c=a-l,u=r[l===0?l:l-1],d=r[l],f=r[l>r.length-2?r.length-1:l+1],A=r[l>r.length-3?r.length-1:l+2];return i.set(U1(c,u.x,d.x,f.x,A.x),U1(c,u.y,d.y,f.y,A.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const r=t.points[e];this.points.push(r.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const r=this.points[e];t.points.push(r.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const r=t.points[e];this.points.push(new Ut().fromArray(r))}return this}}var Jp=Object.freeze({__proto__:null,ArcCurve:QS,CatmullRomCurve3:zS,CubicBezierCurve:hE,CubicBezierCurve3:GS,EllipseCurve:LA,LineCurve:dE,LineCurve3:HS,QuadraticBezierCurve:fE,QuadraticBezierCurve3:pE,SplineCurve:AE});class VS extends Tr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const i=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Jp[i](e,t))}return this}getPoint(t,e){const i=t*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=i){const l=r[a]-i,c=this.curves[a],u=c.getLength(),d=u===0?0:1-l/u;return c.getPointAt(d,e)}a++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,r=this.curves.length;i<r;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let i;for(let r=0,a=this.curves;r<a.length;r++){const l=a[r],c=l.isEllipseCurve?t*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?t*l.points.length:t,u=l.getPoints(c);for(let d=0;d<u.length;d++){const f=u[d];i&&i.equals(f)||(e.push(f),i=f)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){const r=this.curves[e];t.curves.push(r.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const r=t.curves[e];this.curves.push(new Jp[r.type]().fromJSON(r))}return this}}class eh extends VS{constructor(t){super(),this.type="Path",this.currentPoint=new Ut,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const i=new dE(this.currentPoint.clone(),new Ut(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,r){const a=new fE(this.currentPoint.clone(),new Ut(t,e),new Ut(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(t,e,i,r,a,l){const c=new hE(this.currentPoint.clone(),new Ut(t,e),new Ut(i,r),new Ut(a,l));return this.curves.push(c),this.currentPoint.set(a,l),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),i=new AE(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,r,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(t+c,e+u,i,r,a,l),this}absarc(t,e,i,r,a,l){return this.absellipse(t,e,i,i,r,a,l),this}ellipse(t,e,i,r,a,l,c,u){const d=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(t+d,e+f,i,r,a,l,c,u),this}absellipse(t,e,i,r,a,l,c,u){const d=new LA(t,e,i,r,a,l,c,u);if(this.curves.length>0){const A=d.getPoint(0);A.equals(this.currentPoint)||this.lineTo(A.x,A.y)}this.curves.push(d);const f=d.getPoint(1);return this.currentPoint.copy(f),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Eh extends Ie{constructor(t=[new Ut(0,-.5),new Ut(.5,0),new Ut(0,.5)],e=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:r},e=Math.floor(e),r=_e(r,0,Math.PI*2);const a=[],l=[],c=[],u=[],d=[],f=1/e,A=new W,m=new Ut,g=new W,b=new W,x=new W;let E=0,y=0;for(let _=0;_<=t.length-1;_++)switch(_){case 0:E=t[_+1].x-t[_].x,y=t[_+1].y-t[_].y,g.x=y*1,g.y=-E,g.z=y*0,x.copy(g),g.normalize(),u.push(g.x,g.y,g.z);break;case t.length-1:u.push(x.x,x.y,x.z);break;default:E=t[_+1].x-t[_].x,y=t[_+1].y-t[_].y,g.x=y*1,g.y=-E,g.z=y*0,b.copy(g),g.x+=x.x,g.y+=x.y,g.z+=x.z,g.normalize(),u.push(g.x,g.y,g.z),x.copy(b)}for(let _=0;_<=e;_++){const w=i+_*f*r,S=Math.sin(w),R=Math.cos(w);for(let U=0;U<=t.length-1;U++){A.x=t[U].x*S,A.y=t[U].y,A.z=t[U].x*R,l.push(A.x,A.y,A.z),m.x=_/e,m.y=U/(t.length-1),c.push(m.x,m.y);const L=u[3*U+0]*S,F=u[3*U+1],D=u[3*U+0]*R;d.push(L,F,D)}}for(let _=0;_<e;_++)for(let w=0;w<t.length-1;w++){const S=w+_*t.length,R=S,U=S+t.length,L=S+t.length+1,F=S+1;a.push(R,U,F),a.push(L,F,U)}this.setIndex(a),this.setAttribute("position",new oe(l,3)),this.setAttribute("uv",new oe(c,2)),this.setAttribute("normal",new oe(d,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Eh(t.points,t.segments,t.phiStart,t.phiLength)}}class DA extends Eh{constructor(t=1,e=1,i=4,r=8){const a=new eh;a.absarc(0,-e/2,t,Math.PI*1.5,0),a.absarc(0,e/2,t,0,Math.PI*.5),super(a.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:t,length:e,capSegments:i,radialSegments:r}}static fromJSON(t){return new DA(t.radius,t.length,t.capSegments,t.radialSegments)}}class UA extends Ie{constructor(t=1,e=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:r},e=Math.max(3,e);const a=[],l=[],c=[],u=[],d=new W,f=new Ut;l.push(0,0,0),c.push(0,0,1),u.push(.5,.5);for(let A=0,m=3;A<=e;A++,m+=3){const g=i+A/e*r;d.x=t*Math.cos(g),d.y=t*Math.sin(g),l.push(d.x,d.y,d.z),c.push(0,0,1),f.x=(l[m]/t+1)/2,f.y=(l[m+1]/t+1)/2,u.push(f.x,f.y)}for(let A=1;A<=e;A++)a.push(A,A+1,0);this.setIndex(a),this.setAttribute("position",new oe(l,3)),this.setAttribute("normal",new oe(c,3)),this.setAttribute("uv",new oe(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new UA(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class hc extends Ie{constructor(t=1,e=1,i=1,r=32,a=1,l=!1,c=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:r,heightSegments:a,openEnded:l,thetaStart:c,thetaLength:u};const d=this;r=Math.floor(r),a=Math.floor(a);const f=[],A=[],m=[],g=[];let b=0;const x=[],E=i/2;let y=0;_(),l===!1&&(t>0&&w(!0),e>0&&w(!1)),this.setIndex(f),this.setAttribute("position",new oe(A,3)),this.setAttribute("normal",new oe(m,3)),this.setAttribute("uv",new oe(g,2));function _(){const S=new W,R=new W;let U=0;const L=(e-t)/i;for(let F=0;F<=a;F++){const D=[],O=F/a,z=O*(e-t)+t;for(let J=0;J<=r;J++){const $=J/r,nt=$*u+c,At=Math.sin(nt),G=Math.cos(nt);R.x=z*At,R.y=-O*i+E,R.z=z*G,A.push(R.x,R.y,R.z),S.set(At,L,G).normalize(),m.push(S.x,S.y,S.z),g.push($,1-O),D.push(b++)}x.push(D)}for(let F=0;F<r;F++)for(let D=0;D<a;D++){const O=x[D][F],z=x[D+1][F],J=x[D+1][F+1],$=x[D][F+1];(t>0||D!==0)&&(f.push(O,z,$),U+=3),(e>0||D!==a-1)&&(f.push(z,J,$),U+=3)}d.addGroup(y,U,0),y+=U}function w(S){const R=b,U=new Ut,L=new W;let F=0;const D=S===!0?t:e,O=S===!0?1:-1;for(let J=1;J<=r;J++)A.push(0,E*O,0),m.push(0,O,0),g.push(.5,.5),b++;const z=b;for(let J=0;J<=r;J++){const nt=J/r*u+c,At=Math.cos(nt),G=Math.sin(nt);L.x=D*G,L.y=E*O,L.z=D*At,A.push(L.x,L.y,L.z),m.push(0,O,0),U.x=At*.5+.5,U.y=G*.5*O+.5,g.push(U.x,U.y),b++}for(let J=0;J<r;J++){const $=R+J,nt=z+J;S===!0?f.push(nt,nt+1,$):f.push(nt+1,nt,$),F+=3}d.addGroup(y,F,S===!0?1:2),y+=F}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new hc(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class OA extends hc{constructor(t=1,e=1,i=32,r=1,a=!1,l=0,c=Math.PI*2){super(0,t,e,i,r,a,l,c),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:l,thetaLength:c}}static fromJSON(t){return new OA(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Ua extends Ie{constructor(t=[],e=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:r};const a=[],l=[];c(r),d(i),f(),this.setAttribute("position",new oe(a,3)),this.setAttribute("normal",new oe(a.slice(),3)),this.setAttribute("uv",new oe(l,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function c(_){const w=new W,S=new W,R=new W;for(let U=0;U<e.length;U+=3)g(e[U+0],w),g(e[U+1],S),g(e[U+2],R),u(w,S,R,_)}function u(_,w,S,R){const U=R+1,L=[];for(let F=0;F<=U;F++){L[F]=[];const D=_.clone().lerp(S,F/U),O=w.clone().lerp(S,F/U),z=U-F;for(let J=0;J<=z;J++)J===0&&F===U?L[F][J]=D:L[F][J]=D.clone().lerp(O,J/z)}for(let F=0;F<U;F++)for(let D=0;D<2*(U-F)-1;D++){const O=Math.floor(D/2);D%2===0?(m(L[F][O+1]),m(L[F+1][O]),m(L[F][O])):(m(L[F][O+1]),m(L[F+1][O+1]),m(L[F+1][O]))}}function d(_){const w=new W;for(let S=0;S<a.length;S+=3)w.x=a[S+0],w.y=a[S+1],w.z=a[S+2],w.normalize().multiplyScalar(_),a[S+0]=w.x,a[S+1]=w.y,a[S+2]=w.z}function f(){const _=new W;for(let w=0;w<a.length;w+=3){_.x=a[w+0],_.y=a[w+1],_.z=a[w+2];const S=E(_)/2/Math.PI+.5,R=y(_)/Math.PI+.5;l.push(S,1-R)}b(),A()}function A(){for(let _=0;_<l.length;_+=6){const w=l[_+0],S=l[_+2],R=l[_+4],U=Math.max(w,S,R),L=Math.min(w,S,R);U>.9&&L<.1&&(w<.2&&(l[_+0]+=1),S<.2&&(l[_+2]+=1),R<.2&&(l[_+4]+=1))}}function m(_){a.push(_.x,_.y,_.z)}function g(_,w){const S=_*3;w.x=t[S+0],w.y=t[S+1],w.z=t[S+2]}function b(){const _=new W,w=new W,S=new W,R=new W,U=new Ut,L=new Ut,F=new Ut;for(let D=0,O=0;D<a.length;D+=9,O+=6){_.set(a[D+0],a[D+1],a[D+2]),w.set(a[D+3],a[D+4],a[D+5]),S.set(a[D+6],a[D+7],a[D+8]),U.set(l[O+0],l[O+1]),L.set(l[O+2],l[O+3]),F.set(l[O+4],l[O+5]),R.copy(_).add(w).add(S).divideScalar(3);const z=E(R);x(U,O+0,_,z),x(L,O+2,w,z),x(F,O+4,S,z)}}function x(_,w,S,R){R<0&&_.x===1&&(l[w]=_.x-1),S.x===0&&S.z===0&&(l[w]=R/2/Math.PI+.5)}function E(_){return Math.atan2(_.z,-_.x)}function y(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ua(t.vertices,t.indices,t.radius,t.details)}}class NA extends Ua{constructor(t=1,e=0){const i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,l,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new NA(t.radius,t.detail)}}const mf=new W,gf=new W,V0=new W,vf=new Di;class qS extends Ie{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const r=Math.pow(10,4),a=Math.cos(Ro*e),l=t.getIndex(),c=t.getAttribute("position"),u=l?l.count:c.count,d=[0,0,0],f=["a","b","c"],A=new Array(3),m={},g=[];for(let b=0;b<u;b+=3){l?(d[0]=l.getX(b),d[1]=l.getX(b+1),d[2]=l.getX(b+2)):(d[0]=b,d[1]=b+1,d[2]=b+2);const{a:x,b:E,c:y}=vf;if(x.fromBufferAttribute(c,d[0]),E.fromBufferAttribute(c,d[1]),y.fromBufferAttribute(c,d[2]),vf.getNormal(V0),A[0]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,A[1]=`${Math.round(E.x*r)},${Math.round(E.y*r)},${Math.round(E.z*r)}`,A[2]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,!(A[0]===A[1]||A[1]===A[2]||A[2]===A[0]))for(let _=0;_<3;_++){const w=(_+1)%3,S=A[_],R=A[w],U=vf[f[_]],L=vf[f[w]],F=`${S}_${R}`,D=`${R}_${S}`;D in m&&m[D]?(V0.dot(m[D].normal)<=a&&(g.push(U.x,U.y,U.z),g.push(L.x,L.y,L.z)),m[D]=null):F in m||(m[F]={index0:d[_],index1:d[w],normal:V0.clone()})}}for(const b in m)if(m[b]){const{index0:x,index1:E}=m[b];mf.fromBufferAttribute(c,x),gf.fromBufferAttribute(c,E),g.push(mf.x,mf.y,mf.z),g.push(gf.x,gf.y,gf.z)}this.setAttribute("position",new oe(g,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class Lo extends eh{constructor(t){super(t),this.uuid=Xi(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let i=0,r=this.holes.length;i<r;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const r=t.holes[e];this.holes.push(r.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){const r=this.holes[e];t.holes.push(r.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const r=t.holes[e];this.holes.push(new eh().fromJSON(r))}return this}}const yU={triangulate:function(n,t,e=2){const i=t&&t.length,r=i?t[0]*e:n.length;let a=WS(n,0,r,e,!0);const l=[];if(!a||a.next===a.prev)return l;let c,u,d,f,A,m,g;if(i&&(a=_U(n,t,a,e)),n.length>80*e){c=d=n[0],u=f=n[1];for(let b=e;b<r;b+=e)A=n[b],m=n[b+1],A<c&&(c=A),m<u&&(u=m),A>d&&(d=A),m>f&&(f=m);g=Math.max(d-c,f-u),g=g!==0?32767/g:0}return nh(a,l,e,c,u,g,0),l}};function WS(n,t,e,i,r){let a,l;if(r===OU(n,t,e,i)>0)for(a=t;a<e;a+=i)l=O1(a,n[a],n[a+1],l);else for(a=e-i;a>=t;a-=i)l=O1(a,n[a],n[a+1],l);return l&&PA(l,l.next)&&(rh(l),l=l.next),l}function Po(n,t){if(!n)return n;t||(t=n);let e=n,i;do if(i=!1,!e.steiner&&(PA(e,e.next)||vn(e.prev,e,e.next)===0)){if(rh(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function nh(n,t,e,i,r,a,l){if(!n)return;!l&&a&&TU(n,i,r,a);let c=n,u,d;for(;n.prev!==n.next;){if(u=n.prev,d=n.next,a?bU(n,i,r,a):EU(n)){t.push(u.i/e|0),t.push(n.i/e|0),t.push(d.i/e|0),rh(n),n=d.next,c=d.next;continue}if(n=d,n===c){l?l===1?(n=xU(Po(n),t,e),nh(n,t,e,i,r,a,2)):l===2&&CU(n,t,e,i,r,a):nh(Po(n),t,e,i,r,a,1);break}}}function EU(n){const t=n.prev,e=n,i=n.next;if(vn(t,e,i)>=0)return!1;const r=t.x,a=e.x,l=i.x,c=t.y,u=e.y,d=i.y,f=r<a?r<l?r:l:a<l?a:l,A=c<u?c<d?c:d:u<d?u:d,m=r>a?r>l?r:l:a>l?a:l,g=c>u?c>d?c:d:u>d?u:d;let b=i.next;for(;b!==t;){if(b.x>=f&&b.x<=m&&b.y>=A&&b.y<=g&&Zl(r,c,a,u,l,d,b.x,b.y)&&vn(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function bU(n,t,e,i){const r=n.prev,a=n,l=n.next;if(vn(r,a,l)>=0)return!1;const c=r.x,u=a.x,d=l.x,f=r.y,A=a.y,m=l.y,g=c<u?c<d?c:d:u<d?u:d,b=f<A?f<m?f:m:A<m?A:m,x=c>u?c>d?c:d:u>d?u:d,E=f>A?f>m?f:m:A>m?A:m,y=sy(g,b,t,e,i),_=sy(x,E,t,e,i);let w=n.prevZ,S=n.nextZ;for(;w&&w.z>=y&&S&&S.z<=_;){if(w.x>=g&&w.x<=x&&w.y>=b&&w.y<=E&&w!==r&&w!==l&&Zl(c,f,u,A,d,m,w.x,w.y)&&vn(w.prev,w,w.next)>=0||(w=w.prevZ,S.x>=g&&S.x<=x&&S.y>=b&&S.y<=E&&S!==r&&S!==l&&Zl(c,f,u,A,d,m,S.x,S.y)&&vn(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;w&&w.z>=y;){if(w.x>=g&&w.x<=x&&w.y>=b&&w.y<=E&&w!==r&&w!==l&&Zl(c,f,u,A,d,m,w.x,w.y)&&vn(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;S&&S.z<=_;){if(S.x>=g&&S.x<=x&&S.y>=b&&S.y<=E&&S!==r&&S!==l&&Zl(c,f,u,A,d,m,S.x,S.y)&&vn(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function xU(n,t,e){let i=n;do{const r=i.prev,a=i.next.next;!PA(r,a)&&jS(r,i,i.next,a)&&ih(r,a)&&ih(a,r)&&(t.push(r.i/e|0),t.push(i.i/e|0),t.push(a.i/e|0),rh(i),rh(i.next),i=n=a),i=i.next}while(i!==n);return Po(i)}function CU(n,t,e,i,r,a){let l=n;do{let c=l.next.next;for(;c!==l.prev;){if(l.i!==c.i&&LU(l,c)){let u=XS(l,c);l=Po(l,l.next),u=Po(u,u.next),nh(l,t,e,i,r,a,0),nh(u,t,e,i,r,a,0);return}c=c.next}l=l.next}while(l!==n)}function _U(n,t,e,i){const r=[];let a,l,c,u,d;for(a=0,l=t.length;a<l;a++)c=t[a]*i,u=a<l-1?t[a+1]*i:n.length,d=WS(n,c,u,i,!1),d===d.next&&(d.steiner=!0),r.push(RU(d));for(r.sort(wU),a=0;a<r.length;a++)e=MU(r[a],e);return e}function wU(n,t){return n.x-t.x}function MU(n,t){const e=SU(n,t);if(!e)return t;const i=XS(e,n);return Po(i,i.next),Po(e,e.next)}function SU(n,t){let e=t,i=-1/0,r;const a=n.x,l=n.y;do{if(l<=e.y&&l>=e.next.y&&e.next.y!==e.y){const m=e.x+(l-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(m<=a&&m>i&&(i=m,r=e.x<e.next.x?e:e.next,m===a))return r}e=e.next}while(e!==t);if(!r)return null;const c=r,u=r.x,d=r.y;let f=1/0,A;e=r;do a>=e.x&&e.x>=u&&a!==e.x&&Zl(l<d?a:i,l,u,d,l<d?i:a,l,e.x,e.y)&&(A=Math.abs(l-e.y)/(a-e.x),ih(e,n)&&(A<f||A===f&&(e.x>r.x||e.x===r.x&&BU(r,e)))&&(r=e,f=A)),e=e.next;while(e!==c);return r}function BU(n,t){return vn(n.prev,n,t.prev)<0&&vn(t.next,n,n.next)<0}function TU(n,t,e,i){let r=n;do r.z===0&&(r.z=sy(r.x,r.y,t,e,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,IU(r)}function IU(n){let t,e,i,r,a,l,c,u,d=1;do{for(e=n,n=null,a=null,l=0;e;){for(l++,i=e,c=0,t=0;t<d&&(c++,i=i.nextZ,!!i);t++);for(u=d;c>0||u>0&&i;)c!==0&&(u===0||!i||e.z<=i.z)?(r=e,e=e.nextZ,c--):(r=i,i=i.nextZ,u--),a?a.nextZ=r:n=r,r.prevZ=a,a=r;e=i}a.nextZ=null,d*=2}while(l>1);return n}function sy(n,t,e,i,r){return n=(n-e)*r|0,t=(t-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function RU(n){let t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function Zl(n,t,e,i,r,a,l,c){return(r-l)*(t-c)>=(n-l)*(a-c)&&(n-l)*(i-c)>=(e-l)*(t-c)&&(e-l)*(a-c)>=(r-l)*(i-c)}function LU(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!DU(n,t)&&(ih(n,t)&&ih(t,n)&&UU(n,t)&&(vn(n.prev,n,t.prev)||vn(n,t.prev,t))||PA(n,t)&&vn(n.prev,n,n.next)>0&&vn(t.prev,t,t.next)>0)}function vn(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function PA(n,t){return n.x===t.x&&n.y===t.y}function jS(n,t,e,i){const r=Ef(vn(n,t,e)),a=Ef(vn(n,t,i)),l=Ef(vn(e,i,n)),c=Ef(vn(e,i,t));return!!(r!==a&&l!==c||r===0&&yf(n,e,t)||a===0&&yf(n,i,t)||l===0&&yf(e,n,i)||c===0&&yf(e,t,i))}function yf(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function Ef(n){return n>0?1:n<0?-1:0}function DU(n,t){let e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&jS(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function ih(n,t){return vn(n.prev,n,n.next)<0?vn(n,t,n.next)>=0&&vn(n,n.prev,t)>=0:vn(n,t,n.prev)<0||vn(n,n.next,t)<0}function UU(n,t){let e=n,i=!1;const r=(n.x+t.x)/2,a=(n.y+t.y)/2;do e.y>a!=e.next.y>a&&e.next.y!==e.y&&r<(e.next.x-e.x)*(a-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==n);return i}function XS(n,t){const e=new ay(n.i,n.x,n.y),i=new ay(t.i,t.x,t.y),r=n.next,a=t.prev;return n.next=t,t.prev=n,e.next=r,r.prev=e,i.next=e,e.prev=i,a.next=i,i.prev=a,i}function O1(n,t,e,i){const r=new ay(n,t,e);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function rh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function ay(n,t,e){this.i=n,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function OU(n,t,e,i){let r=0;for(let a=t,l=e-i;a<e;a+=i)r+=(n[l]-n[a])*(n[a+1]+n[l+1]),l=a;return r}class qr{static area(t){const e=t.length;let i=0;for(let r=e-1,a=0;a<e;r=a++)i+=t[r].x*t[a].y-t[a].x*t[r].y;return i*.5}static isClockWise(t){return qr.area(t)<0}static triangulateShape(t,e){const i=[],r=[],a=[];N1(t),P1(i,t);let l=t.length;e.forEach(N1);for(let u=0;u<e.length;u++)r.push(l),l+=e[u].length,P1(i,e[u]);const c=yU.triangulate(i,r);for(let u=0;u<c.length;u+=3)a.push(c.slice(u,u+3));return a}}function N1(n){const t=n.length;t>2&&n[t-1].equals(n[0])&&n.pop()}function P1(n,t){for(let e=0;e<t.length;e++)n.push(t[e].x),n.push(t[e].y)}class FA extends Ie{constructor(t=new Lo([new Ut(.5,.5),new Ut(-.5,.5),new Ut(-.5,-.5),new Ut(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const i=this,r=[],a=[];for(let c=0,u=t.length;c<u;c++){const d=t[c];l(d)}this.setAttribute("position",new oe(r,3)),this.setAttribute("uv",new oe(a,2)),this.computeVertexNormals();function l(c){const u=[],d=e.curveSegments!==void 0?e.curveSegments:12,f=e.steps!==void 0?e.steps:1,A=e.depth!==void 0?e.depth:1;let m=e.bevelEnabled!==void 0?e.bevelEnabled:!0,g=e.bevelThickness!==void 0?e.bevelThickness:.2,b=e.bevelSize!==void 0?e.bevelSize:g-.1,x=e.bevelOffset!==void 0?e.bevelOffset:0,E=e.bevelSegments!==void 0?e.bevelSegments:3;const y=e.extrudePath,_=e.UVGenerator!==void 0?e.UVGenerator:NU;let w,S=!1,R,U,L,F;y&&(w=y.getSpacedPoints(f),S=!0,m=!1,R=y.computeFrenetFrames(f,!1),U=new W,L=new W,F=new W),m||(E=0,g=0,b=0,x=0);const D=c.extractPoints(d);let O=D.shape;const z=D.holes;if(!qr.isClockWise(O)){O=O.reverse();for(let Ct=0,Rt=z.length;Ct<Rt;Ct++){const Tt=z[Ct];qr.isClockWise(Tt)&&(z[Ct]=Tt.reverse())}}const $=qr.triangulateShape(O,z),nt=O;for(let Ct=0,Rt=z.length;Ct<Rt;Ct++){const Tt=z[Ct];O=O.concat(Tt)}function At(Ct,Rt,Tt){return Rt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ct.clone().addScaledVector(Rt,Tt)}const G=O.length,X=$.length;function tt(Ct,Rt,Tt){let j,zt,Vt;const B=Ct.x-Rt.x,T=Ct.y-Rt.y,P=Tt.x-Ct.x,q=Tt.y-Ct.y,Y=B*B+T*T,lt=B*q-T*P;if(Math.abs(lt)>Number.EPSILON){const gt=Math.sqrt(Y),ne=Math.sqrt(P*P+q*q),H=Rt.x-T/gt,N=Rt.y+B/gt,it=Tt.x-q/ne,bt=Tt.y+P/ne,Dt=((it-H)*q-(bt-N)*P)/(B*q-T*P);j=H+B*Dt-Ct.x,zt=N+T*Dt-Ct.y;const Mt=j*j+zt*zt;if(Mt<=2)return new Ut(j,zt);Vt=Math.sqrt(Mt/2)}else{let gt=!1;B>Number.EPSILON?P>Number.EPSILON&&(gt=!0):B<-Number.EPSILON?P<-Number.EPSILON&&(gt=!0):Math.sign(T)===Math.sign(q)&&(gt=!0),gt?(j=-T,zt=B,Vt=Math.sqrt(Y)):(j=B,zt=T,Vt=Math.sqrt(Y/2))}return new Ut(j/Vt,zt/Vt)}const ut=[];for(let Ct=0,Rt=nt.length,Tt=Rt-1,j=Ct+1;Ct<Rt;Ct++,Tt++,j++)Tt===Rt&&(Tt=0),j===Rt&&(j=0),ut[Ct]=tt(nt[Ct],nt[Tt],nt[j]);const xt=[];let V,rt=ut.concat();for(let Ct=0,Rt=z.length;Ct<Rt;Ct++){const Tt=z[Ct];V=[];for(let j=0,zt=Tt.length,Vt=zt-1,B=j+1;j<zt;j++,Vt++,B++)Vt===zt&&(Vt=0),B===zt&&(B=0),V[j]=tt(Tt[j],Tt[Vt],Tt[B]);xt.push(V),rt=rt.concat(V)}for(let Ct=0;Ct<E;Ct++){const Rt=Ct/E,Tt=g*Math.cos(Rt*Math.PI/2),j=b*Math.sin(Rt*Math.PI/2)+x;for(let zt=0,Vt=nt.length;zt<Vt;zt++){const B=At(nt[zt],ut[zt],j);Lt(B.x,B.y,-Tt)}for(let zt=0,Vt=z.length;zt<Vt;zt++){const B=z[zt];V=xt[zt];for(let T=0,P=B.length;T<P;T++){const q=At(B[T],V[T],j);Lt(q.x,q.y,-Tt)}}}const yt=b+x;for(let Ct=0;Ct<G;Ct++){const Rt=m?At(O[Ct],rt[Ct],yt):O[Ct];S?(L.copy(R.normals[0]).multiplyScalar(Rt.x),U.copy(R.binormals[0]).multiplyScalar(Rt.y),F.copy(w[0]).add(L).add(U),Lt(F.x,F.y,F.z)):Lt(Rt.x,Rt.y,0)}for(let Ct=1;Ct<=f;Ct++)for(let Rt=0;Rt<G;Rt++){const Tt=m?At(O[Rt],rt[Rt],yt):O[Rt];S?(L.copy(R.normals[Ct]).multiplyScalar(Tt.x),U.copy(R.binormals[Ct]).multiplyScalar(Tt.y),F.copy(w[Ct]).add(L).add(U),Lt(F.x,F.y,F.z)):Lt(Tt.x,Tt.y,A/f*Ct)}for(let Ct=E-1;Ct>=0;Ct--){const Rt=Ct/E,Tt=g*Math.cos(Rt*Math.PI/2),j=b*Math.sin(Rt*Math.PI/2)+x;for(let zt=0,Vt=nt.length;zt<Vt;zt++){const B=At(nt[zt],ut[zt],j);Lt(B.x,B.y,A+Tt)}for(let zt=0,Vt=z.length;zt<Vt;zt++){const B=z[zt];V=xt[zt];for(let T=0,P=B.length;T<P;T++){const q=At(B[T],V[T],j);S?Lt(q.x,q.y+w[f-1].y,w[f-1].x+Tt):Lt(q.x,q.y,A+Tt)}}}Et(),Ot();function Et(){const Ct=r.length/3;if(m){let Rt=0,Tt=G*Rt;for(let j=0;j<X;j++){const zt=$[j];ft(zt[2]+Tt,zt[1]+Tt,zt[0]+Tt)}Rt=f+E*2,Tt=G*Rt;for(let j=0;j<X;j++){const zt=$[j];ft(zt[0]+Tt,zt[1]+Tt,zt[2]+Tt)}}else{for(let Rt=0;Rt<X;Rt++){const Tt=$[Rt];ft(Tt[2],Tt[1],Tt[0])}for(let Rt=0;Rt<X;Rt++){const Tt=$[Rt];ft(Tt[0]+G*f,Tt[1]+G*f,Tt[2]+G*f)}}i.addGroup(Ct,r.length/3-Ct,0)}function Ot(){const Ct=r.length/3;let Rt=0;Gt(nt,Rt),Rt+=nt.length;for(let Tt=0,j=z.length;Tt<j;Tt++){const zt=z[Tt];Gt(zt,Rt),Rt+=zt.length}i.addGroup(Ct,r.length/3-Ct,1)}function Gt(Ct,Rt){let Tt=Ct.length;for(;--Tt>=0;){const j=Tt;let zt=Tt-1;zt<0&&(zt=Ct.length-1);for(let Vt=0,B=f+E*2;Vt<B;Vt++){const T=G*Vt,P=G*(Vt+1),q=Rt+j+T,Y=Rt+zt+T,lt=Rt+zt+P,gt=Rt+j+P;It(q,Y,lt,gt)}}}function Lt(Ct,Rt,Tt){u.push(Ct),u.push(Rt),u.push(Tt)}function ft(Ct,Rt,Tt){Ft(Ct),Ft(Rt),Ft(Tt);const j=r.length/3,zt=_.generateTopUV(i,r,j-3,j-2,j-1);Jt(zt[0]),Jt(zt[1]),Jt(zt[2])}function It(Ct,Rt,Tt,j){Ft(Ct),Ft(Rt),Ft(j),Ft(Rt),Ft(Tt),Ft(j);const zt=r.length/3,Vt=_.generateSideWallUV(i,r,zt-6,zt-3,zt-2,zt-1);Jt(Vt[0]),Jt(Vt[1]),Jt(Vt[3]),Jt(Vt[1]),Jt(Vt[2]),Jt(Vt[3])}function Ft(Ct){r.push(u[Ct*3+0]),r.push(u[Ct*3+1]),r.push(u[Ct*3+2])}function Jt(Ct){a.push(Ct.x),a.push(Ct.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,i=this.parameters.options;return PU(e,i,t)}static fromJSON(t,e){const i=[];for(let a=0,l=t.shapes.length;a<l;a++){const c=e[t.shapes[a]];i.push(c)}const r=t.options.extrudePath;return r!==void 0&&(t.options.extrudePath=new Jp[r.type]().fromJSON(r)),new FA(i,t.options)}}const NU={generateTopUV:function(n,t,e,i,r){const a=t[e*3],l=t[e*3+1],c=t[i*3],u=t[i*3+1],d=t[r*3],f=t[r*3+1];return[new Ut(a,l),new Ut(c,u),new Ut(d,f)]},generateSideWallUV:function(n,t,e,i,r,a){const l=t[e*3],c=t[e*3+1],u=t[e*3+2],d=t[i*3],f=t[i*3+1],A=t[i*3+2],m=t[r*3],g=t[r*3+1],b=t[r*3+2],x=t[a*3],E=t[a*3+1],y=t[a*3+2];return Math.abs(c-f)<Math.abs(l-d)?[new Ut(l,1-u),new Ut(d,1-A),new Ut(m,1-b),new Ut(x,1-y)]:[new Ut(c,1-u),new Ut(f,1-A),new Ut(g,1-b),new Ut(E,1-y)]}};function PU(n,t,e){if(e.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const a=n[i];e.shapes.push(a.uuid)}else e.shapes.push(n.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class kA extends Ua{constructor(t=1,e=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new kA(t.radius,t.detail)}}class bh extends Ua{constructor(t=1,e=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new bh(t.radius,t.detail)}}class dc extends Ie{constructor(t=1,e=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};const a=t/2,l=e/2,c=Math.floor(i),u=Math.floor(r),d=c+1,f=u+1,A=t/c,m=e/u,g=[],b=[],x=[],E=[];for(let y=0;y<f;y++){const _=y*m-l;for(let w=0;w<d;w++){const S=w*A-a;b.push(S,-_,0),x.push(0,0,1),E.push(w/c),E.push(1-y/u)}}for(let y=0;y<u;y++)for(let _=0;_<c;_++){const w=_+d*y,S=_+d*(y+1),R=_+1+d*(y+1),U=_+1+d*y;g.push(w,S,U),g.push(S,R,U)}this.setIndex(g),this.setAttribute("position",new oe(b,3)),this.setAttribute("normal",new oe(x,3)),this.setAttribute("uv",new oe(E,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new dc(t.width,t.height,t.widthSegments,t.heightSegments)}}class QA extends Ie{constructor(t=.5,e=1,i=32,r=1,a=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:l},i=Math.max(3,i),r=Math.max(1,r);const c=[],u=[],d=[],f=[];let A=t;const m=(e-t)/r,g=new W,b=new Ut;for(let x=0;x<=r;x++){for(let E=0;E<=i;E++){const y=a+E/i*l;g.x=A*Math.cos(y),g.y=A*Math.sin(y),u.push(g.x,g.y,g.z),d.push(0,0,1),b.x=(g.x/e+1)/2,b.y=(g.y/e+1)/2,f.push(b.x,b.y)}A+=m}for(let x=0;x<r;x++){const E=x*(i+1);for(let y=0;y<i;y++){const _=y+E,w=_,S=_+i+1,R=_+i+2,U=_+1;c.push(w,S,U),c.push(S,R,U)}}this.setIndex(c),this.setAttribute("position",new oe(u,3)),this.setAttribute("normal",new oe(d,3)),this.setAttribute("uv",new oe(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new QA(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class zA extends Ie{constructor(t=new Lo([new Ut(0,.5),new Ut(-.5,-.5),new Ut(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const i=[],r=[],a=[],l=[];let c=0,u=0;if(Array.isArray(t)===!1)d(t);else for(let f=0;f<t.length;f++)d(t[f]),this.addGroup(c,u,f),c+=u,u=0;this.setIndex(i),this.setAttribute("position",new oe(r,3)),this.setAttribute("normal",new oe(a,3)),this.setAttribute("uv",new oe(l,2));function d(f){const A=r.length/3,m=f.extractPoints(e);let g=m.shape;const b=m.holes;qr.isClockWise(g)===!1&&(g=g.reverse());for(let E=0,y=b.length;E<y;E++){const _=b[E];qr.isClockWise(_)===!0&&(b[E]=_.reverse())}const x=qr.triangulateShape(g,b);for(let E=0,y=b.length;E<y;E++){const _=b[E];g=g.concat(_)}for(let E=0,y=g.length;E<y;E++){const _=g[E];r.push(_.x,_.y,0),a.push(0,0,1),l.push(_.x,_.y)}for(let E=0,y=x.length;E<y;E++){const _=x[E],w=_[0]+A,S=_[1]+A,R=_[2]+A;i.push(w,S,R),u+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return FU(e,t)}static fromJSON(t,e){const i=[];for(let r=0,a=t.shapes.length;r<a;r++){const l=e[t.shapes[r]];i.push(l)}return new zA(i,t.curveSegments)}}function FU(n,t){if(t.shapes=[],Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const r=n[e];t.shapes.push(r.uuid)}else t.shapes.push(n.uuid);return t}class xh extends Ie{constructor(t=1,e=32,i=16,r=0,a=Math.PI*2,l=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:r,phiLength:a,thetaStart:l,thetaLength:c},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));const u=Math.min(l+c,Math.PI);let d=0;const f=[],A=new W,m=new W,g=[],b=[],x=[],E=[];for(let y=0;y<=i;y++){const _=[],w=y/i;let S=0;y===0&&l===0?S=.5/e:y===i&&u===Math.PI&&(S=-.5/e);for(let R=0;R<=e;R++){const U=R/e;A.x=-t*Math.cos(r+U*a)*Math.sin(l+w*c),A.y=t*Math.cos(l+w*c),A.z=t*Math.sin(r+U*a)*Math.sin(l+w*c),b.push(A.x,A.y,A.z),m.copy(A).normalize(),x.push(m.x,m.y,m.z),E.push(U+S,1-w),_.push(d++)}f.push(_)}for(let y=0;y<i;y++)for(let _=0;_<e;_++){const w=f[y][_+1],S=f[y][_],R=f[y+1][_],U=f[y+1][_+1];(y!==0||l>0)&&g.push(w,S,U),(y!==i-1||u<Math.PI)&&g.push(S,R,U)}this.setIndex(g),this.setAttribute("position",new oe(b,3)),this.setAttribute("normal",new oe(x,3)),this.setAttribute("uv",new oe(E,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new xh(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class GA extends Ua{constructor(t=1,e=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new GA(t.radius,t.detail)}}class HA extends Ie{constructor(t=1,e=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);const l=[],c=[],u=[],d=[],f=new W,A=new W,m=new W;for(let g=0;g<=i;g++)for(let b=0;b<=r;b++){const x=b/r*a,E=g/i*Math.PI*2;A.x=(t+e*Math.cos(E))*Math.cos(x),A.y=(t+e*Math.cos(E))*Math.sin(x),A.z=e*Math.sin(E),c.push(A.x,A.y,A.z),f.x=t*Math.cos(x),f.y=t*Math.sin(x),m.subVectors(A,f).normalize(),u.push(m.x,m.y,m.z),d.push(b/r),d.push(g/i)}for(let g=1;g<=i;g++)for(let b=1;b<=r;b++){const x=(r+1)*g+b-1,E=(r+1)*(g-1)+b-1,y=(r+1)*(g-1)+b,_=(r+1)*g+b;l.push(x,E,_),l.push(E,y,_)}this.setIndex(l),this.setAttribute("position",new oe(c,3)),this.setAttribute("normal",new oe(u,3)),this.setAttribute("uv",new oe(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new HA(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class VA extends Ie{constructor(t=1,e=.4,i=64,r=8,a=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:r,p:a,q:l},i=Math.floor(i),r=Math.floor(r);const c=[],u=[],d=[],f=[],A=new W,m=new W,g=new W,b=new W,x=new W,E=new W,y=new W;for(let w=0;w<=i;++w){const S=w/i*a*Math.PI*2;_(S,a,l,t,g),_(S+.01,a,l,t,b),E.subVectors(b,g),y.addVectors(b,g),x.crossVectors(E,y),y.crossVectors(x,E),x.normalize(),y.normalize();for(let R=0;R<=r;++R){const U=R/r*Math.PI*2,L=-e*Math.cos(U),F=e*Math.sin(U);A.x=g.x+(L*y.x+F*x.x),A.y=g.y+(L*y.y+F*x.y),A.z=g.z+(L*y.z+F*x.z),u.push(A.x,A.y,A.z),m.subVectors(A,g).normalize(),d.push(m.x,m.y,m.z),f.push(w/i),f.push(R/r)}}for(let w=1;w<=i;w++)for(let S=1;S<=r;S++){const R=(r+1)*(w-1)+(S-1),U=(r+1)*w+(S-1),L=(r+1)*w+S,F=(r+1)*(w-1)+S;c.push(R,U,F),c.push(U,L,F)}this.setIndex(c),this.setAttribute("position",new oe(u,3)),this.setAttribute("normal",new oe(d,3)),this.setAttribute("uv",new oe(f,2));function _(w,S,R,U,L){const F=Math.cos(w),D=Math.sin(w),O=R/S*w,z=Math.cos(O);L.x=U*(2+z)*.5*F,L.y=U*(2+z)*D*.5,L.z=U*Math.sin(O)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new VA(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class qA extends Ie{constructor(t=new pE(new W(-1,-1,0),new W(-1,1,0),new W(1,1,0)),e=64,i=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:r,closed:a};const l=t.computeFrenetFrames(e,a);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const c=new W,u=new W,d=new Ut;let f=new W;const A=[],m=[],g=[],b=[];x(),this.setIndex(b),this.setAttribute("position",new oe(A,3)),this.setAttribute("normal",new oe(m,3)),this.setAttribute("uv",new oe(g,2));function x(){for(let w=0;w<e;w++)E(w);E(a===!1?e:0),_(),y()}function E(w){f=t.getPointAt(w/e,f);const S=l.normals[w],R=l.binormals[w];for(let U=0;U<=r;U++){const L=U/r*Math.PI*2,F=Math.sin(L),D=-Math.cos(L);u.x=D*S.x+F*R.x,u.y=D*S.y+F*R.y,u.z=D*S.z+F*R.z,u.normalize(),m.push(u.x,u.y,u.z),c.x=f.x+i*u.x,c.y=f.y+i*u.y,c.z=f.z+i*u.z,A.push(c.x,c.y,c.z)}}function y(){for(let w=1;w<=e;w++)for(let S=1;S<=r;S++){const R=(r+1)*(w-1)+(S-1),U=(r+1)*w+(S-1),L=(r+1)*w+S,F=(r+1)*(w-1)+S;b.push(R,U,F),b.push(U,L,F)}}function _(){for(let w=0;w<=e;w++)for(let S=0;S<=r;S++)d.x=w/e,d.y=S/r,g.push(d.x,d.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new qA(new Jp[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class YS extends Ie{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],i=new Set,r=new W,a=new W;if(t.index!==null){const l=t.attributes.position,c=t.index;let u=t.groups;u.length===0&&(u=[{start:0,count:c.count,materialIndex:0}]);for(let d=0,f=u.length;d<f;++d){const A=u[d],m=A.start,g=A.count;for(let b=m,x=m+g;b<x;b+=3)for(let E=0;E<3;E++){const y=c.getX(b+E),_=c.getX(b+(E+1)%3);r.fromBufferAttribute(l,y),a.fromBufferAttribute(l,_),F1(r,a,i)===!0&&(e.push(r.x,r.y,r.z),e.push(a.x,a.y,a.z))}}}else{const l=t.attributes.position;for(let c=0,u=l.count/3;c<u;c++)for(let d=0;d<3;d++){const f=3*c+d,A=3*c+(d+1)%3;r.fromBufferAttribute(l,f),a.fromBufferAttribute(l,A),F1(r,a,i)===!0&&(e.push(r.x,r.y,r.z),e.push(a.x,a.y,a.z))}}this.setAttribute("position",new oe(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function F1(n,t,e){const i=`${n.x},${n.y},${n.z}-${t.x},${t.y},${t.z}`,r=`${t.x},${t.y},${t.z}-${n.x},${n.y},${n.z}`;return e.has(i)===!0||e.has(r)===!0?!1:(e.add(i),e.add(r),!0)}var k1=Object.freeze({__proto__:null,BoxGeometry:Fo,CapsuleGeometry:DA,CircleGeometry:UA,ConeGeometry:OA,CylinderGeometry:hc,DodecahedronGeometry:NA,EdgesGeometry:qS,ExtrudeGeometry:FA,IcosahedronGeometry:kA,LatheGeometry:Eh,OctahedronGeometry:bh,PlaneGeometry:dc,PolyhedronGeometry:Ua,RingGeometry:QA,ShapeGeometry:zA,SphereGeometry:xh,TetrahedronGeometry:GA,TorusGeometry:HA,TorusKnotGeometry:VA,TubeGeometry:qA,WireframeGeometry:YS});class KS extends ci{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new $t(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class JS extends Br{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class mE extends ci{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new $t(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=La,this.normalScale=new Ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Yi,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class ZS extends mE{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ut(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return _e(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new $t(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new $t(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new $t(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class $S extends ci{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new $t(16777215),this.specular=new $t(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=La,this.normalScale=new Ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Yi,this.combine=Ah,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class tB extends ci{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new $t(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=La,this.normalScale=new Ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class eB extends ci{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=La,this.normalScale=new Ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class nB extends ci{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new $t(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=La,this.normalScale=new Ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Yi,this.combine=Ah,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class gE extends ci{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=dS,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class vE extends ci{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class iB extends ci{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new $t(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=La,this.normalScale=new Ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class rB extends bi{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function To(n,t,e){return!n||!e&&n.constructor===t?n:typeof t.BYTES_PER_ELEMENT=="number"?new t(n):Array.prototype.slice.call(n)}function sB(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function aB(n){function t(r,a){return n[r]-n[a]}const e=n.length,i=new Array(e);for(let r=0;r!==e;++r)i[r]=r;return i.sort(t),i}function oy(n,t,e){const i=n.length,r=new n.constructor(i);for(let a=0,l=0;l!==i;++a){const c=e[a]*t;for(let u=0;u!==t;++u)r[l++]=n[c+u]}return r}function yE(n,t,e,i){let r=1,a=n[0];for(;a!==void 0&&a[i]===void 0;)a=n[r++];if(a===void 0)return;let l=a[i];if(l!==void 0)if(Array.isArray(l))do l=a[i],l!==void 0&&(t.push(a.time),e.push.apply(e,l)),a=n[r++];while(a!==void 0);else if(l.toArray!==void 0)do l=a[i],l!==void 0&&(t.push(a.time),l.toArray(e,e.length)),a=n[r++];while(a!==void 0);else do l=a[i],l!==void 0&&(t.push(a.time),e.push(l)),a=n[r++];while(a!==void 0)}function kU(n,t,e,i,r=30){const a=n.clone();a.name=t;const l=[];for(let u=0;u<a.tracks.length;++u){const d=a.tracks[u],f=d.getValueSize(),A=[],m=[];for(let g=0;g<d.times.length;++g){const b=d.times[g]*r;if(!(b<e||b>=i)){A.push(d.times[g]);for(let x=0;x<f;++x)m.push(d.values[g*f+x])}}A.length!==0&&(d.times=To(A,d.times.constructor),d.values=To(m,d.values.constructor),l.push(d))}a.tracks=l;let c=1/0;for(let u=0;u<a.tracks.length;++u)c>a.tracks[u].times[0]&&(c=a.tracks[u].times[0]);for(let u=0;u<a.tracks.length;++u)a.tracks[u].shift(-1*c);return a.resetDuration(),a}function QU(n,t=0,e=n,i=30){i<=0&&(i=30);const r=e.tracks.length,a=t/i;for(let l=0;l<r;++l){const c=e.tracks[l],u=c.ValueTypeName;if(u==="bool"||u==="string")continue;const d=n.tracks.find(function(y){return y.name===c.name&&y.ValueTypeName===u});if(d===void 0)continue;let f=0;const A=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=A/3);let m=0;const g=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);const b=c.times.length-1;let x;if(a<=c.times[0]){const y=f,_=A-f;x=c.values.slice(y,_)}else if(a>=c.times[b]){const y=b*A+f,_=y+A-f;x=c.values.slice(y,_)}else{const y=c.createInterpolant(),_=f,w=A-f;y.evaluate(a),x=y.resultBuffer.slice(_,w)}u==="quaternion"&&new Oi().fromArray(x).normalize().conjugate().toArray(x);const E=d.times.length;for(let y=0;y<E;++y){const _=y*g+m;if(u==="quaternion")Oi.multiplyQuaternionsFlat(d.values,_,x,0,d.values,_);else{const w=g-m*2;for(let S=0;S<w;++S)d.values[_+S]-=x[S]}}}return n.blendMode=eE,n}const zU={convertArray:To,isTypedArray:sB,getKeyframeOrder:aB,sortedArray:oy,flattenJSON:yE,subclip:kU,makeClipAdditive:QU};class Ch{constructor(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,r=e[i],a=e[i-1];t:{e:{let l;n:{i:if(!(t<r)){for(let c=i+2;;){if(r===void 0){if(t<a)break i;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===c)break;if(a=r,r=e[++i],t<r)break e}l=e.length;break n}if(!(t>=a)){const c=e[1];t<c&&(i=2,a=c);for(let u=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(r=a,a=e[--i-1],t>=a)break e}l=i,i=0;break n}break t}for(;i<l;){const c=i+l>>>1;t<e[c]?l=c:i=c+1}if(r=e[i],a=e[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=t*r;for(let l=0;l!==r;++l)e[l]=i[a+l];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class oB extends Ch{constructor(t,e,i,r){super(t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Mo,endingEnd:Mo}}intervalChanged_(t,e,i){const r=this.parameterPositions;let a=t-2,l=t+1,c=r[a],u=r[l];if(c===void 0)switch(this.getSettings_().endingStart){case So:a=t,c=2*e-i;break;case Ku:a=r.length-2,c=e+r[a]-r[a+1];break;default:a=t,c=i}if(u===void 0)switch(this.getSettings_().endingEnd){case So:l=t,u=2*i-e;break;case Ku:l=1,u=i+r[1]-r[0];break;default:l=t-1,u=e}const d=(i-e)*.5,f=this.valueSize;this._weightPrev=d/(e-c),this._weightNext=d/(u-i),this._offsetPrev=a*f,this._offsetNext=l*f}interpolate_(t,e,i,r){const a=this.resultBuffer,l=this.sampleValues,c=this.valueSize,u=t*c,d=u-c,f=this._offsetPrev,A=this._offsetNext,m=this._weightPrev,g=this._weightNext,b=(i-e)/(r-e),x=b*b,E=x*b,y=-m*E+2*m*x-m*b,_=(1+m)*E+(-1.5-2*m)*x+(-.5+m)*b+1,w=(-1-g)*E+(1.5+g)*x+.5*b,S=g*E-g*x;for(let R=0;R!==c;++R)a[R]=y*l[f+R]+_*l[d+R]+w*l[u+R]+S*l[A+R];return a}}class EE extends Ch{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){const a=this.resultBuffer,l=this.sampleValues,c=this.valueSize,u=t*c,d=u-c,f=(i-e)/(r-e),A=1-f;for(let m=0;m!==c;++m)a[m]=l[d+m]*A+l[u+m]*f;return a}}class lB extends Ch{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class Ir{constructor(t,e,i,r){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=To(e,this.TimeBufferType),this.values=To(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:To(t.times,Array),values:To(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(i.interpolation=r)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new lB(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new EE(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new oB(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Yu:e=this.InterpolantFactoryMethodDiscrete;break;case Xp:e=this.InterpolantFactoryMethodLinear;break;case ip:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Yu;case this.InterpolantFactoryMethodLinear:return Xp;case this.InterpolantFactoryMethodSmooth:return ip}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]*=t}return this}trim(t,e){const i=this.times,r=i.length;let a=0,l=r-1;for(;a!==r&&i[a]<t;)++a;for(;l!==-1&&i[l]>e;)--l;if(++l,a!==0||l!==r){a>=l&&(l=Math.max(l,1),a=l-1);const c=this.getValueSize();this.times=i.slice(a,l),this.values=this.values.slice(a*c,l*c)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,r=this.values,a=i.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let l=null;for(let c=0;c!==a;c++){const u=i[c];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,u),t=!1;break}if(l!==null&&l>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,u,l),t=!1;break}l=u}if(r!==void 0&&sB(r))for(let c=0,u=r.length;c!==u;++c){const d=r[c];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,d),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===ip,a=t.length-1;let l=1;for(let c=1;c<a;++c){let u=!1;const d=t[c],f=t[c+1];if(d!==f&&(c!==1||d!==t[0]))if(r)u=!0;else{const A=c*i,m=A-i,g=A+i;for(let b=0;b!==i;++b){const x=e[A+b];if(x!==e[m+b]||x!==e[g+b]){u=!0;break}}}if(u){if(c!==l){t[l]=t[c];const A=c*i,m=l*i;for(let g=0;g!==i;++g)e[m+g]=e[A+g]}++l}}if(a>0){t[l]=t[a];for(let c=a*i,u=l*i,d=0;d!==i;++d)e[u+d]=e[c+d];++l}return l!==t.length?(this.times=t.slice(0,l),this.values=e.slice(0,l*i)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),i=this.constructor,r=new i(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}Ir.prototype.TimeBufferType=Float32Array;Ir.prototype.ValueBufferType=Float32Array;Ir.prototype.DefaultInterpolation=Xp;class ko extends Ir{constructor(t,e,i){super(t,e,i)}}ko.prototype.ValueTypeName="bool";ko.prototype.ValueBufferType=Array;ko.prototype.DefaultInterpolation=Yu;ko.prototype.InterpolantFactoryMethodLinear=void 0;ko.prototype.InterpolantFactoryMethodSmooth=void 0;class bE extends Ir{}bE.prototype.ValueTypeName="color";class sh extends Ir{}sh.prototype.ValueTypeName="number";class cB extends Ch{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){const a=this.resultBuffer,l=this.sampleValues,c=this.valueSize,u=(i-e)/(r-e);let d=t*c;for(let f=d+c;d!==f;d+=4)Oi.slerpFlat(a,0,l,d-c,l,d,u);return a}}class _h extends Ir{InterpolantFactoryMethodLinear(t){return new cB(this.times,this.values,this.getValueSize(),t)}}_h.prototype.ValueTypeName="quaternion";_h.prototype.InterpolantFactoryMethodSmooth=void 0;class Qo extends Ir{constructor(t,e,i){super(t,e,i)}}Qo.prototype.ValueTypeName="string";Qo.prototype.ValueBufferType=Array;Qo.prototype.DefaultInterpolation=Yu;Qo.prototype.InterpolantFactoryMethodLinear=void 0;Qo.prototype.InterpolantFactoryMethodSmooth=void 0;class ah extends Ir{}ah.prototype.ValueTypeName="vector";class oh{constructor(t="",e=-1,i=[],r=xA){this.name=t,this.tracks=i,this.duration=e,this.blendMode=r,this.uuid=Xi(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],i=t.tracks,r=1/(t.fps||1);for(let l=0,c=i.length;l!==c;++l)e.push(HU(i[l]).scale(r));const a=new this(t.name,t.duration,e,t.blendMode);return a.uuid=t.uuid,a}static toJSON(t){const e=[],i=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let a=0,l=i.length;a!==l;++a)e.push(Ir.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(t,e,i,r){const a=e.length,l=[];for(let c=0;c<a;c++){let u=[],d=[];u.push((c+a-1)%a,c,(c+1)%a),d.push(0,1,0);const f=aB(u);u=oy(u,1,f),d=oy(d,1,f),!r&&u[0]===0&&(u.push(a),d.push(d[0])),l.push(new sh(".morphTargetInfluences["+e[c].name+"]",u,d).scale(1/i))}return new this(t,-1,l)}static findByName(t,e){let i=t;if(!Array.isArray(t)){const r=t;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null}static CreateClipsFromMorphTargetSequences(t,e,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let c=0,u=t.length;c<u;c++){const d=t[c],f=d.name.match(a);if(f&&f.length>1){const A=f[1];let m=r[A];m||(r[A]=m=[]),m.push(d)}}const l=[];for(const c in r)l.push(this.CreateFromMorphTargetSequence(c,r[c],e,i));return l}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(A,m,g,b,x){if(g.length!==0){const E=[],y=[];yE(g,E,y,b),E.length!==0&&x.push(new A(m,E,y))}},r=[],a=t.name||"default",l=t.fps||30,c=t.blendMode;let u=t.length||-1;const d=t.hierarchy||[];for(let A=0;A<d.length;A++){const m=d[A].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const g={};let b;for(b=0;b<m.length;b++)if(m[b].morphTargets)for(let x=0;x<m[b].morphTargets.length;x++)g[m[b].morphTargets[x]]=-1;for(const x in g){const E=[],y=[];for(let _=0;_!==m[b].morphTargets.length;++_){const w=m[b];E.push(w.time),y.push(w.morphTarget===x?1:0)}r.push(new sh(".morphTargetInfluence["+x+"]",E,y))}u=g.length*l}else{const g=".bones["+e[A].name+"]";i(ah,g+".position",m,"pos",r),i(_h,g+".quaternion",m,"rot",r),i(ah,g+".scale",m,"scl",r)}}return r.length===0?null:new this(a,u,r,c)}resetDuration(){const t=this.tracks;let e=0;for(let i=0,r=t.length;i!==r;++i){const a=this.tracks[i];e=Math.max(e,a.times[a.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function GU(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return sh;case"vector":case"vector2":case"vector3":case"vector4":return ah;case"color":return bE;case"quaternion":return _h;case"bool":case"boolean":return ko;case"string":return Qo}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function HU(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=GU(n.type);if(n.times===void 0){const e=[],i=[];yE(n.keys,e,i,"value"),n.times=e,n.values=i}return t.parse!==void 0?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}const Ms={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class xE{constructor(t,e,i){const r=this;let a=!1,l=0,c=0,u;const d=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(f){c++,a===!1&&r.onStart!==void 0&&r.onStart(f,l,c),a=!0},this.itemEnd=function(f){l++,r.onProgress!==void 0&&r.onProgress(f,l,c),l===c&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return u?u(f):f},this.setURLModifier=function(f){return u=f,this},this.addHandler=function(f,A){return d.push(f,A),this},this.removeHandler=function(f){const A=d.indexOf(f);return A!==-1&&d.splice(A,2),this},this.getHandler=function(f){for(let A=0,m=d.length;A<m;A+=2){const g=d[A],b=d[A+1];if(g.global&&(g.lastIndex=0),g.test(f))return b}return null}}}const uB=new xE;class Ni{constructor(t){this.manager=t!==void 0?t:uB,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise(function(r,a){i.load(t,r,e,a)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Ni.DEFAULT_MATERIAL_NAME="__DEFAULT";const vs={};class VU extends Error{constructor(t,e){super(t),this.response=e}}class Fs extends Ni{constructor(t){super(t)}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const a=Ms.get(t);if(a!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(a),this.manager.itemEnd(t)},0),a;if(vs[t]!==void 0){vs[t].push({onLoad:e,onProgress:i,onError:r});return}vs[t]=[],vs[t].push({onLoad:e,onProgress:i,onError:r});const l=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,u=this.responseType;fetch(l).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const f=vs[t],A=d.body.getReader(),m=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),g=m?parseInt(m):0,b=g!==0;let x=0;const E=new ReadableStream({start(y){_();function _(){A.read().then(({done:w,value:S})=>{if(w)y.close();else{x+=S.byteLength;const R=new ProgressEvent("progress",{lengthComputable:b,loaded:x,total:g});for(let U=0,L=f.length;U<L;U++){const F=f[U];F.onProgress&&F.onProgress(R)}y.enqueue(S),_()}},w=>{y.error(w)})}}});return new Response(E)}else throw new VU(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(u){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(f=>new DOMParser().parseFromString(f,c));case"json":return d.json();default:if(c===void 0)return d.text();{const A=/charset="?([^;"\s]*)"?/i.exec(c),m=A&&A[1]?A[1].toLowerCase():void 0,g=new TextDecoder(m);return d.arrayBuffer().then(b=>g.decode(b))}}}).then(d=>{Ms.add(t,d);const f=vs[t];delete vs[t];for(let A=0,m=f.length;A<m;A++){const g=f[A];g.onLoad&&g.onLoad(d)}}).catch(d=>{const f=vs[t];if(f===void 0)throw this.manager.itemError(t),d;delete vs[t];for(let A=0,m=f.length;A<m;A++){const g=f[A];g.onError&&g.onError(d)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class qU extends Ni{constructor(t){super(t)}load(t,e,i,r){const a=this,l=new Fs(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(c){try{e(a.parse(JSON.parse(c)))}catch(u){r?r(u):console.error(u),a.manager.itemError(t)}},i,r)}parse(t){const e=[];for(let i=0;i<t.length;i++){const r=oh.parse(t[i]);e.push(r)}return e}}class WU extends Ni{constructor(t){super(t)}load(t,e,i,r){const a=this,l=[],c=new RA,u=new Fs(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(a.withCredentials);let d=0;function f(A){u.load(t[A],function(m){const g=a.parse(m,!0);l[A]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},d+=1,d===6&&(g.mipmapCount===1&&(c.minFilter=Gn),c.image=l,c.format=g.format,c.needsUpdate=!0,e&&e(c))},i,r)}if(Array.isArray(t))for(let A=0,m=t.length;A<m;++A)f(A);else u.load(t,function(A){const m=a.parse(A,!0);if(m.isCubemap){const g=m.mipmaps.length/m.mipmapCount;for(let b=0;b<g;b++){l[b]={mipmaps:[]};for(let x=0;x<m.mipmapCount;x++)l[b].mipmaps.push(m.mipmaps[b*m.mipmapCount+x]),l[b].format=m.format,l[b].width=m.width,l[b].height=m.height}c.image=l}else c.image.width=m.width,c.image.height=m.height,c.mipmaps=m.mipmaps;m.mipmapCount===1&&(c.minFilter=Gn),c.format=m.format,c.needsUpdate=!0,e&&e(c)},i,r);return c}}class lh extends Ni{constructor(t){super(t)}load(t,e,i,r){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const a=this,l=Ms.get(t);if(l!==void 0)return a.manager.itemStart(t),setTimeout(function(){e&&e(l),a.manager.itemEnd(t)},0),l;const c=th("img");function u(){f(),Ms.add(t,this),e&&e(this),a.manager.itemEnd(t)}function d(A){f(),r&&r(A),a.manager.itemError(t),a.manager.itemEnd(t)}function f(){c.removeEventListener("load",u,!1),c.removeEventListener("error",d,!1)}return c.addEventListener("load",u,!1),c.addEventListener("error",d,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),a.manager.itemStart(t),c.src=t,c}}class jU extends Ni{constructor(t){super(t)}load(t,e,i,r){const a=new vh;a.colorSpace=Li;const l=new lh(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let c=0;function u(d){l.load(t[d],function(f){a.images[d]=f,c++,c===6&&(a.needsUpdate=!0,e&&e(a))},void 0,r)}for(let d=0;d<t.length;++d)u(d);return a}}class XU extends Ni{constructor(t){super(t)}load(t,e,i,r){const a=this,l=new Vr,c=new Fs(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(a.withCredentials),c.load(t,function(u){let d;try{d=a.parse(u)}catch(f){if(r!==void 0)r(f);else{console.error(f);return}}d.image!==void 0?l.image=d.image:d.data!==void 0&&(l.image.width=d.width,l.image.height=d.height,l.image.data=d.data),l.wrapS=d.wrapS!==void 0?d.wrapS:lr,l.wrapT=d.wrapT!==void 0?d.wrapT:lr,l.magFilter=d.magFilter!==void 0?d.magFilter:Gn,l.minFilter=d.minFilter!==void 0?d.minFilter:Gn,l.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0&&(l.colorSpace=d.colorSpace),d.flipY!==void 0&&(l.flipY=d.flipY),d.format!==void 0&&(l.format=d.format),d.type!==void 0&&(l.type=d.type),d.mipmaps!==void 0&&(l.mipmaps=d.mipmaps,l.minFilter=Gr),d.mipmapCount===1&&(l.minFilter=Gn),d.generateMipmaps!==void 0&&(l.generateMipmaps=d.generateMipmaps),l.needsUpdate=!0,e&&e(l,d)},i,r),l}}class YU extends Ni{constructor(t){super(t)}load(t,e,i,r){const a=new Cn,l=new lh(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(t,function(c){a.image=c,a.needsUpdate=!0,e!==void 0&&e(a)},i,r),a}}class Oa extends Ye{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new $t(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}}class hB extends Oa{constructor(t,e,i){super(t,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ye.DEFAULT_UP),this.updateMatrix(),this.groundColor=new $t(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const q0=new ve,Q1=new W,z1=new W;class CE{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ut(512,512),this.map=null,this.mapPass=null,this.matrix=new ve,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new yh,this._frameExtents=new Ut(1,1),this._viewportCount=1,this._viewports=[new Xe(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,i=this.matrix;Q1.setFromMatrixPosition(t.matrixWorld),e.position.copy(Q1),z1.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(z1),e.updateMatrixWorld(),q0.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(q0),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(q0)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class KU extends CE{constructor(){super(new $n(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,i=rc*2*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,a=t.distance||e.far;(i!==e.fov||r!==e.aspect||a!==e.far)&&(e.fov=i,e.aspect=r,e.far=a,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class dB extends Oa{constructor(t,e,i=0,r=Math.PI/3,a=0,l=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ye.DEFAULT_UP),this.updateMatrix(),this.target=new Ye,this.distance=i,this.angle=r,this.penumbra=a,this.decay=l,this.map=null,this.shadow=new KU}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const G1=new ve,gu=new W,W0=new W;class JU extends CE{constructor(){super(new $n(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ut(4,2),this._viewportCount=6,this._viewports=[new Xe(2,1,1,1),new Xe(0,1,1,1),new Xe(3,1,1,1),new Xe(1,1,1,1),new Xe(3,0,1,1),new Xe(1,0,1,1)],this._cubeDirections=[new W(1,0,0),new W(-1,0,0),new W(0,0,1),new W(0,0,-1),new W(0,1,0),new W(0,-1,0)],this._cubeUps=[new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,0,1),new W(0,0,-1)]}updateMatrices(t,e=0){const i=this.camera,r=this.matrix,a=t.distance||i.far;a!==i.far&&(i.far=a,i.updateProjectionMatrix()),gu.setFromMatrixPosition(t.matrixWorld),i.position.copy(gu),W0.copy(i.position),W0.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(W0),i.updateMatrixWorld(),r.makeTranslation(-gu.x,-gu.y,-gu.z),G1.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(G1)}}class fB extends Oa{constructor(t,e,i=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new JU}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class WA extends MA{constructor(t=-1,e=1,i=1,r=-1,a=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=r,this.near=a,this.far=l,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,r,a,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-t,l=i+t,c=r+e,u=r-e;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=d*this.view.offsetX,l=a+d*this.view.width,c-=f*this.view.offsetY,u=c-f*this.view.height}this.projectionMatrix.makeOrthographic(a,l,c,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class ZU extends CE{constructor(){super(new WA(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class pB extends Oa{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ye.DEFAULT_UP),this.updateMatrix(),this.target=new Ye,this.shadow=new ZU}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class AB extends Oa{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class mB extends Oa{constructor(t,e,i=10,r=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class gB{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new W)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const i=t.x,r=t.y,a=t.z,l=this.coefficients;return e.copy(l[0]).multiplyScalar(.282095),e.addScaledVector(l[1],.488603*r),e.addScaledVector(l[2],.488603*a),e.addScaledVector(l[3],.488603*i),e.addScaledVector(l[4],1.092548*(i*r)),e.addScaledVector(l[5],1.092548*(r*a)),e.addScaledVector(l[6],.315392*(3*a*a-1)),e.addScaledVector(l[7],1.092548*(i*a)),e.addScaledVector(l[8],.546274*(i*i-r*r)),e}getIrradianceAt(t,e){const i=t.x,r=t.y,a=t.z,l=this.coefficients;return e.copy(l[0]).multiplyScalar(.886227),e.addScaledVector(l[1],2*.511664*r),e.addScaledVector(l[2],2*.511664*a),e.addScaledVector(l[3],2*.511664*i),e.addScaledVector(l[4],2*.429043*i*r),e.addScaledVector(l[5],2*.429043*r*a),e.addScaledVector(l[6],.743125*a*a-.247708),e.addScaledVector(l[7],2*.429043*i*a),e.addScaledVector(l[8],.429043*(i*i-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(t,e+r*3);return this}toArray(t=[],e=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(t,e+r*3);return t}static getBasisAt(t,e){const i=t.x,r=t.y,a=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*a,e[3]=.488603*i,e[4]=1.092548*i*r,e[5]=1.092548*r*a,e[6]=.315392*(3*a*a-1),e[7]=1.092548*i*a,e[8]=.546274*(i*i-r*r)}}class vB extends Oa{constructor(t=new gB,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class jA extends Ni{constructor(t){super(t),this.textures={}}load(t,e,i,r){const a=this,l=new Fs(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(t,function(c){try{e(a.parse(JSON.parse(c)))}catch(u){r?r(u):console.error(u),a.manager.itemError(t)}},i,r)}parse(t){const e=this.textures;function i(a){return e[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),e[a]}const r=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(r.uuid=t.uuid),t.name!==void 0&&(r.name=t.name),t.color!==void 0&&r.color!==void 0&&r.color.setHex(t.color),t.roughness!==void 0&&(r.roughness=t.roughness),t.metalness!==void 0&&(r.metalness=t.metalness),t.sheen!==void 0&&(r.sheen=t.sheen),t.sheenColor!==void 0&&(r.sheenColor=new $t().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(r.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(t.emissive),t.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(t.specular),t.specularIntensity!==void 0&&(r.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(r.shininess=t.shininess),t.clearcoat!==void 0&&(r.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(r.dispersion=t.dispersion),t.iridescence!==void 0&&(r.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(r.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(r.transmission=t.transmission),t.thickness!==void 0&&(r.thickness=t.thickness),t.attenuationDistance!==void 0&&(r.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(r.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(r.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(r.fog=t.fog),t.flatShading!==void 0&&(r.flatShading=t.flatShading),t.blending!==void 0&&(r.blending=t.blending),t.combine!==void 0&&(r.combine=t.combine),t.side!==void 0&&(r.side=t.side),t.shadowSide!==void 0&&(r.shadowSide=t.shadowSide),t.opacity!==void 0&&(r.opacity=t.opacity),t.transparent!==void 0&&(r.transparent=t.transparent),t.alphaTest!==void 0&&(r.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(r.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(r.depthFunc=t.depthFunc),t.depthTest!==void 0&&(r.depthTest=t.depthTest),t.depthWrite!==void 0&&(r.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(r.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(r.blendSrc=t.blendSrc),t.blendDst!==void 0&&(r.blendDst=t.blendDst),t.blendEquation!==void 0&&(r.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(r.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(r.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(r.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(r.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(r.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(r.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(r.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(r.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(r.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(r.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(r.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(r.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(r.rotation=t.rotation),t.linewidth!==void 0&&(r.linewidth=t.linewidth),t.dashSize!==void 0&&(r.dashSize=t.dashSize),t.gapSize!==void 0&&(r.gapSize=t.gapSize),t.scale!==void 0&&(r.scale=t.scale),t.polygonOffset!==void 0&&(r.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(r.dithering=t.dithering),t.alphaToCoverage!==void 0&&(r.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(r.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(r.visible=t.visible),t.toneMapped!==void 0&&(r.toneMapped=t.toneMapped),t.userData!==void 0&&(r.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?r.vertexColors=t.vertexColors>0:r.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const a in t.uniforms){const l=t.uniforms[a];switch(r.uniforms[a]={},l.type){case"t":r.uniforms[a].value=i(l.value);break;case"c":r.uniforms[a].value=new $t().setHex(l.value);break;case"v2":r.uniforms[a].value=new Ut().fromArray(l.value);break;case"v3":r.uniforms[a].value=new W().fromArray(l.value);break;case"v4":r.uniforms[a].value=new Xe().fromArray(l.value);break;case"m3":r.uniforms[a].value=new Ce().fromArray(l.value);break;case"m4":r.uniforms[a].value=new ve().fromArray(l.value);break;default:r.uniforms[a].value=l.value}}if(t.defines!==void 0&&(r.defines=t.defines),t.vertexShader!==void 0&&(r.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(r.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(r.glslVersion=t.glslVersion),t.extensions!==void 0)for(const a in t.extensions)r.extensions[a]=t.extensions[a];if(t.lights!==void 0&&(r.lights=t.lights),t.clipping!==void 0&&(r.clipping=t.clipping),t.size!==void 0&&(r.size=t.size),t.sizeAttenuation!==void 0&&(r.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(r.map=i(t.map)),t.matcap!==void 0&&(r.matcap=i(t.matcap)),t.alphaMap!==void 0&&(r.alphaMap=i(t.alphaMap)),t.bumpMap!==void 0&&(r.bumpMap=i(t.bumpMap)),t.bumpScale!==void 0&&(r.bumpScale=t.bumpScale),t.normalMap!==void 0&&(r.normalMap=i(t.normalMap)),t.normalMapType!==void 0&&(r.normalMapType=t.normalMapType),t.normalScale!==void 0){let a=t.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new Ut().fromArray(a)}return t.displacementMap!==void 0&&(r.displacementMap=i(t.displacementMap)),t.displacementScale!==void 0&&(r.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(r.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(r.roughnessMap=i(t.roughnessMap)),t.metalnessMap!==void 0&&(r.metalnessMap=i(t.metalnessMap)),t.emissiveMap!==void 0&&(r.emissiveMap=i(t.emissiveMap)),t.emissiveIntensity!==void 0&&(r.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(r.specularMap=i(t.specularMap)),t.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(t.specularIntensityMap)),t.specularColorMap!==void 0&&(r.specularColorMap=i(t.specularColorMap)),t.envMap!==void 0&&(r.envMap=i(t.envMap)),t.envMapRotation!==void 0&&r.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(r.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(r.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(r.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(r.lightMap=i(t.lightMap)),t.lightMapIntensity!==void 0&&(r.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(r.aoMap=i(t.aoMap)),t.aoMapIntensity!==void 0&&(r.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(r.gradientMap=i(t.gradientMap)),t.clearcoatMap!==void 0&&(r.clearcoatMap=i(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ut().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(r.iridescenceMap=i(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(r.transmissionMap=i(t.transmissionMap)),t.thicknessMap!==void 0&&(r.thicknessMap=i(t.thicknessMap)),t.anisotropyMap!==void 0&&(r.anisotropyMap=i(t.anisotropyMap)),t.sheenColorMap!==void 0&&(r.sheenColorMap=i(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(t.sheenRoughnessMap)),r}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return jA.createMaterialFromType(t)}static createMaterialFromType(t){const e={ShadowMaterial:KS,SpriteMaterial:aE,RawShaderMaterial:JS,ShaderMaterial:Br,PointsMaterial:lE,MeshPhysicalMaterial:ZS,MeshStandardMaterial:mE,MeshPhongMaterial:$S,MeshToonMaterial:tB,MeshNormalMaterial:eB,MeshLambertMaterial:nB,MeshDepthMaterial:gE,MeshDistanceMaterial:vE,MeshBasicMaterial:Da,MeshMatcapMaterial:iB,LineDashedMaterial:rB,LineBasicMaterial:bi,Material:ci};return new e[t]}}class ly{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let i=0,r=t.length;i<r;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class yB extends Ie{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class EB extends Ni{constructor(t){super(t)}load(t,e,i,r){const a=this,l=new Fs(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(t,function(c){try{e(a.parse(JSON.parse(c)))}catch(u){r?r(u):console.error(u),a.manager.itemError(t)}},i,r)}parse(t){const e={},i={};function r(g,b){if(e[b]!==void 0)return e[b];const E=g.interleavedBuffers[b],y=a(g,E.buffer),_=Kl(E.type,y),w=new TA(_,E.stride);return w.uuid=E.uuid,e[b]=w,w}function a(g,b){if(i[b]!==void 0)return i[b];const E=g.arrayBuffers[b],y=new Uint32Array(E).buffer;return i[b]=y,y}const l=t.isInstancedBufferGeometry?new yB:new Ie,c=t.data.index;if(c!==void 0){const g=Kl(c.type,c.array);l.setIndex(new ln(g,1))}const u=t.data.attributes;for(const g in u){const b=u[g];let x;if(b.isInterleavedBufferAttribute){const E=r(t.data,b.data);x=new No(E,b.itemSize,b.offset,b.normalized)}else{const E=Kl(b.type,b.array),y=b.isInstancedBufferAttribute?ac:ln;x=new y(E,b.itemSize,b.normalized)}b.name!==void 0&&(x.name=b.name),b.usage!==void 0&&x.setUsage(b.usage),l.setAttribute(g,x)}const d=t.data.morphAttributes;if(d)for(const g in d){const b=d[g],x=[];for(let E=0,y=b.length;E<y;E++){const _=b[E];let w;if(_.isInterleavedBufferAttribute){const S=r(t.data,_.data);w=new No(S,_.itemSize,_.offset,_.normalized)}else{const S=Kl(_.type,_.array);w=new ln(S,_.itemSize,_.normalized)}_.name!==void 0&&(w.name=_.name),x.push(w)}l.morphAttributes[g]=x}t.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const A=t.data.groups||t.data.drawcalls||t.data.offsets;if(A!==void 0)for(let g=0,b=A.length;g!==b;++g){const x=A[g];l.addGroup(x.start,x.count,x.materialIndex)}const m=t.data.boundingSphere;if(m!==void 0){const g=new W;m.center!==void 0&&g.fromArray(m.center),l.boundingSphere=new li(g,m.radius)}return t.name&&(l.name=t.name),t.userData&&(l.userData=t.userData),l}}class $U extends Ni{constructor(t){super(t)}load(t,e,i,r){const a=this,l=this.path===""?ly.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||l;const c=new Fs(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(u){let d=null;try{d=JSON.parse(u)}catch(A){r!==void 0&&r(A),console.error("THREE:ObjectLoader: Can't parse "+t+".",A.message);return}const f=d.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}a.parse(d,e)},i,r)}async loadAsync(t,e){const i=this,r=this.path===""?ly.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||r;const a=new Fs(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const l=await a.loadAsync(t,e),c=JSON.parse(l),u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await i.parseAsync(c)}parse(t,e){const i=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),a=this.parseGeometries(t.geometries,r),l=this.parseImages(t.images,function(){e!==void 0&&e(d)}),c=this.parseTextures(t.textures,l),u=this.parseMaterials(t.materials,c),d=this.parseObject(t.object,a,u,c,i),f=this.parseSkeletons(t.skeletons,d);if(this.bindSkeletons(d,f),this.bindLightTargets(d),e!==void 0){let A=!1;for(const m in l)if(l[m].data instanceof HTMLImageElement){A=!0;break}A===!1&&e(d)}return d}async parseAsync(t){const e=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),a=await this.parseImagesAsync(t.images),l=this.parseTextures(t.textures,a),c=this.parseMaterials(t.materials,l),u=this.parseObject(t.object,r,c,l,e),d=this.parseSkeletons(t.skeletons,u);return this.bindSkeletons(u,d),this.bindLightTargets(u),u}parseShapes(t){const e={};if(t!==void 0)for(let i=0,r=t.length;i<r;i++){const a=new Lo().fromJSON(t[i]);e[a.uuid]=a}return e}parseSkeletons(t,e){const i={},r={};if(e.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),t!==void 0)for(let a=0,l=t.length;a<l;a++){const c=new IA().fromJSON(t[a],r);i[c.uuid]=c}return i}parseGeometries(t,e){const i={};if(t!==void 0){const a=new EB;for(let l=0,c=t.length;l<c;l++){let u;const d=t[l];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":u=a.parse(d);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var r=new THREE.LegacyJSONLoader;u=r.parse(d,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:d.type in k1?u=k1[d.type].fromJSON(d,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}u.uuid=d.uuid,d.name!==void 0&&(u.name=d.name),d.userData!==void 0&&(u.userData=d.userData),i[d.uuid]=u}}return i}parseMaterials(t,e){const i={},r={};if(t!==void 0){const a=new jA;a.setTextures(e);for(let l=0,c=t.length;l<c;l++){const u=t[l];i[u.uuid]===void 0&&(i[u.uuid]=a.parse(u)),r[u.uuid]=i[u.uuid]}}return r}parseAnimations(t){const e={};if(t!==void 0)for(let i=0;i<t.length;i++){const r=t[i],a=oh.parse(r);e[a.uuid]=a}return e}parseImages(t,e){const i=this,r={};let a;function l(u){return i.manager.itemStart(u),a.load(u,function(){i.manager.itemEnd(u)},void 0,function(){i.manager.itemError(u),i.manager.itemEnd(u)})}function c(u){if(typeof u=="string"){const d=u,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:i.resourcePath+d;return l(f)}else return u.data?{data:Kl(u.type,u.data),width:u.width,height:u.height}:null}if(t!==void 0&&t.length>0){const u=new xE(e);a=new lh(u),a.setCrossOrigin(this.crossOrigin);for(let d=0,f=t.length;d<f;d++){const A=t[d],m=A.url;if(Array.isArray(m)){const g=[];for(let b=0,x=m.length;b<x;b++){const E=m[b],y=c(E);y!==null&&(y instanceof HTMLImageElement?g.push(y):g.push(new Vr(y.data,y.width,y.height)))}r[A.uuid]=new Bo(g)}else{const g=c(A.url);r[A.uuid]=new Bo(g)}}}return r}async parseImagesAsync(t){const e=this,i={};let r;async function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:e.resourcePath+c;return await r.loadAsync(u)}else return l.data?{data:Kl(l.type,l.data),width:l.width,height:l.height}:null}if(t!==void 0&&t.length>0){r=new lh(this.manager),r.setCrossOrigin(this.crossOrigin);for(let l=0,c=t.length;l<c;l++){const u=t[l],d=u.url;if(Array.isArray(d)){const f=[];for(let A=0,m=d.length;A<m;A++){const g=d[A],b=await a(g);b!==null&&(b instanceof HTMLImageElement?f.push(b):f.push(new Vr(b.data,b.width,b.height)))}i[u.uuid]=new Bo(f)}else{const f=await a(u.url);i[u.uuid]=new Bo(f)}}}return i}parseTextures(t,e){function i(a,l){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),l[a])}const r={};if(t!==void 0)for(let a=0,l=t.length;a<l;a++){const c=t[a];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),e[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);const u=e[c.image],d=u.data;let f;Array.isArray(d)?(f=new vh,d.length===6&&(f.needsUpdate=!0)):(d&&d.data?f=new Vr:f=new Cn,d&&(f.needsUpdate=!0)),f.source=u,f.uuid=c.uuid,c.name!==void 0&&(f.name=c.name),c.mapping!==void 0&&(f.mapping=i(c.mapping,t3)),c.channel!==void 0&&(f.channel=c.channel),c.offset!==void 0&&f.offset.fromArray(c.offset),c.repeat!==void 0&&f.repeat.fromArray(c.repeat),c.center!==void 0&&f.center.fromArray(c.center),c.rotation!==void 0&&(f.rotation=c.rotation),c.wrap!==void 0&&(f.wrapS=i(c.wrap[0],H1),f.wrapT=i(c.wrap[1],H1)),c.format!==void 0&&(f.format=c.format),c.internalFormat!==void 0&&(f.internalFormat=c.internalFormat),c.type!==void 0&&(f.type=c.type),c.colorSpace!==void 0&&(f.colorSpace=c.colorSpace),c.minFilter!==void 0&&(f.minFilter=i(c.minFilter,V1)),c.magFilter!==void 0&&(f.magFilter=i(c.magFilter,V1)),c.anisotropy!==void 0&&(f.anisotropy=c.anisotropy),c.flipY!==void 0&&(f.flipY=c.flipY),c.generateMipmaps!==void 0&&(f.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(f.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(f.compareFunction=c.compareFunction),c.userData!==void 0&&(f.userData=c.userData),r[c.uuid]=f}return r}parseObject(t,e,i,r,a){let l;function c(m){return e[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),e[m]}function u(m){if(m!==void 0){if(Array.isArray(m)){const g=[];for(let b=0,x=m.length;b<x;b++){const E=m[b];i[E]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",E),g.push(i[E])}return g}return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),i[m]}}function d(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let f,A;switch(t.type){case"Scene":l=new IS,t.background!==void 0&&(Number.isInteger(t.background)?l.background=new $t(t.background):l.background=d(t.background)),t.environment!==void 0&&(l.environment=d(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?l.fog=new BA(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(l.fog=new SA(t.fog.color,t.fog.density)),t.fog.name!==""&&(l.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(l.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&l.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(l.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&l.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":l=new $n(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(l.focus=t.focus),t.zoom!==void 0&&(l.zoom=t.zoom),t.filmGauge!==void 0&&(l.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(l.filmOffset=t.filmOffset),t.view!==void 0&&(l.view=Object.assign({},t.view));break;case"OrthographicCamera":l=new WA(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(l.zoom=t.zoom),t.view!==void 0&&(l.view=Object.assign({},t.view));break;case"AmbientLight":l=new AB(t.color,t.intensity);break;case"DirectionalLight":l=new pB(t.color,t.intensity),l.target=t.target||"";break;case"PointLight":l=new fB(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":l=new mB(t.color,t.intensity,t.width,t.height);break;case"SpotLight":l=new dB(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),l.target=t.target||"";break;case"HemisphereLight":l=new hB(t.color,t.groundColor,t.intensity);break;case"LightProbe":l=new vB().fromJSON(t);break;case"SkinnedMesh":f=c(t.geometry),A=u(t.material),l=new US(f,A),t.bindMode!==void 0&&(l.bindMode=t.bindMode),t.bindMatrix!==void 0&&l.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(l.skeleton=t.skeleton);break;case"Mesh":f=c(t.geometry),A=u(t.material),l=new Pn(f,A);break;case"InstancedMesh":f=c(t.geometry),A=u(t.material);const m=t.count,g=t.instanceMatrix,b=t.instanceColor;l=new OS(f,A,m),l.instanceMatrix=new ac(new Float32Array(g.array),16),b!==void 0&&(l.instanceColor=new ac(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":f=c(t.geometry),A=u(t.material),l=new NS(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,A),l.geometry=f,l.perObjectFrustumCulled=t.perObjectFrustumCulled,l.sortObjects=t.sortObjects,l._drawRanges=t.drawRanges,l._reservedRanges=t.reservedRanges,l._visibility=t.visibility,l._active=t.active,l._bounds=t.bounds.map(x=>{const E=new Ei;E.min.fromArray(x.boxMin),E.max.fromArray(x.boxMax);const y=new li;return y.radius=x.sphereRadius,y.center.fromArray(x.sphereCenter),{boxInitialized:x.boxInitialized,box:E,sphereInitialized:x.sphereInitialized,sphere:y}}),l._maxInstanceCount=t.maxInstanceCount,l._maxVertexCount=t.maxVertexCount,l._maxIndexCount=t.maxIndexCount,l._geometryInitialized=t.geometryInitialized,l._geometryCount=t.geometryCount,l._matricesTexture=d(t.matricesTexture.uuid),t.colorsTexture!==void 0&&(l._colorsTexture=d(t.colorsTexture.uuid));break;case"LOD":l=new DS;break;case"Line":l=new Ta(c(t.geometry),u(t.material));break;case"LineLoop":l=new PS(c(t.geometry),u(t.material));break;case"LineSegments":l=new Xr(c(t.geometry),u(t.material));break;case"PointCloud":case"Points":l=new FS(c(t.geometry),u(t.material));break;case"Sprite":l=new LS(u(t.material));break;case"Group":l=new Jl;break;case"Bone":l=new oE;break;default:l=new Ye}if(l.uuid=t.uuid,t.name!==void 0&&(l.name=t.name),t.matrix!==void 0?(l.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=t.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(t.position!==void 0&&l.position.fromArray(t.position),t.rotation!==void 0&&l.rotation.fromArray(t.rotation),t.quaternion!==void 0&&l.quaternion.fromArray(t.quaternion),t.scale!==void 0&&l.scale.fromArray(t.scale)),t.up!==void 0&&l.up.fromArray(t.up),t.castShadow!==void 0&&(l.castShadow=t.castShadow),t.receiveShadow!==void 0&&(l.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(l.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(l.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(l.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(l.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(l.visible=t.visible),t.frustumCulled!==void 0&&(l.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(l.renderOrder=t.renderOrder),t.userData!==void 0&&(l.userData=t.userData),t.layers!==void 0&&(l.layers.mask=t.layers),t.children!==void 0){const m=t.children;for(let g=0;g<m.length;g++)l.add(this.parseObject(m[g],e,i,r,a))}if(t.animations!==void 0){const m=t.animations;for(let g=0;g<m.length;g++){const b=m[g];l.animations.push(a[b])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(l.autoUpdate=t.autoUpdate);const m=t.levels;for(let g=0;g<m.length;g++){const b=m[g],x=l.getObjectByProperty("uuid",b.object);x!==void 0&&l.addLevel(x,b.distance,b.hysteresis)}}return l}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=e[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){const i=e.target,r=t.getObjectByProperty("uuid",i);r!==void 0?e.target=r:e.target=new Ye}})}}const t3={UVMapping:AA,CubeReflectionMapping:Ns,CubeRefractionMapping:Ba,EquirectangularReflectionMapping:qu,EquirectangularRefractionMapping:Wu,CubeUVReflectionMapping:lc},H1={RepeatWrapping:ju,ClampToEdgeWrapping:lr,MirroredRepeatWrapping:Xu},V1={NearestFilter:ni,NearestMipmapNearestFilter:qy,NearestMipmapLinearFilter:Yl,LinearFilter:Gn,LinearMipmapNearestFilter:Uu,LinearMipmapLinearFilter:Gr};class e3 extends Ni{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const a=this,l=Ms.get(t);if(l!==void 0){if(a.manager.itemStart(t),l.then){l.then(d=>{e&&e(d),a.manager.itemEnd(t)}).catch(d=>{r&&r(d)});return}return setTimeout(function(){e&&e(l),a.manager.itemEnd(t)},0),l}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader;const u=fetch(t,c).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(d){return Ms.add(t,d),e&&e(d),a.manager.itemEnd(t),d}).catch(function(d){r&&r(d),Ms.remove(t),a.manager.itemError(t),a.manager.itemEnd(t)});Ms.add(t,u),a.manager.itemStart(t)}}let bf;class _E{static getContext(){return bf===void 0&&(bf=new(window.AudioContext||window.webkitAudioContext)),bf}static setContext(t){bf=t}}class n3 extends Ni{constructor(t){super(t)}load(t,e,i,r){const a=this,l=new Fs(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(u){try{const d=u.slice(0);_E.getContext().decodeAudioData(d,function(A){e(A)}).catch(c)}catch(d){c(d)}},i,r);function c(u){r?r(u):console.error(u),a.manager.itemError(t)}}}const q1=new ve,W1=new ve,so=new ve;class i3{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new $n,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new $n,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,so.copy(t.projectionMatrix);const r=e.eyeSep/2,a=r*e.near/e.focus,l=e.near*Math.tan(Ro*e.fov*.5)/e.zoom;let c,u;W1.elements[12]=-r,q1.elements[12]=r,c=-l*e.aspect+a,u=l*e.aspect+a,so.elements[0]=2*e.near/(u-c),so.elements[8]=(u+c)/(u-c),this.cameraL.projectionMatrix.copy(so),c=-l*e.aspect-a,u=l*e.aspect-a,so.elements[0]=2*e.near/(u-c),so.elements[8]=(u+c)/(u-c),this.cameraR.projectionMatrix.copy(so)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(W1),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(q1)}}class bB extends $n{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t,this.index=0}}class xB{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=j1(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=j1();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function j1(){return performance.now()}const ao=new W,X1=new Oi,r3=new W,oo=new W;class s3 extends Ye{constructor(){super(),this.type="AudioListener",this.context=_E.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new xB}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ao,X1,r3),oo.set(0,0,-1).applyQuaternion(X1),e.positionX){const r=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(ao.x,r),e.positionY.linearRampToValueAtTime(ao.y,r),e.positionZ.linearRampToValueAtTime(ao.z,r),e.forwardX.linearRampToValueAtTime(oo.x,r),e.forwardY.linearRampToValueAtTime(oo.y,r),e.forwardZ.linearRampToValueAtTime(oo.z,r),e.upX.linearRampToValueAtTime(i.x,r),e.upY.linearRampToValueAtTime(i.y,r),e.upZ.linearRampToValueAtTime(i.z,r)}else e.setPosition(ao.x,ao.y,ao.z),e.setOrientation(oo.x,oo.y,oo.z,i.x,i.y,i.z)}}class CB extends Ye{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const lo=new W,Y1=new Oi,a3=new W,co=new W;class o3 extends CB{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=i,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(lo,Y1,a3),co.set(0,0,1).applyQuaternion(Y1);const e=this.panner;if(e.positionX){const i=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(lo.x,i),e.positionY.linearRampToValueAtTime(lo.y,i),e.positionZ.linearRampToValueAtTime(lo.z,i),e.orientationX.linearRampToValueAtTime(co.x,i),e.orientationY.linearRampToValueAtTime(co.y,i),e.orientationZ.linearRampToValueAtTime(co.z,i)}else e.setPosition(lo.x,lo.y,lo.z),e.setOrientation(co.x,co.y,co.z)}}class l3{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let i=0;i<e.length;i++)t+=e[i];return t/e.length}}class _B{constructor(t,e,i){this.binding=t,this.valueSize=i;let r,a,l;switch(e){case"quaternion":r=this._slerp,a=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const i=this.buffer,r=this.valueSize,a=t*r+r;let l=this.cumulativeWeight;if(l===0){for(let c=0;c!==r;++c)i[a+c]=i[c];l=e}else{l+=e;const c=e/l;this._mixBufferRegion(i,a,0,c,r)}this.cumulativeWeight=l}accumulateAdditive(t){const e=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,i=this.buffer,r=t*e+e,a=this.cumulativeWeight,l=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const u=e*this._origIndex;this._mixBufferRegion(i,r,u,1-a,e)}l>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*e,1,e);for(let u=e,d=e+e;u!==d;++u)if(i[u]!==i[u+e]){c.setValue(i,r);break}}saveOriginalState(){const t=this.binding,e=this.buffer,i=this.valueSize,r=i*this._origIndex;t.getValue(e,r);for(let a=i,l=r;a!==l;++a)e[a]=e[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,r,a){if(r>=.5)for(let l=0;l!==a;++l)t[e+l]=t[i+l]}_slerp(t,e,i,r){Oi.slerpFlat(t,e,t,e,t,i,r)}_slerpAdditive(t,e,i,r,a){const l=this._workIndex*a;Oi.multiplyQuaternionsFlat(t,l,t,e,t,i),Oi.slerpFlat(t,e,t,e,t,l,r)}_lerp(t,e,i,r,a){const l=1-r;for(let c=0;c!==a;++c){const u=e+c;t[u]=t[u]*l+t[i+c]*r}}_lerpAdditive(t,e,i,r,a){for(let l=0;l!==a;++l){const c=e+l;t[c]=t[c]+t[i+l]*r}}}const wE="\\[\\]\\.:\\/",c3=new RegExp("["+wE+"]","g"),ME="[^"+wE+"]",u3="[^"+wE.replace("\\.","")+"]",h3=/((?:WC+[\/:])*)/.source.replace("WC",ME),d3=/(WCOD+)?/.source.replace("WCOD",u3),f3=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ME),p3=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ME),A3=new RegExp("^"+h3+d3+f3+p3+"$"),m3=["material","materials","bones","map"];class g3{constructor(t,e,i){const r=i||je.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}class je{constructor(t,e,i){this.path=e,this.parsedPath=i||je.parseTrackName(e),this.node=je.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new je.Composite(t,e,i):new je(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(c3,"")}static parseTrackName(t){const e=A3.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);m3.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(i!==void 0)return i}if(t.children){const i=function(a){for(let l=0;l<a.length;l++){const c=a[l];if(c.name===e||c.uuid===e)return c;const u=i(c.children);if(u)return u}return null},r=i(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)t[e++]=i[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,i=e.objectName,r=e.propertyName;let a=e.propertyIndex;if(t||(t=je.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let d=e.objectIndex;switch(i){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let f=0;f<t.length;f++)if(t[f].name===d){d=f;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[i]}if(d!==void 0){if(t[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[d]}}const l=t[r];if(l===void 0){const d=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+r+" but it wasn't found.",t);return}let c=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?c=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[a]!==void 0&&(a=t.morphTargetDictionary[a])}u=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else l.fromArray!==void 0&&l.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(u=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}je.Composite=g3;je.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};je.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};je.prototype.GetterByBindingType=[je.prototype._getValue_direct,je.prototype._getValue_array,je.prototype._getValue_arrayElement,je.prototype._getValue_toArray];je.prototype.SetterByBindingTypeAndVersioning=[[je.prototype._setValue_direct,je.prototype._setValue_direct_setNeedsUpdate,je.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[je.prototype._setValue_array,je.prototype._setValue_array_setNeedsUpdate,je.prototype._setValue_array_setMatrixWorldNeedsUpdate],[je.prototype._setValue_arrayElement,je.prototype._setValue_arrayElement_setNeedsUpdate,je.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[je.prototype._setValue_fromArray,je.prototype._setValue_fromArray_setNeedsUpdate,je.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class v3{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Xi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let i=0,r=arguments.length;i!==r;++i)t[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,i=this._paths,r=this._parsedPaths,a=this._bindings,l=a.length;let c,u=t.length,d=this.nCachedObjects_;for(let f=0,A=arguments.length;f!==A;++f){const m=arguments[f],g=m.uuid;let b=e[g];if(b===void 0){b=u++,e[g]=b,t.push(m);for(let x=0,E=l;x!==E;++x)a[x].push(new je(m,i[x],r[x]))}else if(b<d){c=t[b];const x=--d,E=t[x];e[E.uuid]=b,t[b]=E,e[g]=x,t[x]=m;for(let y=0,_=l;y!==_;++y){const w=a[y],S=w[x];let R=w[b];w[b]=S,R===void 0&&(R=new je(m,i[y],r[y])),w[x]=R}}else t[b]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_;for(let l=0,c=arguments.length;l!==c;++l){const u=arguments[l],d=u.uuid,f=e[d];if(f!==void 0&&f>=a){const A=a++,m=t[A];e[m.uuid]=f,t[f]=m,e[d]=A,t[A]=u;for(let g=0,b=r;g!==b;++g){const x=i[g],E=x[A],y=x[f];x[f]=E,x[A]=y}}}this.nCachedObjects_=a}uncache(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_,l=t.length;for(let c=0,u=arguments.length;c!==u;++c){const d=arguments[c],f=d.uuid,A=e[f];if(A!==void 0)if(delete e[f],A<a){const m=--a,g=t[m],b=--l,x=t[b];e[g.uuid]=A,t[A]=g,e[x.uuid]=m,t[m]=x,t.pop();for(let E=0,y=r;E!==y;++E){const _=i[E],w=_[m],S=_[b];_[A]=w,_[m]=S,_.pop()}}else{const m=--l,g=t[m];m>0&&(e[g.uuid]=A),t[A]=g,t.pop();for(let b=0,x=r;b!==x;++b){const E=i[b];E[A]=E[m],E.pop()}}}this.nCachedObjects_=a}subscribe_(t,e){const i=this._bindingsIndicesByPath;let r=i[t];const a=this._bindings;if(r!==void 0)return a[r];const l=this._paths,c=this._parsedPaths,u=this._objects,d=u.length,f=this.nCachedObjects_,A=new Array(d);r=a.length,i[t]=r,l.push(t),c.push(e),a.push(A);for(let m=f,g=u.length;m!==g;++m){const b=u[m];A[m]=new je(b,t,e)}return A}unsubscribe_(t){const e=this._bindingsIndicesByPath,i=e[t];if(i!==void 0){const r=this._paths,a=this._parsedPaths,l=this._bindings,c=l.length-1,u=l[c],d=t[c];e[d]=i,l[i]=u,l.pop(),a[i]=a[c],a.pop(),r[i]=r[c],r.pop()}}}class wB{constructor(t,e,i=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=r;const a=e.tracks,l=a.length,c=new Array(l),u={endingStart:Mo,endingEnd:Mo};for(let d=0;d!==l;++d){const f=a[d].createInterpolant(null);c[d]=f,f.settings=u}this._interpolantSettings=u,this._interpolants=c,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=uS,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){const r=this._clip.duration,a=t._clip.duration,l=a/r,c=r/a;t.warp(1,l,e),this.warp(c,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){const r=this._mixer,a=r.time,l=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=r._lendControlInterpolant(),this._timeScaleInterpolant=c);const u=c.parameterPositions,d=c.sampleValues;return u[0]=a,u[1]=a+i,d[0]=t/l,d[1]=e/l,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,r){if(!this.enabled){this._updateWeight(t);return}const a=this._startTime;if(a!==null){const u=(t-a)*i;u<0||i===0?e=0:(this._startTime=null,e=i*u)}e*=this._updateTimeScale(t);const l=this._updateTime(e),c=this._updateWeight(t);if(c>0){const u=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case eE:for(let f=0,A=u.length;f!==A;++f)u[f].evaluate(l),d[f].accumulateAdditive(c);break;case xA:default:for(let f=0,A=u.length;f!==A;++f)u[f].evaluate(l),d[f].accumulate(r,c)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,i=this.loop;let r=this.time+t,a=this._loopCount;const l=i===hS;if(t===0)return a===-1?r:l&&(a&1)===1?e-r:r;if(i===cS){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else if(r<0)r=0;else{this.time=r;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(a===-1&&(t>=0?(a=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),r>=e||r<0){const c=Math.floor(r/e);r-=e*c,a+=Math.abs(c);const u=this.repetitions-a;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(u===1){const d=t<0;this._setEndings(d,!d,l)}else this._setEndings(!1,!1,l);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=r;if(l&&(a&1)===1)return e-r}return r}_setEndings(t,e,i){const r=this._interpolantSettings;i?(r.endingStart=So,r.endingEnd=So):(t?r.endingStart=this.zeroSlopeAtStart?So:Mo:r.endingStart=Ku,e?r.endingEnd=this.zeroSlopeAtEnd?So:Mo:r.endingEnd=Ku)}_scheduleFading(t,e,i){const r=this._mixer,a=r.time;let l=this._weightInterpolant;l===null&&(l=r._lendControlInterpolant(),this._weightInterpolant=l);const c=l.parameterPositions,u=l.sampleValues;return c[0]=a,u[0]=e,c[1]=a+t,u[1]=i,this}}const y3=new Float32Array(1);class E3 extends jr{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const i=t._localRoot||this._root,r=t._clip.tracks,a=r.length,l=t._propertyBindings,c=t._interpolants,u=i.uuid,d=this._bindingsByRootAndName;let f=d[u];f===void 0&&(f={},d[u]=f);for(let A=0;A!==a;++A){const m=r[A],g=m.name;let b=f[g];if(b!==void 0)++b.referenceCount,l[A]=b;else{if(b=l[A],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,u,g));continue}const x=e&&e._propertyBindings[A].binding.parsedPath;b=new _B(je.create(i,g,x),m.ValueTypeName,m.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,u,g),l[A]=b}c[A].resultBuffer=b.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const i=(t._localRoot||this._root).uuid,r=t._clip.uuid,a=this._actionsByClip[r];this._bindAction(t,a&&a.knownActions[0]),this._addInactiveAction(t,r,i)}const e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){const a=e[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){const a=e[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,i){const r=this._actions,a=this._actionsByClip;let l=a[e];if(l===void 0)l={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,a[e]=l;else{const c=l.knownActions;t._byClipCacheIndex=c.length,c.push(t)}t._cacheIndex=r.length,r.push(t),l.actionByRoot[i]=t}_removeInactiveAction(t){const e=this._actions,i=e[e.length-1],r=t._cacheIndex;i._cacheIndex=r,e[r]=i,e.pop(),t._cacheIndex=null;const a=t._clip.uuid,l=this._actionsByClip,c=l[a],u=c.knownActions,d=u[u.length-1],f=t._byClipCacheIndex;d._byClipCacheIndex=f,u[f]=d,u.pop(),t._byClipCacheIndex=null;const A=c.actionByRoot,m=(t._localRoot||this._root).uuid;delete A[m],u.length===0&&delete l[a],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){const a=e[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(t){const e=this._actions,i=t._cacheIndex,r=this._nActiveActions++,a=e[r];t._cacheIndex=r,e[r]=t,a._cacheIndex=i,e[i]=a}_takeBackAction(t){const e=this._actions,i=t._cacheIndex,r=--this._nActiveActions,a=e[r];t._cacheIndex=r,e[r]=t,a._cacheIndex=i,e[i]=a}_addInactiveBinding(t,e,i){const r=this._bindingsByRootAndName,a=this._bindings;let l=r[e];l===void 0&&(l={},r[e]=l),l[i]=t,t._cacheIndex=a.length,a.push(t)}_removeInactiveBinding(t){const e=this._bindings,i=t.binding,r=i.rootNode.uuid,a=i.path,l=this._bindingsByRootAndName,c=l[r],u=e[e.length-1],d=t._cacheIndex;u._cacheIndex=d,e[d]=u,e.pop(),delete c[a],Object.keys(c).length===0&&delete l[r]}_lendBinding(t){const e=this._bindings,i=t._cacheIndex,r=this._nActiveBindings++,a=e[r];t._cacheIndex=r,e[r]=t,a._cacheIndex=i,e[i]=a}_takeBackBinding(t){const e=this._bindings,i=t._cacheIndex,r=--this._nActiveBindings,a=e[r];t._cacheIndex=r,e[r]=t,a._cacheIndex=i,e[i]=a}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let i=t[e];return i===void 0&&(i=new EE(new Float32Array(2),new Float32Array(2),1,y3),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){const e=this._controlInterpolants,i=t.__cacheIndex,r=--this._nActiveControlInterpolants,a=e[r];t.__cacheIndex=r,e[r]=t,a.__cacheIndex=i,e[i]=a}clipAction(t,e,i){const r=e||this._root,a=r.uuid;let l=typeof t=="string"?oh.findByName(r,t):t;const c=l!==null?l.uuid:t,u=this._actionsByClip[c];let d=null;if(i===void 0&&(l!==null?i=l.blendMode:i=xA),u!==void 0){const A=u.actionByRoot[a];if(A!==void 0&&A.blendMode===i)return A;d=u.knownActions[0],l===null&&(l=d._clip)}if(l===null)return null;const f=new wB(this,l,e,i);return this._bindAction(f,d),this._addInactiveAction(f,c,a),f}existingAction(t,e){const i=e||this._root,r=i.uuid,a=typeof t=="string"?oh.findByName(i,t):t,l=a?a.uuid:t,c=this._actionsByClip[l];return c!==void 0&&c.actionByRoot[r]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let i=e-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;const e=this._actions,i=this._nActiveActions,r=this.time+=t,a=Math.sign(t),l=this._accuIndex^=1;for(let d=0;d!==i;++d)e[d]._update(r,t,a,l);const c=this._bindings,u=this._nActiveBindings;for(let d=0;d!==u;++d)c[d].apply(l);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,i=t.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){const l=a.knownActions;for(let c=0,u=l.length;c!==u;++c){const d=l[c];this._deactivateAction(d);const f=d._cacheIndex,A=e[e.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,A._cacheIndex=f,e[f]=A,e.pop(),this._removeInactiveBindingsForAction(d)}delete r[i]}}uncacheRoot(t){const e=t.uuid,i=this._actionsByClip;for(const l in i){const c=i[l].actionByRoot,u=c[e];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const r=this._bindingsByRootAndName,a=r[e];if(a!==void 0)for(const l in a){const c=a[l];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(t,e){const i=this.existingAction(t,e);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class b3 extends CA{constructor(t=1,e=1,i=1,r={}){super(t,e,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new _A(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class x3 extends CA{constructor(t=1,e=1,i=1,r={}){super(t,e,r),this.isRenderTargetArray=!0,this.depth=i,this.texture=new gh(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class SE{constructor(t){this.value=t}clone(){return new SE(this.value.clone===void 0?this.value:this.value.clone())}}let C3=0;class _3 extends jr{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:C3++}),this.name="",this.usage=Zu,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let i=0,r=e.length;i<r;i++){const a=Array.isArray(e[i])?e[i]:[e[i]];for(let l=0;l<a.length;l++)this.uniforms.push(a[l].clone())}return this}clone(){return new this.constructor().copy(this)}}class w3 extends TA{constructor(t,e,i=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class M3{constructor(t,e,i,r,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=i,this.elementSize=r,this.count=a,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const K1=new ve;class S3{constructor(t,e,i=0,r=1/0){this.ray=new uc(t,e),this.near=i,this.far=r,this.camera=null,this.layers=new wA,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return K1.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(K1),this}intersectObject(t,e=!0,i=[]){return cy(t,this,i,e),i.sort(J1),i}intersectObjects(t,e=!0,i=[]){for(let r=0,a=t.length;r<a;r++)cy(t[r],this,i,e);return i.sort(J1),i}}function J1(n,t){return n.distance-t.distance}function cy(n,t,e,i){let r=!0;if(n.layers.test(t.layers)&&n.raycast(t,e)===!1&&(r=!1),r===!0&&i===!0){const a=n.children;for(let l=0,c=a.length;l<c;l++)cy(a[l],t,e,!0)}}class B3{constructor(t=1,e=0,i=0){return this.radius=t,this.phi=e,this.theta=i,this}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=_e(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(_e(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class T3{constructor(t=1,e=0,i=0){return this.radius=t,this.theta=e,this.y=i,this}set(t,e,i){return this.radius=t,this.theta=e,this.y=i,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}clone(){return new this.constructor().copy(this)}}class BE{constructor(t,e,i,r){BE.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,e,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let i=0;i<4;i++)this.elements[i]=t[i+e];return this}set(t,e,i,r){const a=this.elements;return a[0]=t,a[2]=e,a[1]=i,a[3]=r,this}}const Z1=new Ut;class I3{constructor(t=new Ut(1/0,1/0),e=new Ut(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=Z1.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Z1).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const $1=new W,xf=new W;class R3{constructor(t=new W,e=new W){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){$1.subVectors(t,this.start),xf.subVectors(this.end,this.start);const i=xf.dot(xf);let a=xf.dot($1)/i;return e&&(a=_e(a,0,1)),a}closestPointToPoint(t,e,i){const r=this.closestPointToPointParameter(t,e);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const tw=new W;class L3 extends Ye{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const i=new Ie,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,c=1,u=32;l<u;l++,c++){const d=l/u*Math.PI*2,f=c/u*Math.PI*2;r.push(Math.cos(d),Math.sin(d),1,Math.cos(f),Math.sin(f),1)}i.setAttribute("position",new oe(r,3));const a=new bi({fog:!1,toneMapped:!1});this.cone=new Xr(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),tw.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(tw),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ga=new W,Cf=new ve,j0=new ve;class D3 extends Xr{constructor(t){const e=MB(t),i=new Ie,r=[],a=[],l=new $t(0,0,1),c=new $t(0,1,0);for(let d=0;d<e.length;d++){const f=e[d];f.parent&&f.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(l.r,l.g,l.b),a.push(c.r,c.g,c.b))}i.setAttribute("position",new oe(r,3)),i.setAttribute("color",new oe(a,3));const u=new bi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,i=this.geometry,r=i.getAttribute("position");j0.copy(this.root.matrixWorld).invert();for(let a=0,l=0;a<e.length;a++){const c=e[a];c.parent&&c.parent.isBone&&(Cf.multiplyMatrices(j0,c.matrixWorld),ga.setFromMatrixPosition(Cf),r.setXYZ(l,ga.x,ga.y,ga.z),Cf.multiplyMatrices(j0,c.parent.matrixWorld),ga.setFromMatrixPosition(Cf),r.setXYZ(l+1,ga.x,ga.y,ga.z),l+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function MB(n){const t=[];n.isBone===!0&&t.push(n);for(let e=0;e<n.children.length;e++)t.push.apply(t,MB(n.children[e]));return t}class U3 extends Pn{constructor(t,e,i){const r=new xh(e,4,2),a=new Da({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=t,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const O3=new W,ew=new $t,nw=new $t;class N3 extends Ye{constructor(t,e,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new bh(e);r.rotateY(Math.PI*.5),this.material=new Da({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),l=new Float32Array(a.count*3);r.setAttribute("color",new ln(l,3)),this.add(new Pn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");ew.copy(this.light.color),nw.copy(this.light.groundColor);for(let i=0,r=e.count;i<r;i++){const a=i<r/2?ew:nw;e.setXYZ(i,a.r,a.g,a.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(O3.setFromMatrixPosition(this.light.matrixWorld).negate())}}class P3 extends Xr{constructor(t=10,e=10,i=4473924,r=8947848){i=new $t(i),r=new $t(r);const a=e/2,l=t/e,c=t/2,u=[],d=[];for(let m=0,g=0,b=-c;m<=e;m++,b+=l){u.push(-c,0,b,c,0,b),u.push(b,0,-c,b,0,c);const x=m===a?i:r;x.toArray(d,g),g+=3,x.toArray(d,g),g+=3,x.toArray(d,g),g+=3,x.toArray(d,g),g+=3}const f=new Ie;f.setAttribute("position",new oe(u,3)),f.setAttribute("color",new oe(d,3));const A=new bi({vertexColors:!0,toneMapped:!1});super(f,A),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class F3 extends Xr{constructor(t=10,e=16,i=8,r=64,a=4473924,l=8947848){a=new $t(a),l=new $t(l);const c=[],u=[];if(e>1)for(let A=0;A<e;A++){const m=A/e*(Math.PI*2),g=Math.sin(m)*t,b=Math.cos(m)*t;c.push(0,0,0),c.push(g,0,b);const x=A&1?a:l;u.push(x.r,x.g,x.b),u.push(x.r,x.g,x.b)}for(let A=0;A<i;A++){const m=A&1?a:l,g=t-t/i*A;for(let b=0;b<r;b++){let x=b/r*(Math.PI*2),E=Math.sin(x)*g,y=Math.cos(x)*g;c.push(E,0,y),u.push(m.r,m.g,m.b),x=(b+1)/r*(Math.PI*2),E=Math.sin(x)*g,y=Math.cos(x)*g,c.push(E,0,y),u.push(m.r,m.g,m.b)}}const d=new Ie;d.setAttribute("position",new oe(c,3)),d.setAttribute("color",new oe(u,3));const f=new bi({vertexColors:!0,toneMapped:!1});super(d,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const iw=new W,_f=new W,rw=new W;class k3 extends Ye{constructor(t,e,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",e===void 0&&(e=1);let r=new Ie;r.setAttribute("position",new oe([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const a=new bi({fog:!1,toneMapped:!1});this.lightPlane=new Ta(r,a),this.add(this.lightPlane),r=new Ie,r.setAttribute("position",new oe([0,0,0,0,0,1],3)),this.targetLine=new Ta(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),iw.setFromMatrixPosition(this.light.matrixWorld),_f.setFromMatrixPosition(this.light.target.matrixWorld),rw.subVectors(_f,iw),this.lightPlane.lookAt(_f),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_f),this.targetLine.scale.z=rw.length()}}const wf=new W,xn=new MA;class Q3 extends Xr{constructor(t){const e=new Ie,i=new bi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],l={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(b,x){u(b),u(x)}function u(b){r.push(0,0,0),a.push(0,0,0),l[b]===void 0&&(l[b]=[]),l[b].push(r.length/3-1)}e.setAttribute("position",new oe(r,3)),e.setAttribute("color",new oe(a,3)),super(e,i),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const d=new $t(16755200),f=new $t(16711680),A=new $t(43775),m=new $t(16777215),g=new $t(3355443);this.setColors(d,f,A,m,g)}setColors(t,e,i,r,a){const c=this.geometry.getAttribute("color");c.setXYZ(0,t.r,t.g,t.b),c.setXYZ(1,t.r,t.g,t.b),c.setXYZ(2,t.r,t.g,t.b),c.setXYZ(3,t.r,t.g,t.b),c.setXYZ(4,t.r,t.g,t.b),c.setXYZ(5,t.r,t.g,t.b),c.setXYZ(6,t.r,t.g,t.b),c.setXYZ(7,t.r,t.g,t.b),c.setXYZ(8,t.r,t.g,t.b),c.setXYZ(9,t.r,t.g,t.b),c.setXYZ(10,t.r,t.g,t.b),c.setXYZ(11,t.r,t.g,t.b),c.setXYZ(12,t.r,t.g,t.b),c.setXYZ(13,t.r,t.g,t.b),c.setXYZ(14,t.r,t.g,t.b),c.setXYZ(15,t.r,t.g,t.b),c.setXYZ(16,t.r,t.g,t.b),c.setXYZ(17,t.r,t.g,t.b),c.setXYZ(18,t.r,t.g,t.b),c.setXYZ(19,t.r,t.g,t.b),c.setXYZ(20,t.r,t.g,t.b),c.setXYZ(21,t.r,t.g,t.b),c.setXYZ(22,t.r,t.g,t.b),c.setXYZ(23,t.r,t.g,t.b),c.setXYZ(24,e.r,e.g,e.b),c.setXYZ(25,e.r,e.g,e.b),c.setXYZ(26,e.r,e.g,e.b),c.setXYZ(27,e.r,e.g,e.b),c.setXYZ(28,e.r,e.g,e.b),c.setXYZ(29,e.r,e.g,e.b),c.setXYZ(30,e.r,e.g,e.b),c.setXYZ(31,e.r,e.g,e.b),c.setXYZ(32,i.r,i.g,i.b),c.setXYZ(33,i.r,i.g,i.b),c.setXYZ(34,i.r,i.g,i.b),c.setXYZ(35,i.r,i.g,i.b),c.setXYZ(36,i.r,i.g,i.b),c.setXYZ(37,i.r,i.g,i.b),c.setXYZ(38,r.r,r.g,r.b),c.setXYZ(39,r.r,r.g,r.b),c.setXYZ(40,a.r,a.g,a.b),c.setXYZ(41,a.r,a.g,a.b),c.setXYZ(42,a.r,a.g,a.b),c.setXYZ(43,a.r,a.g,a.b),c.setXYZ(44,a.r,a.g,a.b),c.setXYZ(45,a.r,a.g,a.b),c.setXYZ(46,a.r,a.g,a.b),c.setXYZ(47,a.r,a.g,a.b),c.setXYZ(48,a.r,a.g,a.b),c.setXYZ(49,a.r,a.g,a.b),c.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap,i=1,r=1;xn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const a=this.camera.coordinateSystem===Mr?-1:0;Sn("c",e,t,xn,0,0,a),Sn("t",e,t,xn,0,0,1),Sn("n1",e,t,xn,-1,-1,a),Sn("n2",e,t,xn,i,-1,a),Sn("n3",e,t,xn,-1,r,a),Sn("n4",e,t,xn,i,r,a),Sn("f1",e,t,xn,-1,-1,1),Sn("f2",e,t,xn,i,-1,1),Sn("f3",e,t,xn,-1,r,1),Sn("f4",e,t,xn,i,r,1),Sn("u1",e,t,xn,i*.7,r*1.1,a),Sn("u2",e,t,xn,-1*.7,r*1.1,a),Sn("u3",e,t,xn,0,r*2,a),Sn("cf1",e,t,xn,-1,0,1),Sn("cf2",e,t,xn,i,0,1),Sn("cf3",e,t,xn,0,-1,1),Sn("cf4",e,t,xn,0,r,1),Sn("cn1",e,t,xn,-1,0,a),Sn("cn2",e,t,xn,i,0,a),Sn("cn3",e,t,xn,0,-1,a),Sn("cn4",e,t,xn,0,r,a),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Sn(n,t,e,i,r,a,l){wf.set(r,a,l).unproject(i);const c=t[n];if(c!==void 0){const u=e.getAttribute("position");for(let d=0,f=c.length;d<f;d++)u.setXYZ(c[d],wf.x,wf.y,wf.z)}}const Mf=new Ei;class z3 extends Xr{constructor(t,e=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),a=new Ie;a.setIndex(new ln(i,1)),a.setAttribute("position",new ln(r,3)),super(a,new bi({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(t!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Mf.setFromObject(this.object),Mf.isEmpty())return;const e=Mf.min,i=Mf.max,r=this.geometry.attributes.position,a=r.array;a[0]=i.x,a[1]=i.y,a[2]=i.z,a[3]=e.x,a[4]=i.y,a[5]=i.z,a[6]=e.x,a[7]=e.y,a[8]=i.z,a[9]=i.x,a[10]=e.y,a[11]=i.z,a[12]=i.x,a[13]=i.y,a[14]=e.z,a[15]=e.x,a[16]=i.y,a[17]=e.z,a[18]=e.x,a[19]=e.y,a[20]=e.z,a[21]=i.x,a[22]=e.y,a[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class G3 extends Xr{constructor(t,e=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Ie;a.setIndex(new ln(i,1)),a.setAttribute("position",new oe(r,3)),super(a,new bi({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class H3 extends Ta{constructor(t,e=1,i=16776960){const r=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new Ie;l.setAttribute("position",new oe(a,3)),l.computeBoundingSphere(),super(l,new bi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new Ie;u.setAttribute("position",new oe(c,3)),u.computeBoundingSphere(),this.add(new Pn(u,new Da({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const sw=new W;let Sf,X0;class V3 extends Ye{constructor(t=new W(0,0,1),e=new W(0,0,0),i=1,r=16776960,a=i*.2,l=a*.2){super(),this.type="ArrowHelper",Sf===void 0&&(Sf=new Ie,Sf.setAttribute("position",new oe([0,0,0,0,1,0],3)),X0=new hc(0,.5,1,5,1),X0.translate(0,-.5,0)),this.position.copy(e),this.line=new Ta(Sf,new bi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Pn(X0,new Da({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,a,l)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{sw.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(sw,e)}}setLength(t,e=t*.2,i=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class q3 extends Xr{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Ie;r.setAttribute("position",new oe(e,3)),r.setAttribute("color",new oe(i,3));const a=new bi({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(t,e,i){const r=new $t,a=this.geometry.attributes.color.array;return r.set(t),r.toArray(a,0),r.toArray(a,3),r.set(e),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class W3{constructor(){this.type="ShapePath",this.color=new $t,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new eh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,i,r){return this.currentPath.quadraticCurveTo(t,e,i,r),this}bezierCurveTo(t,e,i,r,a,l){return this.currentPath.bezierCurveTo(t,e,i,r,a,l),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(y){const _=[];for(let w=0,S=y.length;w<S;w++){const R=y[w],U=new Lo;U.curves=R.curves,_.push(U)}return _}function i(y,_){const w=_.length;let S=!1;for(let R=w-1,U=0;U<w;R=U++){let L=_[R],F=_[U],D=F.x-L.x,O=F.y-L.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(L=_[U],D=-D,F=_[R],O=-O),y.y<L.y||y.y>F.y)continue;if(y.y===L.y){if(y.x===L.x)return!0}else{const z=O*(y.x-L.x)-D*(y.y-L.y);if(z===0)return!0;if(z<0)continue;S=!S}}else{if(y.y!==L.y)continue;if(F.x<=y.x&&y.x<=L.x||L.x<=y.x&&y.x<=F.x)return!0}}return S}const r=qr.isClockWise,a=this.subPaths;if(a.length===0)return[];let l,c,u;const d=[];if(a.length===1)return c=a[0],u=new Lo,u.curves=c.curves,d.push(u),d;let f=!r(a[0].getPoints());f=t?!f:f;const A=[],m=[];let g=[],b=0,x;m[b]=void 0,g[b]=[];for(let y=0,_=a.length;y<_;y++)c=a[y],x=c.getPoints(),l=r(x),l=t?!l:l,l?(!f&&m[b]&&b++,m[b]={s:new Lo,p:x},m[b].s.curves=c.curves,f&&b++,g[b]=[]):g[b].push({h:c,p:x[0]});if(!m[0])return e(a);if(m.length>1){let y=!1,_=0;for(let w=0,S=m.length;w<S;w++)A[w]=[];for(let w=0,S=m.length;w<S;w++){const R=g[w];for(let U=0;U<R.length;U++){const L=R[U];let F=!0;for(let D=0;D<m.length;D++)i(L.p,m[D].p)&&(w!==D&&_++,F?(F=!1,A[D].push(L)):y=!0);F&&A[w].push(L)}}_>0&&y===!1&&(g=A)}let E;for(let y=0,_=m.length;y<_;y++){u=m[y].s,d.push(u),E=g[y];for(let w=0,S=E.length;w<S;w++)u.holes.push(E[w].h)}return d}}class j3 extends jr{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function X3(n,t){const e=n.image&&n.image.width?n.image.width/n.image.height:1;return e>t?(n.repeat.x=1,n.repeat.y=e/t,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=t/e,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function Y3(n,t){const e=n.image&&n.image.width?n.image.width/n.image.height:1;return e>t?(n.repeat.x=t/e,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=e/t,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function K3(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function uy(n,t,e,i){const r=J3(i);switch(e){case Yy:return n*t;case Jy:return n*t;case Zy:return n*t*2;case yA:return n*t/r.components*r.byteLength;case mh:return n*t/r.components*r.byteLength;case $y:return n*t*2/r.components*r.byteLength;case EA:return n*t*2/r.components*r.byteLength;case Ky:return n*t*3/r.components*r.byteLength;case vi:return n*t*4/r.components*r.byteLength;case bA:return n*t*4/r.components*r.byteLength;case Ou:case Nu:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case Pu:case Fu:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case Cp:case wp:return Math.max(n,16)*Math.max(t,8)/4;case xp:case _p:return Math.max(n,8)*Math.max(t,8)/2;case Mp:case Sp:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case Bp:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case Tp:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case Ip:return Math.floor((n+4)/5)*Math.floor((t+3)/4)*16;case Rp:return Math.floor((n+4)/5)*Math.floor((t+4)/5)*16;case Lp:return Math.floor((n+5)/6)*Math.floor((t+4)/5)*16;case Dp:return Math.floor((n+5)/6)*Math.floor((t+5)/6)*16;case Up:return Math.floor((n+7)/8)*Math.floor((t+4)/5)*16;case Op:return Math.floor((n+7)/8)*Math.floor((t+5)/6)*16;case Np:return Math.floor((n+7)/8)*Math.floor((t+7)/8)*16;case Pp:return Math.floor((n+9)/10)*Math.floor((t+4)/5)*16;case Fp:return Math.floor((n+9)/10)*Math.floor((t+5)/6)*16;case kp:return Math.floor((n+9)/10)*Math.floor((t+7)/8)*16;case Qp:return Math.floor((n+9)/10)*Math.floor((t+9)/10)*16;case zp:return Math.floor((n+11)/12)*Math.floor((t+9)/10)*16;case Gp:return Math.floor((n+11)/12)*Math.floor((t+11)/12)*16;case ku:case Hp:case Vp:return Math.ceil(n/4)*Math.ceil(t/4)*16;case tE:case qp:return Math.ceil(n/4)*Math.ceil(t/4)*8;case Wp:case jp:return Math.ceil(n/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function J3(n){switch(n){case Wr:case Wy:return{byteLength:1,components:1};case ic:case jy:case cc:return{byteLength:2,components:1};case gA:case vA:return{byteLength:2,components:4};case Ps:case mA:case Ai:return{byteLength:4,components:1};case Xy:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const Z3={contain:X3,cover:Y3,fill:K3,getByteLength:uy};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:pA}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=pA);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function SB(){let n=null,t=!1,e=null,i=null;function r(a,l){e(a,l),i=n.requestAnimationFrame(r)}return{start:function(){t!==!0&&e!==null&&(i=n.requestAnimationFrame(r),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(a){e=a},setContext:function(a){n=a}}}function $3(n){const t=new WeakMap;function e(c,u){const d=c.array,f=c.usage,A=d.byteLength,m=n.createBuffer();n.bindBuffer(u,m),n.bufferData(u,d,f),c.onUploadCallback();let g;if(d instanceof Float32Array)g=n.FLOAT;else if(d instanceof Uint16Array)c.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)g=n.SHORT;else if(d instanceof Uint32Array)g=n.UNSIGNED_INT;else if(d instanceof Int32Array)g=n.INT;else if(d instanceof Int8Array)g=n.BYTE;else if(d instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:m,type:g,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version,size:A}}function i(c,u,d){const f=u.array,A=u.updateRanges;if(n.bindBuffer(d,c),A.length===0)n.bufferSubData(d,0,f);else{A.sort((g,b)=>g.start-b.start);let m=0;for(let g=1;g<A.length;g++){const b=A[m],x=A[g];x.start<=b.start+b.count+1?b.count=Math.max(b.count,x.start+x.count-b.start):(++m,A[m]=x)}A.length=m+1;for(let g=0,b=A.length;g<b;g++){const x=A[g];n.bufferSubData(d,x.start*f.BYTES_PER_ELEMENT,f,x.start,x.count)}u.clearUpdateRanges()}u.onUploadCallback()}function r(c){return c.isInterleavedBufferAttribute&&(c=c.data),t.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=t.get(c);u&&(n.deleteBuffer(u.buffer),t.delete(c))}function l(c,u){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){const f=t.get(c);(!f||f.version<c.version)&&t.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}const d=t.get(c);if(d===void 0)t.set(c,e(c,u));else if(d.version<c.version){if(d.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(d.buffer,c,u),d.version=c.version}}return{get:r,remove:a,update:l}}var tO=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,eO=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,nO=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,iO=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,rO=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,sO=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aO=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,oO=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,lO=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,cO=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,uO=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,hO=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,dO=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,fO=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,pO=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,AO=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,mO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,gO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,vO=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,yO=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,EO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,bO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,xO=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,CO=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,_O=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,wO=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,MO=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,SO=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,BO=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,TO=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,IO="gl_FragColor = linearToOutputTexel( gl_FragColor );",RO=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,LO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,DO=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,UO=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,OO=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,NO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,PO=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,FO=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,kO=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,QO=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,zO=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,GO=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,HO=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,VO=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,qO=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,WO=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,jO=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,XO=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,YO=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,KO=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,JO=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,ZO=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,$O=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,tN=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,eN=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,nN=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,iN=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,rN=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,sN=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,aN=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,oN=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,lN=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,cN=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,uN=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,hN=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,dN=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,fN=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,pN=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,AN=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,mN=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,gN=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,vN=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,yN=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,EN=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,bN=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,xN=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,CN=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,_N=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,wN=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,MN=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,SN=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,BN=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,TN=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,IN=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,RN=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,LN=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,DN=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,UN=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,ON=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,NN=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,PN=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,FN=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,kN=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,QN=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,zN=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,GN=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,HN=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,VN=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,qN=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,WN=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,jN=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,XN=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,YN=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,KN=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,JN=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,ZN=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const $N=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,tP=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,eP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,nP=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,iP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,rP=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sP=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,aP=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,oP=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,lP=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,cP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,uP=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hP=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,dP=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,fP=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,pP=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AP=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mP=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gP=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,vP=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yP=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,EP=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,bP=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xP=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CP=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,_P=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wP=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,MP=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SP=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,BP=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,TP=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,IP=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,RP=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,LP=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Te={alphahash_fragment:tO,alphahash_pars_fragment:eO,alphamap_fragment:nO,alphamap_pars_fragment:iO,alphatest_fragment:rO,alphatest_pars_fragment:sO,aomap_fragment:aO,aomap_pars_fragment:oO,batching_pars_vertex:lO,batching_vertex:cO,begin_vertex:uO,beginnormal_vertex:hO,bsdfs:dO,iridescence_fragment:fO,bumpmap_pars_fragment:pO,clipping_planes_fragment:AO,clipping_planes_pars_fragment:mO,clipping_planes_pars_vertex:gO,clipping_planes_vertex:vO,color_fragment:yO,color_pars_fragment:EO,color_pars_vertex:bO,color_vertex:xO,common:CO,cube_uv_reflection_fragment:_O,defaultnormal_vertex:wO,displacementmap_pars_vertex:MO,displacementmap_vertex:SO,emissivemap_fragment:BO,emissivemap_pars_fragment:TO,colorspace_fragment:IO,colorspace_pars_fragment:RO,envmap_fragment:LO,envmap_common_pars_fragment:DO,envmap_pars_fragment:UO,envmap_pars_vertex:OO,envmap_physical_pars_fragment:WO,envmap_vertex:NO,fog_vertex:PO,fog_pars_vertex:FO,fog_fragment:kO,fog_pars_fragment:QO,gradientmap_pars_fragment:zO,lightmap_pars_fragment:GO,lights_lambert_fragment:HO,lights_lambert_pars_fragment:VO,lights_pars_begin:qO,lights_toon_fragment:jO,lights_toon_pars_fragment:XO,lights_phong_fragment:YO,lights_phong_pars_fragment:KO,lights_physical_fragment:JO,lights_physical_pars_fragment:ZO,lights_fragment_begin:$O,lights_fragment_maps:tN,lights_fragment_end:eN,logdepthbuf_fragment:nN,logdepthbuf_pars_fragment:iN,logdepthbuf_pars_vertex:rN,logdepthbuf_vertex:sN,map_fragment:aN,map_pars_fragment:oN,map_particle_fragment:lN,map_particle_pars_fragment:cN,metalnessmap_fragment:uN,metalnessmap_pars_fragment:hN,morphinstance_vertex:dN,morphcolor_vertex:fN,morphnormal_vertex:pN,morphtarget_pars_vertex:AN,morphtarget_vertex:mN,normal_fragment_begin:gN,normal_fragment_maps:vN,normal_pars_fragment:yN,normal_pars_vertex:EN,normal_vertex:bN,normalmap_pars_fragment:xN,clearcoat_normal_fragment_begin:CN,clearcoat_normal_fragment_maps:_N,clearcoat_pars_fragment:wN,iridescence_pars_fragment:MN,opaque_fragment:SN,packing:BN,premultiplied_alpha_fragment:TN,project_vertex:IN,dithering_fragment:RN,dithering_pars_fragment:LN,roughnessmap_fragment:DN,roughnessmap_pars_fragment:UN,shadowmap_pars_fragment:ON,shadowmap_pars_vertex:NN,shadowmap_vertex:PN,shadowmask_pars_fragment:FN,skinbase_vertex:kN,skinning_pars_vertex:QN,skinning_vertex:zN,skinnormal_vertex:GN,specularmap_fragment:HN,specularmap_pars_fragment:VN,tonemapping_fragment:qN,tonemapping_pars_fragment:WN,transmission_fragment:jN,transmission_pars_fragment:XN,uv_pars_fragment:YN,uv_pars_vertex:KN,uv_vertex:JN,worldpos_vertex:ZN,background_vert:$N,background_frag:tP,backgroundCube_vert:eP,backgroundCube_frag:nP,cube_vert:iP,cube_frag:rP,depth_vert:sP,depth_frag:aP,distanceRGBA_vert:oP,distanceRGBA_frag:lP,equirect_vert:cP,equirect_frag:uP,linedashed_vert:hP,linedashed_frag:dP,meshbasic_vert:fP,meshbasic_frag:pP,meshlambert_vert:AP,meshlambert_frag:mP,meshmatcap_vert:gP,meshmatcap_frag:vP,meshnormal_vert:yP,meshnormal_frag:EP,meshphong_vert:bP,meshphong_frag:xP,meshphysical_vert:CP,meshphysical_frag:_P,meshtoon_vert:wP,meshtoon_frag:MP,points_vert:SP,points_frag:BP,shadow_vert:TP,shadow_frag:IP,sprite_vert:RP,sprite_frag:LP},Kt={common:{diffuse:{value:new $t(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ce},alphaMap:{value:null},alphaMapTransform:{value:new Ce},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ce}},envmap:{envMap:{value:null},envMapRotation:{value:new Ce},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ce}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ce}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ce},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ce},normalScale:{value:new Ut(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ce},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ce}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ce}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ce}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $t(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new $t(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ce},alphaTest:{value:0},uvTransform:{value:new Ce}},sprite:{diffuse:{value:new $t(16777215)},opacity:{value:1},center:{value:new Ut(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ce},alphaMap:{value:null},alphaMapTransform:{value:new Ce},alphaTest:{value:0}}},_r={basic:{uniforms:fi([Kt.common,Kt.specularmap,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.fog]),vertexShader:Te.meshbasic_vert,fragmentShader:Te.meshbasic_frag},lambert:{uniforms:fi([Kt.common,Kt.specularmap,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.fog,Kt.lights,{emissive:{value:new $t(0)}}]),vertexShader:Te.meshlambert_vert,fragmentShader:Te.meshlambert_frag},phong:{uniforms:fi([Kt.common,Kt.specularmap,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.fog,Kt.lights,{emissive:{value:new $t(0)},specular:{value:new $t(1118481)},shininess:{value:30}}]),vertexShader:Te.meshphong_vert,fragmentShader:Te.meshphong_frag},standard:{uniforms:fi([Kt.common,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.roughnessmap,Kt.metalnessmap,Kt.fog,Kt.lights,{emissive:{value:new $t(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Te.meshphysical_vert,fragmentShader:Te.meshphysical_frag},toon:{uniforms:fi([Kt.common,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.gradientmap,Kt.fog,Kt.lights,{emissive:{value:new $t(0)}}]),vertexShader:Te.meshtoon_vert,fragmentShader:Te.meshtoon_frag},matcap:{uniforms:fi([Kt.common,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.fog,{matcap:{value:null}}]),vertexShader:Te.meshmatcap_vert,fragmentShader:Te.meshmatcap_frag},points:{uniforms:fi([Kt.points,Kt.fog]),vertexShader:Te.points_vert,fragmentShader:Te.points_frag},dashed:{uniforms:fi([Kt.common,Kt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Te.linedashed_vert,fragmentShader:Te.linedashed_frag},depth:{uniforms:fi([Kt.common,Kt.displacementmap]),vertexShader:Te.depth_vert,fragmentShader:Te.depth_frag},normal:{uniforms:fi([Kt.common,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,{opacity:{value:1}}]),vertexShader:Te.meshnormal_vert,fragmentShader:Te.meshnormal_frag},sprite:{uniforms:fi([Kt.sprite,Kt.fog]),vertexShader:Te.sprite_vert,fragmentShader:Te.sprite_frag},background:{uniforms:{uvTransform:{value:new Ce},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Te.background_vert,fragmentShader:Te.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ce}},vertexShader:Te.backgroundCube_vert,fragmentShader:Te.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Te.cube_vert,fragmentShader:Te.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Te.equirect_vert,fragmentShader:Te.equirect_frag},distanceRGBA:{uniforms:fi([Kt.common,Kt.displacementmap,{referencePosition:{value:new W},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Te.distanceRGBA_vert,fragmentShader:Te.distanceRGBA_frag},shadow:{uniforms:fi([Kt.lights,Kt.fog,{color:{value:new $t(0)},opacity:{value:1}}]),vertexShader:Te.shadow_vert,fragmentShader:Te.shadow_frag}};_r.physical={uniforms:fi([_r.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ce},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ce},clearcoatNormalScale:{value:new Ut(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ce},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ce},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ce},sheen:{value:0},sheenColor:{value:new $t(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ce},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ce},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ce},transmissionSamplerSize:{value:new Ut},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ce},attenuationDistance:{value:0},attenuationColor:{value:new $t(0)},specularColor:{value:new $t(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ce},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ce},anisotropyVector:{value:new Ut},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ce}}]),vertexShader:Te.meshphysical_vert,fragmentShader:Te.meshphysical_frag};const Bf={r:0,b:0,g:0},uo=new Yi,DP=new ve;function UP(n,t,e,i,r,a,l){const c=new $t(0);let u=a===!0?0:1,d,f,A=null,m=0,g=null;function b(w){let S=w.isScene===!0?w.background:null;return S&&S.isTexture&&(S=(w.backgroundBlurriness>0?e:t).get(S)),S}function x(w){let S=!1;const R=b(w);R===null?y(c,u):R&&R.isColor&&(y(R,1),S=!0);const U=n.xr.getEnvironmentBlendMode();U==="additive"?i.buffers.color.setClear(0,0,0,1,l):U==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,l),(n.autoClear||S)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function E(w,S){const R=b(S);R&&(R.isCubeTexture||R.mapping===lc)?(f===void 0&&(f=new Pn(new Fo(1e4,1e4,1e4),new Br({name:"BackgroundCubeMaterial",uniforms:sc(_r.backgroundCube.uniforms),vertexShader:_r.backgroundCube.vertexShader,fragmentShader:_r.backgroundCube.fragmentShader,side:yi,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(U,L,F){this.matrixWorld.copyPosition(F.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),uo.copy(S.backgroundRotation),uo.x*=-1,uo.y*=-1,uo.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(uo.y*=-1,uo.z*=-1),f.material.uniforms.envMap.value=R,f.material.uniforms.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(DP.makeRotationFromEuler(uo)),f.material.toneMapped=Ve.getTransfer(R.colorSpace)!==rn,(A!==R||m!==R.version||g!==n.toneMapping)&&(f.material.needsUpdate=!0,A=R,m=R.version,g=n.toneMapping),f.layers.enableAll(),w.unshift(f,f.geometry,f.material,0,0,null)):R&&R.isTexture&&(d===void 0&&(d=new Pn(new dc(2,2),new Br({name:"BackgroundMaterial",uniforms:sc(_r.background.uniforms),vertexShader:_r.background.vertexShader,fragmentShader:_r.background.fragmentShader,side:Os,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=R,d.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,d.material.toneMapped=Ve.getTransfer(R.colorSpace)!==rn,R.matrixAutoUpdate===!0&&R.updateMatrix(),d.material.uniforms.uvTransform.value.copy(R.matrix),(A!==R||m!==R.version||g!==n.toneMapping)&&(d.material.needsUpdate=!0,A=R,m=R.version,g=n.toneMapping),d.layers.enableAll(),w.unshift(d,d.geometry,d.material,0,0,null))}function y(w,S){w.getRGB(Bf,MS(n)),i.buffers.color.setClear(Bf.r,Bf.g,Bf.b,S,l)}function _(){f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0),d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0)}return{getClearColor:function(){return c},setClearColor:function(w,S=1){c.set(w),u=S,y(c,u)},getClearAlpha:function(){return u},setClearAlpha:function(w){u=w,y(c,u)},render:x,addToRenderList:E,dispose:_}}function OP(n,t){const e=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=m(null);let a=r,l=!1;function c(O,z,J,$,nt){let At=!1;const G=A($,J,z);a!==G&&(a=G,d(a.object)),At=g(O,$,J,nt),At&&b(O,$,J,nt),nt!==null&&t.update(nt,n.ELEMENT_ARRAY_BUFFER),(At||l)&&(l=!1,S(O,z,J,$),nt!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(nt).buffer))}function u(){return n.createVertexArray()}function d(O){return n.bindVertexArray(O)}function f(O){return n.deleteVertexArray(O)}function A(O,z,J){const $=J.wireframe===!0;let nt=i[O.id];nt===void 0&&(nt={},i[O.id]=nt);let At=nt[z.id];At===void 0&&(At={},nt[z.id]=At);let G=At[$];return G===void 0&&(G=m(u()),At[$]=G),G}function m(O){const z=[],J=[],$=[];for(let nt=0;nt<e;nt++)z[nt]=0,J[nt]=0,$[nt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:J,attributeDivisors:$,object:O,attributes:{},index:null}}function g(O,z,J,$){const nt=a.attributes,At=z.attributes;let G=0;const X=J.getAttributes();for(const tt in X)if(X[tt].location>=0){const xt=nt[tt];let V=At[tt];if(V===void 0&&(tt==="instanceMatrix"&&O.instanceMatrix&&(V=O.instanceMatrix),tt==="instanceColor"&&O.instanceColor&&(V=O.instanceColor)),xt===void 0||xt.attribute!==V||V&&xt.data!==V.data)return!0;G++}return a.attributesNum!==G||a.index!==$}function b(O,z,J,$){const nt={},At=z.attributes;let G=0;const X=J.getAttributes();for(const tt in X)if(X[tt].location>=0){let xt=At[tt];xt===void 0&&(tt==="instanceMatrix"&&O.instanceMatrix&&(xt=O.instanceMatrix),tt==="instanceColor"&&O.instanceColor&&(xt=O.instanceColor));const V={};V.attribute=xt,xt&&xt.data&&(V.data=xt.data),nt[tt]=V,G++}a.attributes=nt,a.attributesNum=G,a.index=$}function x(){const O=a.newAttributes;for(let z=0,J=O.length;z<J;z++)O[z]=0}function E(O){y(O,0)}function y(O,z){const J=a.newAttributes,$=a.enabledAttributes,nt=a.attributeDivisors;J[O]=1,$[O]===0&&(n.enableVertexAttribArray(O),$[O]=1),nt[O]!==z&&(n.vertexAttribDivisor(O,z),nt[O]=z)}function _(){const O=a.newAttributes,z=a.enabledAttributes;for(let J=0,$=z.length;J<$;J++)z[J]!==O[J]&&(n.disableVertexAttribArray(J),z[J]=0)}function w(O,z,J,$,nt,At,G){G===!0?n.vertexAttribIPointer(O,z,J,nt,At):n.vertexAttribPointer(O,z,J,$,nt,At)}function S(O,z,J,$){x();const nt=$.attributes,At=J.getAttributes(),G=z.defaultAttributeValues;for(const X in At){const tt=At[X];if(tt.location>=0){let ut=nt[X];if(ut===void 0&&(X==="instanceMatrix"&&O.instanceMatrix&&(ut=O.instanceMatrix),X==="instanceColor"&&O.instanceColor&&(ut=O.instanceColor)),ut!==void 0){const xt=ut.normalized,V=ut.itemSize,rt=t.get(ut);if(rt===void 0)continue;const yt=rt.buffer,Et=rt.type,Ot=rt.bytesPerElement,Gt=Et===n.INT||Et===n.UNSIGNED_INT||ut.gpuType===mA;if(ut.isInterleavedBufferAttribute){const Lt=ut.data,ft=Lt.stride,It=ut.offset;if(Lt.isInstancedInterleavedBuffer){for(let Ft=0;Ft<tt.locationSize;Ft++)y(tt.location+Ft,Lt.meshPerAttribute);O.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=Lt.meshPerAttribute*Lt.count)}else for(let Ft=0;Ft<tt.locationSize;Ft++)E(tt.location+Ft);n.bindBuffer(n.ARRAY_BUFFER,yt);for(let Ft=0;Ft<tt.locationSize;Ft++)w(tt.location+Ft,V/tt.locationSize,Et,xt,ft*Ot,(It+V/tt.locationSize*Ft)*Ot,Gt)}else{if(ut.isInstancedBufferAttribute){for(let Lt=0;Lt<tt.locationSize;Lt++)y(tt.location+Lt,ut.meshPerAttribute);O.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=ut.meshPerAttribute*ut.count)}else for(let Lt=0;Lt<tt.locationSize;Lt++)E(tt.location+Lt);n.bindBuffer(n.ARRAY_BUFFER,yt);for(let Lt=0;Lt<tt.locationSize;Lt++)w(tt.location+Lt,V/tt.locationSize,Et,xt,V*Ot,V/tt.locationSize*Lt*Ot,Gt)}}else if(G!==void 0){const xt=G[X];if(xt!==void 0)switch(xt.length){case 2:n.vertexAttrib2fv(tt.location,xt);break;case 3:n.vertexAttrib3fv(tt.location,xt);break;case 4:n.vertexAttrib4fv(tt.location,xt);break;default:n.vertexAttrib1fv(tt.location,xt)}}}}_()}function R(){F();for(const O in i){const z=i[O];for(const J in z){const $=z[J];for(const nt in $)f($[nt].object),delete $[nt];delete z[J]}delete i[O]}}function U(O){if(i[O.id]===void 0)return;const z=i[O.id];for(const J in z){const $=z[J];for(const nt in $)f($[nt].object),delete $[nt];delete z[J]}delete i[O.id]}function L(O){for(const z in i){const J=i[z];if(J[O.id]===void 0)continue;const $=J[O.id];for(const nt in $)f($[nt].object),delete $[nt];delete J[O.id]}}function F(){D(),l=!0,a!==r&&(a=r,d(a.object))}function D(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:c,reset:F,resetDefaultState:D,dispose:R,releaseStatesOfGeometry:U,releaseStatesOfProgram:L,initAttributes:x,enableAttribute:E,disableUnusedAttributes:_}}function NP(n,t,e){let i;function r(d){i=d}function a(d,f){n.drawArrays(i,d,f),e.update(f,i,1)}function l(d,f,A){A!==0&&(n.drawArraysInstanced(i,d,f,A),e.update(f,i,A))}function c(d,f,A){if(A===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,d,0,f,0,A);let g=0;for(let b=0;b<A;b++)g+=f[b];e.update(g,i,1)}function u(d,f,A,m){if(A===0)return;const g=t.get("WEBGL_multi_draw");if(g===null)for(let b=0;b<d.length;b++)l(d[b],f[b],m[b]);else{g.multiDrawArraysInstancedWEBGL(i,d,0,f,0,m,0,A);let b=0;for(let x=0;x<A;x++)b+=f[x]*m[x];e.update(b,i,1)}}this.setMode=r,this.render=a,this.renderInstances=l,this.renderMultiDraw=c,this.renderMultiDrawInstances=u}function PP(n,t,e,i){let r;function a(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){const L=t.get("EXT_texture_filter_anisotropic");r=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function l(L){return!(L!==vi&&i.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(L){const F=L===cc&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(L!==Wr&&i.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&L!==Ai&&!F)}function u(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=e.precision!==void 0?e.precision:"highp";const f=u(d);f!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",f,"instead."),d=f);const A=e.logarithmicDepthBuffer===!0,m=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_TEXTURE_SIZE),E=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),y=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),w=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),R=b>0,U=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:u,textureFormatReadable:l,textureTypeReadable:c,precision:d,logarithmicDepthBuffer:A,reverseDepthBuffer:m,maxTextures:g,maxVertexTextures:b,maxTextureSize:x,maxCubemapSize:E,maxAttributes:y,maxVertexUniforms:_,maxVaryings:w,maxFragmentUniforms:S,vertexTextures:R,maxSamples:U}}function FP(n){const t=this;let e=null,i=0,r=!1,a=!1;const l=new xa,c=new Ce,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(A,m){const g=A.length!==0||m||i!==0||r;return r=m,i=A.length,g},this.beginShadows=function(){a=!0,f(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(A,m){e=f(A,m,0)},this.setState=function(A,m,g){const b=A.clippingPlanes,x=A.clipIntersection,E=A.clipShadows,y=n.get(A);if(!r||b===null||b.length===0||a&&!E)a?f(null):d();else{const _=a?0:i,w=_*4;let S=y.clippingState||null;u.value=S,S=f(b,m,w,g);for(let R=0;R!==w;++R)S[R]=e[R];y.clippingState=S,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=_}};function d(){u.value!==e&&(u.value=e,u.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function f(A,m,g,b){const x=A!==null?A.length:0;let E=null;if(x!==0){if(E=u.value,b!==!0||E===null){const y=g+x*4,_=m.matrixWorldInverse;c.getNormalMatrix(_),(E===null||E.length<y)&&(E=new Float32Array(y));for(let w=0,S=g;w!==x;++w,S+=4)l.copy(A[w]).applyMatrix4(_,c),l.normal.toArray(E,S),E[S+3]=l.constant}u.value=E,u.needsUpdate=!0}return t.numPlanes=x,t.numIntersection=0,E}}function kP(n){let t=new WeakMap;function e(l,c){return c===qu?l.mapping=Ns:c===Wu&&(l.mapping=Ba),l}function i(l){if(l&&l.isTexture){const c=l.mapping;if(c===qu||c===Wu)if(t.has(l)){const u=t.get(l).texture;return e(u,l.mapping)}else{const u=l.image;if(u&&u.height>0){const d=new TS(u.height);return d.fromEquirectangularTexture(n,l),t.set(l,d),l.addEventListener("dispose",r),e(d.texture,l.mapping)}else return null}}return l}function r(l){const c=l.target;c.removeEventListener("dispose",r);const u=t.get(c);u!==void 0&&(t.delete(c),u.dispose())}function a(){t=new WeakMap}return{get:i,dispose:a}}const $l=4,aw=[.125,.215,.35,.446,.526,.582],wo=20,Y0=new WA,ow=new $t;let K0=null,J0=0,Z0=0,$0=!1;const Co=(1+Math.sqrt(5))/2,Ql=1/Co,lw=[new W(-Co,Ql,0),new W(Co,Ql,0),new W(-Ql,0,Co),new W(Ql,0,Co),new W(0,Co,-Ql),new W(0,Co,Ql),new W(-1,1,-1),new W(1,1,-1),new W(-1,1,1),new W(1,1,1)];class hy{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,r=100){K0=this._renderer.getRenderTarget(),J0=this._renderer.getActiveCubeFace(),Z0=this._renderer.getActiveMipmapLevel(),$0=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(t,i,r,a),e>0&&this._blur(a,0,0,e),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=hw(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=uw(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(K0,J0,Z0),this._renderer.xr.enabled=$0,t.scissorTest=!1,Tf(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Ns||t.mapping===Ba?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),K0=this._renderer.getRenderTarget(),J0=this._renderer.getActiveCubeFace(),Z0=this._renderer.getActiveMipmapLevel(),$0=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:Gn,minFilter:Gn,generateMipmaps:!1,type:cc,format:vi,colorSpace:Oo,depthBuffer:!1},r=cw(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=cw(t,e,i);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=QP(a)),this._blurMaterial=zP(a,t,e)}return r}_compileMaterial(t){const e=new Pn(this._lodPlanes[0],t);this._renderer.compile(e,Y0)}_sceneToCubeUV(t,e,i,r){const c=new $n(90,1,e,i),u=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],f=this._renderer,A=f.autoClear,m=f.toneMapping;f.getClearColor(ow),f.toneMapping=Rs,f.autoClear=!1;const g=new Da({name:"PMREM.Background",side:yi,depthWrite:!1,depthTest:!1}),b=new Pn(new Fo,g);let x=!1;const E=t.background;E?E.isColor&&(g.color.copy(E),t.background=null,x=!0):(g.color.copy(ow),x=!0);for(let y=0;y<6;y++){const _=y%3;_===0?(c.up.set(0,u[y],0),c.lookAt(d[y],0,0)):_===1?(c.up.set(0,0,u[y]),c.lookAt(0,d[y],0)):(c.up.set(0,u[y],0),c.lookAt(0,0,d[y]));const w=this._cubeSize;Tf(r,_*w,y>2?w:0,w,w),f.setRenderTarget(r),x&&f.render(b,c),f.render(t,c)}b.geometry.dispose(),b.material.dispose(),f.toneMapping=m,f.autoClear=A,t.background=E}_textureToCubeUV(t,e){const i=this._renderer,r=t.mapping===Ns||t.mapping===Ba;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=hw()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=uw());const a=r?this._cubemapMaterial:this._equirectMaterial,l=new Pn(this._lodPlanes[0],a),c=a.uniforms;c.envMap.value=t;const u=this._cubeSize;Tf(e,0,0,3*u,2*u),i.setRenderTarget(e),i.render(l,Y0)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;const r=this._lodPlanes.length;for(let a=1;a<r;a++){const l=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),c=lw[(r-a-1)%lw.length];this._blur(t,a-1,a,l,c)}e.autoClear=i}_blur(t,e,i,r,a){const l=this._pingPongRenderTarget;this._halfBlur(t,l,e,i,r,"latitudinal",a),this._halfBlur(l,t,i,i,r,"longitudinal",a)}_halfBlur(t,e,i,r,a,l,c){const u=this._renderer,d=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,A=new Pn(this._lodPlanes[r],d),m=d.uniforms,g=this._sizeLods[i]-1,b=isFinite(a)?Math.PI/(2*g):2*Math.PI/(2*wo-1),x=a/b,E=isFinite(a)?1+Math.floor(f*x):wo;E>wo&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${wo}`);const y=[];let _=0;for(let L=0;L<wo;++L){const F=L/x,D=Math.exp(-F*F/2);y.push(D),L===0?_+=D:L<E&&(_+=2*D)}for(let L=0;L<y.length;L++)y[L]=y[L]/_;m.envMap.value=t.texture,m.samples.value=E,m.weights.value=y,m.latitudinal.value=l==="latitudinal",c&&(m.poleAxis.value=c);const{_lodMax:w}=this;m.dTheta.value=b,m.mipInt.value=w-i;const S=this._sizeLods[r],R=3*S*(r>w-$l?r-w+$l:0),U=4*(this._cubeSize-S);Tf(e,R,U,3*S,2*S),u.setRenderTarget(e),u.render(A,Y0)}}function QP(n){const t=[],e=[],i=[];let r=n;const a=n-$l+1+aw.length;for(let l=0;l<a;l++){const c=Math.pow(2,r);e.push(c);let u=1/c;l>n-$l?u=aw[l-n+$l-1]:l===0&&(u=0),i.push(u);const d=1/(c-2),f=-d,A=1+d,m=[f,f,A,f,A,A,f,f,A,A,f,A],g=6,b=6,x=3,E=2,y=1,_=new Float32Array(x*b*g),w=new Float32Array(E*b*g),S=new Float32Array(y*b*g);for(let U=0;U<g;U++){const L=U%3*2/3-1,F=U>2?0:-1,D=[L,F,0,L+2/3,F,0,L+2/3,F+1,0,L,F,0,L+2/3,F+1,0,L,F+1,0];_.set(D,x*b*U),w.set(m,E*b*U);const O=[U,U,U,U,U,U];S.set(O,y*b*U)}const R=new Ie;R.setAttribute("position",new ln(_,x)),R.setAttribute("uv",new ln(w,E)),R.setAttribute("faceIndex",new ln(S,y)),t.push(R),r>$l&&r--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function cw(n,t,e){const i=new Sr(n,t,e);return i.texture.mapping=lc,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Tf(n,t,e,i,r){n.viewport.set(t,e,i,r),n.scissor.set(t,e,i,r)}function zP(n,t,e){const i=new Float32Array(wo),r=new W(0,1,0);return new Br({name:"SphericalGaussianBlur",defines:{n:wo,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:TE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Is,depthTest:!1,depthWrite:!1})}function uw(){return new Br({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:TE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Is,depthTest:!1,depthWrite:!1})}function hw(){return new Br({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:TE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Is,depthTest:!1,depthWrite:!1})}function TE(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function GP(n){let t=new WeakMap,e=null;function i(c){if(c&&c.isTexture){const u=c.mapping,d=u===qu||u===Wu,f=u===Ns||u===Ba;if(d||f){let A=t.get(c);const m=A!==void 0?A.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==m)return e===null&&(e=new hy(n)),A=d?e.fromEquirectangular(c,A):e.fromCubemap(c,A),A.texture.pmremVersion=c.pmremVersion,t.set(c,A),A.texture;if(A!==void 0)return A.texture;{const g=c.image;return d&&g&&g.height>0||f&&g&&r(g)?(e===null&&(e=new hy(n)),A=d?e.fromEquirectangular(c):e.fromCubemap(c),A.texture.pmremVersion=c.pmremVersion,t.set(c,A),c.addEventListener("dispose",a),A.texture):null}}}return c}function r(c){let u=0;const d=6;for(let f=0;f<d;f++)c[f]!==void 0&&u++;return u===d}function a(c){const u=c.target;u.removeEventListener("dispose",a);const d=t.get(u);d!==void 0&&(t.delete(u),d.dispose())}function l(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:l}}function HP(n){const t={};function e(i){if(t[i]!==void 0)return t[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return t[i]=r,r}return{has:function(i){return e(i)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(i){const r=e(i);return r===null&&Xl("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function VP(n,t,e,i){const r={},a=new WeakMap;function l(A){const m=A.target;m.index!==null&&t.remove(m.index);for(const b in m.attributes)t.remove(m.attributes[b]);m.removeEventListener("dispose",l),delete r[m.id];const g=a.get(m);g&&(t.remove(g),a.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,e.memory.geometries--}function c(A,m){return r[m.id]===!0||(m.addEventListener("dispose",l),r[m.id]=!0,e.memory.geometries++),m}function u(A){const m=A.attributes;for(const g in m)t.update(m[g],n.ARRAY_BUFFER)}function d(A){const m=[],g=A.index,b=A.attributes.position;let x=0;if(g!==null){const _=g.array;x=g.version;for(let w=0,S=_.length;w<S;w+=3){const R=_[w+0],U=_[w+1],L=_[w+2];m.push(R,U,U,L,L,R)}}else if(b!==void 0){const _=b.array;x=b.version;for(let w=0,S=_.length/3-1;w<S;w+=3){const R=w+0,U=w+1,L=w+2;m.push(R,U,U,L,L,R)}}else return;const E=new(xS(m)?sE:rE)(m,1);E.version=x;const y=a.get(A);y&&t.remove(y),a.set(A,E)}function f(A){const m=a.get(A);if(m){const g=A.index;g!==null&&m.version<g.version&&d(A)}else d(A);return a.get(A)}return{get:c,update:u,getWireframeAttribute:f}}function qP(n,t,e){let i;function r(m){i=m}let a,l;function c(m){a=m.type,l=m.bytesPerElement}function u(m,g){n.drawElements(i,g,a,m*l),e.update(g,i,1)}function d(m,g,b){b!==0&&(n.drawElementsInstanced(i,g,a,m*l,b),e.update(g,i,b))}function f(m,g,b){if(b===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,g,0,a,m,0,b);let E=0;for(let y=0;y<b;y++)E+=g[y];e.update(E,i,1)}function A(m,g,b,x){if(b===0)return;const E=t.get("WEBGL_multi_draw");if(E===null)for(let y=0;y<m.length;y++)d(m[y]/l,g[y],x[y]);else{E.multiDrawElementsInstancedWEBGL(i,g,0,a,m,0,x,0,b);let y=0;for(let _=0;_<b;_++)y+=g[_]*x[_];e.update(y,i,1)}}this.setMode=r,this.setIndex=c,this.render=u,this.renderInstances=d,this.renderMultiDraw=f,this.renderMultiDrawInstances=A}function WP(n){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,l,c){switch(e.calls++,l){case n.TRIANGLES:e.triangles+=c*(a/3);break;case n.LINES:e.lines+=c*(a/2);break;case n.LINE_STRIP:e.lines+=c*(a-1);break;case n.LINE_LOOP:e.lines+=c*a;break;case n.POINTS:e.points+=c*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:r,update:i}}function jP(n,t,e){const i=new WeakMap,r=new Xe;function a(l,c,u){const d=l.morphTargetInfluences,f=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,A=f!==void 0?f.length:0;let m=i.get(c);if(m===void 0||m.count!==A){let O=function(){F.dispose(),i.delete(c),c.removeEventListener("dispose",O)};var g=O;m!==void 0&&m.texture.dispose();const b=c.morphAttributes.position!==void 0,x=c.morphAttributes.normal!==void 0,E=c.morphAttributes.color!==void 0,y=c.morphAttributes.position||[],_=c.morphAttributes.normal||[],w=c.morphAttributes.color||[];let S=0;b===!0&&(S=1),x===!0&&(S=2),E===!0&&(S=3);let R=c.attributes.position.count*S,U=1;R>t.maxTextureSize&&(U=Math.ceil(R/t.maxTextureSize),R=t.maxTextureSize);const L=new Float32Array(R*U*4*A),F=new gh(L,R,U,A);F.type=Ai,F.needsUpdate=!0;const D=S*4;for(let z=0;z<A;z++){const J=y[z],$=_[z],nt=w[z],At=R*U*4*z;for(let G=0;G<J.count;G++){const X=G*D;b===!0&&(r.fromBufferAttribute(J,G),L[At+X+0]=r.x,L[At+X+1]=r.y,L[At+X+2]=r.z,L[At+X+3]=0),x===!0&&(r.fromBufferAttribute($,G),L[At+X+4]=r.x,L[At+X+5]=r.y,L[At+X+6]=r.z,L[At+X+7]=0),E===!0&&(r.fromBufferAttribute(nt,G),L[At+X+8]=r.x,L[At+X+9]=r.y,L[At+X+10]=r.z,L[At+X+11]=nt.itemSize===4?r.w:1)}}m={count:A,texture:F,size:new Ut(R,U)},i.set(c,m),c.addEventListener("dispose",O)}if(l.isInstancedMesh===!0&&l.morphTexture!==null)u.getUniforms().setValue(n,"morphTexture",l.morphTexture,e);else{let b=0;for(let E=0;E<d.length;E++)b+=d[E];const x=c.morphTargetsRelative?1:1-b;u.getUniforms().setValue(n,"morphTargetBaseInfluence",x),u.getUniforms().setValue(n,"morphTargetInfluences",d)}u.getUniforms().setValue(n,"morphTargetsTexture",m.texture,e),u.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}return{update:a}}class XP{constructor(t,e,i){if(this.renderer=t,this.DEFAULT_NUMVIEWS=2,this.maxNumViews=0,this.gl=i,this.extensions=e,this.available=this.extensions.has("OCULUS_multiview"),this.available){const a=this.extensions.get("OCULUS_multiview");this.maxNumViews=this.gl.getParameter(a.MAX_VIEWS_OVR),this.mat4=[],this.mat3=[],this.cameraArray=[];for(var r=0;r<this.maxNumViews;r++)this.mat4[r]=new ve,this.mat3[r]=new Ce}}getCameraArray(t){return t.isArrayCamera?t.cameras:(this.cameraArray[0]=t,this.cameraArray)}updateCameraProjectionMatricesUniform(t,e){for(var i=this.getCameraArray(t),r=0;r<i.length;r++)this.mat4[r].copy(i[r].projectionMatrix);e.setValue(this.gl,"projectionMatrices",this.mat4)}updateCameraViewMatricesUniform(t,e){for(var i=this.getCameraArray(t),r=0;r<i.length;r++)this.mat4[r].copy(i[r].matrixWorldInverse);e.setValue(this.gl,"viewMatrices",this.mat4)}updateObjectMatricesUniforms(t,e,i){for(var r=this.getCameraArray(e),a=0;a<r.length;a++)this.mat4[a].multiplyMatrices(r[a].matrixWorldInverse,t.matrixWorld),this.mat3[a].getNormalMatrix(this.mat4[a]);i.setValue(this.gl,"modelViewMatrices",this.mat4),i.setValue(this.gl,"normalMatrices",this.mat3)}}function YP(n,t,e,i){let r=new WeakMap;function a(u){const d=i.render.frame,f=u.geometry,A=t.get(u,f);if(r.get(A)!==d&&(t.update(A),r.set(A,d)),u.isInstancedMesh&&(u.hasEventListener("dispose",c)===!1&&u.addEventListener("dispose",c),r.get(u)!==d&&(e.update(u.instanceMatrix,n.ARRAY_BUFFER),u.instanceColor!==null&&e.update(u.instanceColor,n.ARRAY_BUFFER),r.set(u,d))),u.isSkinnedMesh){const m=u.skeleton;r.get(m)!==d&&(m.update(),r.set(m,d))}return A}function l(){r=new WeakMap}function c(u){const d=u.target;d.removeEventListener("dispose",c),e.remove(d.instanceMatrix),d.instanceColor!==null&&e.remove(d.instanceColor)}return{update:a,dispose:l}}const BB=new Cn,dw=new cE(1,1),TB=new gh,IB=new _A,RB=new vh,fw=[],pw=[],Aw=new Float32Array(16),mw=new Float32Array(9),gw=new Float32Array(4);function fc(n,t,e){const i=n[0];if(i<=0||i>0)return n;const r=t*e;let a=fw[r];if(a===void 0&&(a=new Float32Array(r),fw[r]=a),t!==0){i.toArray(a,0);for(let l=1,c=0;l!==t;++l)c+=e,n[l].toArray(a,c)}return a}function Hn(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function Vn(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function XA(n,t){let e=pw[t];e===void 0&&(e=new Int32Array(t),pw[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function KP(n,t){const e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function JP(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Hn(e,t))return;n.uniform2fv(this.addr,t),Vn(e,t)}}function ZP(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Hn(e,t))return;n.uniform3fv(this.addr,t),Vn(e,t)}}function $P(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Hn(e,t))return;n.uniform4fv(this.addr,t),Vn(e,t)}}function tF(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(Hn(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),Vn(e,t)}else{if(Hn(e,i))return;gw.set(i),n.uniformMatrix2fv(this.addr,!1,gw),Vn(e,i)}}function eF(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(Hn(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),Vn(e,t)}else{if(Hn(e,i))return;mw.set(i),n.uniformMatrix3fv(this.addr,!1,mw),Vn(e,i)}}function nF(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(Hn(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),Vn(e,t)}else{if(Hn(e,i))return;Aw.set(i),n.uniformMatrix4fv(this.addr,!1,Aw),Vn(e,i)}}function iF(n,t){const e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function rF(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Hn(e,t))return;n.uniform2iv(this.addr,t),Vn(e,t)}}function sF(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Hn(e,t))return;n.uniform3iv(this.addr,t),Vn(e,t)}}function aF(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Hn(e,t))return;n.uniform4iv(this.addr,t),Vn(e,t)}}function oF(n,t){const e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function lF(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Hn(e,t))return;n.uniform2uiv(this.addr,t),Vn(e,t)}}function cF(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Hn(e,t))return;n.uniform3uiv(this.addr,t),Vn(e,t)}}function uF(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Hn(e,t))return;n.uniform4uiv(this.addr,t),Vn(e,t)}}function hF(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let a;this.type===n.SAMPLER_2D_SHADOW?(dw.compareFunction=nE,a=dw):a=BB,e.setTexture2D(t||a,r)}function dF(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture3D(t||IB,r)}function fF(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTextureCube(t||RB,r)}function pF(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture2DArray(t||TB,r)}function AF(n){switch(n){case 5126:return KP;case 35664:return JP;case 35665:return ZP;case 35666:return $P;case 35674:return tF;case 35675:return eF;case 35676:return nF;case 5124:case 35670:return iF;case 35667:case 35671:return rF;case 35668:case 35672:return sF;case 35669:case 35673:return aF;case 5125:return oF;case 36294:return lF;case 36295:return cF;case 36296:return uF;case 35678:case 36198:case 36298:case 36306:case 35682:return hF;case 35679:case 36299:case 36307:return dF;case 35680:case 36300:case 36308:case 36293:return fF;case 36289:case 36303:case 36311:case 36292:return pF}}function mF(n,t){n.uniform1fv(this.addr,t)}function gF(n,t){const e=fc(t,this.size,2);n.uniform2fv(this.addr,e)}function vF(n,t){const e=fc(t,this.size,3);n.uniform3fv(this.addr,e)}function yF(n,t){const e=fc(t,this.size,4);n.uniform4fv(this.addr,e)}function EF(n,t){const e=fc(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function bF(n,t){const e=fc(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function xF(n,t){const e=fc(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function CF(n,t){n.uniform1iv(this.addr,t)}function _F(n,t){n.uniform2iv(this.addr,t)}function wF(n,t){n.uniform3iv(this.addr,t)}function MF(n,t){n.uniform4iv(this.addr,t)}function SF(n,t){n.uniform1uiv(this.addr,t)}function BF(n,t){n.uniform2uiv(this.addr,t)}function TF(n,t){n.uniform3uiv(this.addr,t)}function IF(n,t){n.uniform4uiv(this.addr,t)}function RF(n,t,e){const i=this.cache,r=t.length,a=XA(e,r);Hn(i,a)||(n.uniform1iv(this.addr,a),Vn(i,a));for(let l=0;l!==r;++l)e.setTexture2D(t[l]||BB,a[l])}function LF(n,t,e){const i=this.cache,r=t.length,a=XA(e,r);Hn(i,a)||(n.uniform1iv(this.addr,a),Vn(i,a));for(let l=0;l!==r;++l)e.setTexture3D(t[l]||IB,a[l])}function DF(n,t,e){const i=this.cache,r=t.length,a=XA(e,r);Hn(i,a)||(n.uniform1iv(this.addr,a),Vn(i,a));for(let l=0;l!==r;++l)e.setTextureCube(t[l]||RB,a[l])}function UF(n,t,e){const i=this.cache,r=t.length,a=XA(e,r);Hn(i,a)||(n.uniform1iv(this.addr,a),Vn(i,a));for(let l=0;l!==r;++l)e.setTexture2DArray(t[l]||TB,a[l])}function OF(n){switch(n){case 5126:return mF;case 35664:return gF;case 35665:return vF;case 35666:return yF;case 35674:return EF;case 35675:return bF;case 35676:return xF;case 5124:case 35670:return CF;case 35667:case 35671:return _F;case 35668:case 35672:return wF;case 35669:case 35673:return MF;case 5125:return SF;case 36294:return BF;case 36295:return TF;case 36296:return IF;case 35678:case 36198:case 36298:case 36306:case 35682:return RF;case 35679:case 36299:case 36307:return LF;case 35680:case 36300:case 36308:case 36293:return DF;case 36289:case 36303:case 36311:case 36292:return UF}}class NF{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=AF(e.type)}}class PF{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=OF(e.type)}}class FF{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){const r=this.seq;for(let a=0,l=r.length;a!==l;++a){const c=r[a];c.setValue(t,e[c.id],i)}}}const tv=/(\w+)(\])?(\[|\.)?/g;function vw(n,t){n.seq.push(t),n.map[t.id]=t}function kF(n,t,e){const i=n.name,r=i.length;for(tv.lastIndex=0;;){const a=tv.exec(i),l=tv.lastIndex;let c=a[1];const u=a[2]==="]",d=a[3];if(u&&(c=c|0),d===void 0||d==="["&&l+2===r){vw(e,d===void 0?new NF(c,n,t):new PF(c,n,t));break}else{let A=e.map[c];A===void 0&&(A=new FF(c),vw(e,A)),e=A}}}class sp{constructor(t,e){this.seq=[],this.map={};const i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const a=t.getActiveUniform(e,r),l=t.getUniformLocation(e,a.name);kF(a,l,this)}}setValue(t,e,i,r){const a=this.map[e];a!==void 0&&a.setValue(t,i,r)}setOptional(t,e,i){const r=e[i];r!==void 0&&this.setValue(t,i,r)}static upload(t,e,i,r){for(let a=0,l=e.length;a!==l;++a){const c=e[a],u=i[c.id];u.needsUpdate!==!1&&c.setValue(t,u.value,r)}}static seqWithValue(t,e){const i=[];for(let r=0,a=t.length;r!==a;++r){const l=t[r];l.id in e&&i.push(l)}return i}}function yw(n,t,e){const i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}const QF=37297;let zF=0;function GF(n,t){const e=n.split(`
`),i=[],r=Math.max(t-6,0),a=Math.min(t+6,e.length);for(let l=r;l<a;l++){const c=l+1;i.push(`${c===t?">":" "} ${c}: ${e[l]}`)}return i.join(`
`)}const Ew=new Ce;function HF(n){Ve._getMatrix(Ew,Ve.workingColorSpace,n);const t=`mat3( ${Ew.elements.map(e=>e.toFixed(4))} )`;switch(Ve.getTransfer(n)){case Ju:return[t,"LinearTransferOETF"];case rn:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[t,"LinearTransferOETF"]}}function bw(n,t,e){const i=n.getShaderParameter(t,n.COMPILE_STATUS),r=n.getShaderInfoLog(t).trim();if(i&&r==="")return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const l=parseInt(a[1]);return e.toUpperCase()+`

`+r+`

`+GF(n.getShaderSource(t),l)}else return r}function VF(n,t){const e=HF(t);return[`vec4 ${n}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function qF(n,t){let e;switch(t){case eS:e="Linear";break;case nS:e="Reinhard";break;case iS:e="Cineon";break;case rS:e="ACESFilmic";break;case aS:e="AgX";break;case oS:e="Neutral";break;case sS:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const If=new W;function WF(){Ve.getLuminanceCoefficients(If);const n=If.x.toFixed(4),t=If.y.toFixed(4),e=If.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function jF(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Ru).join(`
`)}function XF(n){const t=[];for(const e in n){const i=n[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function YF(n,t){const e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const a=n.getActiveAttrib(t,r),l=a.name;let c=1;a.type===n.FLOAT_MAT2&&(c=2),a.type===n.FLOAT_MAT3&&(c=3),a.type===n.FLOAT_MAT4&&(c=4),e[l]={type:a.type,location:n.getAttribLocation(t,l),locationSize:c}}return e}function Ru(n){return n!==""}function xw(n,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Cw(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const KF=/^[ \t]*#include +<([\w\d./]+)>/gm;function dy(n){return n.replace(KF,ZF)}const JF=new Map;function ZF(n,t){let e=Te[t];if(e===void 0){const i=JF.get(t);if(i!==void 0)e=Te[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i);else throw new Error("Can not resolve #include <"+t+">")}return dy(e)}const $F=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _w(n){return n.replace($F,tk)}function tk(n,t,e,i){let r="";for(let a=parseInt(t);a<parseInt(e);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function ww(n){let t=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function ek(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Vy?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===UM?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===kr&&(t="SHADOWMAP_TYPE_VSM"),t}function nk(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ns:case Ba:t="ENVMAP_TYPE_CUBE";break;case lc:t="ENVMAP_TYPE_CUBE_UV";break}return t}function ik(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Ba:t="ENVMAP_MODE_REFRACTION";break}return t}function rk(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Ah:t="ENVMAP_BLENDING_MULTIPLY";break;case $M:t="ENVMAP_BLENDING_MIX";break;case tS:t="ENVMAP_BLENDING_ADD";break}return t}function sk(n){const t=n.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:i,maxMip:e}}function ak(n,t,e,i){const r=n.getContext(),a=e.defines;let l=e.vertexShader,c=e.fragmentShader;const u=ek(e),d=nk(e),f=ik(e),A=rk(e),m=sk(e),g=jF(e),b=XF(a),x=r.createProgram();let E,y,_=e.glslVersion?"#version "+e.glslVersion+`
`:"";const w=e.numMultiviewViews;e.isRawShaderMaterial?(E=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(Ru).join(`
`),E.length>0&&(E+=`
`),y=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(Ru).join(`
`),y.length>0&&(y+=`
`)):(E=[ww(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+f:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ru).join(`
`),y=[ww(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.envMap?"#define "+f:"",e.envMap?"#define "+A:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Rs?"#define TONE_MAPPING":"",e.toneMapping!==Rs?Te.tonemapping_pars_fragment:"",e.toneMapping!==Rs?qF("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Te.colorspace_pars_fragment,VF("linearToOutputTexel",e.outputColorSpace),WF(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(Ru).join(`
`)),l=dy(l),l=xw(l,e),l=Cw(l,e),c=dy(c),c=xw(c,e),c=Cw(c,e),l=_w(l),c=_w(c),e.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,E=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,y=["#define varying in",e.glslVersion===iy?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===iy?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y,w>0&&(E=["#extension GL_OVR_multiview : require","layout(num_views = "+w+") in;","#define VIEW_ID gl_ViewID_OVR"].join(`
`)+`
`+E,E=E.replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join(`
`),["uniform mat4 modelViewMatrices["+w+"];","uniform mat4 projectionMatrices["+w+"];","uniform mat4 viewMatrices["+w+"];","uniform mat3 normalMatrices["+w+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join(`
`)),y=["#extension GL_OVR_multiview : require","#define VIEW_ID gl_ViewID_OVR"].join(`
`)+`
`+y,y=y.replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+w+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join(`
`))));const S=_+E+l,R=_+y+c,U=yw(r,r.VERTEX_SHADER,S),L=yw(r,r.FRAGMENT_SHADER,R);r.attachShader(x,U),r.attachShader(x,L),e.index0AttributeName!==void 0?r.bindAttribLocation(x,0,e.index0AttributeName):e.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);function F(J){if(n.debug.checkShaderErrors){const $=r.getProgramInfoLog(x).trim(),nt=r.getShaderInfoLog(U).trim(),At=r.getShaderInfoLog(L).trim();let G=!0,X=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(G=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,x,U,L);else{const tt=bw(r,U,"vertex"),ut=bw(r,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Material Name: `+J.name+`
Material Type: `+J.type+`

Program Info Log: `+$+`
`+tt+`
`+ut)}else $!==""?console.warn("THREE.WebGLProgram: Program Info Log:",$):(nt===""||At==="")&&(X=!1);X&&(J.diagnostics={runnable:G,programLog:$,vertexShader:{log:nt,prefix:E},fragmentShader:{log:At,prefix:y}})}r.deleteShader(U),r.deleteShader(L),D=new sp(r,x),O=YF(r,x)}let D;this.getUniforms=function(){return D===void 0&&F(this),D};let O;this.getAttributes=function(){return O===void 0&&F(this),O};let z=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return z===!1&&(z=r.getProgramParameter(x,QF)),z},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=zF++,this.cacheKey=t,this.usedTimes=1,this.program=x,this.vertexShader=U,this.fragmentShader=L,this.numMultiviewViews=w,this}let ok=0;class lk{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,i=t.fragmentShader,r=this._getShaderStage(e),a=this._getShaderStage(i),l=this._getShaderCacheForMaterial(t);return l.has(r)===!1&&(l.add(r),r.usedTimes++),l.has(a)===!1&&(l.add(a),a.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){const e=this.shaderCache;let i=e.get(t);return i===void 0&&(i=new ck(t),e.set(t,i)),i}}class ck{constructor(t){this.id=ok++,this.code=t,this.usedTimes=0}}function uk(n,t,e,i,r,a,l){const c=new wA,u=new lk,d=new Set,f=[],A=r.logarithmicDepthBuffer,m=r.vertexTextures;let g=r.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(D){return d.add(D),D===0?"uv":`uv${D}`}function E(D,O,z,J,$){const nt=J.fog,At=$.geometry,G=D.isMeshStandardMaterial?J.environment:null,X=(D.isMeshStandardMaterial?e:t).get(D.envMap||G),tt=X&&X.mapping===lc?X.image.height:null,ut=b[D.type];D.precision!==null&&(g=r.getMaxPrecision(D.precision),g!==D.precision&&console.warn("THREE.WebGLProgram.getParameters:",D.precision,"not supported, using",g,"instead."));const xt=At.morphAttributes.position||At.morphAttributes.normal||At.morphAttributes.color,V=xt!==void 0?xt.length:0;let rt=0;At.morphAttributes.position!==void 0&&(rt=1),At.morphAttributes.normal!==void 0&&(rt=2),At.morphAttributes.color!==void 0&&(rt=3);let yt,Et,Ot,Gt;if(ut){const De=_r[ut];yt=De.vertexShader,Et=De.fragmentShader}else yt=D.vertexShader,Et=D.fragmentShader,u.update(D),Ot=u.getVertexShaderID(D),Gt=u.getFragmentShaderID(D);const Lt=n.getRenderTarget(),ft=n.state.buffers.depth.getReversed(),It=Lt&&Lt.isWebGLMultiviewRenderTarget?Lt.numViews:0,Ft=$.isInstancedMesh===!0,Jt=$.isBatchedMesh===!0,Ct=!!D.map,Rt=!!D.matcap,Tt=!!X,j=!!D.aoMap,zt=!!D.lightMap,Vt=!!D.bumpMap,B=!!D.normalMap,T=!!D.displacementMap,P=!!D.emissiveMap,q=!!D.metalnessMap,Y=!!D.roughnessMap,lt=D.anisotropy>0,gt=D.clearcoat>0,ne=D.dispersion>0,H=D.iridescence>0,N=D.sheen>0,it=D.transmission>0,bt=lt&&!!D.anisotropyMap,Dt=gt&&!!D.clearcoatMap,Mt=gt&&!!D.clearcoatNormalMap,te=gt&&!!D.clearcoatRoughnessMap,Pt=H&&!!D.iridescenceMap,Ht=H&&!!D.iridescenceThicknessMap,pe=N&&!!D.sheenColorMap,Qt=N&&!!D.sheenRoughnessMap,ue=!!D.specularMap,Le=!!D.specularColorMap,Z=!!D.specularIntensityMap,wt=it&&!!D.transmissionMap,kt=it&&!!D.thicknessMap,jt=!!D.gradientMap,qt=!!D.alphaMap,Zt=D.alphaTest>0,Ae=!!D.alphaHash,Xt=!!D.extensions;let Yt=Rs;D.toneMapped&&(Lt===null||Lt.isXRRenderTarget===!0)&&(Yt=n.toneMapping);const se={shaderID:ut,shaderType:D.type,shaderName:D.name,vertexShader:yt,fragmentShader:Et,defines:D.defines,customVertexShaderID:Ot,customFragmentShaderID:Gt,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:g,batching:Jt,batchingColor:Jt&&$._colorsTexture!==null,instancing:Ft,instancingColor:Ft&&$.instanceColor!==null,instancingMorph:Ft&&$.morphTexture!==null,supportsVertexTextures:m,numMultiviewViews:It,outputColorSpace:Lt===null?n.outputColorSpace:Lt.isXRRenderTarget===!0?Lt.texture.colorSpace:Oo,alphaToCoverage:!!D.alphaToCoverage,map:Ct,matcap:Rt,envMap:Tt,envMapMode:Tt&&X.mapping,envMapCubeUVHeight:tt,aoMap:j,lightMap:zt,bumpMap:Vt,normalMap:B,displacementMap:m&&T,emissiveMap:P,normalMapObjectSpace:B&&D.normalMapType===pS,normalMapTangentSpace:B&&D.normalMapType===La,metalnessMap:q,roughnessMap:Y,anisotropy:lt,anisotropyMap:bt,clearcoat:gt,clearcoatMap:Dt,clearcoatNormalMap:Mt,clearcoatRoughnessMap:te,dispersion:ne,iridescence:H,iridescenceMap:Pt,iridescenceThicknessMap:Ht,sheen:N,sheenColorMap:pe,sheenRoughnessMap:Qt,specularMap:ue,specularColorMap:Le,specularIntensityMap:Z,transmission:it,transmissionMap:wt,thicknessMap:kt,gradientMap:jt,opaque:D.transparent===!1&&D.blending===Io&&D.alphaToCoverage===!1,alphaMap:qt,alphaTest:Zt,alphaHash:Ae,combine:D.combine,mapUv:Ct&&x(D.map.channel),aoMapUv:j&&x(D.aoMap.channel),lightMapUv:zt&&x(D.lightMap.channel),bumpMapUv:Vt&&x(D.bumpMap.channel),normalMapUv:B&&x(D.normalMap.channel),displacementMapUv:T&&x(D.displacementMap.channel),emissiveMapUv:P&&x(D.emissiveMap.channel),metalnessMapUv:q&&x(D.metalnessMap.channel),roughnessMapUv:Y&&x(D.roughnessMap.channel),anisotropyMapUv:bt&&x(D.anisotropyMap.channel),clearcoatMapUv:Dt&&x(D.clearcoatMap.channel),clearcoatNormalMapUv:Mt&&x(D.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&x(D.clearcoatRoughnessMap.channel),iridescenceMapUv:Pt&&x(D.iridescenceMap.channel),iridescenceThicknessMapUv:Ht&&x(D.iridescenceThicknessMap.channel),sheenColorMapUv:pe&&x(D.sheenColorMap.channel),sheenRoughnessMapUv:Qt&&x(D.sheenRoughnessMap.channel),specularMapUv:ue&&x(D.specularMap.channel),specularColorMapUv:Le&&x(D.specularColorMap.channel),specularIntensityMapUv:Z&&x(D.specularIntensityMap.channel),transmissionMapUv:wt&&x(D.transmissionMap.channel),thicknessMapUv:kt&&x(D.thicknessMap.channel),alphaMapUv:qt&&x(D.alphaMap.channel),vertexTangents:!!At.attributes.tangent&&(B||lt),vertexColors:D.vertexColors,vertexAlphas:D.vertexColors===!0&&!!At.attributes.color&&At.attributes.color.itemSize===4,pointsUvs:$.isPoints===!0&&!!At.attributes.uv&&(Ct||qt),fog:!!nt,useFog:D.fog===!0,fogExp2:!!nt&&nt.isFogExp2,flatShading:D.flatShading===!0,sizeAttenuation:D.sizeAttenuation===!0,logarithmicDepthBuffer:A,reverseDepthBuffer:ft,skinning:$.isSkinnedMesh===!0,morphTargets:At.morphAttributes.position!==void 0,morphNormals:At.morphAttributes.normal!==void 0,morphColors:At.morphAttributes.color!==void 0,morphTargetsCount:V,morphTextureStride:rt,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:D.dithering,shadowMapEnabled:n.shadowMap.enabled&&z.length>0,shadowMapType:n.shadowMap.type,toneMapping:Yt,decodeVideoTexture:Ct&&D.map.isVideoTexture===!0&&Ve.getTransfer(D.map.colorSpace)===rn,decodeVideoTextureEmissive:P&&D.emissiveMap.isVideoTexture===!0&&Ve.getTransfer(D.emissiveMap.colorSpace)===rn,premultipliedAlpha:D.premultipliedAlpha,doubleSided:D.side===zr,flipSided:D.side===yi,useDepthPacking:D.depthPacking>=0,depthPacking:D.depthPacking||0,index0AttributeName:D.index0AttributeName,extensionClipCullDistance:Xt&&D.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Xt&&D.extensions.multiDraw===!0||Jt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:D.customProgramCacheKey()};return se.vertexUv1s=d.has(1),se.vertexUv2s=d.has(2),se.vertexUv3s=d.has(3),d.clear(),se}function y(D){const O=[];if(D.shaderID?O.push(D.shaderID):(O.push(D.customVertexShaderID),O.push(D.customFragmentShaderID)),D.defines!==void 0)for(const z in D.defines)O.push(z),O.push(D.defines[z]);return D.isRawShaderMaterial===!1&&(_(O,D),w(O,D),O.push(n.outputColorSpace)),O.push(D.customProgramCacheKey),O.join()}function _(D,O){D.push(O.precision),D.push(O.outputColorSpace),D.push(O.envMapMode),D.push(O.envMapCubeUVHeight),D.push(O.mapUv),D.push(O.alphaMapUv),D.push(O.lightMapUv),D.push(O.aoMapUv),D.push(O.bumpMapUv),D.push(O.normalMapUv),D.push(O.displacementMapUv),D.push(O.emissiveMapUv),D.push(O.metalnessMapUv),D.push(O.roughnessMapUv),D.push(O.anisotropyMapUv),D.push(O.clearcoatMapUv),D.push(O.clearcoatNormalMapUv),D.push(O.clearcoatRoughnessMapUv),D.push(O.iridescenceMapUv),D.push(O.iridescenceThicknessMapUv),D.push(O.sheenColorMapUv),D.push(O.sheenRoughnessMapUv),D.push(O.specularMapUv),D.push(O.specularColorMapUv),D.push(O.specularIntensityMapUv),D.push(O.transmissionMapUv),D.push(O.thicknessMapUv),D.push(O.combine),D.push(O.fogExp2),D.push(O.sizeAttenuation),D.push(O.morphTargetsCount),D.push(O.morphAttributeCount),D.push(O.numDirLights),D.push(O.numPointLights),D.push(O.numSpotLights),D.push(O.numSpotLightMaps),D.push(O.numHemiLights),D.push(O.numRectAreaLights),D.push(O.numDirLightShadows),D.push(O.numPointLightShadows),D.push(O.numSpotLightShadows),D.push(O.numSpotLightShadowsWithMaps),D.push(O.numLightProbes),D.push(O.shadowMapType),D.push(O.toneMapping),D.push(O.numClippingPlanes),D.push(O.numClipIntersection),D.push(O.depthPacking)}function w(D,O){c.disableAll(),O.supportsVertexTextures&&c.enable(0),O.instancing&&c.enable(1),O.instancingColor&&c.enable(2),O.instancingMorph&&c.enable(3),O.matcap&&c.enable(4),O.envMap&&c.enable(5),O.normalMapObjectSpace&&c.enable(6),O.normalMapTangentSpace&&c.enable(7),O.clearcoat&&c.enable(8),O.iridescence&&c.enable(9),O.alphaTest&&c.enable(10),O.vertexColors&&c.enable(11),O.vertexAlphas&&c.enable(12),O.vertexUv1s&&c.enable(13),O.vertexUv2s&&c.enable(14),O.vertexUv3s&&c.enable(15),O.vertexTangents&&c.enable(16),O.anisotropy&&c.enable(17),O.alphaHash&&c.enable(18),O.batching&&c.enable(19),O.dispersion&&c.enable(20),O.batchingColor&&c.enable(21),D.push(c.mask),c.disableAll(),O.fog&&c.enable(0),O.useFog&&c.enable(1),O.flatShading&&c.enable(2),O.logarithmicDepthBuffer&&c.enable(3),O.reverseDepthBuffer&&c.enable(4),O.skinning&&c.enable(5),O.morphTargets&&c.enable(6),O.morphNormals&&c.enable(7),O.morphColors&&c.enable(8),O.premultipliedAlpha&&c.enable(9),O.shadowMapEnabled&&c.enable(10),O.doubleSided&&c.enable(11),O.flipSided&&c.enable(12),O.useDepthPacking&&c.enable(13),O.dithering&&c.enable(14),O.transmission&&c.enable(15),O.sheen&&c.enable(16),O.opaque&&c.enable(17),O.pointsUvs&&c.enable(18),O.decodeVideoTexture&&c.enable(19),O.decodeVideoTextureEmissive&&c.enable(20),O.alphaToCoverage&&c.enable(21),O.numMultiviewViews&&c.enable(21),D.push(c.mask)}function S(D){const O=b[D.type];let z;if(O){const J=_r[O];z=SS.clone(J.uniforms)}else z=D.uniforms;return z}function R(D,O){let z;for(let J=0,$=f.length;J<$;J++){const nt=f[J];if(nt.cacheKey===O){z=nt,++z.usedTimes;break}}return z===void 0&&(z=new ak(n,O,D,a),f.push(z)),z}function U(D){if(--D.usedTimes===0){const O=f.indexOf(D);f[O]=f[f.length-1],f.pop(),D.destroy()}}function L(D){u.remove(D)}function F(){u.dispose()}return{getParameters:E,getProgramCacheKey:y,getUniforms:S,acquireProgram:R,releaseProgram:U,releaseShaderCache:L,programs:f,dispose:F}}function hk(){let n=new WeakMap;function t(l){return n.has(l)}function e(l){let c=n.get(l);return c===void 0&&(c={},n.set(l,c)),c}function i(l){n.delete(l)}function r(l,c,u){n.get(l)[c]=u}function a(){n=new WeakMap}return{has:t,get:e,remove:i,update:r,dispose:a}}function dk(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function Mw(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function Sw(){const n=[];let t=0;const e=[],i=[],r=[];function a(){t=0,e.length=0,i.length=0,r.length=0}function l(A,m,g,b,x,E){let y=n[t];return y===void 0?(y={id:A.id,object:A,geometry:m,material:g,groupOrder:b,renderOrder:A.renderOrder,z:x,group:E},n[t]=y):(y.id=A.id,y.object=A,y.geometry=m,y.material=g,y.groupOrder=b,y.renderOrder=A.renderOrder,y.z=x,y.group=E),t++,y}function c(A,m,g,b,x,E){const y=l(A,m,g,b,x,E);g.transmission>0?i.push(y):g.transparent===!0?r.push(y):e.push(y)}function u(A,m,g,b,x,E){const y=l(A,m,g,b,x,E);g.transmission>0?i.unshift(y):g.transparent===!0?r.unshift(y):e.unshift(y)}function d(A,m){e.length>1&&e.sort(A||dk),i.length>1&&i.sort(m||Mw),r.length>1&&r.sort(m||Mw)}function f(){for(let A=t,m=n.length;A<m;A++){const g=n[A];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:e,transmissive:i,transparent:r,init:a,push:c,unshift:u,finish:f,sort:d}}function fk(){let n=new WeakMap;function t(i,r){const a=n.get(i);let l;return a===void 0?(l=new Sw,n.set(i,[l])):r>=a.length?(l=new Sw,a.push(l)):l=a[r],l}function e(){n=new WeakMap}return{get:t,dispose:e}}function pk(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new W,color:new $t};break;case"SpotLight":e={position:new W,direction:new W,color:new $t,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new W,color:new $t,distance:0,decay:0};break;case"HemisphereLight":e={direction:new W,skyColor:new $t,groundColor:new $t};break;case"RectAreaLight":e={color:new $t,position:new W,halfWidth:new W,halfHeight:new W};break}return n[t.id]=e,e}}}function Ak(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ut};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ut};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ut,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}let mk=0;function gk(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function vk(n){const t=new pk,e=Ak(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)i.probe.push(new W);const r=new W,a=new ve,l=new ve;function c(d){let f=0,A=0,m=0;for(let D=0;D<9;D++)i.probe[D].set(0,0,0);let g=0,b=0,x=0,E=0,y=0,_=0,w=0,S=0,R=0,U=0,L=0;d.sort(gk);for(let D=0,O=d.length;D<O;D++){const z=d[D],J=z.color,$=z.intensity,nt=z.distance,At=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)f+=J.r*$,A+=J.g*$,m+=J.b*$;else if(z.isLightProbe){for(let G=0;G<9;G++)i.probe[G].addScaledVector(z.sh.coefficients[G],$);L++}else if(z.isDirectionalLight){const G=t.get(z);if(G.color.copy(z.color).multiplyScalar(z.intensity),z.castShadow){const X=z.shadow,tt=e.get(z);tt.shadowIntensity=X.intensity,tt.shadowBias=X.bias,tt.shadowNormalBias=X.normalBias,tt.shadowRadius=X.radius,tt.shadowMapSize=X.mapSize,i.directionalShadow[g]=tt,i.directionalShadowMap[g]=At,i.directionalShadowMatrix[g]=z.shadow.matrix,_++}i.directional[g]=G,g++}else if(z.isSpotLight){const G=t.get(z);G.position.setFromMatrixPosition(z.matrixWorld),G.color.copy(J).multiplyScalar($),G.distance=nt,G.coneCos=Math.cos(z.angle),G.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),G.decay=z.decay,i.spot[x]=G;const X=z.shadow;if(z.map&&(i.spotLightMap[R]=z.map,R++,X.updateMatrices(z),z.castShadow&&U++),i.spotLightMatrix[x]=X.matrix,z.castShadow){const tt=e.get(z);tt.shadowIntensity=X.intensity,tt.shadowBias=X.bias,tt.shadowNormalBias=X.normalBias,tt.shadowRadius=X.radius,tt.shadowMapSize=X.mapSize,i.spotShadow[x]=tt,i.spotShadowMap[x]=At,S++}x++}else if(z.isRectAreaLight){const G=t.get(z);G.color.copy(J).multiplyScalar($),G.halfWidth.set(z.width*.5,0,0),G.halfHeight.set(0,z.height*.5,0),i.rectArea[E]=G,E++}else if(z.isPointLight){const G=t.get(z);if(G.color.copy(z.color).multiplyScalar(z.intensity),G.distance=z.distance,G.decay=z.decay,z.castShadow){const X=z.shadow,tt=e.get(z);tt.shadowIntensity=X.intensity,tt.shadowBias=X.bias,tt.shadowNormalBias=X.normalBias,tt.shadowRadius=X.radius,tt.shadowMapSize=X.mapSize,tt.shadowCameraNear=X.camera.near,tt.shadowCameraFar=X.camera.far,i.pointShadow[b]=tt,i.pointShadowMap[b]=At,i.pointShadowMatrix[b]=z.shadow.matrix,w++}i.point[b]=G,b++}else if(z.isHemisphereLight){const G=t.get(z);G.skyColor.copy(z.color).multiplyScalar($),G.groundColor.copy(z.groundColor).multiplyScalar($),i.hemi[y]=G,y++}}E>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Kt.LTC_FLOAT_1,i.rectAreaLTC2=Kt.LTC_FLOAT_2):(i.rectAreaLTC1=Kt.LTC_HALF_1,i.rectAreaLTC2=Kt.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=A,i.ambient[2]=m;const F=i.hash;(F.directionalLength!==g||F.pointLength!==b||F.spotLength!==x||F.rectAreaLength!==E||F.hemiLength!==y||F.numDirectionalShadows!==_||F.numPointShadows!==w||F.numSpotShadows!==S||F.numSpotMaps!==R||F.numLightProbes!==L)&&(i.directional.length=g,i.spot.length=x,i.rectArea.length=E,i.point.length=b,i.hemi.length=y,i.directionalShadow.length=_,i.directionalShadowMap.length=_,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=S,i.spotShadowMap.length=S,i.directionalShadowMatrix.length=_,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=S+R-U,i.spotLightMap.length=R,i.numSpotLightShadowsWithMaps=U,i.numLightProbes=L,F.directionalLength=g,F.pointLength=b,F.spotLength=x,F.rectAreaLength=E,F.hemiLength=y,F.numDirectionalShadows=_,F.numPointShadows=w,F.numSpotShadows=S,F.numSpotMaps=R,F.numLightProbes=L,i.version=mk++)}function u(d,f){let A=0,m=0,g=0,b=0,x=0;const E=f.matrixWorldInverse;for(let y=0,_=d.length;y<_;y++){const w=d[y];if(w.isDirectionalLight){const S=i.directional[A];S.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(E),A++}else if(w.isSpotLight){const S=i.spot[g];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(E),S.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(E),g++}else if(w.isRectAreaLight){const S=i.rectArea[b];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(E),l.identity(),a.copy(w.matrixWorld),a.premultiply(E),l.extractRotation(a),S.halfWidth.set(w.width*.5,0,0),S.halfHeight.set(0,w.height*.5,0),S.halfWidth.applyMatrix4(l),S.halfHeight.applyMatrix4(l),b++}else if(w.isPointLight){const S=i.point[m];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(E),m++}else if(w.isHemisphereLight){const S=i.hemi[x];S.direction.setFromMatrixPosition(w.matrixWorld),S.direction.transformDirection(E),x++}}}return{setup:c,setupView:u,state:i}}function Bw(n){const t=new vk(n),e=[],i=[];function r(f){d.camera=f,e.length=0,i.length=0}function a(f){e.push(f)}function l(f){i.push(f)}function c(){t.setup(e)}function u(f){t.setupView(e,f)}const d={lightsArray:e,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:r,state:d,setupLights:c,setupLightsView:u,pushLight:a,pushShadow:l}}function yk(n){let t=new WeakMap;function e(r,a=0){const l=t.get(r);let c;return l===void 0?(c=new Bw(n),t.set(r,[c])):a>=l.length?(c=new Bw(n),l.push(c)):c=l[a],c}function i(){t=new WeakMap}return{get:e,dispose:i}}const Ek=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,bk=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function xk(n,t,e){let i=new yh;const r=new Ut,a=new Ut,l=new Xe,c=new gE({depthPacking:fS}),u=new vE,d={},f=e.maxTextureSize,A={[Os]:yi,[yi]:Os,[zr]:zr},m=new Br({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ut},radius:{value:4}},vertexShader:Ek,fragmentShader:bk}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const b=new Ie;b.setAttribute("position",new ln(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Pn(b,m),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Vy;let y=this.type;this.render=function(U,L,F){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||U.length===0)return;const D=n.getRenderTarget(),O=n.getActiveCubeFace(),z=n.getActiveMipmapLevel(),J=n.state;J.setBlending(Is),J.buffers.color.setClear(1,1,1,1),J.buffers.depth.setTest(!0),J.setScissorTest(!1);const $=y!==kr&&this.type===kr,nt=y===kr&&this.type!==kr;for(let At=0,G=U.length;At<G;At++){const X=U[At],tt=X.shadow;if(tt===void 0){console.warn("THREE.WebGLShadowMap:",X,"has no shadow.");continue}if(tt.autoUpdate===!1&&tt.needsUpdate===!1)continue;r.copy(tt.mapSize);const ut=tt.getFrameExtents();if(r.multiply(ut),a.copy(tt.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(a.x=Math.floor(f/ut.x),r.x=a.x*ut.x,tt.mapSize.x=a.x),r.y>f&&(a.y=Math.floor(f/ut.y),r.y=a.y*ut.y,tt.mapSize.y=a.y)),tt.map===null||$===!0||nt===!0){const V=this.type!==kr?{minFilter:ni,magFilter:ni}:{};tt.map!==null&&tt.map.dispose(),tt.map=new Sr(r.x,r.y,V),tt.map.texture.name=X.name+".shadowMap",tt.camera.updateProjectionMatrix()}n.setRenderTarget(tt.map),n.clear();const xt=tt.getViewportCount();for(let V=0;V<xt;V++){const rt=tt.getViewport(V);l.set(a.x*rt.x,a.y*rt.y,a.x*rt.z,a.y*rt.w),J.viewport(l),tt.updateMatrices(X,V),i=tt.getFrustum(),S(L,F,tt.camera,X,this.type)}tt.isPointLightShadow!==!0&&this.type===kr&&_(tt,F),tt.needsUpdate=!1}y=this.type,E.needsUpdate=!1,n.setRenderTarget(D,O,z)};function _(U,L){const F=t.update(x);m.defines.VSM_SAMPLES!==U.blurSamples&&(m.defines.VSM_SAMPLES=U.blurSamples,g.defines.VSM_SAMPLES=U.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),U.mapPass===null&&(U.mapPass=new Sr(r.x,r.y)),m.uniforms.shadow_pass.value=U.map.texture,m.uniforms.resolution.value=U.mapSize,m.uniforms.radius.value=U.radius,n.setRenderTarget(U.mapPass),n.clear(),n.renderBufferDirect(L,null,F,m,x,null),g.uniforms.shadow_pass.value=U.mapPass.texture,g.uniforms.resolution.value=U.mapSize,g.uniforms.radius.value=U.radius,n.setRenderTarget(U.map),n.clear(),n.renderBufferDirect(L,null,F,g,x,null)}function w(U,L,F,D){let O=null;const z=F.isPointLight===!0?U.customDistanceMaterial:U.customDepthMaterial;if(z!==void 0)O=z;else if(O=F.isPointLight===!0?u:c,n.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0){const J=O.uuid,$=L.uuid;let nt=d[J];nt===void 0&&(nt={},d[J]=nt);let At=nt[$];At===void 0&&(At=O.clone(),nt[$]=At,L.addEventListener("dispose",R)),O=At}if(O.visible=L.visible,O.wireframe=L.wireframe,D===kr?O.side=L.shadowSide!==null?L.shadowSide:L.side:O.side=L.shadowSide!==null?L.shadowSide:A[L.side],O.alphaMap=L.alphaMap,O.alphaTest=L.alphaTest,O.map=L.map,O.clipShadows=L.clipShadows,O.clippingPlanes=L.clippingPlanes,O.clipIntersection=L.clipIntersection,O.displacementMap=L.displacementMap,O.displacementScale=L.displacementScale,O.displacementBias=L.displacementBias,O.wireframeLinewidth=L.wireframeLinewidth,O.linewidth=L.linewidth,F.isPointLight===!0&&O.isMeshDistanceMaterial===!0){const J=n.properties.get(O);J.light=F}return O}function S(U,L,F,D,O){if(U.visible===!1)return;if(U.layers.test(L.layers)&&(U.isMesh||U.isLine||U.isPoints)&&(U.castShadow||U.receiveShadow&&O===kr)&&(!U.frustumCulled||i.intersectsObject(U))){U.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,U.matrixWorld);const $=t.update(U),nt=U.material;if(Array.isArray(nt)){const At=$.groups;for(let G=0,X=At.length;G<X;G++){const tt=At[G],ut=nt[tt.materialIndex];if(ut&&ut.visible){const xt=w(U,ut,D,O);U.onBeforeShadow(n,U,L,F,$,xt,tt),n.renderBufferDirect(F,null,$,xt,U,tt),U.onAfterShadow(n,U,L,F,$,xt,tt)}}}else if(nt.visible){const At=w(U,nt,D,O);U.onBeforeShadow(n,U,L,F,$,At,null),n.renderBufferDirect(F,null,$,At,U,null),U.onAfterShadow(n,U,L,F,$,At,null)}}const J=U.children;for(let $=0,nt=J.length;$<nt;$++)S(J[$],L,F,D,O)}function R(U){U.target.removeEventListener("dispose",R);for(const F in d){const D=d[F],O=U.target.uuid;O in D&&(D[O].dispose(),delete D[O])}}}const Ck={[Ap]:mp,[gp]:Ep,[vp]:bp,[Uo]:yp,[mp]:Ap,[Ep]:gp,[bp]:vp,[yp]:Uo};function _k(n,t){function e(){let Z=!1;const wt=new Xe;let kt=null;const jt=new Xe(0,0,0,0);return{setMask:function(qt){kt!==qt&&!Z&&(n.colorMask(qt,qt,qt,qt),kt=qt)},setLocked:function(qt){Z=qt},setClear:function(qt,Zt,Ae,Xt,Yt){Yt===!0&&(qt*=Xt,Zt*=Xt,Ae*=Xt),wt.set(qt,Zt,Ae,Xt),jt.equals(wt)===!1&&(n.clearColor(qt,Zt,Ae,Xt),jt.copy(wt))},reset:function(){Z=!1,kt=null,jt.set(-1,0,0,0)}}}function i(){let Z=!1,wt=!1,kt=null,jt=null,qt=null;return{setReversed:function(Zt){if(wt!==Zt){const Ae=t.get("EXT_clip_control");wt?Ae.clipControlEXT(Ae.LOWER_LEFT_EXT,Ae.ZERO_TO_ONE_EXT):Ae.clipControlEXT(Ae.LOWER_LEFT_EXT,Ae.NEGATIVE_ONE_TO_ONE_EXT);const Xt=qt;qt=null,this.setClear(Xt)}wt=Zt},getReversed:function(){return wt},setTest:function(Zt){Zt?Lt(n.DEPTH_TEST):ft(n.DEPTH_TEST)},setMask:function(Zt){kt!==Zt&&!Z&&(n.depthMask(Zt),kt=Zt)},setFunc:function(Zt){if(wt&&(Zt=Ck[Zt]),jt!==Zt){switch(Zt){case Ap:n.depthFunc(n.NEVER);break;case mp:n.depthFunc(n.ALWAYS);break;case gp:n.depthFunc(n.LESS);break;case Uo:n.depthFunc(n.LEQUAL);break;case vp:n.depthFunc(n.EQUAL);break;case yp:n.depthFunc(n.GEQUAL);break;case Ep:n.depthFunc(n.GREATER);break;case bp:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}jt=Zt}},setLocked:function(Zt){Z=Zt},setClear:function(Zt){qt!==Zt&&(wt&&(Zt=1-Zt),n.clearDepth(Zt),qt=Zt)},reset:function(){Z=!1,kt=null,jt=null,qt=null,wt=!1}}}function r(){let Z=!1,wt=null,kt=null,jt=null,qt=null,Zt=null,Ae=null,Xt=null,Yt=null;return{setTest:function(se){Z||(se?Lt(n.STENCIL_TEST):ft(n.STENCIL_TEST))},setMask:function(se){wt!==se&&!Z&&(n.stencilMask(se),wt=se)},setFunc:function(se,De,_n){(kt!==se||jt!==De||qt!==_n)&&(n.stencilFunc(se,De,_n),kt=se,jt=De,qt=_n)},setOp:function(se,De,_n){(Zt!==se||Ae!==De||Xt!==_n)&&(n.stencilOp(se,De,_n),Zt=se,Ae=De,Xt=_n)},setLocked:function(se){Z=se},setClear:function(se){Yt!==se&&(n.clearStencil(se),Yt=se)},reset:function(){Z=!1,wt=null,kt=null,jt=null,qt=null,Zt=null,Ae=null,Xt=null,Yt=null}}}const a=new e,l=new i,c=new r,u=new WeakMap,d=new WeakMap;let f={},A={},m=new WeakMap,g=[],b=null,x=!1,E=null,y=null,_=null,w=null,S=null,R=null,U=null,L=new $t(0,0,0),F=0,D=!1,O=null,z=null,J=null,$=null,nt=null;const At=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,X=0;const tt=n.getParameter(n.VERSION);tt.indexOf("WebGL")!==-1?(X=parseFloat(/^WebGL (\d)/.exec(tt)[1]),G=X>=1):tt.indexOf("OpenGL ES")!==-1&&(X=parseFloat(/^OpenGL ES (\d)/.exec(tt)[1]),G=X>=2);let ut=null,xt={};const V=n.getParameter(n.SCISSOR_BOX),rt=n.getParameter(n.VIEWPORT),yt=new Xe().fromArray(V),Et=new Xe().fromArray(rt);function Ot(Z,wt,kt,jt){const qt=new Uint8Array(4),Zt=n.createTexture();n.bindTexture(Z,Zt),n.texParameteri(Z,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Z,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ae=0;Ae<kt;Ae++)Z===n.TEXTURE_3D||Z===n.TEXTURE_2D_ARRAY?n.texImage3D(wt,0,n.RGBA,1,1,jt,0,n.RGBA,n.UNSIGNED_BYTE,qt):n.texImage2D(wt+Ae,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,qt);return Zt}const Gt={};Gt[n.TEXTURE_2D]=Ot(n.TEXTURE_2D,n.TEXTURE_2D,1),Gt[n.TEXTURE_CUBE_MAP]=Ot(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Gt[n.TEXTURE_2D_ARRAY]=Ot(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Gt[n.TEXTURE_3D]=Ot(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Lt(n.DEPTH_TEST),l.setFunc(Uo),zt(!1),Vt(Jv),Lt(n.CULL_FACE),Tt(Is);function Lt(Z){f[Z]!==!0&&(n.enable(Z),f[Z]=!0)}function ft(Z){f[Z]!==!1&&(n.disable(Z),f[Z]=!1)}function It(Z,wt){return A[Z]!==wt?(n.bindFramebuffer(Z,wt),A[Z]=wt,Z===n.DRAW_FRAMEBUFFER&&(A[n.FRAMEBUFFER]=wt),Z===n.FRAMEBUFFER&&(A[n.DRAW_FRAMEBUFFER]=wt),!0):!1}function Ft(Z,wt){let kt=g,jt=!1;if(Z){kt=m.get(wt),kt===void 0&&(kt=[],m.set(wt,kt));const qt=Z.textures;if(kt.length!==qt.length||kt[0]!==n.COLOR_ATTACHMENT0){for(let Zt=0,Ae=qt.length;Zt<Ae;Zt++)kt[Zt]=n.COLOR_ATTACHMENT0+Zt;kt.length=qt.length,jt=!0}}else kt[0]!==n.BACK&&(kt[0]=n.BACK,jt=!0);jt&&n.drawBuffers(kt)}function Jt(Z){return b!==Z?(n.useProgram(Z),b=Z,!0):!1}const Ct={[_a]:n.FUNC_ADD,[NM]:n.FUNC_SUBTRACT,[PM]:n.FUNC_REVERSE_SUBTRACT};Ct[FM]=n.MIN,Ct[kM]=n.MAX;const Rt={[QM]:n.ZERO,[zM]:n.ONE,[GM]:n.SRC_COLOR,[fp]:n.SRC_ALPHA,[XM]:n.SRC_ALPHA_SATURATE,[WM]:n.DST_COLOR,[VM]:n.DST_ALPHA,[HM]:n.ONE_MINUS_SRC_COLOR,[pp]:n.ONE_MINUS_SRC_ALPHA,[jM]:n.ONE_MINUS_DST_COLOR,[qM]:n.ONE_MINUS_DST_ALPHA,[YM]:n.CONSTANT_COLOR,[KM]:n.ONE_MINUS_CONSTANT_COLOR,[JM]:n.CONSTANT_ALPHA,[ZM]:n.ONE_MINUS_CONSTANT_ALPHA};function Tt(Z,wt,kt,jt,qt,Zt,Ae,Xt,Yt,se){if(Z===Is){x===!0&&(ft(n.BLEND),x=!1);return}if(x===!1&&(Lt(n.BLEND),x=!0),Z!==OM){if(Z!==E||se!==D){if((y!==_a||S!==_a)&&(n.blendEquation(n.FUNC_ADD),y=_a,S=_a),se)switch(Z){case Io:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Zv:n.blendFunc(n.ONE,n.ONE);break;case $v:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case ty:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}else switch(Z){case Io:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Zv:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case $v:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case ty:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}_=null,w=null,R=null,U=null,L.set(0,0,0),F=0,E=Z,D=se}return}qt=qt||wt,Zt=Zt||kt,Ae=Ae||jt,(wt!==y||qt!==S)&&(n.blendEquationSeparate(Ct[wt],Ct[qt]),y=wt,S=qt),(kt!==_||jt!==w||Zt!==R||Ae!==U)&&(n.blendFuncSeparate(Rt[kt],Rt[jt],Rt[Zt],Rt[Ae]),_=kt,w=jt,R=Zt,U=Ae),(Xt.equals(L)===!1||Yt!==F)&&(n.blendColor(Xt.r,Xt.g,Xt.b,Yt),L.copy(Xt),F=Yt),E=Z,D=!1}function j(Z,wt){Z.side===zr?ft(n.CULL_FACE):Lt(n.CULL_FACE);let kt=Z.side===yi;wt&&(kt=!kt),zt(kt),Z.blending===Io&&Z.transparent===!1?Tt(Is):Tt(Z.blending,Z.blendEquation,Z.blendSrc,Z.blendDst,Z.blendEquationAlpha,Z.blendSrcAlpha,Z.blendDstAlpha,Z.blendColor,Z.blendAlpha,Z.premultipliedAlpha),l.setFunc(Z.depthFunc),l.setTest(Z.depthTest),l.setMask(Z.depthWrite),a.setMask(Z.colorWrite);const jt=Z.stencilWrite;c.setTest(jt),jt&&(c.setMask(Z.stencilWriteMask),c.setFunc(Z.stencilFunc,Z.stencilRef,Z.stencilFuncMask),c.setOp(Z.stencilFail,Z.stencilZFail,Z.stencilZPass)),T(Z.polygonOffset,Z.polygonOffsetFactor,Z.polygonOffsetUnits),Z.alphaToCoverage===!0?Lt(n.SAMPLE_ALPHA_TO_COVERAGE):ft(n.SAMPLE_ALPHA_TO_COVERAGE)}function zt(Z){O!==Z&&(Z?n.frontFace(n.CW):n.frontFace(n.CCW),O=Z)}function Vt(Z){Z!==LM?(Lt(n.CULL_FACE),Z!==z&&(Z===Jv?n.cullFace(n.BACK):Z===DM?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ft(n.CULL_FACE),z=Z}function B(Z){Z!==J&&(G&&n.lineWidth(Z),J=Z)}function T(Z,wt,kt){Z?(Lt(n.POLYGON_OFFSET_FILL),($!==wt||nt!==kt)&&(n.polygonOffset(wt,kt),$=wt,nt=kt)):ft(n.POLYGON_OFFSET_FILL)}function P(Z){Z?Lt(n.SCISSOR_TEST):ft(n.SCISSOR_TEST)}function q(Z){Z===void 0&&(Z=n.TEXTURE0+At-1),ut!==Z&&(n.activeTexture(Z),ut=Z)}function Y(Z,wt,kt){kt===void 0&&(ut===null?kt=n.TEXTURE0+At-1:kt=ut);let jt=xt[kt];jt===void 0&&(jt={type:void 0,texture:void 0},xt[kt]=jt),(jt.type!==Z||jt.texture!==wt)&&(ut!==kt&&(n.activeTexture(kt),ut=kt),n.bindTexture(Z,wt||Gt[Z]),jt.type=Z,jt.texture=wt)}function lt(){const Z=xt[ut];Z!==void 0&&Z.type!==void 0&&(n.bindTexture(Z.type,null),Z.type=void 0,Z.texture=void 0)}function gt(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function ne(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function H(){try{n.texSubImage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function N(){try{n.texSubImage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function it(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function bt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Dt(){try{n.texStorage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Mt(){try{n.texStorage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function te(){try{n.texImage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Pt(){try{n.texImage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ht(Z){yt.equals(Z)===!1&&(n.scissor(Z.x,Z.y,Z.z,Z.w),yt.copy(Z))}function pe(Z){Et.equals(Z)===!1&&(n.viewport(Z.x,Z.y,Z.z,Z.w),Et.copy(Z))}function Qt(Z,wt){let kt=d.get(wt);kt===void 0&&(kt=new WeakMap,d.set(wt,kt));let jt=kt.get(Z);jt===void 0&&(jt=n.getUniformBlockIndex(wt,Z.name),kt.set(Z,jt))}function ue(Z,wt){const jt=d.get(wt).get(Z);u.get(wt)!==jt&&(n.uniformBlockBinding(wt,jt,Z.__bindingPointIndex),u.set(wt,jt))}function Le(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),l.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},ut=null,xt={},A={},m=new WeakMap,g=[],b=null,x=!1,E=null,y=null,_=null,w=null,S=null,R=null,U=null,L=new $t(0,0,0),F=0,D=!1,O=null,z=null,J=null,$=null,nt=null,yt.set(0,0,n.canvas.width,n.canvas.height),Et.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:Lt,disable:ft,bindFramebuffer:It,drawBuffers:Ft,useProgram:Jt,setBlending:Tt,setMaterial:j,setFlipSided:zt,setCullFace:Vt,setLineWidth:B,setPolygonOffset:T,setScissorTest:P,activeTexture:q,bindTexture:Y,unbindTexture:lt,compressedTexImage2D:gt,compressedTexImage3D:ne,texImage2D:te,texImage3D:Pt,updateUBOMapping:Qt,uniformBlockBinding:ue,texStorage2D:Dt,texStorage3D:Mt,texSubImage2D:H,texSubImage3D:N,compressedTexSubImage2D:it,compressedTexSubImage3D:bt,scissor:Ht,viewport:pe,reset:Le}}function wk(n,t,e,i,r,a,l){const c=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=t.has("OCULUS_multiview")?t.get("OCULUS_multiview"):null,f=new Ut,A=new WeakMap;let m;const g=new WeakMap;let b=[],x=!1,E=!1;try{E=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(H,N){return E?new OffscreenCanvas(H,N):th("canvas")}function _(H,N,it){let bt=1;const Dt=ne(H);if((Dt.width>it||Dt.height>it)&&(bt=it/Math.max(Dt.width,Dt.height)),bt<1)if(typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&H instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&H instanceof ImageBitmap||typeof VideoFrame<"u"&&H instanceof VideoFrame){const Mt=Math.floor(bt*Dt.width),te=Math.floor(bt*Dt.height);m===void 0&&(m=y(Mt,te));const Pt=N?y(Mt,te):m;return Pt.width=Mt,Pt.height=te,Pt.getContext("2d").drawImage(H,0,0,Mt,te),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Dt.width+"x"+Dt.height+") to ("+Mt+"x"+te+")."),Pt}else return"data"in H&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Dt.width+"x"+Dt.height+")."),H;return H}function w(H){return H.generateMipmaps}function S(H){n.generateMipmap(H)}function R(H){return H.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:H.isWebGL3DRenderTarget?n.TEXTURE_3D:H.isWebGLArrayRenderTarget||H.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function U(H,N,it,bt,Dt=!1){if(H!==null){if(n[H]!==void 0)return n[H];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+H+"'")}let Mt=N;if(N===n.RED&&(it===n.FLOAT&&(Mt=n.R32F),it===n.HALF_FLOAT&&(Mt=n.R16F),it===n.UNSIGNED_BYTE&&(Mt=n.R8)),N===n.RED_INTEGER&&(it===n.UNSIGNED_BYTE&&(Mt=n.R8UI),it===n.UNSIGNED_SHORT&&(Mt=n.R16UI),it===n.UNSIGNED_INT&&(Mt=n.R32UI),it===n.BYTE&&(Mt=n.R8I),it===n.SHORT&&(Mt=n.R16I),it===n.INT&&(Mt=n.R32I)),N===n.RG&&(it===n.FLOAT&&(Mt=n.RG32F),it===n.HALF_FLOAT&&(Mt=n.RG16F),it===n.UNSIGNED_BYTE&&(Mt=n.RG8)),N===n.RG_INTEGER&&(it===n.UNSIGNED_BYTE&&(Mt=n.RG8UI),it===n.UNSIGNED_SHORT&&(Mt=n.RG16UI),it===n.UNSIGNED_INT&&(Mt=n.RG32UI),it===n.BYTE&&(Mt=n.RG8I),it===n.SHORT&&(Mt=n.RG16I),it===n.INT&&(Mt=n.RG32I)),N===n.RGB_INTEGER&&(it===n.UNSIGNED_BYTE&&(Mt=n.RGB8UI),it===n.UNSIGNED_SHORT&&(Mt=n.RGB16UI),it===n.UNSIGNED_INT&&(Mt=n.RGB32UI),it===n.BYTE&&(Mt=n.RGB8I),it===n.SHORT&&(Mt=n.RGB16I),it===n.INT&&(Mt=n.RGB32I)),N===n.RGBA_INTEGER&&(it===n.UNSIGNED_BYTE&&(Mt=n.RGBA8UI),it===n.UNSIGNED_SHORT&&(Mt=n.RGBA16UI),it===n.UNSIGNED_INT&&(Mt=n.RGBA32UI),it===n.BYTE&&(Mt=n.RGBA8I),it===n.SHORT&&(Mt=n.RGBA16I),it===n.INT&&(Mt=n.RGBA32I)),N===n.RGB&&it===n.UNSIGNED_INT_5_9_9_9_REV&&(Mt=n.RGB9_E5),N===n.RGBA){const te=Dt?Ju:Ve.getTransfer(bt);it===n.FLOAT&&(Mt=n.RGBA32F),it===n.HALF_FLOAT&&(Mt=n.RGBA16F),it===n.UNSIGNED_BYTE&&(Mt=te===rn?n.SRGB8_ALPHA8:n.RGBA8),it===n.UNSIGNED_SHORT_4_4_4_4&&(Mt=n.RGBA4),it===n.UNSIGNED_SHORT_5_5_5_1&&(Mt=n.RGB5_A1)}return(Mt===n.R16F||Mt===n.R32F||Mt===n.RG16F||Mt===n.RG32F||Mt===n.RGBA16F||Mt===n.RGBA32F)&&t.get("EXT_color_buffer_float"),Mt}function L(H,N){let it;return H?N===null||N===Ps||N===wa?it=n.DEPTH24_STENCIL8:N===Ai?it=n.DEPTH32F_STENCIL8:N===ic&&(it=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):N===null||N===Ps||N===wa?it=n.DEPTH_COMPONENT24:N===Ai?it=n.DEPTH_COMPONENT32F:N===ic&&(it=n.DEPTH_COMPONENT16),it}function F(H,N){return w(H)===!0||H.isFramebufferTexture&&H.minFilter!==ni&&H.minFilter!==Gn?Math.log2(Math.max(N.width,N.height))+1:H.mipmaps!==void 0&&H.mipmaps.length>0?H.mipmaps.length:H.isCompressedTexture&&Array.isArray(H.image)?N.mipmaps.length:1}function D(H){const N=H.target;N.removeEventListener("dispose",D),z(N),N.isVideoTexture&&A.delete(N)}function O(H){const N=H.target;N.removeEventListener("dispose",O),$(N)}function z(H){const N=i.get(H);if(N.__webglInit===void 0)return;const it=H.source,bt=g.get(it);if(bt){const Dt=bt[N.__cacheKey];Dt.usedTimes--,Dt.usedTimes===0&&J(H),Object.keys(bt).length===0&&g.delete(it)}i.remove(H)}function J(H){const N=i.get(H);n.deleteTexture(N.__webglTexture);const it=H.source,bt=g.get(it);delete bt[N.__cacheKey],l.memory.textures--}function $(H){const N=i.get(H);if(H.depthTexture&&(H.depthTexture.dispose(),i.remove(H.depthTexture)),H.isWebGLCubeRenderTarget)for(let bt=0;bt<6;bt++){if(Array.isArray(N.__webglFramebuffer[bt]))for(let Dt=0;Dt<N.__webglFramebuffer[bt].length;Dt++)n.deleteFramebuffer(N.__webglFramebuffer[bt][Dt]);else n.deleteFramebuffer(N.__webglFramebuffer[bt]);N.__webglDepthbuffer&&n.deleteRenderbuffer(N.__webglDepthbuffer[bt])}else{if(Array.isArray(N.__webglFramebuffer))for(let bt=0;bt<N.__webglFramebuffer.length;bt++)n.deleteFramebuffer(N.__webglFramebuffer[bt]);else n.deleteFramebuffer(N.__webglFramebuffer);if(N.__webglDepthbuffer&&n.deleteRenderbuffer(N.__webglDepthbuffer),N.__webglMultisampledFramebuffer&&n.deleteFramebuffer(N.__webglMultisampledFramebuffer),N.__webglColorRenderbuffer)for(let bt=0;bt<N.__webglColorRenderbuffer.length;bt++)N.__webglColorRenderbuffer[bt]&&n.deleteRenderbuffer(N.__webglColorRenderbuffer[bt]);N.__webglDepthRenderbuffer&&n.deleteRenderbuffer(N.__webglDepthRenderbuffer)}const it=H.textures;for(let bt=0,Dt=it.length;bt<Dt;bt++){const Mt=i.get(it[bt]);Mt.__webglTexture&&(n.deleteTexture(Mt.__webglTexture),l.memory.textures--),i.remove(it[bt])}i.remove(H)}let nt=0;function At(){nt=0}function G(){const H=nt;return H>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+H+" texture units while this GPU supports only "+r.maxTextures),nt+=1,H}function X(H){const N=[];return N.push(H.wrapS),N.push(H.wrapT),N.push(H.wrapR||0),N.push(H.magFilter),N.push(H.minFilter),N.push(H.anisotropy),N.push(H.internalFormat),N.push(H.format),N.push(H.type),N.push(H.generateMipmaps),N.push(H.premultiplyAlpha),N.push(H.flipY),N.push(H.unpackAlignment),N.push(H.colorSpace),N.join()}function tt(H,N){const it=i.get(H);if(H.isVideoTexture&&lt(H),H.isRenderTargetTexture===!1&&H.version>0&&it.__version!==H.version){const bt=H.image;if(bt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(bt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else if(It(it,H,N))return}e.bindTexture(n.TEXTURE_2D,it.__webglTexture,n.TEXTURE0+N)}function ut(H,N){const it=i.get(H);if(H.version>0&&it.__version!==H.version){It(it,H,N);return}e.bindTexture(n.TEXTURE_2D_ARRAY,it.__webglTexture,n.TEXTURE0+N)}function xt(H,N){const it=i.get(H);if(H.version>0&&it.__version!==H.version){It(it,H,N);return}e.bindTexture(n.TEXTURE_3D,it.__webglTexture,n.TEXTURE0+N)}function V(H,N){const it=i.get(H);if(H.version>0&&it.__version!==H.version){Ft(it,H,N);return}e.bindTexture(n.TEXTURE_CUBE_MAP,it.__webglTexture,n.TEXTURE0+N)}const rt={[ju]:n.REPEAT,[lr]:n.CLAMP_TO_EDGE,[Xu]:n.MIRRORED_REPEAT},yt={[ni]:n.NEAREST,[qy]:n.NEAREST_MIPMAP_NEAREST,[Yl]:n.NEAREST_MIPMAP_LINEAR,[Gn]:n.LINEAR,[Uu]:n.LINEAR_MIPMAP_NEAREST,[Gr]:n.LINEAR_MIPMAP_LINEAR},Et={[AS]:n.NEVER,[bS]:n.ALWAYS,[mS]:n.LESS,[nE]:n.LEQUAL,[gS]:n.EQUAL,[ES]:n.GEQUAL,[vS]:n.GREATER,[yS]:n.NOTEQUAL};function Ot(H,N){if(N.type===Ai&&t.has("OES_texture_float_linear")===!1&&(N.magFilter===Gn||N.magFilter===Uu||N.magFilter===Yl||N.magFilter===Gr||N.minFilter===Gn||N.minFilter===Uu||N.minFilter===Yl||N.minFilter===Gr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(H,n.TEXTURE_WRAP_S,rt[N.wrapS]),n.texParameteri(H,n.TEXTURE_WRAP_T,rt[N.wrapT]),(H===n.TEXTURE_3D||H===n.TEXTURE_2D_ARRAY)&&n.texParameteri(H,n.TEXTURE_WRAP_R,rt[N.wrapR]),n.texParameteri(H,n.TEXTURE_MAG_FILTER,yt[N.magFilter]),n.texParameteri(H,n.TEXTURE_MIN_FILTER,yt[N.minFilter]),N.compareFunction&&(n.texParameteri(H,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(H,n.TEXTURE_COMPARE_FUNC,Et[N.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(N.magFilter===ni||N.minFilter!==Yl&&N.minFilter!==Gr||N.type===Ai&&t.has("OES_texture_float_linear")===!1)return;if(N.anisotropy>1||i.get(N).__currentAnisotropy){const it=t.get("EXT_texture_filter_anisotropic");n.texParameterf(H,it.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(N.anisotropy,r.getMaxAnisotropy())),i.get(N).__currentAnisotropy=N.anisotropy}}}function Gt(H,N){let it=!1;H.__webglInit===void 0&&(H.__webglInit=!0,N.addEventListener("dispose",D));const bt=N.source;let Dt=g.get(bt);Dt===void 0&&(Dt={},g.set(bt,Dt));const Mt=X(N);if(Mt!==H.__cacheKey){Dt[Mt]===void 0&&(Dt[Mt]={texture:n.createTexture(),usedTimes:0},l.memory.textures++,it=!0),Dt[Mt].usedTimes++;const te=Dt[H.__cacheKey];te!==void 0&&(Dt[H.__cacheKey].usedTimes--,te.usedTimes===0&&J(N)),H.__cacheKey=Mt,H.__webglTexture=Dt[Mt].texture}return it}function Lt(H){x=H}function ft(){const H=x;x=!1;for(const N of b)It(N.textureProperties,N.texture,N.slot),N.texture.isPendingDeferredUpload=!1;b=[],x=H}function It(H,N,it){if(x)return N.isPendingDeferredUpload||(N.isPendingDeferredUpload=!0,b.push({textureProperties:H,texture:N,slot:it})),!1;let bt=n.TEXTURE_2D;(N.isDataArrayTexture||N.isCompressedArrayTexture)&&(bt=n.TEXTURE_2D_ARRAY),N.isData3DTexture&&(bt=n.TEXTURE_3D);const Dt=Gt(H,N),Mt=N.source;e.bindTexture(bt,H.__webglTexture,n.TEXTURE0+it);const te=i.get(Mt);if(Mt.version!==te.__version||Dt===!0){e.activeTexture(n.TEXTURE0+it);const Pt=Ve.getPrimaries(Ve.workingColorSpace),Ht=N.colorSpace===_s?null:Ve.getPrimaries(N.colorSpace),pe=N.colorSpace===_s||Pt===Ht?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,N.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,N.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,pe);let Qt=_(N.image,!1,r.maxTextureSize);Qt=gt(N,Qt);const ue=a.convert(N.format,N.colorSpace),Le=a.convert(N.type);let Z=U(N.internalFormat,ue,Le,N.colorSpace,N.isVideoTexture);Ot(bt,N);let wt;const kt=N.mipmaps,jt=N.isVideoTexture!==!0,qt=te.__version===void 0||Dt===!0,Zt=Mt.dataReady,Ae=F(N,Qt);if(N.isDepthTexture)Z=L(N.format===Sa,N.type),qt&&(jt?e.texStorage2D(n.TEXTURE_2D,1,Z,Qt.width,Qt.height):e.texImage2D(n.TEXTURE_2D,0,Z,Qt.width,Qt.height,0,ue,Le,null));else if(N.isDataTexture)if(kt.length>0){jt&&qt&&e.texStorage2D(n.TEXTURE_2D,Ae,Z,kt[0].width,kt[0].height);for(let Xt=0,Yt=kt.length;Xt<Yt;Xt++)wt=kt[Xt],jt?Zt&&e.texSubImage2D(n.TEXTURE_2D,Xt,0,0,wt.width,wt.height,ue,Le,wt.data):e.texImage2D(n.TEXTURE_2D,Xt,Z,wt.width,wt.height,0,ue,Le,wt.data);N.generateMipmaps=!1}else jt?(qt&&e.texStorage2D(n.TEXTURE_2D,Ae,Z,Qt.width,Qt.height),Zt&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,Qt.width,Qt.height,ue,Le,Qt.data)):e.texImage2D(n.TEXTURE_2D,0,Z,Qt.width,Qt.height,0,ue,Le,Qt.data);else if(N.isCompressedTexture)if(N.isCompressedArrayTexture){jt&&qt&&e.texStorage3D(n.TEXTURE_2D_ARRAY,Ae,Z,kt[0].width,kt[0].height,Qt.depth);for(let Xt=0,Yt=kt.length;Xt<Yt;Xt++)if(wt=kt[Xt],N.format!==vi)if(ue!==null)if(jt){if(Zt)if(N.layerUpdates.size>0){const se=uy(wt.width,wt.height,N.format,N.type);for(const De of N.layerUpdates){const _n=wt.data.subarray(De*se/wt.data.BYTES_PER_ELEMENT,(De+1)*se/wt.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Xt,0,0,De,wt.width,wt.height,1,ue,_n)}N.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Xt,0,0,0,wt.width,wt.height,Qt.depth,ue,wt.data)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Xt,Z,wt.width,wt.height,Qt.depth,0,wt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else jt?Zt&&e.texSubImage3D(n.TEXTURE_2D_ARRAY,Xt,0,0,0,wt.width,wt.height,Qt.depth,ue,Le,wt.data):e.texImage3D(n.TEXTURE_2D_ARRAY,Xt,Z,wt.width,wt.height,Qt.depth,0,ue,Le,wt.data)}else{jt&&qt&&e.texStorage2D(n.TEXTURE_2D,Ae,Z,kt[0].width,kt[0].height);for(let Xt=0,Yt=kt.length;Xt<Yt;Xt++)wt=kt[Xt],N.format!==vi?ue!==null?jt?Zt&&e.compressedTexSubImage2D(n.TEXTURE_2D,Xt,0,0,wt.width,wt.height,ue,wt.data):e.compressedTexImage2D(n.TEXTURE_2D,Xt,Z,wt.width,wt.height,0,wt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):jt?Zt&&e.texSubImage2D(n.TEXTURE_2D,Xt,0,0,wt.width,wt.height,ue,Le,wt.data):e.texImage2D(n.TEXTURE_2D,Xt,Z,wt.width,wt.height,0,ue,Le,wt.data)}else if(N.isDataArrayTexture)if(jt){if(qt&&e.texStorage3D(n.TEXTURE_2D_ARRAY,Ae,Z,Qt.width,Qt.height,Qt.depth),Zt)if(N.layerUpdates.size>0){const Xt=uy(Qt.width,Qt.height,N.format,N.type);for(const Yt of N.layerUpdates){const se=Qt.data.subarray(Yt*Xt/Qt.data.BYTES_PER_ELEMENT,(Yt+1)*Xt/Qt.data.BYTES_PER_ELEMENT);e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Yt,Qt.width,Qt.height,1,ue,Le,se)}N.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Qt.width,Qt.height,Qt.depth,ue,Le,Qt.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,Z,Qt.width,Qt.height,Qt.depth,0,ue,Le,Qt.data);else if(N.isData3DTexture)jt?(qt&&e.texStorage3D(n.TEXTURE_3D,Ae,Z,Qt.width,Qt.height,Qt.depth),Zt&&e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Qt.width,Qt.height,Qt.depth,ue,Le,Qt.data)):e.texImage3D(n.TEXTURE_3D,0,Z,Qt.width,Qt.height,Qt.depth,0,ue,Le,Qt.data);else if(N.isFramebufferTexture){if(qt)if(jt)e.texStorage2D(n.TEXTURE_2D,Ae,Z,Qt.width,Qt.height);else{let Xt=Qt.width,Yt=Qt.height;for(let se=0;se<Ae;se++)e.texImage2D(n.TEXTURE_2D,se,Z,Xt,Yt,0,ue,Le,null),Xt>>=1,Yt>>=1}}else if(kt.length>0){if(jt&&qt){const Xt=ne(kt[0]);e.texStorage2D(n.TEXTURE_2D,Ae,Z,Xt.width,Xt.height)}for(let Xt=0,Yt=kt.length;Xt<Yt;Xt++)wt=kt[Xt],jt?Zt&&e.texSubImage2D(n.TEXTURE_2D,Xt,0,0,ue,Le,wt):e.texImage2D(n.TEXTURE_2D,Xt,Z,ue,Le,wt);N.generateMipmaps=!1}else if(jt){if(qt){const Xt=ne(Qt);e.texStorage2D(n.TEXTURE_2D,Ae,Z,Xt.width,Xt.height)}Zt&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,ue,Le,Qt)}else e.texImage2D(n.TEXTURE_2D,0,Z,ue,Le,Qt);w(N)&&S(bt),te.__version=Mt.version,N.onUpdate&&N.onUpdate(N)}return H.__version=N.version,!0}function Ft(H,N,it){if(N.image.length!==6)return;const bt=Gt(H,N),Dt=N.source;e.bindTexture(n.TEXTURE_CUBE_MAP,H.__webglTexture,n.TEXTURE0+it);const Mt=i.get(Dt);if(Dt.version!==Mt.__version||bt===!0){e.activeTexture(n.TEXTURE0+it);const te=Ve.getPrimaries(Ve.workingColorSpace),Pt=N.colorSpace===_s?null:Ve.getPrimaries(N.colorSpace),Ht=N.colorSpace===_s||te===Pt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,N.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,N.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ht);const pe=N.isCompressedTexture||N.image[0].isCompressedTexture,Qt=N.image[0]&&N.image[0].isDataTexture,ue=[];for(let Yt=0;Yt<6;Yt++)!pe&&!Qt?ue[Yt]=_(N.image[Yt],!0,r.maxCubemapSize):ue[Yt]=Qt?N.image[Yt].image:N.image[Yt],ue[Yt]=gt(N,ue[Yt]);const Le=ue[0],Z=a.convert(N.format,N.colorSpace),wt=a.convert(N.type),kt=U(N.internalFormat,Z,wt,N.colorSpace),jt=N.isVideoTexture!==!0,qt=Mt.__version===void 0||bt===!0,Zt=Dt.dataReady;let Ae=F(N,Le);Ot(n.TEXTURE_CUBE_MAP,N);let Xt;if(pe){jt&&qt&&e.texStorage2D(n.TEXTURE_CUBE_MAP,Ae,kt,Le.width,Le.height);for(let Yt=0;Yt<6;Yt++){Xt=ue[Yt].mipmaps;for(let se=0;se<Xt.length;se++){const De=Xt[se];N.format!==vi?Z!==null?jt?Zt&&e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,se,0,0,De.width,De.height,Z,De.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,se,kt,De.width,De.height,0,De.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):jt?Zt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,se,0,0,De.width,De.height,Z,wt,De.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,se,kt,De.width,De.height,0,Z,wt,De.data)}}}else{if(Xt=N.mipmaps,jt&&qt){Xt.length>0&&Ae++;const Yt=ne(ue[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,Ae,kt,Yt.width,Yt.height)}for(let Yt=0;Yt<6;Yt++)if(Qt){jt?Zt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,0,0,0,ue[Yt].width,ue[Yt].height,Z,wt,ue[Yt].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,0,kt,ue[Yt].width,ue[Yt].height,0,Z,wt,ue[Yt].data);for(let se=0;se<Xt.length;se++){const _n=Xt[se].image[Yt].image;jt?Zt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,se+1,0,0,_n.width,_n.height,Z,wt,_n.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,se+1,kt,_n.width,_n.height,0,Z,wt,_n.data)}}else{jt?Zt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,0,0,0,Z,wt,ue[Yt]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,0,kt,Z,wt,ue[Yt]);for(let se=0;se<Xt.length;se++){const De=Xt[se];jt?Zt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,se+1,0,0,Z,wt,De.image[Yt]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,se+1,kt,Z,wt,De.image[Yt])}}}w(N)&&S(n.TEXTURE_CUBE_MAP),Mt.__version=Dt.version,N.onUpdate&&N.onUpdate(N)}H.__version=N.version}function Jt(H,N,it,bt,Dt,Mt){const te=a.convert(it.format,it.colorSpace),Pt=a.convert(it.type),Ht=U(it.internalFormat,te,Pt,it.colorSpace),pe=i.get(N),Qt=i.get(it);if(Qt.__renderTarget=N,!pe.__hasExternalTextures){const Le=Math.max(1,N.width>>Mt),Z=Math.max(1,N.height>>Mt);N.isWebGLMultiviewRenderTarget===!0?e.texStorage3D(n.TEXTURE_2D_ARRAY,0,Ht,N.width,N.height,N.numViews):Dt===n.TEXTURE_3D||Dt===n.TEXTURE_2D_ARRAY?e.texImage3D(Dt,Mt,Ht,Le,Z,N.depth,0,te,Pt,null):e.texImage2D(Dt,Mt,Ht,Le,Z,0,te,Pt,null)}e.bindFramebuffer(n.FRAMEBUFFER,H);const ue=Y(N);N.isWebGLMultiviewRenderTarget===!0?ue?d.framebufferTextureMultisampleMultiviewOVR(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,Qt.__webglTexture,0,q(N),0,N.numViews):d.framebufferTextureMultiviewOVR(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,Qt.__webglTexture,0,0,N.numViews):(Dt===n.TEXTURE_2D||Dt>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Dt<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&(ue?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,bt,Dt,Qt.__webglTexture,0,q(N)):n.framebufferTexture2D(n.FRAMEBUFFER,bt,Dt,Qt.__webglTexture,Mt)),e.bindFramebuffer(n.FRAMEBUFFER,null)}function Ct(H,N,it){if(n.bindRenderbuffer(n.RENDERBUFFER,H),N.isWebGLMultiviewRenderTarget===!0){const bt=Y(N),Dt=N.numViews,Mt=N.depthTexture;let te=n.DEPTH_COMPONENT24,Pt=n.DEPTH_ATTACHMENT;Mt&&Mt.isDepthTexture&&(Mt.type===Ai?te=n.DEPTH_COMPONENT32F:Mt.type===wa&&(te=n.DEPTH24_STENCIL8,Pt=n.DEPTH_STENCIL_ATTACHMENT));let Ht=i.get(N.depthTexture).__webglTexture;Ht===void 0&&(Ht=n.createTexture(),n.bindTexture(n.TEXTURE_2D_ARRAY,Ht),n.texStorage3D(n.TEXTURE_2D_ARRAY,1,te,N.width,N.height,Dt)),bt?d.framebufferTextureMultisampleMultiviewOVR(n.FRAMEBUFFER,Pt,Ht,0,q(N),0,Dt):d.framebufferTextureMultiviewOVR(n.FRAMEBUFFER,Pt,Ht,0,0,Dt)}else if(N.depthBuffer){const bt=N.depthTexture,Dt=bt&&bt.isDepthTexture?bt.type:null,Mt=L(N.stencilBuffer,Dt),te=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Pt=q(N);Y(N)?c.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Pt,Mt,N.width,N.height):it?n.renderbufferStorageMultisample(n.RENDERBUFFER,Pt,Mt,N.width,N.height):n.renderbufferStorage(n.RENDERBUFFER,Mt,N.width,N.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,te,n.RENDERBUFFER,H)}else{const bt=N.textures;for(let Dt=0;Dt<bt.length;Dt++){const Mt=bt[Dt],te=a.convert(Mt.format,Mt.colorSpace),Pt=a.convert(Mt.type),Ht=U(Mt.internalFormat,te,Pt,Mt.colorSpace),pe=q(N);it&&Y(N)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,pe,Ht,N.width,N.height):Y(N)?c.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,pe,Ht,N.width,N.height):n.renderbufferStorage(n.RENDERBUFFER,Ht,N.width,N.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Rt(H,N){if(N&&N.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(n.FRAMEBUFFER,H),!(N.depthTexture&&N.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const bt=i.get(N.depthTexture);bt.__renderTarget=N,(!bt.__webglTexture||N.depthTexture.image.width!==N.width||N.depthTexture.image.height!==N.height)&&(N.depthTexture.image.width=N.width,N.depthTexture.image.height=N.height,N.depthTexture.needsUpdate=!0),N.depthTexture.image.depth!=1?ut(N.depthTexture,0):tt(N.depthTexture,0);const Dt=bt.__webglTexture,Mt=q(N);if(N.isWebGLMultiviewRenderTarget===!0){const te=Y(N),Pt=N.numViews;if(N.depthTexture.format===Ma)te?d.framebufferTextureMultisampleMultiviewOVR(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,Dt,0,Mt,0,Pt):d.framebufferTextureMultiviewOVR(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,Dt,0,0,Pt);else if(N.depthTexture.format===Sa)te?d.framebufferTextureMultisampleMultiviewOVR(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,Dt,0,Mt,0,Pt):d.framebufferTextureMultiviewOVR(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,Dt,0,0,Pt);else throw new Error("Unknown depthTexture format")}else if(N.depthTexture.format===Ma)Y(N)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Dt,0,Mt):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Dt,0);else if(N.depthTexture.format===Sa)Y(N)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Dt,0,Mt):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Dt,0);else throw new Error("Unknown depthTexture format")}function Tt(H){const N=i.get(H),it=H.isWebGLCubeRenderTarget===!0;if(N.__boundDepthTexture!==H.depthTexture){const bt=H.depthTexture;if(N.__depthDisposeCallback&&N.__depthDisposeCallback(),bt){const Dt=()=>{delete N.__boundDepthTexture,delete N.__depthDisposeCallback,bt.removeEventListener("dispose",Dt)};bt.addEventListener("dispose",Dt),N.__depthDisposeCallback=Dt}N.__boundDepthTexture=bt}if(H.depthTexture&&!N.__autoAllocateDepthBuffer){if(it)throw new Error("target.depthTexture not supported in Cube render targets");Rt(N.__webglFramebuffer,H)}else if(it){N.__webglDepthbuffer=[];for(let bt=0;bt<6;bt++)if(e.bindFramebuffer(n.FRAMEBUFFER,N.__webglFramebuffer[bt]),N.__webglDepthbuffer[bt]===void 0)N.__webglDepthbuffer[bt]=n.createRenderbuffer(),Ct(N.__webglDepthbuffer[bt],H,!1);else{const Dt=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Mt=N.__webglDepthbuffer[bt];n.bindRenderbuffer(n.RENDERBUFFER,Mt),n.framebufferRenderbuffer(n.FRAMEBUFFER,Dt,n.RENDERBUFFER,Mt)}}else if(e.bindFramebuffer(n.FRAMEBUFFER,N.__webglFramebuffer),N.__webglDepthbuffer===void 0)N.__webglDepthbuffer=n.createRenderbuffer(),Ct(N.__webglDepthbuffer,H,!1);else{const bt=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Dt=N.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Dt),n.framebufferRenderbuffer(n.FRAMEBUFFER,bt,n.RENDERBUFFER,Dt)}e.bindFramebuffer(n.FRAMEBUFFER,null)}function j(H,N,it){const bt=i.get(H);N!==void 0&&Jt(bt.__webglFramebuffer,H,H.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),it!==void 0&&Tt(H)}function zt(H){const N=H.texture,it=i.get(H),bt=i.get(N);H.addEventListener("dispose",O);const Dt=H.textures,Mt=H.isWebGLCubeRenderTarget===!0,te=Dt.length>1;if(te||(bt.__webglTexture===void 0&&(bt.__webglTexture=n.createTexture()),bt.__version=N.version,l.memory.textures++),Mt){it.__webglFramebuffer=[];for(let Pt=0;Pt<6;Pt++)if(N.mipmaps&&N.mipmaps.length>0){it.__webglFramebuffer[Pt]=[];for(let Ht=0;Ht<N.mipmaps.length;Ht++)it.__webglFramebuffer[Pt][Ht]=n.createFramebuffer()}else it.__webglFramebuffer[Pt]=n.createFramebuffer()}else{if(N.mipmaps&&N.mipmaps.length>0){it.__webglFramebuffer=[];for(let Pt=0;Pt<N.mipmaps.length;Pt++)it.__webglFramebuffer[Pt]=n.createFramebuffer()}else it.__webglFramebuffer=n.createFramebuffer();if(te)for(let Pt=0,Ht=Dt.length;Pt<Ht;Pt++){const pe=i.get(Dt[Pt]);pe.__webglTexture===void 0&&(pe.__webglTexture=n.createTexture(),l.memory.textures++)}if(H.samples>0&&Y(H)===!1){it.__webglMultisampledFramebuffer=n.createFramebuffer(),it.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,it.__webglMultisampledFramebuffer);for(let Pt=0;Pt<Dt.length;Pt++){const Ht=Dt[Pt];it.__webglColorRenderbuffer[Pt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,it.__webglColorRenderbuffer[Pt]);const pe=a.convert(Ht.format,Ht.colorSpace),Qt=a.convert(Ht.type),ue=U(Ht.internalFormat,pe,Qt,Ht.colorSpace,H.isXRRenderTarget===!0),Le=q(H);n.renderbufferStorageMultisample(n.RENDERBUFFER,Le,ue,H.width,H.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pt,n.RENDERBUFFER,it.__webglColorRenderbuffer[Pt])}n.bindRenderbuffer(n.RENDERBUFFER,null),H.depthBuffer&&(it.__webglDepthRenderbuffer=n.createRenderbuffer(),Ct(it.__webglDepthRenderbuffer,H,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Mt){e.bindTexture(n.TEXTURE_CUBE_MAP,bt.__webglTexture),Ot(n.TEXTURE_CUBE_MAP,N);for(let Pt=0;Pt<6;Pt++)if(N.mipmaps&&N.mipmaps.length>0)for(let Ht=0;Ht<N.mipmaps.length;Ht++)Jt(it.__webglFramebuffer[Pt][Ht],H,N,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Pt,Ht);else Jt(it.__webglFramebuffer[Pt],H,N,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Pt,0);w(N)&&S(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(te){for(let Pt=0,Ht=Dt.length;Pt<Ht;Pt++){const pe=Dt[Pt],Qt=i.get(pe);e.bindTexture(n.TEXTURE_2D,Qt.__webglTexture),Ot(n.TEXTURE_2D,pe),Jt(it.__webglFramebuffer,H,pe,n.COLOR_ATTACHMENT0+Pt,n.TEXTURE_2D,0),w(pe)&&S(n.TEXTURE_2D)}e.unbindTexture()}else{let Pt=n.TEXTURE_2D;if((H.isWebGL3DRenderTarget||H.isWebGLArrayRenderTarget)&&(Pt=H.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),H.isWebGLMultiviewRenderTarget===!0&&(Pt=n.TEXTURE_2D_ARRAY),e.bindTexture(Pt,bt.__webglTexture),Ot(Pt,N),N.mipmaps&&N.mipmaps.length>0)for(let Ht=0;Ht<N.mipmaps.length;Ht++)Jt(it.__webglFramebuffer[Ht],H,N,n.COLOR_ATTACHMENT0,Pt,Ht);else Jt(it.__webglFramebuffer,H,N,n.COLOR_ATTACHMENT0,Pt,0);w(N)&&S(Pt),e.unbindTexture()}(H.depthBuffer||H.isWebGLMultiviewRenderTarget===!0)&&this.setupDepthRenderbuffer(H)}function Vt(H){const N=H.textures;for(let it=0,bt=N.length;it<bt;it++){const Dt=N[it];if(w(Dt)){const Mt=R(H),te=i.get(Dt).__webglTexture;e.bindTexture(Mt,te),S(Mt),e.unbindTexture()}}}const B=[],T=[];function P(H){if(H.samples>0){if(Y(H)===!1){const N=H.textures,it=H.width,bt=H.height;let Dt=n.COLOR_BUFFER_BIT;const Mt=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,te=i.get(H),Pt=N.length>1;if(Pt)for(let Ht=0;Ht<N.length;Ht++)e.bindFramebuffer(n.FRAMEBUFFER,te.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,te.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,te.__webglMultisampledFramebuffer),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,te.__webglFramebuffer);for(let Ht=0;Ht<N.length;Ht++){if(H.resolveDepthBuffer&&(H.depthBuffer&&(Dt|=n.DEPTH_BUFFER_BIT),H.stencilBuffer&&H.resolveStencilBuffer&&(Dt|=n.STENCIL_BUFFER_BIT)),Pt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,te.__webglColorRenderbuffer[Ht]);const pe=i.get(N[Ht]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,pe,0)}n.blitFramebuffer(0,0,it,bt,0,0,it,bt,Dt,n.NEAREST),u===!0&&(B.length=0,T.length=0,B.push(n.COLOR_ATTACHMENT0+Ht),H.depthBuffer&&H.resolveDepthBuffer===!1&&(B.push(Mt),T.push(Mt),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,T)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,B))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Pt)for(let Ht=0;Ht<N.length;Ht++){e.bindFramebuffer(n.FRAMEBUFFER,te.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.RENDERBUFFER,te.__webglColorRenderbuffer[Ht]);const pe=i.get(N[Ht]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,te.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.TEXTURE_2D,pe,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,te.__webglMultisampledFramebuffer)}else if(H.depthBuffer&&H.resolveDepthBuffer===!1&&u){const N=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[N])}}}function q(H){return Math.min(r.maxSamples,H.samples)}function Y(H){const N=i.get(H);return H.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&N.__useRenderToTexture!==!1}function lt(H){const N=l.render.frame;A.get(H)!==N&&(A.set(H,N),H.update())}function gt(H,N){const it=H.colorSpace,bt=H.format,Dt=H.type;return H.isCompressedTexture===!0||H.isVideoTexture===!0||it!==Oo&&it!==_s&&(Ve.getTransfer(it)===rn?(bt!==vi||Dt!==Wr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",it)),N}function ne(H){return typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement?(f.width=H.naturalWidth||H.width,f.height=H.naturalHeight||H.height):typeof VideoFrame<"u"&&H instanceof VideoFrame?(f.width=H.displayWidth,f.height=H.displayHeight):(f.width=H.width,f.height=H.height),f}this.allocateTextureUnit=G,this.resetTextureUnits=At,this.setTexture2D=tt,this.setTexture2DArray=ut,this.setTexture3D=xt,this.setTextureCube=V,this.rebindTextures=j,this.uploadTexture=It,this.setupRenderTarget=zt,this.updateRenderTargetMipmap=Vt,this.updateMultisampleRenderTarget=P,this.setupDepthTexture=Rt,this.setupDepthRenderbuffer=Tt,this.setupFrameBufferTexture=Jt,this.useMultisampledRTT=Y,this.runDeferredUploads=ft,this.setDeferTextureUploads=Lt}function LB(n,t){function e(i,r=_s){let a;const l=Ve.getTransfer(r);if(i===Wr)return n.UNSIGNED_BYTE;if(i===gA)return n.UNSIGNED_SHORT_4_4_4_4;if(i===vA)return n.UNSIGNED_SHORT_5_5_5_1;if(i===Xy)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===Wy)return n.BYTE;if(i===jy)return n.SHORT;if(i===ic)return n.UNSIGNED_SHORT;if(i===mA)return n.INT;if(i===Ps)return n.UNSIGNED_INT;if(i===Ai)return n.FLOAT;if(i===cc)return n.HALF_FLOAT;if(i===Yy)return n.ALPHA;if(i===Ky)return n.RGB;if(i===vi)return n.RGBA;if(i===Jy)return n.LUMINANCE;if(i===Zy)return n.LUMINANCE_ALPHA;if(i===Ma)return n.DEPTH_COMPONENT;if(i===Sa)return n.DEPTH_STENCIL;if(i===yA)return n.RED;if(i===mh)return n.RED_INTEGER;if(i===$y)return n.RG;if(i===EA)return n.RG_INTEGER;if(i===bA)return n.RGBA_INTEGER;if(i===Ou||i===Nu||i===Pu||i===Fu)if(l===rn)if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===Ou)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Nu)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Pu)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Fu)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=t.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===Ou)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Nu)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Pu)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Fu)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===xp||i===Cp||i===_p||i===wp)if(a=t.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===xp)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Cp)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===_p)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===wp)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Mp||i===Sp||i===Bp)if(a=t.get("WEBGL_compressed_texture_etc"),a!==null){if(i===Mp||i===Sp)return l===rn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===Bp)return l===rn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Tp||i===Ip||i===Rp||i===Lp||i===Dp||i===Up||i===Op||i===Np||i===Pp||i===Fp||i===kp||i===Qp||i===zp||i===Gp)if(a=t.get("WEBGL_compressed_texture_astc"),a!==null){if(i===Tp)return l===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Ip)return l===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Rp)return l===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Lp)return l===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Dp)return l===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Up)return l===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Op)return l===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Np)return l===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Pp)return l===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Fp)return l===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===kp)return l===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Qp)return l===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===zp)return l===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Gp)return l===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===ku||i===Hp||i===Vp)if(a=t.get("EXT_texture_compression_bptc"),a!==null){if(i===ku)return l===rn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Hp)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Vp)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===tE||i===qp||i===Wp||i===jp)if(a=t.get("EXT_texture_compression_rgtc"),a!==null){if(i===ku)return a.COMPRESSED_RED_RGTC1_EXT;if(i===qp)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Wp)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===jp)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===wa?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:e}}class DB extends Sr{constructor(t,e,i,r={}){super(t,e,r),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=i}copy(t){return super.copy(t),this.numViews=t.numViews,this}}DB.prototype.isWebGLMultiviewRenderTarget=!0;const Mk=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Sk=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Bk{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,i){if(this.texture===null){const r=new Cn,a=t.properties.get(r);a.__webglTexture=e.texture,(e.depthNear!==i.depthNear||e.depthFar!==i.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,i=new Br({vertexShader:Mk,fragmentShader:Sk,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Pn(new dc(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Tk extends jr{constructor(t,e,i,r){super();const a=this;let l=null,c=1;var u=null;let d=null,f="local-floor",A=1,m=null,g=null;var b=[];let x=null,E=null,y=null,_=null;const w=new Bk,S=e.getContextAttributes();let R=null,U=null;const L=[],F=[],D=new Ut;let O=null;const z=new $n;z.viewport=new Xe;const J=new $n;J.viewport=new Xe;const $=[z,J],nt=new bB;let At=null,G=null;this.cameraAutoUpdate=!0,this.layersEnabled=!1,this.enabled=!1,this.isPresenting=!1,this.isMultiview=!1,this.getCameraPose=function(){return g},this.getController=function(ft){let It=L[ft];return It===void 0&&(It=new rp,L[ft]=It),It.getTargetRaySpace()},this.getControllerGrip=function(ft){let It=L[ft];return It===void 0&&(It=new rp,L[ft]=It),It.getGripSpace()},this.getHand=function(ft){let It=L[ft];return It===void 0&&(It=new rp,L[ft]=It),It.getHandSpace()};function X(ft){const It=F.indexOf(ft.inputSource);if(It===-1)return;const Ft=L[It];Ft!==void 0&&(Ft.update(ft.inputSource,ft.frame,m||d),Ft.dispatchEvent({type:ft.type,data:ft.inputSource}))}function tt(){l.removeEventListener("select",X),l.removeEventListener("selectstart",X),l.removeEventListener("selectend",X),l.removeEventListener("squeeze",X),l.removeEventListener("squeezestart",X),l.removeEventListener("squeezeend",X),l.removeEventListener("end",tt),l.removeEventListener("inputsourceschange",ut);for(let ft=0;ft<L.length;ft++){const It=F[ft];It!==null&&(F[ft]=null,L[ft].disconnect(It))}At=null,G=null,w.reset(),a.isPresenting=!1,t.setRenderTarget(R),y=null,E=null,x=null,l=null,U=null,Lt.stop(),t.setPixelRatio(O),t.setSize(D.width,D.height,!1),a.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ft){c=ft,a.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ft){f=ft,a.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return m||d},this.setReferenceSpace=function(ft){m=ft},this.getBaseLayer=function(){return E!==null?E:y},this.getBinding=function(){return x},this.getRenderTarget=function(){return U},this.getFrame=function(){return _},this.getSession=function(){return l},this.setSession=async function(ft){if(l=ft,l!==null){if(R=t.getRenderTarget(),l.addEventListener("select",X),l.addEventListener("selectstart",X),l.addEventListener("selectend",X),l.addEventListener("squeeze",X),l.addEventListener("squeezestart",X),l.addEventListener("squeezeend",X),l.addEventListener("end",tt),l.addEventListener("inputsourceschange",ut),S.xrCompatible!==!0&&await e.makeXRCompatible(),O=t.getPixelRatio(),t.getSize(D),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ft=null,Jt=null,Ct=null;S.depth&&(Ct=S.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Ft=S.stencil?Sa:Ma,Jt=S.stencil?wa:Ps),a.isMultiview=r&&i.has("OCULUS_multiview");const Rt={colorFormat:e.RGBA8,depthFormat:Ct,scaleFactor:c};a.isMultiview&&(Rt.textureType="texture-array"),x=new XRWebGLBinding(l,e),E=x.createProjectionLayer(Rt),l.updateRenderState({layers:[E]}),t.setPixelRatio(1),t.setSize(E.textureWidth,E.textureHeight,!1);const Tt={format:vi,type:Wr,depthTexture:new cE(E.textureWidth,E.textureHeight,Jt,void 0,void 0,void 0,void 0,void 0,void 0,Ft),stencilBuffer:S.stencil,colorSpace:t.outputColorSpace,samples:S.antialias?4:0,resolveDepthBuffer:E.ignoreDepthValues===!1};if(a.isMultiview){const j=i.get("OCULUS_multiview");this.maxNumViews=e.getParameter(j.MAX_VIEWS_OVR),U=new DB(E.textureWidth,E.textureHeight,2,Tt)}else U=new Sr(E.textureWidth,E.textureHeight,Tt)}else{const Ft={antialias:S.antialias,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:c};y=new XRWebGLLayer(l,e,Ft),l.updateRenderState({baseLayer:y}),t.setPixelRatio(1),t.setSize(y.framebufferWidth,y.framebufferHeight,!1),U=new Sr(y.framebufferWidth,y.framebufferHeight,{format:vi,type:Wr,colorSpace:t.outputColorSpace,stencilBuffer:S.stencil})}U.isXRRenderTarget=!0,this.setFoveation(A),m=null,d=await l.requestReferenceSpace(f),Lt.setContext(l),Lt.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(l!==null)return l.environmentBlendMode},this.addLayer=function(ft){!window.XRWebGLBinding||!this.layersEnabled||!l||(b.push(ft),this.updateLayers())},this.removeLayer=function(ft){b.splice(b.indexOf(ft),1),!(!window.XRWebGLBinding||!this.layersEnabled||!l)&&this.updateLayers()},this.updateLayers=function(){var ft=b.map(function(It){return It});ft.unshift(l.renderState.layers[0]),l.updateRenderState({layers:ft})},this.getDepthTexture=function(){return w.getDepthTexture()};function ut(ft){for(let It=0;It<ft.removed.length;It++){const Ft=ft.removed[It],Jt=F.indexOf(Ft);Jt>=0&&(F[Jt]=null,L[Jt].disconnect(Ft))}for(let It=0;It<ft.added.length;It++){const Ft=ft.added[It];let Jt=F.indexOf(Ft);if(Jt===-1){for(let Rt=0;Rt<L.length;Rt++)if(Rt>=F.length){F.push(Ft),Jt=Rt;break}else if(F[Rt]===null){F[Rt]=Ft,Jt=Rt;break}if(Jt===-1)break}const Ct=L[Jt];Ct&&Ct.connect(Ft)}}const xt=new W,V=new W;function rt(ft,It,Ft){xt.setFromMatrixPosition(It.matrixWorld),V.setFromMatrixPosition(Ft.matrixWorld);const Jt=xt.distanceTo(V),Ct=It.projectionMatrix.elements,Rt=Ft.projectionMatrix.elements,Tt=Ct[14]/(Ct[10]-1),j=Ct[14]/(Ct[10]+1),zt=(Ct[9]+1)/Ct[5],Vt=(Ct[9]-1)/Ct[5],B=(Ct[8]-1)/Ct[0],T=(Rt[8]+1)/Rt[0],P=Tt*B,q=Tt*T,Y=Jt/(-B+T),lt=Y*-B;if(It.matrixWorld.decompose(ft.position,ft.quaternion,ft.scale),ft.translateX(lt),ft.translateZ(Y),ft.matrixWorld.compose(ft.position,ft.quaternion,ft.scale),ft.matrixWorldInverse.copy(ft.matrixWorld).invert(),Ct[10]===-1)ft.projectionMatrix.copy(It.projectionMatrix),ft.projectionMatrixInverse.copy(It.projectionMatrixInverse);else{const gt=Tt+Y,ne=j+Y,H=P-lt,N=q+(Jt-lt),it=zt*j/ne*gt,bt=Vt*j/ne*gt;ft.projectionMatrix.makePerspective(H,N,it,bt,gt,ne),ft.projectionMatrixInverse.copy(ft.projectionMatrix).invert()}}function yt(ft,It){It===null?ft.matrixWorld.copy(ft.matrix):ft.matrixWorld.multiplyMatrices(It.matrixWorld,ft.matrix),ft.matrixWorldInverse.copy(ft.matrixWorld).invert()}this.setPoseTarget=function(ft){ft!==void 0&&(u=ft)},this.updateCamera=function(ft){if(l===null)return;let It=ft.near,Ft=ft.far;w.texture!==null&&(w.depthNear>0&&(It=w.depthNear),w.depthFar>0&&(Ft=w.depthFar)),nt.near=J.near=z.near=It,nt.far=J.far=z.far=Ft,(At!==nt.near||G!==nt.far)&&(l.updateRenderState({depthNear:nt.near,depthFar:nt.far}),At=nt.near,G=nt.far),z.layers.mask=ft.layers.mask|2,J.layers.mask=ft.layers.mask|4,nt.layers.mask=z.layers.mask|J.layers.mask;const Jt=nt.cameras;var Ct=u||ft;const Rt=Ct.parent;yt(nt,Rt);for(let Tt=0;Tt<Jt.length;Tt++)yt(Jt[Tt],Rt);Jt.length===2?rt(nt,z,J):nt.projectionMatrix.copy(z.projectionMatrix),Et(ft,nt,Ct)};function Et(ft,It,Ft){It.matrixWorld.decompose(It.position,It.quaternion,It.scale),Ft.parent===null?Ft.matrix.copy(It.matrixWorld):(Ft.matrix.copy(Ft.parent.matrixWorld),Ft.matrix.invert(),Ft.matrix.multiply(It.matrixWorld)),Ft.matrix.decompose(Ft.position,Ft.quaternion,Ft.scale),Ft.updateMatrixWorld(!0),ft.projectionMatrix.copy(It.projectionMatrix),ft.projectionMatrixInverse.copy(It.projectionMatrixInverse),ft.isPerspectiveCamera&&(ft.fov=rc*2*Math.atan(1/ft.projectionMatrix.elements[5]),ft.zoom=1)}this.getCamera=function(){return nt},this.getFoveation=function(){if(!(E===null&&y===null))return A},this.setFoveation=function(ft){A=ft,E!==null&&(E.fixedFoveation=ft),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=ft)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(nt)};let Ot=null;function Gt(ft,It){if(g=It.getViewerPose(m||d),_=It,g!==null){const Ft=g.views;y!==null&&(t.setRenderTargetFramebuffer(U,y.framebuffer),t.setRenderTarget(U));let Jt=!1;Ft.length!==nt.cameras.length&&(nt.cameras.length=0,Jt=!0);for(let Tt=0;Tt<Ft.length;Tt++){const j=Ft[Tt];let zt=null;if(y!==null)zt=y.getViewport(j);else{const B=x.getViewSubImage(E,j);zt=B.viewport,Tt===0&&(t.setRenderTargetTextures(U,B.colorTexture,E.ignoreDepthValues?void 0:B.depthStencilTexture),t.setRenderTarget(U))}let Vt=$[Tt];Vt===void 0&&(Vt=new $n,Vt.layers.enable(Tt),Vt.viewport=new Xe,$[Tt]=Vt),Vt.matrix.fromArray(j.transform.matrix),Vt.matrix.decompose(Vt.position,Vt.quaternion,Vt.scale),Vt.projectionMatrix.fromArray(j.projectionMatrix),Vt.projectionMatrixInverse.copy(Vt.projectionMatrix).invert(),Vt.viewport.set(zt.x,zt.y,zt.width,zt.height),Tt===0&&(nt.matrix.copy(Vt.matrix),nt.matrix.decompose(nt.position,nt.quaternion,nt.scale)),Jt===!0&&nt.cameras.push(Vt)}const Ct=l.enabledFeatures;if(Ct&&Ct.includes("depth-sensing")&&l.depthUsage=="gpu-optimized"&&x){const Tt=x.getDepthInformation(Ft[0]);Tt&&Tt.isValid&&Tt.texture&&w.init(t,Tt,l.renderState)}}for(let Ft=0;Ft<L.length;Ft++){const Jt=F[Ft],Ct=L[Ft];Jt!==null&&Ct!==void 0&&Ct.update(Jt,It,m||d)}Ot&&Ot(ft,It),It.detectedPlanes&&a.dispatchEvent({type:"planesdetected",data:It}),_=null}const Lt=new SB;Lt.setAnimationLoop(Gt),this.setAnimationLoop=function(ft){Ot=ft},this.dispose=function(){}}}const ho=new Yi,Ik=new ve;function Rk(n,t){function e(E,y){E.matrixAutoUpdate===!0&&E.updateMatrix(),y.value.copy(E.matrix)}function i(E,y){y.color.getRGB(E.fogColor.value,MS(n)),y.isFog?(E.fogNear.value=y.near,E.fogFar.value=y.far):y.isFogExp2&&(E.fogDensity.value=y.density)}function r(E,y,_,w,S){y.isMeshBasicMaterial||y.isMeshLambertMaterial?a(E,y):y.isMeshToonMaterial?(a(E,y),A(E,y)):y.isMeshPhongMaterial?(a(E,y),f(E,y)):y.isMeshStandardMaterial?(a(E,y),m(E,y),y.isMeshPhysicalMaterial&&g(E,y,S)):y.isMeshMatcapMaterial?(a(E,y),b(E,y)):y.isMeshDepthMaterial?a(E,y):y.isMeshDistanceMaterial?(a(E,y),x(E,y)):y.isMeshNormalMaterial?a(E,y):y.isLineBasicMaterial?(l(E,y),y.isLineDashedMaterial&&c(E,y)):y.isPointsMaterial?u(E,y,_,w):y.isSpriteMaterial?d(E,y):y.isShadowMaterial?(E.color.value.copy(y.color),E.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function a(E,y){E.opacity.value=y.opacity,y.color&&E.diffuse.value.copy(y.color),y.emissive&&E.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(E.map.value=y.map,e(y.map,E.mapTransform)),y.alphaMap&&(E.alphaMap.value=y.alphaMap,e(y.alphaMap,E.alphaMapTransform)),y.bumpMap&&(E.bumpMap.value=y.bumpMap,e(y.bumpMap,E.bumpMapTransform),E.bumpScale.value=y.bumpScale,y.side===yi&&(E.bumpScale.value*=-1)),y.normalMap&&(E.normalMap.value=y.normalMap,e(y.normalMap,E.normalMapTransform),E.normalScale.value.copy(y.normalScale),y.side===yi&&E.normalScale.value.negate()),y.displacementMap&&(E.displacementMap.value=y.displacementMap,e(y.displacementMap,E.displacementMapTransform),E.displacementScale.value=y.displacementScale,E.displacementBias.value=y.displacementBias),y.emissiveMap&&(E.emissiveMap.value=y.emissiveMap,e(y.emissiveMap,E.emissiveMapTransform)),y.specularMap&&(E.specularMap.value=y.specularMap,e(y.specularMap,E.specularMapTransform)),y.alphaTest>0&&(E.alphaTest.value=y.alphaTest);const _=t.get(y),w=_.envMap,S=_.envMapRotation;w&&(E.envMap.value=w,ho.copy(S),ho.x*=-1,ho.y*=-1,ho.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(ho.y*=-1,ho.z*=-1),E.envMapRotation.value.setFromMatrix4(Ik.makeRotationFromEuler(ho)),E.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=y.reflectivity,E.ior.value=y.ior,E.refractionRatio.value=y.refractionRatio),y.lightMap&&(E.lightMap.value=y.lightMap,E.lightMapIntensity.value=y.lightMapIntensity,e(y.lightMap,E.lightMapTransform)),y.aoMap&&(E.aoMap.value=y.aoMap,E.aoMapIntensity.value=y.aoMapIntensity,e(y.aoMap,E.aoMapTransform))}function l(E,y){E.diffuse.value.copy(y.color),E.opacity.value=y.opacity,y.map&&(E.map.value=y.map,e(y.map,E.mapTransform))}function c(E,y){E.dashSize.value=y.dashSize,E.totalSize.value=y.dashSize+y.gapSize,E.scale.value=y.scale}function u(E,y,_,w){E.diffuse.value.copy(y.color),E.opacity.value=y.opacity,E.size.value=y.size*_,E.scale.value=w*.5,y.map&&(E.map.value=y.map,e(y.map,E.uvTransform)),y.alphaMap&&(E.alphaMap.value=y.alphaMap,e(y.alphaMap,E.alphaMapTransform)),y.alphaTest>0&&(E.alphaTest.value=y.alphaTest)}function d(E,y){E.diffuse.value.copy(y.color),E.opacity.value=y.opacity,E.rotation.value=y.rotation,y.map&&(E.map.value=y.map,e(y.map,E.mapTransform)),y.alphaMap&&(E.alphaMap.value=y.alphaMap,e(y.alphaMap,E.alphaMapTransform)),y.alphaTest>0&&(E.alphaTest.value=y.alphaTest)}function f(E,y){E.specular.value.copy(y.specular),E.shininess.value=Math.max(y.shininess,1e-4)}function A(E,y){y.gradientMap&&(E.gradientMap.value=y.gradientMap)}function m(E,y){E.metalness.value=y.metalness,y.metalnessMap&&(E.metalnessMap.value=y.metalnessMap,e(y.metalnessMap,E.metalnessMapTransform)),E.roughness.value=y.roughness,y.roughnessMap&&(E.roughnessMap.value=y.roughnessMap,e(y.roughnessMap,E.roughnessMapTransform)),y.envMap&&(E.envMapIntensity.value=y.envMapIntensity)}function g(E,y,_){E.ior.value=y.ior,y.sheen>0&&(E.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),E.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(E.sheenColorMap.value=y.sheenColorMap,e(y.sheenColorMap,E.sheenColorMapTransform)),y.sheenRoughnessMap&&(E.sheenRoughnessMap.value=y.sheenRoughnessMap,e(y.sheenRoughnessMap,E.sheenRoughnessMapTransform))),y.clearcoat>0&&(E.clearcoat.value=y.clearcoat,E.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(E.clearcoatMap.value=y.clearcoatMap,e(y.clearcoatMap,E.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,e(y.clearcoatRoughnessMap,E.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(E.clearcoatNormalMap.value=y.clearcoatNormalMap,e(y.clearcoatNormalMap,E.clearcoatNormalMapTransform),E.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===yi&&E.clearcoatNormalScale.value.negate())),y.dispersion>0&&(E.dispersion.value=y.dispersion),y.iridescence>0&&(E.iridescence.value=y.iridescence,E.iridescenceIOR.value=y.iridescenceIOR,E.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(E.iridescenceMap.value=y.iridescenceMap,e(y.iridescenceMap,E.iridescenceMapTransform)),y.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=y.iridescenceThicknessMap,e(y.iridescenceThicknessMap,E.iridescenceThicknessMapTransform))),y.transmission>0&&(E.transmission.value=y.transmission,E.transmissionSamplerMap.value=_.texture,E.transmissionSamplerSize.value.set(_.width,_.height),y.transmissionMap&&(E.transmissionMap.value=y.transmissionMap,e(y.transmissionMap,E.transmissionMapTransform)),E.thickness.value=y.thickness,y.thicknessMap&&(E.thicknessMap.value=y.thicknessMap,e(y.thicknessMap,E.thicknessMapTransform)),E.attenuationDistance.value=y.attenuationDistance,E.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(E.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(E.anisotropyMap.value=y.anisotropyMap,e(y.anisotropyMap,E.anisotropyMapTransform))),E.specularIntensity.value=y.specularIntensity,E.specularColor.value.copy(y.specularColor),y.specularColorMap&&(E.specularColorMap.value=y.specularColorMap,e(y.specularColorMap,E.specularColorMapTransform)),y.specularIntensityMap&&(E.specularIntensityMap.value=y.specularIntensityMap,e(y.specularIntensityMap,E.specularIntensityMapTransform))}function b(E,y){y.matcap&&(E.matcap.value=y.matcap)}function x(E,y){const _=t.get(y).light;E.referencePosition.value.setFromMatrixPosition(_.matrixWorld),E.nearDistance.value=_.shadow.camera.near,E.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Lk(n,t,e,i){let r={},a={},l=[];const c=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function u(_,w){const S=w.program;i.uniformBlockBinding(_,S)}function d(_,w){let S=r[_.id];S===void 0&&(b(_),S=f(_),r[_.id]=S,_.addEventListener("dispose",E));const R=w.program;i.updateUBOMapping(_,R);const U=t.render.frame;a[_.id]!==U&&(m(_),a[_.id]=U)}function f(_){const w=A();_.__bindingPointIndex=w;const S=n.createBuffer(),R=_.__size,U=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,S),n.bufferData(n.UNIFORM_BUFFER,R,U),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,S),S}function A(){for(let _=0;_<c;_++)if(l.indexOf(_)===-1)return l.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(_){const w=r[_.id],S=_.uniforms,R=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,w);for(let U=0,L=S.length;U<L;U++){const F=Array.isArray(S[U])?S[U]:[S[U]];for(let D=0,O=F.length;D<O;D++){const z=F[D];if(g(z,U,D,R)===!0){const J=z.__offset,$=Array.isArray(z.value)?z.value:[z.value];let nt=0;for(let At=0;At<$.length;At++){const G=$[At],X=x(G);typeof G=="number"||typeof G=="boolean"?(z.__data[0]=G,n.bufferSubData(n.UNIFORM_BUFFER,J+nt,z.__data)):G.isMatrix3?(z.__data[0]=G.elements[0],z.__data[1]=G.elements[1],z.__data[2]=G.elements[2],z.__data[3]=0,z.__data[4]=G.elements[3],z.__data[5]=G.elements[4],z.__data[6]=G.elements[5],z.__data[7]=0,z.__data[8]=G.elements[6],z.__data[9]=G.elements[7],z.__data[10]=G.elements[8],z.__data[11]=0):(G.toArray(z.__data,nt),nt+=X.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,J,z.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(_,w,S,R){const U=_.value,L=w+"_"+S;if(R[L]===void 0)return typeof U=="number"||typeof U=="boolean"?R[L]=U:R[L]=U.clone(),!0;{const F=R[L];if(typeof U=="number"||typeof U=="boolean"){if(F!==U)return R[L]=U,!0}else if(F.equals(U)===!1)return F.copy(U),!0}return!1}function b(_){const w=_.uniforms;let S=0;const R=16;for(let L=0,F=w.length;L<F;L++){const D=Array.isArray(w[L])?w[L]:[w[L]];for(let O=0,z=D.length;O<z;O++){const J=D[O],$=Array.isArray(J.value)?J.value:[J.value];for(let nt=0,At=$.length;nt<At;nt++){const G=$[nt],X=x(G),tt=S%R,ut=tt%X.boundary,xt=tt+ut;S+=ut,xt!==0&&R-xt<X.storage&&(S+=R-xt),J.__data=new Float32Array(X.storage/Float32Array.BYTES_PER_ELEMENT),J.__offset=S,S+=X.storage}}}const U=S%R;return U>0&&(S+=R-U),_.__size=S,_.__cache={},this}function x(_){const w={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(w.boundary=4,w.storage=4):_.isVector2?(w.boundary=8,w.storage=8):_.isVector3||_.isColor?(w.boundary=16,w.storage=12):_.isVector4?(w.boundary=16,w.storage=16):_.isMatrix3?(w.boundary=48,w.storage=48):_.isMatrix4?(w.boundary=64,w.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),w}function E(_){const w=_.target;w.removeEventListener("dispose",E);const S=l.indexOf(w.__bindingPointIndex);l.splice(S,1),n.deleteBuffer(r[w.id]),delete r[w.id],delete a[w.id]}function y(){for(const _ in r)n.deleteBuffer(r[_]);l=[],r={},a={}}return{bind:u,update:d,dispose:y}}class Dk{constructor(t={}){const{canvas:e=CS(),context:i=null,depth:r=!0,stencil:a=!1,alpha:l=!1,antialias:c=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:d=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:A=!1,reverseDepthBuffer:m=!1,multiviewStereo:g=!1}=t;this.isWebGLRenderer=!0;let b;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");b=i.getContextAttributes().alpha}else b=l;const x=new Uint32Array(4),E=new Int32Array(4);let y=null,_=null;const w=[],S=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Li,this.toneMapping=Rs,this.toneMappingExposure=1;const R=this;let U=!1,L=0,F=0,D=null,O=-1,z=null;const J=new Xe,$=new Xe;let nt=null;const At=new $t(0);let G=0,X=e.width,tt=e.height,ut=1,xt=null,V=null;const rt=new Xe(0,0,X,tt),yt=new Xe(0,0,X,tt);let Et=!1;const Ot=new yh;let Gt=!1,Lt=!1;this.transmissionResolutionScale=1;const ft=new ve,It=new ve,Ft=new W,Jt=new Xe,Ct={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Rt=!1;function Tt(){return D===null?ut:1}let j=i;function zt(Q,st){return e.getContext(Q,st)}try{const Q={alpha:!0,depth:r,stencil:a,antialias:c,premultipliedAlpha:u,preserveDrawingBuffer:d,powerPreference:f,failIfMajorPerformanceCaveat:A};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${pA}`),e.addEventListener("webglcontextlost",Zt,!1),e.addEventListener("webglcontextrestored",Ae,!1),e.addEventListener("webglcontextcreationerror",Xt,!1),j===null){const st="webgl2";if(j=zt(st,Q),j===null)throw zt(st)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Q){throw console.error("THREE.WebGLRenderer: "+Q.message),Q}let Vt,B,T,P,q,Y,lt,gt,ne,H,N,it,bt,Dt,Mt,te,Pt,Ht,pe,Qt,ue,Le,Z,wt,kt;function jt(){Vt=new HP(j),Vt.init(),Z=new LB(j,Vt),B=new PP(j,Vt,t,Z),T=new _k(j,Vt),B.reverseDepthBuffer&&m&&T.buffers.depth.setReversed(!0),P=new WP(j),q=new hk,Y=new wk(j,Vt,T,q,B,Z,P),lt=new kP(R),gt=new GP(R),ne=new $3(j),wt=new OP(j,ne),H=new VP(j,ne,P,wt),N=new YP(j,H,ne,P),Qt=new jP(j,B,Y),te=new FP(q),it=new uk(R,lt,gt,Vt,B,wt,te),bt=new Rk(R,q),Dt=new fk,Mt=new yk(Vt),pe=new UP(R,lt,gt,T,N,b,u),Ht=new XP(R,Vt,j),Pt=new xk(R,N,B),kt=new Lk(j,P,B,T),ue=new NP(j,Vt,P),Le=new qP(j,Vt,P),P.programs=it.programs,R.capabilities=B,R.extensions=Vt,R.properties=q,R.renderLists=Dt,R.shadowMap=Pt,R.state=T,R.info=P}jt();const qt=new Tk(R,j);this.xr=qt,this.getContext=function(){return j},this.getContextAttributes=function(){return j.getContextAttributes()},this.forceContextLoss=function(){const Q=Vt.get("WEBGL_lose_context");Q&&Q.loseContext()},this.forceContextRestore=function(){const Q=Vt.get("WEBGL_lose_context");Q&&Q.restoreContext()},this.getPixelRatio=function(){return ut},this.setPixelRatio=function(Q){Q!==void 0&&(ut=Q,this.setSize(X,tt,!1))},this.getSize=function(Q){return Q.set(X,tt)},this.setSize=function(Q,st,ct=!0){if(qt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}X=Q,tt=st,e.width=Math.floor(Q*ut),e.height=Math.floor(st*ut),ct===!0&&(e.style.width=Q+"px",e.style.height=st+"px"),this.setViewport(0,0,Q,st)},this.getDrawingBufferSize=function(Q){return Q.set(X*ut,tt*ut).floor()},this.setDrawingBufferSize=function(Q,st,ct){X=Q,tt=st,ut=ct,e.width=Math.floor(Q*ct),e.height=Math.floor(st*ct),this.setViewport(0,0,Q,st)},this.getCurrentViewport=function(Q){return Q.copy(J)},this.getViewport=function(Q){return Q.copy(rt)},this.setViewport=function(Q,st,ct,mt){Q.isVector4?rt.set(Q.x,Q.y,Q.z,Q.w):rt.set(Q,st,ct,mt),T.viewport(J.copy(rt).multiplyScalar(ut).round())},this.getScissor=function(Q){return Q.copy(yt)},this.setScissor=function(Q,st,ct,mt){Q.isVector4?yt.set(Q.x,Q.y,Q.z,Q.w):yt.set(Q,st,ct,mt),T.scissor($.copy(yt).multiplyScalar(ut).round())},this.getScissorTest=function(){return Et},this.setScissorTest=function(Q){T.setScissorTest(Et=Q)},this.setOpaqueSort=function(Q){xt=Q},this.setTransparentSort=function(Q){V=Q},this.getClearColor=function(Q){return Q.copy(pe.getClearColor())},this.setClearColor=function(){pe.setClearColor.apply(pe,arguments)},this.getClearAlpha=function(){return pe.getClearAlpha()},this.setClearAlpha=function(){pe.setClearAlpha.apply(pe,arguments)},this.clear=function(Q=!0,st=!0,ct=!0){let mt=0;if(Q){let ot=!1;if(D!==null){const Nt=D.texture.format;ot=Nt===bA||Nt===EA||Nt===mh}if(ot){const Nt=D.texture.type,Wt=Nt===Wr||Nt===Ps||Nt===ic||Nt===wa||Nt===gA||Nt===vA,ee=pe.getClearColor(),ie=pe.getClearAlpha(),ye=ee.r,Ee=ee.g,ce=ee.b;Wt?(x[0]=ye,x[1]=Ee,x[2]=ce,x[3]=ie,j.clearBufferuiv(j.COLOR,0,x)):(E[0]=ye,E[1]=Ee,E[2]=ce,E[3]=ie,j.clearBufferiv(j.COLOR,0,E))}else mt|=j.COLOR_BUFFER_BIT}st&&(mt|=j.DEPTH_BUFFER_BIT),ct&&(mt|=j.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),j.clear(mt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Zt,!1),e.removeEventListener("webglcontextrestored",Ae,!1),e.removeEventListener("webglcontextcreationerror",Xt,!1),pe.dispose(),Dt.dispose(),Mt.dispose(),q.dispose(),lt.dispose(),gt.dispose(),N.dispose(),wt.dispose(),kt.dispose(),it.dispose(),qt.dispose(),qt.removeEventListener("sessionstart",pc),qt.removeEventListener("sessionend",Go),hr.stop()};function Zt(Q){Q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),U=!0}function Ae(){console.log("THREE.WebGLRenderer: Context Restored."),U=!1;const Q=P.autoReset,st=Pt.enabled,ct=Pt.autoUpdate,mt=Pt.needsUpdate,ot=Pt.type;jt(),P.autoReset=Q,Pt.enabled=st,Pt.autoUpdate=ct,Pt.needsUpdate=mt,Pt.type=ot}function Xt(Q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Q.statusMessage)}function Yt(Q){const st=Q.target;st.removeEventListener("dispose",Yt),se(st)}function se(Q){De(Q),q.remove(Q)}function De(Q){const st=q.get(Q).programs;st!==void 0&&(st.forEach(function(ct){it.releaseProgram(ct)}),Q.isShaderMaterial&&it.releaseShaderCache(Q))}this.renderBufferDirect=function(Q,st,ct,mt,ot,Nt){st===null&&(st=Ct);const Wt=ot.isMesh&&ot.matrixWorld.determinant()<0,ee=em(Q,st,ct,mt,ot);T.setMaterial(mt,Wt);let ie=ct.index,ye=1;if(mt.wireframe===!0){if(ie=H.getWireframeAttribute(ct),ie===void 0)return;ye=2}const Ee=ct.drawRange,ce=ct.attributes.position;let Ue=Ee.start*ye,Re=(Ee.start+Ee.count)*ye;Nt!==null&&(Ue=Math.max(Ue,Nt.start*ye),Re=Math.min(Re,(Nt.start+Nt.count)*ye)),ie!==null?(Ue=Math.max(Ue,0),Re=Math.min(Re,ie.count)):ce!=null&&(Ue=Math.max(Ue,0),Re=Math.min(Re,ce.count));const qe=Re-Ue;if(qe<0||qe===1/0)return;wt.setup(ot,mt,ee,ct,ie);let An,Qe=ue;if(ie!==null&&(An=ne.get(ie),Qe=Le,Qe.setIndex(An)),ot.isMesh)mt.wireframe===!0?(T.setLineWidth(mt.wireframeLinewidth*Tt()),Qe.setMode(j.LINES)):Qe.setMode(j.TRIANGLES);else if(ot.isLine){let In=mt.linewidth;In===void 0&&(In=1),T.setLineWidth(In*Tt()),ot.isLineSegments?Qe.setMode(j.LINES):ot.isLineLoop?Qe.setMode(j.LINE_LOOP):Qe.setMode(j.LINE_STRIP)}else ot.isPoints?Qe.setMode(j.POINTS):ot.isSprite&&Qe.setMode(j.TRIANGLES);if(ot.isBatchedMesh)if(ot._multiDrawInstances!==null)Qe.renderMultiDrawInstances(ot._multiDrawStarts,ot._multiDrawCounts,ot._multiDrawCount,ot._multiDrawInstances);else if(Vt.get("WEBGL_multi_draw"))Qe.renderMultiDraw(ot._multiDrawStarts,ot._multiDrawCounts,ot._multiDrawCount);else{const In=ot._multiDrawStarts,he=ot._multiDrawCounts,Rr=ot._multiDrawCount,We=ie?ne.get(ie).bytesPerElement:1,hn=q.get(mt).currentProgram.getUniforms();for(let xi=0;xi<Rr;xi++)hn.setValue(j,"_gl_DrawID",xi),Qe.render(In[xi]/We,he[xi])}else if(ot.isInstancedMesh)Qe.renderInstances(Ue,qe,ot.count);else if(ct.isInstancedBufferGeometry){const In=ct._maxInstanceCount!==void 0?ct._maxInstanceCount:1/0,he=Math.min(ct.instanceCount,In);Qe.renderInstances(Ue,qe,he)}else Qe.render(Ue,qe)};function _n(Q,st,ct){Q.transparent===!0&&Q.side===zr&&Q.forceSinglePass===!1?(Q.side=yi,Q.needsUpdate=!0,fr(Q,st,ct),Q.side=Os,Q.needsUpdate=!0,fr(Q,st,ct),Q.side=zr):fr(Q,st,ct)}this.compile=function(Q,st,ct=null){ct===null&&(ct=Q),_=Mt.get(ct),_.init(st),S.push(_),ct.traverseVisible(function(ot){ot.isLight&&ot.layers.test(st.layers)&&(_.pushLight(ot),ot.castShadow&&_.pushShadow(ot))}),Q!==ct&&Q.traverseVisible(function(ot){ot.isLight&&ot.layers.test(st.layers)&&(_.pushLight(ot),ot.castShadow&&_.pushShadow(ot))}),_.setupLights();const mt=new Set;return Q.traverse(function(ot){if(!(ot.isMesh||ot.isPoints||ot.isLine||ot.isSprite))return;const Nt=ot.material;if(Nt)if(Array.isArray(Nt))for(let Wt=0;Wt<Nt.length;Wt++){const ee=Nt[Wt];_n(ee,ct,ot),mt.add(ee)}else _n(Nt,ct,ot),mt.add(Nt)}),S.pop(),_=null,mt},this.compileAsync=function(Q,st,ct=null){const mt=this.compile(Q,st,ct);return new Promise(ot=>{function Nt(){if(mt.forEach(function(Wt){q.get(Wt).currentProgram.isReady()&&mt.delete(Wt)}),mt.size===0){ot(Q);return}setTimeout(Nt,10)}Vt.get("KHR_parallel_shader_compile")!==null?Nt():setTimeout(Nt,10)})};let zo=null;function Sh(Q){zo&&zo(Q)}function pc(){hr.stop()}function Go(){hr.start()}const hr=new SB;hr.setAnimationLoop(Sh),typeof self<"u"&&hr.setContext(self),this.setAnimationLoop=function(Q){zo=Q,qt.setAnimationLoop(Q),Q===null?hr.stop():hr.start()},qt.addEventListener("sessionstart",pc),qt.addEventListener("sessionend",Go),this.render=function(Q,st){if(st!==void 0&&st.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(U===!0)return;if(Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),st.parent===null&&st.matrixWorldAutoUpdate===!0&&st.updateMatrixWorld(),qt.enabled===!0&&qt.isPresenting===!0&&(qt.cameraAutoUpdate===!0&&qt.updateCamera(st),st=qt.getCamera()),Q.isScene===!0&&Q.onBeforeRender(R,Q,st,D),_=Mt.get(Q,S.length),_.init(st),S.push(_),It.multiplyMatrices(st.projectionMatrix,st.matrixWorldInverse),Ot.setFromProjectionMatrix(It),Lt=this.localClippingEnabled,Gt=te.init(this.clippingPlanes,Lt),y=Dt.get(Q,w.length),y.init(),w.push(y),qt.enabled===!0&&qt.isPresenting===!0){const Nt=R.xr.getDepthSensingMesh();Nt!==null&&Ho(Nt,st,-1/0,R.sortObjects)}Ho(Q,st,0,R.sortObjects),y.finish(),R.sortObjects===!0&&y.sort(xt,V),Rt=qt.enabled===!1||qt.isPresenting===!1||qt.hasDepthSensing()===!1,Rt&&pe.addToRenderList(y,Q),this.info.render.frame++,Gt===!0&&te.beginShadows();const ct=_.state.shadowsArray;Pt.render(ct,Q,st),Gt===!0&&te.endShadows(),this.info.autoReset===!0&&this.info.reset();const mt=y.opaque,ot=y.transmissive;if(_.setupLights(),st.isArrayCamera){const Nt=st.cameras;if(ot.length>0)for(let Wt=0,ee=Nt.length;Wt<ee;Wt++){const ie=Nt[Wt];dr(mt,ot,Q,ie)}if(Rt&&pe.render(Q),qt.enabled&&qt.isMultiview)Y.setDeferTextureUploads(!0),Vo(y,Q,st,st.cameras[0].viewport);else for(let Wt=0,ee=Nt.length;Wt<ee;Wt++){const ie=Nt[Wt];Vo(y,Q,ie,ie.viewport)}}else ot.length>0&&dr(mt,ot,Q,st),Rt&&pe.render(Q),Vo(y,Q,st);D!==null&&F===0&&(Y.updateMultisampleRenderTarget(D),Y.updateRenderTargetMipmap(D)),Q.isScene===!0&&Q.onAfterRender(R,Q,st),wt.resetDefaultState(),O=-1,z=null,S.pop(),S.length>0?(_=S[S.length-1],Gt===!0&&te.setGlobalState(R.clippingPlanes,_.state.camera)):_=null,w.pop(),w.length>0?y=w[w.length-1]:y=null};function Ho(Q,st,ct,mt){if(Q.visible===!1)return;if(Q.layers.test(st.layers)){if(Q.isGroup)ct=Q.renderOrder;else if(Q.isLOD)Q.autoUpdate===!0&&Q.update(st);else if(Q.isLight)_.pushLight(Q),Q.castShadow&&_.pushShadow(Q);else if(Q.isSprite){if(!Q.frustumCulled||Ot.intersectsSprite(Q)){mt&&Jt.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(It);const Wt=N.update(Q),ee=Q.material;ee.visible&&y.push(Q,Wt,ee,ct,Jt.z,null)}}else if((Q.isMesh||Q.isLine||Q.isPoints)&&(!Q.frustumCulled||Ot.intersectsObject(Q))){const Wt=N.update(Q),ee=Q.material;if(mt&&(Q.boundingSphere!==void 0?(Q.boundingSphere===null&&Q.computeBoundingSphere(),Jt.copy(Q.boundingSphere.center)):(Wt.boundingSphere===null&&Wt.computeBoundingSphere(),Jt.copy(Wt.boundingSphere.center)),Jt.applyMatrix4(Q.matrixWorld).applyMatrix4(It)),Array.isArray(ee)){const ie=Wt.groups;for(let ye=0,Ee=ie.length;ye<Ee;ye++){const ce=ie[ye],Ue=ee[ce.materialIndex];Ue&&Ue.visible&&y.push(Q,Wt,Ue,ct,Jt.z,ce)}}else ee.visible&&y.push(Q,Wt,ee,ct,Jt.z,null)}}const Nt=Q.children;for(let Wt=0,ee=Nt.length;Wt<ee;Wt++)Ho(Nt[Wt],st,ct,mt)}function Vo(Q,st,ct,mt){const ot=Q.opaque,Nt=Q.transmissive,Wt=Q.transparent;_.setupLightsView(ct),Gt===!0&&te.setGlobalState(R.clippingPlanes,ct),mt&&T.viewport(J.copy(mt)),ot.length>0&&yn(ot,st,ct),Nt.length>0&&yn(Nt,st,ct),Wt.length>0&&yn(Wt,st,ct),T.buffers.depth.setTest(!0),T.buffers.depth.setMask(!0),T.buffers.color.setMask(!0),T.setPolygonOffset(!1)}function dr(Q,st,ct,mt){if((ct.isScene===!0?ct.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[mt.id]===void 0&&(_.state.transmissionRenderTarget[mt.id]=new Sr(1,1,{generateMipmaps:!0,type:Vt.has("EXT_color_buffer_half_float")||Vt.has("EXT_color_buffer_float")?cc:Wr,minFilter:Gr,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ve.workingColorSpace}));const Nt=_.state.transmissionRenderTarget[mt.id],Wt=mt.viewport||J;Nt.setSize(Wt.z*R.transmissionResolutionScale,Wt.w*R.transmissionResolutionScale);const ee=R.getRenderTarget();R.setRenderTarget(Nt),R.getClearColor(At),G=R.getClearAlpha(),G<1&&R.setClearColor(16777215,.5),R.clear(),Rt&&pe.render(ct);const ie=R.toneMapping;R.toneMapping=Rs;const ye=mt.viewport;if(mt.viewport!==void 0&&(mt.viewport=void 0),_.setupLightsView(mt),Gt===!0&&te.setGlobalState(R.clippingPlanes,mt),yn(Q,ct,mt),Y.updateMultisampleRenderTarget(Nt),Y.updateRenderTargetMipmap(Nt),Vt.has("WEBGL_multisampled_render_to_texture")===!1){let Ee=!1;for(let ce=0,Ue=st.length;ce<Ue;ce++){const Re=st[ce],qe=Re.object,An=Re.geometry,Qe=Re.material,In=Re.group;if(Qe.side===zr&&qe.layers.test(mt.layers)){const he=Qe.side;Qe.side=yi,Qe.needsUpdate=!0,jn(qe,ct,mt,An,Qe,In),Qe.side=he,Qe.needsUpdate=!0,Ee=!0}}Ee===!0&&(Y.updateMultisampleRenderTarget(Nt),Y.updateRenderTargetMipmap(Nt))}R.setRenderTarget(ee),R.setClearColor(At,G),ye!==void 0&&(mt.viewport=ye),R.toneMapping=ie}function yn(Q,st,ct){const mt=st.isScene===!0?st.overrideMaterial:null;for(let ot=0,Nt=Q.length;ot<Nt;ot++){const Wt=Q[ot],ee=Wt.object,ie=Wt.geometry,ye=mt===null?Wt.material:mt,Ee=Wt.group;ee.layers.test(ct.layers)&&jn(ee,st,ct,ie,ye,Ee)}}function jn(Q,st,ct,mt,ot,Nt){Q.onBeforeRender(R,st,ct,mt,ot,Nt),Q.modelViewMatrix.multiplyMatrices(ct.matrixWorldInverse,Q.matrixWorld),Q.normalMatrix.getNormalMatrix(Q.modelViewMatrix),ot.onBeforeRender(R,st,ct,mt,Q,Nt),ot.transparent===!0&&ot.side===zr&&ot.forceSinglePass===!1?(ot.side=yi,ot.needsUpdate=!0,R.renderBufferDirect(ct,st,mt,ot,Q,Nt),ot.side=Os,ot.needsUpdate=!0,R.renderBufferDirect(ct,st,mt,ot,Q,Nt),ot.side=zr):R.renderBufferDirect(ct,st,mt,ot,Q,Nt),Q.onAfterRender(R,st,ct,mt,ot,Nt)}function fr(Q,st,ct){st.isScene!==!0&&(st=Ct);const mt=q.get(Q),ot=_.state.lights,Nt=_.state.shadowsArray,Wt=ot.state.version,ee=it.getParameters(Q,ot.state,Nt,st,ct),ie=it.getProgramCacheKey(ee);let ye=mt.programs;mt.environment=Q.isMeshStandardMaterial?st.environment:null,mt.fog=st.fog,mt.envMap=(Q.isMeshStandardMaterial?gt:lt).get(Q.envMap||mt.environment),mt.envMapRotation=mt.environment!==null&&Q.envMap===null?st.environmentRotation:Q.envMapRotation,ye===void 0&&(Q.addEventListener("dispose",Yt),ye=new Map,mt.programs=ye);let Ee=ye.get(ie);if(Ee!==void 0){if(mt.currentProgram===Ee&&mt.lightsStateVersion===Wt)return Bh(Q,ee),Ee}else ee.uniforms=it.getUniforms(Q),Q.onBeforeCompile(ee,R),Ee=it.acquireProgram(ee,ie),ye.set(ie,Ee),mt.uniforms=ee.uniforms;const ce=mt.uniforms;return(!Q.isShaderMaterial&&!Q.isRawShaderMaterial||Q.clipping===!0)&&(ce.clippingPlanes=te.uniform),Bh(Q,ee),mt.needsLights=Na(Q),mt.lightsStateVersion=Wt,mt.needsLights&&(ce.ambientLightColor.value=ot.state.ambient,ce.lightProbe.value=ot.state.probe,ce.directionalLights.value=ot.state.directional,ce.directionalLightShadows.value=ot.state.directionalShadow,ce.spotLights.value=ot.state.spot,ce.spotLightShadows.value=ot.state.spotShadow,ce.rectAreaLights.value=ot.state.rectArea,ce.ltc_1.value=ot.state.rectAreaLTC1,ce.ltc_2.value=ot.state.rectAreaLTC2,ce.pointLights.value=ot.state.point,ce.pointLightShadows.value=ot.state.pointShadow,ce.hemisphereLights.value=ot.state.hemi,ce.directionalShadowMap.value=ot.state.directionalShadowMap,ce.directionalShadowMatrix.value=ot.state.directionalShadowMatrix,ce.spotShadowMap.value=ot.state.spotShadowMap,ce.spotLightMatrix.value=ot.state.spotLightMatrix,ce.spotLightMap.value=ot.state.spotLightMap,ce.pointShadowMap.value=ot.state.pointShadowMap,ce.pointShadowMatrix.value=ot.state.pointShadowMatrix),mt.currentProgram=Ee,mt.uniformsList=null,Ee}function qo(Q){if(Q.uniformsList===null){const st=Q.currentProgram.getUniforms();Q.uniformsList=sp.seqWithValue(st.seq,Q.uniforms)}return Q.uniformsList}function Bh(Q,st){const ct=q.get(Q);ct.outputColorSpace=st.outputColorSpace,ct.batching=st.batching,ct.batchingColor=st.batchingColor,ct.instancing=st.instancing,ct.instancingColor=st.instancingColor,ct.instancingMorph=st.instancingMorph,ct.skinning=st.skinning,ct.morphTargets=st.morphTargets,ct.morphNormals=st.morphNormals,ct.morphColors=st.morphColors,ct.morphTargetsCount=st.morphTargetsCount,ct.numClippingPlanes=st.numClippingPlanes,ct.numIntersection=st.numClipIntersection,ct.vertexAlphas=st.vertexAlphas,ct.vertexTangents=st.vertexTangents,ct.toneMapping=st.toneMapping,ct.numMultiviewViews=st.numMultiviewViews}function em(Q,st,ct,mt,ot){st.isScene!==!0&&(st=Ct),Y.resetTextureUnits();const Nt=st.fog,Wt=mt.isMeshStandardMaterial?st.environment:null,ee=D===null?R.outputColorSpace:D.isXRRenderTarget===!0?D.texture.colorSpace:Oo,ie=(mt.isMeshStandardMaterial?gt:lt).get(mt.envMap||Wt),ye=mt.vertexColors===!0&&!!ct.attributes.color&&ct.attributes.color.itemSize===4,Ee=!!ct.attributes.tangent&&(!!mt.normalMap||mt.anisotropy>0),ce=!!ct.morphAttributes.position,Ue=!!ct.morphAttributes.normal,Re=!!ct.morphAttributes.color;let qe=Rs;mt.toneMapped&&(D===null||D.isXRRenderTarget===!0)&&(qe=R.toneMapping);const An=D&&D.isWebGLMultiviewRenderTarget?D.numViews:0,Qe=ct.morphAttributes.position||ct.morphAttributes.normal||ct.morphAttributes.color,In=Qe!==void 0?Qe.length:0,he=q.get(mt),Rr=_.state.lights;if(Gt===!0&&(Lt===!0||Q!==z)){const cn=Q===z&&mt.id===O;te.setState(mt,Q,cn)}let We=!1;mt.version===he.__version?(he.needsLights&&he.lightsStateVersion!==Rr.state.version||he.outputColorSpace!==ee||ot.isBatchedMesh&&he.batching===!1||!ot.isBatchedMesh&&he.batching===!0||ot.isBatchedMesh&&he.batchingColor===!0&&ot.colorTexture===null||ot.isBatchedMesh&&he.batchingColor===!1&&ot.colorTexture!==null||ot.isInstancedMesh&&he.instancing===!1||!ot.isInstancedMesh&&he.instancing===!0||ot.isSkinnedMesh&&he.skinning===!1||!ot.isSkinnedMesh&&he.skinning===!0||ot.isInstancedMesh&&he.instancingColor===!0&&ot.instanceColor===null||ot.isInstancedMesh&&he.instancingColor===!1&&ot.instanceColor!==null||ot.isInstancedMesh&&he.instancingMorph===!0&&ot.morphTexture===null||ot.isInstancedMesh&&he.instancingMorph===!1&&ot.morphTexture!==null||he.envMap!==ie||mt.fog===!0&&he.fog!==Nt||he.numClippingPlanes!==void 0&&(he.numClippingPlanes!==te.numPlanes||he.numIntersection!==te.numIntersection)||he.vertexAlphas!==ye||he.vertexTangents!==Ee||he.morphTargets!==ce||he.morphNormals!==Ue||he.morphColors!==Re||he.toneMapping!==qe||he.morphTargetsCount!==In||he.numMultiviewViews!==An)&&(We=!0):(We=!0,he.__version=mt.version);let hn=he.currentProgram;We===!0&&(hn=fr(mt,st,ot));let xi=!1,Lr=!1,Dr=!1;const ze=hn.getUniforms(),Rn=he.uniforms;if(T.useProgram(hn.program)&&(xi=!0,Lr=!0,Dr=!0),mt.id!==O&&(O=mt.id,Lr=!0),xi||z!==Q){hn.numMultiviewViews>0?(Ht.updateCameraProjectionMatricesUniform(Q,ze),Ht.updateCameraViewMatricesUniform(Q,ze)):(T.buffers.depth.getReversed()?(ft.copy(Q.projectionMatrix),ED(ft),bD(ft),ze.setValue(j,"projectionMatrix",ft)):ze.setValue(j,"projectionMatrix",Q.projectionMatrix),ze.setValue(j,"viewMatrix",Q.matrixWorldInverse));const cn=ze.map.cameraPosition;cn!==void 0&&cn.setValue(j,Ft.setFromMatrixPosition(Q.matrixWorld)),B.logarithmicDepthBuffer&&ze.setValue(j,"logDepthBufFC",2/(Math.log(Q.far+1)/Math.LN2)),(mt.isMeshPhongMaterial||mt.isMeshToonMaterial||mt.isMeshLambertMaterial||mt.isMeshBasicMaterial||mt.isMeshStandardMaterial||mt.isShaderMaterial)&&ze.setValue(j,"isOrthographic",Q.isOrthographicCamera===!0),z!==Q&&(z=Q,Lr=!0,Dr=!0)}if(ot.isSkinnedMesh){ze.setOptional(j,ot,"bindMatrix"),ze.setOptional(j,ot,"bindMatrixInverse");const cn=ot.skeleton;cn&&(cn.boneTexture===null&&cn.computeBoneTexture(),ze.setValue(j,"boneTexture",cn.boneTexture,Y))}ot.isBatchedMesh&&(ze.setOptional(j,ot,"batchingTexture"),ze.setValue(j,"batchingTexture",ot._matricesTexture,Y),ze.setOptional(j,ot,"batchingIdTexture"),ze.setValue(j,"batchingIdTexture",ot._indirectTexture,Y),ze.setOptional(j,ot,"batchingColorTexture"),ot._colorsTexture!==null&&ze.setValue(j,"batchingColorTexture",ot._colorsTexture,Y));const pr=ct.morphAttributes;if((pr.position!==void 0||pr.normal!==void 0||pr.color!==void 0)&&Qt.update(ot,ct,hn),(Lr||he.receiveShadow!==ot.receiveShadow)&&(he.receiveShadow=ot.receiveShadow,ze.setValue(j,"receiveShadow",ot.receiveShadow)),mt.isMeshGouraudMaterial&&mt.envMap!==null&&(Rn.envMap.value=ie,Rn.flipEnvMap.value=ie.isCubeTexture&&ie.isRenderTargetTexture===!1?-1:1),mt.isMeshStandardMaterial&&mt.envMap===null&&st.environment!==null&&(Rn.envMapIntensity.value=st.environmentIntensity),Lr&&(ze.setValue(j,"toneMappingExposure",R.toneMappingExposure),he.needsLights&&Th(Rn,Dr),Nt&&mt.fog===!0&&bt.refreshFogUniforms(Rn,Nt),bt.refreshMaterialUniforms(Rn,mt,ut,tt,_.state.transmissionRenderTarget[Q.id]),sp.upload(j,qo(he),Rn,Y)),mt.isShaderMaterial&&mt.uniformsNeedUpdate===!0&&(sp.upload(j,qo(he),Rn,Y),mt.uniformsNeedUpdate=!1),mt.isSpriteMaterial&&ze.setValue(j,"center",ot.center),hn.numMultiviewViews>0?Ht.updateObjectMatricesUniforms(ot,Q,ze):(ze.setValue(j,"modelViewMatrix",ot.modelViewMatrix),ze.setValue(j,"normalMatrix",ot.normalMatrix)),ze.setValue(j,"modelMatrix",ot.matrixWorld),mt.isShaderMaterial||mt.isRawShaderMaterial){const cn=mt.uniformsGroups;for(let zs=0,Yr=cn.length;zs<Yr;zs++){const mc=cn[zs];kt.update(mc,hn),kt.bind(mc,hn)}}return hn}function Th(Q,st){Q.ambientLightColor.needsUpdate=st,Q.lightProbe.needsUpdate=st,Q.directionalLights.needsUpdate=st,Q.directionalLightShadows.needsUpdate=st,Q.pointLights.needsUpdate=st,Q.pointLightShadows.needsUpdate=st,Q.spotLights.needsUpdate=st,Q.spotLightShadows.needsUpdate=st,Q.rectAreaLights.needsUpdate=st,Q.hemisphereLights.needsUpdate=st}function Na(Q){return Q.isMeshLambertMaterial||Q.isMeshToonMaterial||Q.isMeshPhongMaterial||Q.isMeshStandardMaterial||Q.isShadowMaterial||Q.isShaderMaterial&&Q.lights===!0}this.setTexture2D=(function(){var Q=!1;return function(ct,mt){ct&&ct.isWebGLRenderTarget&&(Q||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Q=!0),ct=ct.texture),Y.setTexture2D(ct,mt)}})(),this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(Q,st,ct){q.get(Q.texture).__webglTexture=st,q.get(Q.depthTexture).__webglTexture=ct;const mt=q.get(Q);mt.__hasExternalTextures=!0,mt.__autoAllocateDepthBuffer=ct===void 0,!mt.__autoAllocateDepthBuffer&&(!D||!D.isWebGLMultiviewRenderTarget)&&Vt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),mt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Q,st){const ct=q.get(Q);ct.__webglFramebuffer=st,ct.__useDefaultFramebuffer=st===void 0};const Ac=j.createFramebuffer();this.setRenderTarget=function(Q,st=0,ct=0){Q===null&&this.xr.isPresenting&&(Q=this.xr.getRenderTarget()),D=Q,L=st,F=ct;let mt=!0,ot=null,Nt=!1,Wt=!1;if(Q){const ie=q.get(Q);if(ie.__useDefaultFramebuffer!==void 0)T.bindFramebuffer(j.FRAMEBUFFER,null),mt=!1;else if(ie.__webglFramebuffer===void 0)Y.setupRenderTarget(Q);else if(ie.__hasExternalTextures)Y.rebindTextures(Q,q.get(Q.texture).__webglTexture,q.get(Q.depthTexture).__webglTexture);else if(Q.depthBuffer){const ce=Q.depthTexture;if(ie.__boundDepthTexture!==ce){if(ce!==null&&q.has(ce)&&(Q.width!==ce.image.width||Q.height!==ce.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Y.setupDepthRenderbuffer(Q)}}const ye=Q.texture;(ye.isData3DTexture||ye.isDataArrayTexture||ye.isCompressedArrayTexture)&&(Wt=!0);const Ee=q.get(Q).__webglFramebuffer;Q.isWebGLCubeRenderTarget?(Array.isArray(Ee[st])?ot=Ee[st][ct]:ot=Ee[st],Nt=!0):Q.samples>0&&Y.useMultisampledRTT(Q)===!1?ot=q.get(Q).__webglMultisampledFramebuffer:Array.isArray(Ee)?ot=Ee[ct]:ot=Ee,J.copy(Q.viewport),$.copy(Q.scissor),nt=Q.scissorTest}else J.copy(rt).multiplyScalar(ut).floor(),$.copy(yt).multiplyScalar(ut).floor(),nt=Et;if(ct!==0&&(ot=Ac),T.bindFramebuffer(j.FRAMEBUFFER,ot)&&mt&&T.drawBuffers(Q,ot),T.viewport(J),T.scissor($),T.setScissorTest(nt),Nt){const ie=q.get(Q.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+st,ie.__webglTexture,ct)}else if(Wt){const ie=q.get(Q.texture),ye=st;j.framebufferTextureLayer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,ie.__webglTexture,ct,ye)}else if(Q!==null&&ct!==0){const ie=q.get(Q.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,ie.__webglTexture,ct)}O=-1},this.readRenderTargetPixels=function(Q,st,ct,mt,ot,Nt,Wt){if(!(Q&&Q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ee=q.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&Wt!==void 0&&(ee=ee[Wt]),ee){T.bindFramebuffer(j.FRAMEBUFFER,ee);try{const ie=Q.texture,ye=ie.format,Ee=ie.type;if(!B.textureFormatReadable(ye)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!B.textureTypeReadable(Ee)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}st>=0&&st<=Q.width-mt&&ct>=0&&ct<=Q.height-ot&&j.readPixels(st,ct,mt,ot,Z.convert(ye),Z.convert(Ee),Nt)}finally{const ie=D!==null?q.get(D).__webglFramebuffer:null;T.bindFramebuffer(j.FRAMEBUFFER,ie)}}},this.readRenderTargetPixelsAsync=async function(Q,st,ct,mt,ot,Nt,Wt){if(!(Q&&Q.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ee=q.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&Wt!==void 0&&(ee=ee[Wt]),ee){const ie=Q.texture,ye=ie.format,Ee=ie.type;if(!B.textureFormatReadable(ye))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!B.textureTypeReadable(Ee))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(st>=0&&st<=Q.width-mt&&ct>=0&&ct<=Q.height-ot){T.bindFramebuffer(j.FRAMEBUFFER,ee);const ce=j.createBuffer();j.bindBuffer(j.PIXEL_PACK_BUFFER,ce),j.bufferData(j.PIXEL_PACK_BUFFER,Nt.byteLength,j.STREAM_READ),j.readPixels(st,ct,mt,ot,Z.convert(ye),Z.convert(Ee),0);const Ue=D!==null?q.get(D).__webglFramebuffer:null;T.bindFramebuffer(j.FRAMEBUFFER,Ue);const Re=j.fenceSync(j.SYNC_GPU_COMMANDS_COMPLETE,0);return j.flush(),await yD(j,Re,4),j.bindBuffer(j.PIXEL_PACK_BUFFER,ce),j.getBufferSubData(j.PIXEL_PACK_BUFFER,0,Nt),j.deleteBuffer(ce),j.deleteSync(Re),Nt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(Q,st=null,ct=0){Q.isTexture!==!0&&(Xl("WebGLRenderer: copyFramebufferToTexture function signature has changed."),st=arguments[0]||null,Q=arguments[1]);const mt=Math.pow(2,-ct),ot=Math.floor(Q.image.width*mt),Nt=Math.floor(Q.image.height*mt),Wt=st!==null?st.x:0,ee=st!==null?st.y:0;Y.setTexture2D(Q,0),j.copyTexSubImage2D(j.TEXTURE_2D,ct,0,0,Wt,ee,ot,Nt),T.unbindTexture()};const ks=j.createFramebuffer(),Qs=j.createFramebuffer();this.copyTextureToTexture=function(Q,st,ct=null,mt=null,ot=0,Nt=null){Q.isTexture!==!0&&(Xl("WebGLRenderer: copyTextureToTexture function signature has changed."),mt=arguments[0]||null,Q=arguments[1],st=arguments[2],Nt=arguments[3]||0,ct=null),Nt===null&&(ot!==0?(Xl("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Nt=ot,ot=0):Nt=0);let Wt,ee,ie,ye,Ee,ce,Ue,Re,qe;const An=Q.isCompressedTexture?Q.mipmaps[Nt]:Q.image;if(ct!==null)Wt=ct.max.x-ct.min.x,ee=ct.max.y-ct.min.y,ie=ct.isBox3?ct.max.z-ct.min.z:1,ye=ct.min.x,Ee=ct.min.y,ce=ct.isBox3?ct.min.z:0;else{const Rn=Math.pow(2,-ot);Wt=Math.floor(An.width*Rn),ee=Math.floor(An.height*Rn),Q.isDataArrayTexture?ie=An.depth:Q.isData3DTexture?ie=Math.floor(An.depth*Rn):ie=1,ye=0,Ee=0,ce=0}mt!==null?(Ue=mt.x,Re=mt.y,qe=mt.z):(Ue=0,Re=0,qe=0);const Qe=Z.convert(st.format),In=Z.convert(st.type);let he;st.isData3DTexture?(Y.setTexture3D(st,0),he=j.TEXTURE_3D):st.isDataArrayTexture||st.isCompressedArrayTexture?(Y.setTexture2DArray(st,0),he=j.TEXTURE_2D_ARRAY):(Y.setTexture2D(st,0),he=j.TEXTURE_2D),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,st.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,st.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,st.unpackAlignment);const Rr=j.getParameter(j.UNPACK_ROW_LENGTH),We=j.getParameter(j.UNPACK_IMAGE_HEIGHT),hn=j.getParameter(j.UNPACK_SKIP_PIXELS),xi=j.getParameter(j.UNPACK_SKIP_ROWS),Lr=j.getParameter(j.UNPACK_SKIP_IMAGES);j.pixelStorei(j.UNPACK_ROW_LENGTH,An.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,An.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,ye),j.pixelStorei(j.UNPACK_SKIP_ROWS,Ee),j.pixelStorei(j.UNPACK_SKIP_IMAGES,ce);const Dr=Q.isDataArrayTexture||Q.isData3DTexture,ze=st.isDataArrayTexture||st.isData3DTexture;if(Q.isDepthTexture){const Rn=q.get(Q),pr=q.get(st),cn=q.get(Rn.__renderTarget),zs=q.get(pr.__renderTarget);T.bindFramebuffer(j.READ_FRAMEBUFFER,cn.__webglFramebuffer),T.bindFramebuffer(j.DRAW_FRAMEBUFFER,zs.__webglFramebuffer);for(let Yr=0;Yr<ie;Yr++)Dr&&(j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,q.get(Q).__webglTexture,ot,ce+Yr),j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,q.get(st).__webglTexture,Nt,qe+Yr)),j.blitFramebuffer(ye,Ee,Wt,ee,Ue,Re,Wt,ee,j.DEPTH_BUFFER_BIT,j.NEAREST);T.bindFramebuffer(j.READ_FRAMEBUFFER,null),T.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else if(ot!==0||Q.isRenderTargetTexture||q.has(Q)){const Rn=q.get(Q),pr=q.get(st);T.bindFramebuffer(j.READ_FRAMEBUFFER,ks),T.bindFramebuffer(j.DRAW_FRAMEBUFFER,Qs);for(let cn=0;cn<ie;cn++)Dr?j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,Rn.__webglTexture,ot,ce+cn):j.framebufferTexture2D(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,Rn.__webglTexture,ot),ze?j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,pr.__webglTexture,Nt,qe+cn):j.framebufferTexture2D(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,pr.__webglTexture,Nt),ot!==0?j.blitFramebuffer(ye,Ee,Wt,ee,Ue,Re,Wt,ee,j.COLOR_BUFFER_BIT,j.NEAREST):ze?j.copyTexSubImage3D(he,Nt,Ue,Re,qe+cn,ye,Ee,Wt,ee):j.copyTexSubImage2D(he,Nt,Ue,Re,ye,Ee,Wt,ee);T.bindFramebuffer(j.READ_FRAMEBUFFER,null),T.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else ze?Q.isDataTexture||Q.isData3DTexture?j.texSubImage3D(he,Nt,Ue,Re,qe,Wt,ee,ie,Qe,In,An.data):st.isCompressedArrayTexture?j.compressedTexSubImage3D(he,Nt,Ue,Re,qe,Wt,ee,ie,Qe,An.data):j.texSubImage3D(he,Nt,Ue,Re,qe,Wt,ee,ie,Qe,In,An):Q.isDataTexture?j.texSubImage2D(j.TEXTURE_2D,Nt,Ue,Re,Wt,ee,Qe,In,An.data):Q.isCompressedTexture?j.compressedTexSubImage2D(j.TEXTURE_2D,Nt,Ue,Re,An.width,An.height,Qe,An.data):j.texSubImage2D(j.TEXTURE_2D,Nt,Ue,Re,Wt,ee,Qe,In,An);j.pixelStorei(j.UNPACK_ROW_LENGTH,Rr),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,We),j.pixelStorei(j.UNPACK_SKIP_PIXELS,hn),j.pixelStorei(j.UNPACK_SKIP_ROWS,xi),j.pixelStorei(j.UNPACK_SKIP_IMAGES,Lr),Nt===0&&st.generateMipmaps&&j.generateMipmap(he),T.unbindTexture()},this.copyTextureToTexture3D=function(Q,st,ct=null,mt=null,ot=0){return Q.isTexture!==!0&&(Xl("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ct=arguments[0]||null,mt=arguments[1]||null,Q=arguments[2],st=arguments[3],ot=arguments[4]||0),Xl('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Q,st,ct,mt,ot)},this.initRenderTarget=function(Q){q.get(Q).__webglFramebuffer===void 0&&Y.setupRenderTarget(Q)},this.initTexture=function(Q){Q.isCubeTexture?Y.setTextureCube(Q,0):Q.isData3DTexture?Y.setTexture3D(Q,0):Q.isDataArrayTexture||Q.isCompressedArrayTexture?Y.setTexture2DArray(Q,0):Y.setTexture2D(Q,0),T.unbindTexture()},this.resetState=function(){L=0,F=0,D=null,T.reset(),wt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Mr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorspace=Ve._getDrawingBufferColorSpace(t),e.unpackColorSpace=Ve._getUnpackColorSpace()}}const Uk=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:rS,AddEquation:_a,AddOperation:tS,AdditiveAnimationBlendMode:eE,AdditiveBlending:Zv,AgXToneMapping:aS,AlphaFormat:Yy,AlwaysCompare:bS,AlwaysDepth:mp,AlwaysStencilFunc:ny,AmbientLight:AB,AnimationAction:wB,AnimationClip:oh,AnimationLoader:qU,AnimationMixer:E3,AnimationObjectGroup:v3,AnimationUtils:zU,ArcCurve:QS,ArrayCamera:bB,ArrowHelper:V3,AttachedBindMode:ey,Audio:CB,AudioAnalyser:l3,AudioContext:_E,AudioListener:s3,AudioLoader:n3,AxesHelper:q3,BackSide:yi,BasicDepthPacking:dS,BasicShadowMap:EL,BatchedMesh:NS,Bone:oE,BooleanKeyframeTrack:ko,Box2:I3,Box3:Ei,Box3Helper:G3,BoxGeometry:Fo,BoxHelper:z3,BufferAttribute:ln,BufferGeometry:Ie,BufferGeometryLoader:EB,ByteType:Wy,Cache:Ms,Camera:MA,CameraHelper:Q3,CanvasTexture:hU,CapsuleGeometry:DA,CatmullRomCurve3:zS,CineonToneMapping:iS,CircleGeometry:UA,ClampToEdgeWrapping:lr,Clock:xB,Color:$t,ColorKeyframeTrack:bE,ColorManagement:Ve,CompressedArrayTexture:cU,CompressedCubeTexture:uU,CompressedTexture:RA,CompressedTextureLoader:WU,ConeGeometry:OA,ConstantAlphaFactor:JM,ConstantColorFactor:YM,Controls:j3,CubeCamera:BS,CubeReflectionMapping:Ns,CubeRefractionMapping:Ba,CubeTexture:vh,CubeTextureLoader:jU,CubeUVReflectionMapping:lc,CubicBezierCurve:hE,CubicBezierCurve3:GS,CubicInterpolant:oB,CullFaceBack:Jv,CullFaceFront:DM,CullFaceFrontBack:yL,CullFaceNone:LM,Curve:Tr,CurvePath:VS,CustomBlending:OM,CustomToneMapping:sS,CylinderGeometry:hc,Cylindrical:T3,Data3DTexture:_A,DataArrayTexture:gh,DataTexture:Vr,DataTextureLoader:XU,DataUtils:ND,DecrementStencilOp:UL,DecrementWrapStencilOp:NL,DefaultLoadingManager:uB,DepthFormat:Ma,DepthStencilFormat:Sa,DepthTexture:cE,DetachedBindMode:lS,DirectionalLight:pB,DirectionalLightHelper:k3,DiscreteInterpolant:lB,DodecahedronGeometry:NA,DoubleSide:zr,DstAlphaFactor:VM,DstColorFactor:WM,DynamicCopyUsage:JL,DynamicDrawUsage:qL,DynamicReadUsage:XL,EdgesGeometry:qS,EllipseCurve:LA,EqualCompare:gS,EqualDepth:vp,EqualStencilFunc:QL,EquirectangularReflectionMapping:qu,EquirectangularRefractionMapping:Wu,Euler:Yi,EventDispatcher:jr,ExtrudeGeometry:FA,FileLoader:Fs,Float16BufferAttribute:HD,Float32BufferAttribute:oe,FloatType:Ai,Fog:BA,FogExp2:SA,FramebufferTexture:lU,FrontSide:Os,Frustum:yh,GLBufferAttribute:M3,GLSL1:$L,GLSL3:iy,GreaterCompare:vS,GreaterDepth:Ep,GreaterEqualCompare:ES,GreaterEqualDepth:yp,GreaterEqualStencilFunc:VL,GreaterStencilFunc:GL,GridHelper:P3,Group:Jl,HalfFloatType:cc,HemisphereLight:hB,HemisphereLightHelper:N3,IcosahedronGeometry:kA,ImageBitmapLoader:e3,ImageLoader:lh,ImageUtils:_S,IncrementStencilOp:DL,IncrementWrapStencilOp:OL,InstancedBufferAttribute:ac,InstancedBufferGeometry:yB,InstancedInterleavedBuffer:w3,InstancedMesh:OS,Int16BufferAttribute:zD,Int32BufferAttribute:GD,Int8BufferAttribute:FD,IntType:mA,InterleavedBuffer:TA,InterleavedBufferAttribute:No,Interpolant:Ch,InterpolateDiscrete:Yu,InterpolateLinear:Xp,InterpolateSmooth:ip,InvertStencilOp:PL,KeepStencilOp:xo,KeyframeTrack:Ir,LOD:DS,LatheGeometry:Eh,Layers:wA,LessCompare:mS,LessDepth:gp,LessEqualCompare:nE,LessEqualDepth:Uo,LessEqualStencilFunc:zL,LessStencilFunc:kL,Light:Oa,LightProbe:vB,Line:Ta,Line3:R3,LineBasicMaterial:bi,LineCurve:dE,LineCurve3:HS,LineDashedMaterial:rB,LineLoop:PS,LineSegments:Xr,LinearFilter:Gn,LinearInterpolant:EE,LinearMipMapLinearFilter:_L,LinearMipMapNearestFilter:CL,LinearMipmapLinearFilter:Gr,LinearMipmapNearestFilter:Uu,LinearSRGBColorSpace:Oo,LinearToneMapping:eS,LinearTransfer:Ju,Loader:Ni,LoaderUtils:ly,LoadingManager:xE,LoopOnce:cS,LoopPingPong:hS,LoopRepeat:uS,LuminanceAlphaFormat:Zy,LuminanceFormat:Jy,MOUSE:gL,Material:ci,MaterialLoader:jA,MathUtils:gD,Matrix2:BE,Matrix3:Ce,Matrix4:ve,MaxEquation:kM,Mesh:Pn,MeshBasicMaterial:Da,MeshDepthMaterial:gE,MeshDistanceMaterial:vE,MeshLambertMaterial:nB,MeshMatcapMaterial:iB,MeshNormalMaterial:eB,MeshPhongMaterial:$S,MeshPhysicalMaterial:ZS,MeshStandardMaterial:mE,MeshToonMaterial:tB,MinEquation:FM,MirroredRepeatWrapping:Xu,MixOperation:$M,MultiplyBlending:ty,MultiplyOperation:Ah,NearestFilter:ni,NearestMipMapLinearFilter:xL,NearestMipMapNearestFilter:bL,NearestMipmapLinearFilter:Yl,NearestMipmapNearestFilter:qy,NeutralToneMapping:oS,NeverCompare:AS,NeverDepth:Ap,NeverStencilFunc:FL,NoBlending:Is,NoColorSpace:_s,NoToneMapping:Rs,NormalAnimationBlendMode:xA,NormalBlending:Io,NotEqualCompare:yS,NotEqualDepth:bp,NotEqualStencilFunc:HL,NumberKeyframeTrack:sh,Object3D:Ye,ObjectLoader:$U,ObjectSpaceNormalMap:pS,OctahedronGeometry:bh,OneFactor:zM,OneMinusConstantAlphaFactor:ZM,OneMinusConstantColorFactor:KM,OneMinusDstAlphaFactor:qM,OneMinusDstColorFactor:jM,OneMinusSrcAlphaFactor:pp,OneMinusSrcColorFactor:HM,OrthographicCamera:WA,PCFShadowMap:Vy,PCFSoftShadowMap:UM,PMREMGenerator:hy,Path:eh,PerspectiveCamera:$n,Plane:xa,PlaneGeometry:dc,PlaneHelper:H3,PointLight:fB,PointLightHelper:U3,Points:FS,PointsMaterial:lE,PolarGridHelper:F3,PolyhedronGeometry:Ua,PositionalAudio:o3,PropertyBinding:je,PropertyMixer:_B,QuadraticBezierCurve:fE,QuadraticBezierCurve3:pE,Quaternion:Oi,QuaternionKeyframeTrack:_h,QuaternionLinearInterpolant:cB,RED_GREEN_RGTC2_Format:Wp,RED_RGTC1_Format:tE,REVISION:pA,RGBADepthPacking:fS,RGBAFormat:vi,RGBAIntegerFormat:bA,RGBA_ASTC_10x10_Format:Qp,RGBA_ASTC_10x5_Format:Pp,RGBA_ASTC_10x6_Format:Fp,RGBA_ASTC_10x8_Format:kp,RGBA_ASTC_12x10_Format:zp,RGBA_ASTC_12x12_Format:Gp,RGBA_ASTC_4x4_Format:Tp,RGBA_ASTC_5x4_Format:Ip,RGBA_ASTC_5x5_Format:Rp,RGBA_ASTC_6x5_Format:Lp,RGBA_ASTC_6x6_Format:Dp,RGBA_ASTC_8x5_Format:Up,RGBA_ASTC_8x6_Format:Op,RGBA_ASTC_8x8_Format:Np,RGBA_BPTC_Format:ku,RGBA_ETC2_EAC_Format:Bp,RGBA_PVRTC_2BPPV1_Format:wp,RGBA_PVRTC_4BPPV1_Format:_p,RGBA_S3TC_DXT1_Format:Nu,RGBA_S3TC_DXT3_Format:Pu,RGBA_S3TC_DXT5_Format:Fu,RGBDepthPacking:TL,RGBFormat:Ky,RGBIntegerFormat:wL,RGB_BPTC_SIGNED_Format:Hp,RGB_BPTC_UNSIGNED_Format:Vp,RGB_ETC1_Format:Mp,RGB_ETC2_Format:Sp,RGB_PVRTC_2BPPV1_Format:Cp,RGB_PVRTC_4BPPV1_Format:xp,RGB_S3TC_DXT1_Format:Ou,RGDepthPacking:IL,RGFormat:$y,RGIntegerFormat:EA,RawShaderMaterial:JS,Ray:uc,Raycaster:S3,RectAreaLight:mB,RedFormat:yA,RedIntegerFormat:mh,ReinhardToneMapping:nS,RenderTarget:CA,RenderTarget3D:b3,RenderTargetArray:x3,RepeatWrapping:ju,ReplaceStencilOp:LL,ReverseSubtractEquation:PM,RingGeometry:QA,SIGNED_RED_GREEN_RGTC2_Format:jp,SIGNED_RED_RGTC1_Format:qp,SRGBColorSpace:Li,SRGBTransfer:rn,Scene:IS,ShaderChunk:Te,ShaderLib:_r,ShaderMaterial:Br,ShadowMaterial:KS,Shape:Lo,ShapeGeometry:zA,ShapePath:W3,ShapeUtils:qr,ShortType:jy,Skeleton:IA,SkeletonHelper:D3,SkinnedMesh:US,Source:Bo,Sphere:li,SphereGeometry:xh,Spherical:B3,SphericalHarmonics3:gB,SplineCurve:AE,SpotLight:dB,SpotLightHelper:L3,Sprite:LS,SpriteMaterial:aE,SrcAlphaFactor:fp,SrcAlphaSaturateFactor:XM,SrcColorFactor:GM,StaticCopyUsage:KL,StaticDrawUsage:Zu,StaticReadUsage:jL,StereoCamera:i3,StreamCopyUsage:ZL,StreamDrawUsage:WL,StreamReadUsage:YL,StringKeyframeTrack:Qo,SubtractEquation:NM,SubtractiveBlending:$v,TOUCH:vL,TangentSpaceNormalMap:La,TetrahedronGeometry:GA,Texture:Cn,TextureLoader:YU,TextureUtils:Z3,TimestampQuery:tD,TorusGeometry:HA,TorusKnotGeometry:VA,Triangle:Di,TriangleFanDrawMode:BL,TriangleStripDrawMode:SL,TrianglesDrawMode:ML,TubeGeometry:qA,UVMapping:AA,Uint16BufferAttribute:rE,Uint32BufferAttribute:sE,Uint8BufferAttribute:kD,Uint8ClampedBufferAttribute:QD,Uniform:SE,UniformsGroup:_3,UniformsLib:Kt,UniformsUtils:SS,UnsignedByteType:Wr,UnsignedInt248Type:wa,UnsignedInt5999Type:Xy,UnsignedIntType:Ps,UnsignedShort4444Type:gA,UnsignedShort5551Type:vA,UnsignedShortType:ic,VSMShadowMap:kr,Vector2:Ut,Vector3:W,Vector4:Xe,VectorKeyframeTrack:ah,VideoFrameTexture:oU,VideoTexture:kS,WebGL3DRenderTarget:MD,WebGLArrayRenderTarget:wD,WebGLCoordinateSystem:Mr,WebGLCubeRenderTarget:TS,WebGLRenderTarget:Sr,WebGLRenderer:Dk,WebGLUtils:LB,WebGPUCoordinateSystem:$u,WebXRController:rp,WireframeGeometry:YS,WrapAroundEnding:Ku,ZeroCurvatureEnding:Mo,ZeroFactor:QM,ZeroSlopeEnding:So,ZeroStencilOp:RL,createCanvasElement:CS},Symbol.toStringTag,{value:"Module"}));var Ok={},UB={8167:n=>{var t=Object.prototype.toString;n.exports=function(e){return e.BYTES_PER_ELEMENT&&t.call(e.buffer)==="[object ArrayBuffer]"||Array.isArray(e)}},5734:n=>{n.exports=function(t,e){return typeof t=="number"?t:typeof e=="number"?e:0}},7961:(n,t)=>{t.byteLength=function(d){var f=c(d),A=f[0],m=f[1];return 3*(A+m)/4-m},t.toByteArray=function(d){var f,A,m=c(d),g=m[0],b=m[1],x=new r((function(_,w,S){return 3*(w+S)/4-S})(0,g,b)),E=0,y=b>0?g-4:g;for(A=0;A<y;A+=4)f=i[d.charCodeAt(A)]<<18|i[d.charCodeAt(A+1)]<<12|i[d.charCodeAt(A+2)]<<6|i[d.charCodeAt(A+3)],x[E++]=f>>16&255,x[E++]=f>>8&255,x[E++]=255&f;return b===2&&(f=i[d.charCodeAt(A)]<<2|i[d.charCodeAt(A+1)]>>4,x[E++]=255&f),b===1&&(f=i[d.charCodeAt(A)]<<10|i[d.charCodeAt(A+1)]<<4|i[d.charCodeAt(A+2)]>>2,x[E++]=f>>8&255,x[E++]=255&f),x},t.fromByteArray=function(d){for(var f,A=d.length,m=A%3,g=[],b=16383,x=0,E=A-m;x<E;x+=b)g.push(u(d,x,x+b>E?E:x+b));return m===1?(f=d[A-1],g.push(e[f>>2]+e[f<<4&63]+"==")):m===2&&(f=(d[A-2]<<8)+d[A-1],g.push(e[f>>10]+e[f>>4&63]+e[f<<2&63]+"=")),g.join("")};for(var e=[],i=[],r=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0;l<64;++l)e[l]=a[l],i[a.charCodeAt(l)]=l;function c(d){var f=d.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=d.indexOf("=");return A===-1&&(A=f),[A,A===f?0:4-A%4]}function u(d,f,A){for(var m,g,b=[],x=f;x<A;x+=3)m=(d[x]<<16&16711680)+(d[x+1]<<8&65280)+(255&d[x+2]),b.push(e[(g=m)>>18&63]+e[g>>12&63]+e[g>>6&63]+e[63&g]);return b.join("")}i[45]=62,i[95]=63},911:(n,t,e)=>{var i=e(9922).hp;n.exports=function(r,a){if(i.isBuffer(r)&&i.isBuffer(a)){if(typeof r.equals=="function")return r.equals(a);if(r.length!==a.length)return!1;for(var l=0;l<r.length;l++)if(r[l]!==a[l])return!1;return!0}}},9922:(n,t,e)=>{const i=e(7961),r=e(1024),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=u,t.IS=50;const l=2147483647;function c(B){if(B>l)throw new RangeError('The value "'+B+'" is invalid for option "size"');const T=new Uint8Array(B);return Object.setPrototypeOf(T,u.prototype),T}function u(B,T,P){if(typeof B=="number"){if(typeof T=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(B)}return d(B,T,P)}function d(B,T,P){if(typeof B=="string")return(function(lt,gt){if(typeof gt=="string"&&gt!==""||(gt="utf8"),!u.isEncoding(gt))throw new TypeError("Unknown encoding: "+gt);const ne=0|x(lt,gt);let H=c(ne);const N=H.write(lt,gt);return N!==ne&&(H=H.slice(0,N)),H})(B,T);if(ArrayBuffer.isView(B))return(function(lt){if(Rt(lt,Uint8Array)){const gt=new Uint8Array(lt);return g(gt.buffer,gt.byteOffset,gt.byteLength)}return m(lt)})(B);if(B==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B);if(Rt(B,ArrayBuffer)||B&&Rt(B.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Rt(B,SharedArrayBuffer)||B&&Rt(B.buffer,SharedArrayBuffer)))return g(B,T,P);if(typeof B=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const q=B.valueOf&&B.valueOf();if(q!=null&&q!==B)return u.from(q,T,P);const Y=(function(lt){if(u.isBuffer(lt)){const gt=0|b(lt.length),ne=c(gt);return ne.length===0||lt.copy(ne,0,0,gt),ne}return lt.length!==void 0?typeof lt.length!="number"||Tt(lt.length)?c(0):m(lt):lt.type==="Buffer"&&Array.isArray(lt.data)?m(lt.data):void 0})(B);if(Y)return Y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof B[Symbol.toPrimitive]=="function")return u.from(B[Symbol.toPrimitive]("string"),T,P);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B)}function f(B){if(typeof B!="number")throw new TypeError('"size" argument must be of type number');if(B<0)throw new RangeError('The value "'+B+'" is invalid for option "size"')}function A(B){return f(B),c(B<0?0:0|b(B))}function m(B){const T=B.length<0?0:0|b(B.length),P=c(T);for(let q=0;q<T;q+=1)P[q]=255&B[q];return P}function g(B,T,P){if(T<0||B.byteLength<T)throw new RangeError('"offset" is outside of buffer bounds');if(B.byteLength<T+(P||0))throw new RangeError('"length" is outside of buffer bounds');let q;return q=T===void 0&&P===void 0?new Uint8Array(B):P===void 0?new Uint8Array(B,T):new Uint8Array(B,T,P),Object.setPrototypeOf(q,u.prototype),q}function b(B){if(B>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return 0|B}function x(B,T){if(u.isBuffer(B))return B.length;if(ArrayBuffer.isView(B)||Rt(B,ArrayBuffer))return B.byteLength;if(typeof B!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof B);const P=B.length,q=arguments.length>2&&arguments[2]===!0;if(!q&&P===0)return 0;let Y=!1;for(;;)switch(T){case"ascii":case"latin1":case"binary":return P;case"utf8":case"utf-8":return Ft(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*P;case"hex":return P>>>1;case"base64":return Jt(B).length;default:if(Y)return q?-1:Ft(B).length;T=(""+T).toLowerCase(),Y=!0}}function E(B,T,P){let q=!1;if((T===void 0||T<0)&&(T=0),T>this.length||((P===void 0||P>this.length)&&(P=this.length),P<=0)||(P>>>=0)<=(T>>>=0))return"";for(B||(B="utf8");;)switch(B){case"hex":return nt(this,T,P);case"utf8":case"utf-8":return O(this,T,P);case"ascii":return J(this,T,P);case"latin1":case"binary":return $(this,T,P);case"base64":return D(this,T,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return At(this,T,P);default:if(q)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),q=!0}}function y(B,T,P){const q=B[T];B[T]=B[P],B[P]=q}function _(B,T,P,q,Y){if(B.length===0)return-1;if(typeof P=="string"?(q=P,P=0):P>2147483647?P=2147483647:P<-2147483648&&(P=-2147483648),Tt(P=+P)&&(P=Y?0:B.length-1),P<0&&(P=B.length+P),P>=B.length){if(Y)return-1;P=B.length-1}else if(P<0){if(!Y)return-1;P=0}if(typeof T=="string"&&(T=u.from(T,q)),u.isBuffer(T))return T.length===0?-1:w(B,T,P,q,Y);if(typeof T=="number")return T&=255,typeof Uint8Array.prototype.indexOf=="function"?Y?Uint8Array.prototype.indexOf.call(B,T,P):Uint8Array.prototype.lastIndexOf.call(B,T,P):w(B,[T],P,q,Y);throw new TypeError("val must be string, number or Buffer")}function w(B,T,P,q,Y){let lt,gt=1,ne=B.length,H=T.length;if(q!==void 0&&((q=String(q).toLowerCase())==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if(B.length<2||T.length<2)return-1;gt=2,ne/=2,H/=2,P/=2}function N(it,bt){return gt===1?it[bt]:it.readUInt16BE(bt*gt)}if(Y){let it=-1;for(lt=P;lt<ne;lt++)if(N(B,lt)===N(T,it===-1?0:lt-it)){if(it===-1&&(it=lt),lt-it+1===H)return it*gt}else it!==-1&&(lt-=lt-it),it=-1}else for(P+H>ne&&(P=ne-H),lt=P;lt>=0;lt--){let it=!0;for(let bt=0;bt<H;bt++)if(N(B,lt+bt)!==N(T,bt)){it=!1;break}if(it)return lt}return-1}function S(B,T,P,q){P=Number(P)||0;const Y=B.length-P;q?(q=Number(q))>Y&&(q=Y):q=Y;const lt=T.length;let gt;for(q>lt/2&&(q=lt/2),gt=0;gt<q;++gt){const ne=parseInt(T.substr(2*gt,2),16);if(Tt(ne))return gt;B[P+gt]=ne}return gt}function R(B,T,P,q){return Ct(Ft(T,B.length-P),B,P,q)}function U(B,T,P,q){return Ct((function(Y){const lt=[];for(let gt=0;gt<Y.length;++gt)lt.push(255&Y.charCodeAt(gt));return lt})(T),B,P,q)}function L(B,T,P,q){return Ct(Jt(T),B,P,q)}function F(B,T,P,q){return Ct((function(Y,lt){let gt,ne,H;const N=[];for(let it=0;it<Y.length&&!((lt-=2)<0);++it)gt=Y.charCodeAt(it),ne=gt>>8,H=gt%256,N.push(H),N.push(ne);return N})(T,B.length-P),B,P,q)}function D(B,T,P){return T===0&&P===B.length?i.fromByteArray(B):i.fromByteArray(B.slice(T,P))}function O(B,T,P){P=Math.min(B.length,P);const q=[];let Y=T;for(;Y<P;){const lt=B[Y];let gt=null,ne=lt>239?4:lt>223?3:lt>191?2:1;if(Y+ne<=P){let H,N,it,bt;switch(ne){case 1:lt<128&&(gt=lt);break;case 2:H=B[Y+1],(192&H)==128&&(bt=(31&lt)<<6|63&H,bt>127&&(gt=bt));break;case 3:H=B[Y+1],N=B[Y+2],(192&H)==128&&(192&N)==128&&(bt=(15&lt)<<12|(63&H)<<6|63&N,bt>2047&&(bt<55296||bt>57343)&&(gt=bt));break;case 4:H=B[Y+1],N=B[Y+2],it=B[Y+3],(192&H)==128&&(192&N)==128&&(192&it)==128&&(bt=(15&lt)<<18|(63&H)<<12|(63&N)<<6|63&it,bt>65535&&bt<1114112&&(gt=bt))}}gt===null?(gt=65533,ne=1):gt>65535&&(gt-=65536,q.push(gt>>>10&1023|55296),gt=56320|1023&gt),q.push(gt),Y+=ne}return(function(lt){const gt=lt.length;if(gt<=z)return String.fromCharCode.apply(String,lt);let ne="",H=0;for(;H<gt;)ne+=String.fromCharCode.apply(String,lt.slice(H,H+=z));return ne})(q)}u.TYPED_ARRAY_SUPPORT=(function(){try{const B=new Uint8Array(1),T={foo:function(){return 42}};return Object.setPrototypeOf(T,Uint8Array.prototype),Object.setPrototypeOf(B,T),B.foo()===42}catch{return!1}})(),u.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(B,T,P){return d(B,T,P)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(B,T,P){return(function(q,Y,lt){return f(q),q<=0?c(q):Y!==void 0?typeof lt=="string"?c(q).fill(Y,lt):c(q).fill(Y):c(q)})(B,T,P)},u.allocUnsafe=function(B){return A(B)},u.allocUnsafeSlow=function(B){return A(B)},u.isBuffer=function(B){return B!=null&&B._isBuffer===!0&&B!==u.prototype},u.compare=function(B,T){if(Rt(B,Uint8Array)&&(B=u.from(B,B.offset,B.byteLength)),Rt(T,Uint8Array)&&(T=u.from(T,T.offset,T.byteLength)),!u.isBuffer(B)||!u.isBuffer(T))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(B===T)return 0;let P=B.length,q=T.length;for(let Y=0,lt=Math.min(P,q);Y<lt;++Y)if(B[Y]!==T[Y]){P=B[Y],q=T[Y];break}return P<q?-1:q<P?1:0},u.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(B,T){if(!Array.isArray(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return u.alloc(0);let P;if(T===void 0)for(T=0,P=0;P<B.length;++P)T+=B[P].length;const q=u.allocUnsafe(T);let Y=0;for(P=0;P<B.length;++P){let lt=B[P];if(Rt(lt,Uint8Array))Y+lt.length>q.length?(u.isBuffer(lt)||(lt=u.from(lt)),lt.copy(q,Y)):Uint8Array.prototype.set.call(q,lt,Y);else{if(!u.isBuffer(lt))throw new TypeError('"list" argument must be an Array of Buffers');lt.copy(q,Y)}Y+=lt.length}return q},u.byteLength=x,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const B=this.length;if(B%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let T=0;T<B;T+=2)y(this,T,T+1);return this},u.prototype.swap32=function(){const B=this.length;if(B%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let T=0;T<B;T+=4)y(this,T,T+3),y(this,T+1,T+2);return this},u.prototype.swap64=function(){const B=this.length;if(B%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let T=0;T<B;T+=8)y(this,T,T+7),y(this,T+1,T+6),y(this,T+2,T+5),y(this,T+3,T+4);return this},u.prototype.toString=function(){const B=this.length;return B===0?"":arguments.length===0?O(this,0,B):E.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(B){if(!u.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B||u.compare(this,B)===0},u.prototype.inspect=function(){let B="";const T=t.IS;return B=this.toString("hex",0,T).replace(/(.{2})/g,"$1 ").trim(),this.length>T&&(B+=" ... "),"<Buffer "+B+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(B,T,P,q,Y){if(Rt(B,Uint8Array)&&(B=u.from(B,B.offset,B.byteLength)),!u.isBuffer(B))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof B);if(T===void 0&&(T=0),P===void 0&&(P=B?B.length:0),q===void 0&&(q=0),Y===void 0&&(Y=this.length),T<0||P>B.length||q<0||Y>this.length)throw new RangeError("out of range index");if(q>=Y&&T>=P)return 0;if(q>=Y)return-1;if(T>=P)return 1;if(this===B)return 0;let lt=(Y>>>=0)-(q>>>=0),gt=(P>>>=0)-(T>>>=0);const ne=Math.min(lt,gt),H=this.slice(q,Y),N=B.slice(T,P);for(let it=0;it<ne;++it)if(H[it]!==N[it]){lt=H[it],gt=N[it];break}return lt<gt?-1:gt<lt?1:0},u.prototype.includes=function(B,T,P){return this.indexOf(B,T,P)!==-1},u.prototype.indexOf=function(B,T,P){return _(this,B,T,P,!0)},u.prototype.lastIndexOf=function(B,T,P){return _(this,B,T,P,!1)},u.prototype.write=function(B,T,P,q){if(T===void 0)q="utf8",P=this.length,T=0;else if(P===void 0&&typeof T=="string")q=T,P=this.length,T=0;else{if(!isFinite(T))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");T>>>=0,isFinite(P)?(P>>>=0,q===void 0&&(q="utf8")):(q=P,P=void 0)}const Y=this.length-T;if((P===void 0||P>Y)&&(P=Y),B.length>0&&(P<0||T<0)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");let lt=!1;for(;;)switch(q){case"hex":return S(this,B,T,P);case"utf8":case"utf-8":return R(this,B,T,P);case"ascii":case"latin1":case"binary":return U(this,B,T,P);case"base64":return L(this,B,T,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,B,T,P);default:if(lt)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),lt=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const z=4096;function J(B,T,P){let q="";P=Math.min(B.length,P);for(let Y=T;Y<P;++Y)q+=String.fromCharCode(127&B[Y]);return q}function $(B,T,P){let q="";P=Math.min(B.length,P);for(let Y=T;Y<P;++Y)q+=String.fromCharCode(B[Y]);return q}function nt(B,T,P){const q=B.length;(!T||T<0)&&(T=0),(!P||P<0||P>q)&&(P=q);let Y="";for(let lt=T;lt<P;++lt)Y+=j[B[lt]];return Y}function At(B,T,P){const q=B.slice(T,P);let Y="";for(let lt=0;lt<q.length-1;lt+=2)Y+=String.fromCharCode(q[lt]+256*q[lt+1]);return Y}function G(B,T,P){if(B%1!=0||B<0)throw new RangeError("offset is not uint");if(B+T>P)throw new RangeError("Trying to access beyond buffer length")}function X(B,T,P,q,Y,lt){if(!u.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(T>Y||T<lt)throw new RangeError('"value" argument is out of bounds');if(P+q>B.length)throw new RangeError("Index out of range")}function tt(B,T,P,q,Y){Gt(T,q,Y,B,P,7);let lt=Number(T&BigInt(4294967295));B[P++]=lt,lt>>=8,B[P++]=lt,lt>>=8,B[P++]=lt,lt>>=8,B[P++]=lt;let gt=Number(T>>BigInt(32)&BigInt(4294967295));return B[P++]=gt,gt>>=8,B[P++]=gt,gt>>=8,B[P++]=gt,gt>>=8,B[P++]=gt,P}function ut(B,T,P,q,Y){Gt(T,q,Y,B,P,7);let lt=Number(T&BigInt(4294967295));B[P+7]=lt,lt>>=8,B[P+6]=lt,lt>>=8,B[P+5]=lt,lt>>=8,B[P+4]=lt;let gt=Number(T>>BigInt(32)&BigInt(4294967295));return B[P+3]=gt,gt>>=8,B[P+2]=gt,gt>>=8,B[P+1]=gt,gt>>=8,B[P]=gt,P+8}function xt(B,T,P,q,Y,lt){if(P+q>B.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("Index out of range")}function V(B,T,P,q,Y){return T=+T,P>>>=0,Y||xt(B,0,P,4),r.write(B,T,P,q,23,4),P+4}function rt(B,T,P,q,Y){return T=+T,P>>>=0,Y||xt(B,0,P,8),r.write(B,T,P,q,52,8),P+8}u.prototype.slice=function(B,T){const P=this.length;(B=~~B)<0?(B+=P)<0&&(B=0):B>P&&(B=P),(T=T===void 0?P:~~T)<0?(T+=P)<0&&(T=0):T>P&&(T=P),T<B&&(T=B);const q=this.subarray(B,T);return Object.setPrototypeOf(q,u.prototype),q},u.prototype.readUintLE=u.prototype.readUIntLE=function(B,T,P){B>>>=0,T>>>=0,P||G(B,T,this.length);let q=this[B],Y=1,lt=0;for(;++lt<T&&(Y*=256);)q+=this[B+lt]*Y;return q},u.prototype.readUintBE=u.prototype.readUIntBE=function(B,T,P){B>>>=0,T>>>=0,P||G(B,T,this.length);let q=this[B+--T],Y=1;for(;T>0&&(Y*=256);)q+=this[B+--T]*Y;return q},u.prototype.readUint8=u.prototype.readUInt8=function(B,T){return B>>>=0,T||G(B,1,this.length),this[B]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(B,T){return B>>>=0,T||G(B,2,this.length),this[B]|this[B+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(B,T){return B>>>=0,T||G(B,2,this.length),this[B]<<8|this[B+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(B,T){return B>>>=0,T||G(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+16777216*this[B+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(B,T){return B>>>=0,T||G(B,4,this.length),16777216*this[B]+(this[B+1]<<16|this[B+2]<<8|this[B+3])},u.prototype.readBigUInt64LE=zt((function(B){Lt(B>>>=0,"offset");const T=this[B],P=this[B+7];T!==void 0&&P!==void 0||ft(B,this.length-8);const q=T+256*this[++B]+65536*this[++B]+this[++B]*2**24,Y=this[++B]+256*this[++B]+65536*this[++B]+P*2**24;return BigInt(q)+(BigInt(Y)<<BigInt(32))})),u.prototype.readBigUInt64BE=zt((function(B){Lt(B>>>=0,"offset");const T=this[B],P=this[B+7];T!==void 0&&P!==void 0||ft(B,this.length-8);const q=T*2**24+65536*this[++B]+256*this[++B]+this[++B],Y=this[++B]*2**24+65536*this[++B]+256*this[++B]+P;return(BigInt(q)<<BigInt(32))+BigInt(Y)})),u.prototype.readIntLE=function(B,T,P){B>>>=0,T>>>=0,P||G(B,T,this.length);let q=this[B],Y=1,lt=0;for(;++lt<T&&(Y*=256);)q+=this[B+lt]*Y;return Y*=128,q>=Y&&(q-=Math.pow(2,8*T)),q},u.prototype.readIntBE=function(B,T,P){B>>>=0,T>>>=0,P||G(B,T,this.length);let q=T,Y=1,lt=this[B+--q];for(;q>0&&(Y*=256);)lt+=this[B+--q]*Y;return Y*=128,lt>=Y&&(lt-=Math.pow(2,8*T)),lt},u.prototype.readInt8=function(B,T){return B>>>=0,T||G(B,1,this.length),128&this[B]?-1*(255-this[B]+1):this[B]},u.prototype.readInt16LE=function(B,T){B>>>=0,T||G(B,2,this.length);const P=this[B]|this[B+1]<<8;return 32768&P?4294901760|P:P},u.prototype.readInt16BE=function(B,T){B>>>=0,T||G(B,2,this.length);const P=this[B+1]|this[B]<<8;return 32768&P?4294901760|P:P},u.prototype.readInt32LE=function(B,T){return B>>>=0,T||G(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},u.prototype.readInt32BE=function(B,T){return B>>>=0,T||G(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},u.prototype.readBigInt64LE=zt((function(B){Lt(B>>>=0,"offset");const T=this[B],P=this[B+7];T!==void 0&&P!==void 0||ft(B,this.length-8);const q=this[B+4]+256*this[B+5]+65536*this[B+6]+(P<<24);return(BigInt(q)<<BigInt(32))+BigInt(T+256*this[++B]+65536*this[++B]+this[++B]*2**24)})),u.prototype.readBigInt64BE=zt((function(B){Lt(B>>>=0,"offset");const T=this[B],P=this[B+7];T!==void 0&&P!==void 0||ft(B,this.length-8);const q=(T<<24)+65536*this[++B]+256*this[++B]+this[++B];return(BigInt(q)<<BigInt(32))+BigInt(this[++B]*2**24+65536*this[++B]+256*this[++B]+P)})),u.prototype.readFloatLE=function(B,T){return B>>>=0,T||G(B,4,this.length),r.read(this,B,!0,23,4)},u.prototype.readFloatBE=function(B,T){return B>>>=0,T||G(B,4,this.length),r.read(this,B,!1,23,4)},u.prototype.readDoubleLE=function(B,T){return B>>>=0,T||G(B,8,this.length),r.read(this,B,!0,52,8)},u.prototype.readDoubleBE=function(B,T){return B>>>=0,T||G(B,8,this.length),r.read(this,B,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(B,T,P,q){B=+B,T>>>=0,P>>>=0,q||X(this,B,T,P,Math.pow(2,8*P)-1,0);let Y=1,lt=0;for(this[T]=255&B;++lt<P&&(Y*=256);)this[T+lt]=B/Y&255;return T+P},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(B,T,P,q){B=+B,T>>>=0,P>>>=0,q||X(this,B,T,P,Math.pow(2,8*P)-1,0);let Y=P-1,lt=1;for(this[T+Y]=255&B;--Y>=0&&(lt*=256);)this[T+Y]=B/lt&255;return T+P},u.prototype.writeUint8=u.prototype.writeUInt8=function(B,T,P){return B=+B,T>>>=0,P||X(this,B,T,1,255,0),this[T]=255&B,T+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(B,T,P){return B=+B,T>>>=0,P||X(this,B,T,2,65535,0),this[T]=255&B,this[T+1]=B>>>8,T+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(B,T,P){return B=+B,T>>>=0,P||X(this,B,T,2,65535,0),this[T]=B>>>8,this[T+1]=255&B,T+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(B,T,P){return B=+B,T>>>=0,P||X(this,B,T,4,4294967295,0),this[T+3]=B>>>24,this[T+2]=B>>>16,this[T+1]=B>>>8,this[T]=255&B,T+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(B,T,P){return B=+B,T>>>=0,P||X(this,B,T,4,4294967295,0),this[T]=B>>>24,this[T+1]=B>>>16,this[T+2]=B>>>8,this[T+3]=255&B,T+4},u.prototype.writeBigUInt64LE=zt((function(B,T=0){return tt(this,B,T,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=zt((function(B,T=0){return ut(this,B,T,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(B,T,P,q){if(B=+B,T>>>=0,!q){const ne=Math.pow(2,8*P-1);X(this,B,T,P,ne-1,-ne)}let Y=0,lt=1,gt=0;for(this[T]=255&B;++Y<P&&(lt*=256);)B<0&&gt===0&&this[T+Y-1]!==0&&(gt=1),this[T+Y]=(B/lt|0)-gt&255;return T+P},u.prototype.writeIntBE=function(B,T,P,q){if(B=+B,T>>>=0,!q){const ne=Math.pow(2,8*P-1);X(this,B,T,P,ne-1,-ne)}let Y=P-1,lt=1,gt=0;for(this[T+Y]=255&B;--Y>=0&&(lt*=256);)B<0&&gt===0&&this[T+Y+1]!==0&&(gt=1),this[T+Y]=(B/lt|0)-gt&255;return T+P},u.prototype.writeInt8=function(B,T,P){return B=+B,T>>>=0,P||X(this,B,T,1,127,-128),B<0&&(B=255+B+1),this[T]=255&B,T+1},u.prototype.writeInt16LE=function(B,T,P){return B=+B,T>>>=0,P||X(this,B,T,2,32767,-32768),this[T]=255&B,this[T+1]=B>>>8,T+2},u.prototype.writeInt16BE=function(B,T,P){return B=+B,T>>>=0,P||X(this,B,T,2,32767,-32768),this[T]=B>>>8,this[T+1]=255&B,T+2},u.prototype.writeInt32LE=function(B,T,P){return B=+B,T>>>=0,P||X(this,B,T,4,2147483647,-2147483648),this[T]=255&B,this[T+1]=B>>>8,this[T+2]=B>>>16,this[T+3]=B>>>24,T+4},u.prototype.writeInt32BE=function(B,T,P){return B=+B,T>>>=0,P||X(this,B,T,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),this[T]=B>>>24,this[T+1]=B>>>16,this[T+2]=B>>>8,this[T+3]=255&B,T+4},u.prototype.writeBigInt64LE=zt((function(B,T=0){return tt(this,B,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=zt((function(B,T=0){return ut(this,B,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(B,T,P){return V(this,B,T,!0,P)},u.prototype.writeFloatBE=function(B,T,P){return V(this,B,T,!1,P)},u.prototype.writeDoubleLE=function(B,T,P){return rt(this,B,T,!0,P)},u.prototype.writeDoubleBE=function(B,T,P){return rt(this,B,T,!1,P)},u.prototype.copy=function(B,T,P,q){if(!u.isBuffer(B))throw new TypeError("argument should be a Buffer");if(P||(P=0),q||q===0||(q=this.length),T>=B.length&&(T=B.length),T||(T=0),q>0&&q<P&&(q=P),q===P||B.length===0||this.length===0)return 0;if(T<0)throw new RangeError("targetStart out of bounds");if(P<0||P>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),B.length-T<q-P&&(q=B.length-T+P);const Y=q-P;return this===B&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(T,P,q):Uint8Array.prototype.set.call(B,this.subarray(P,q),T),Y},u.prototype.fill=function(B,T,P,q){if(typeof B=="string"){if(typeof T=="string"?(q=T,T=0,P=this.length):typeof P=="string"&&(q=P,P=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!u.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(B.length===1){const lt=B.charCodeAt(0);(q==="utf8"&&lt<128||q==="latin1")&&(B=lt)}}else typeof B=="number"?B&=255:typeof B=="boolean"&&(B=Number(B));if(T<0||this.length<T||this.length<P)throw new RangeError("Out of range index");if(P<=T)return this;let Y;if(T>>>=0,P=P===void 0?this.length:P>>>0,B||(B=0),typeof B=="number")for(Y=T;Y<P;++Y)this[Y]=B;else{const lt=u.isBuffer(B)?B:u.from(B,q),gt=lt.length;if(gt===0)throw new TypeError('The value "'+B+'" is invalid for argument "value"');for(Y=0;Y<P-T;++Y)this[Y+T]=lt[Y%gt]}return this};const yt={};function Et(B,T,P){yt[B]=class extends P{constructor(){super(),Object.defineProperty(this,"message",{value:T.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${B}]`,this.stack,delete this.name}get code(){return B}set code(q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:q,writable:!0})}toString(){return`${this.name} [${B}]: ${this.message}`}}}function Ot(B){let T="",P=B.length;const q=B[0]==="-"?1:0;for(;P>=q+4;P-=3)T=`_${B.slice(P-3,P)}${T}`;return`${B.slice(0,P)}${T}`}function Gt(B,T,P,q,Y,lt){if(B>P||B<T){const gt=typeof T=="bigint"?"n":"";let ne;throw ne=T===0||T===BigInt(0)?`>= 0${gt} and < 2${gt} ** ${8*(lt+1)}${gt}`:`>= -(2${gt} ** ${8*(lt+1)-1}${gt}) and < 2 ** ${8*(lt+1)-1}${gt}`,new yt.ERR_OUT_OF_RANGE("value",ne,B)}(function(gt,ne,H){Lt(ne,"offset"),gt[ne]!==void 0&&gt[ne+H]!==void 0||ft(ne,gt.length-(H+1))})(q,Y,lt)}function Lt(B,T){if(typeof B!="number")throw new yt.ERR_INVALID_ARG_TYPE(T,"number",B)}function ft(B,T,P){throw Math.floor(B)!==B?(Lt(B,P),new yt.ERR_OUT_OF_RANGE("offset","an integer",B)):T<0?new yt.ERR_BUFFER_OUT_OF_BOUNDS:new yt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${T}`,B)}Et("ERR_BUFFER_OUT_OF_BOUNDS",(function(B){return B?`${B} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),Et("ERR_INVALID_ARG_TYPE",(function(B,T){return`The "${B}" argument must be of type number. Received type ${typeof T}`}),TypeError),Et("ERR_OUT_OF_RANGE",(function(B,T,P){let q=`The value of "${B}" is out of range.`,Y=P;return Number.isInteger(P)&&Math.abs(P)>2**32?Y=Ot(String(P)):typeof P=="bigint"&&(Y=String(P),(P>BigInt(2)**BigInt(32)||P<-(BigInt(2)**BigInt(32)))&&(Y=Ot(Y)),Y+="n"),q+=` It must be ${T}. Received ${Y}`,q}),RangeError);const It=/[^+/0-9A-Za-z-_]/g;function Ft(B,T){let P;T=T||1/0;const q=B.length;let Y=null;const lt=[];for(let gt=0;gt<q;++gt){if(P=B.charCodeAt(gt),P>55295&&P<57344){if(!Y){if(P>56319){(T-=3)>-1&&lt.push(239,191,189);continue}if(gt+1===q){(T-=3)>-1&&lt.push(239,191,189);continue}Y=P;continue}if(P<56320){(T-=3)>-1&&lt.push(239,191,189),Y=P;continue}P=65536+(Y-55296<<10|P-56320)}else Y&&(T-=3)>-1&&lt.push(239,191,189);if(Y=null,P<128){if((T-=1)<0)break;lt.push(P)}else if(P<2048){if((T-=2)<0)break;lt.push(P>>6|192,63&P|128)}else if(P<65536){if((T-=3)<0)break;lt.push(P>>12|224,P>>6&63|128,63&P|128)}else{if(!(P<1114112))throw new Error("Invalid code point");if((T-=4)<0)break;lt.push(P>>18|240,P>>12&63|128,P>>6&63|128,63&P|128)}}return lt}function Jt(B){return i.toByteArray((function(T){if((T=(T=T.split("=")[0]).trim().replace(It,"")).length<2)return"";for(;T.length%4!=0;)T+="=";return T})(B))}function Ct(B,T,P,q){let Y;for(Y=0;Y<q&&!(Y+P>=T.length||Y>=B.length);++Y)T[Y+P]=B[Y];return Y}function Rt(B,T){return B instanceof T||B!=null&&B.constructor!=null&&B.constructor.name!=null&&B.constructor.name===T.name}function Tt(B){return B!=B}const j=(function(){const B="0123456789abcdef",T=new Array(256);for(let P=0;P<16;++P){const q=16*P;for(let Y=0;Y<16;++Y)T[q+Y]=B[P]+B[Y]}return T})();function zt(B){return typeof BigInt>"u"?Vt:B}function Vt(){throw new Error("BigInt not supported")}},9089:n=>{n.exports=function(t){var e=[];return e.toString=function(){return this.map((function(i){var r="",a=i[5]!==void 0;return i[4]&&(r+="@supports (".concat(i[4],") {")),i[2]&&(r+="@media ".concat(i[2]," {")),a&&(r+="@layer".concat(i[5].length>0?" ".concat(i[5]):""," {")),r+=t(i),a&&(r+="}"),i[2]&&(r+="}"),i[4]&&(r+="}"),r})).join("")},e.i=function(i,r,a,l,c){typeof i=="string"&&(i=[[null,i,void 0]]);var u={};if(a)for(var d=0;d<this.length;d++){var f=this[d][0];f!=null&&(u[f]=!0)}for(var A=0;A<i.length;A++){var m=[].concat(i[A]);a&&u[m[0]]||(c!==void 0&&(m[5]===void 0||(m[1]="@layer".concat(m[5].length>0?" ".concat(m[5]):""," {").concat(m[1],"}")),m[5]=c),r&&(m[2]&&(m[1]="@media ".concat(m[2]," {").concat(m[1],"}")),m[2]=r),l&&(m[4]?(m[1]="@supports (".concat(m[4],") {").concat(m[1],"}"),m[4]=l):m[4]="".concat(l)),e.push(m))}},e}},6492:n=>{n.exports=function(t,e){return e||(e={}),t&&(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},963:n=>{n.exports=function(t){var e=t[1],i=t[3];if(!i)return e;if(typeof btoa=="function"){var r=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),l="/*# ".concat(a," */");return[e].concat([l]).join(`
`)}return[e].join(`
`)}},8878:(n,t,e)=>{t.formatArgs=function(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const a="color: "+this.color;r.splice(1,0,a,"color: inherit");let l=0,c=0;r[0].replace(/%[a-zA-Z%]/g,(u=>{u!=="%%"&&(l++,u==="%c"&&(c=l))})),r.splice(c,0,a)},t.save=function(r){try{r?t.storage.setItem("debug",r):t.storage.removeItem("debug")}catch{}},t.load=function(){let r;try{r=t.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=Ok.DEBUG),r},t.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let r;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(r=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(r[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),n.exports=e(8945)(t);const{formatters:i}=n.exports;i.j=function(r){try{return JSON.stringify(r)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}},8945:(n,t,e)=>{n.exports=function(i){function r(c){let u,d,f,A=null;function m(...g){if(!m.enabled)return;const b=m,x=Number(new Date),E=x-(u||x);b.diff=E,b.prev=u,b.curr=x,u=x,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let y=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,((_,w)=>{if(_==="%%")return"%";y++;const S=r.formatters[w];if(typeof S=="function"){const R=g[y];_=S.call(b,R),g.splice(y,1),y--}return _})),r.formatArgs.call(b,g),(b.log||r.log).apply(b,g)}return m.namespace=c,m.useColors=r.useColors(),m.color=r.selectColor(c),m.extend=a,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>A!==null?A:(d!==r.namespaces&&(d=r.namespaces,f=r.enabled(c)),f),set:g=>{A=g}}),typeof r.init=="function"&&r.init(m),m}function a(c,u){const d=r(this.namespace+(u===void 0?":":u)+c);return d.log=this.log,d}function l(c,u){let d=0,f=0,A=-1,m=0;for(;d<c.length;)if(f<u.length&&(u[f]===c[d]||u[f]==="*"))u[f]==="*"?(A=f,m=d,f++):(d++,f++);else{if(A===-1)return!1;f=A+1,m++,d=m}for(;f<u.length&&u[f]==="*";)f++;return f===u.length}return r.debug=r,r.default=r,r.coerce=function(c){return c instanceof Error?c.stack||c.message:c},r.disable=function(){const c=[...r.names,...r.skips.map((u=>"-"+u))].join(",");return r.enable(""),c},r.enable=function(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];const u=(typeof c=="string"?c:"").trim().replace(" ",",").split(",").filter(Boolean);for(const d of u)d[0]==="-"?r.skips.push(d.slice(1)):r.names.push(d)},r.enabled=function(c){for(const u of r.skips)if(l(c,u))return!1;for(const u of r.names)if(l(c,u))return!0;return!1},r.humanize=e(9192),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(i).forEach((c=>{r[c]=i[c]})),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(c){let u=0;for(let d=0;d<c.length;d++)u=(u<<5)-u+c.charCodeAt(d),u|=0;return r.colors[Math.abs(u)%r.colors.length]},r.enable(r.load()),r}},1124:(n,t,e)=>{var i=e(6240),r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function l(u,d,f){var A=d[f];if(A!=null){if(r.call(u,f)&&(u[f]===void 0||u[f]===null))throw new TypeError("Cannot convert undefined or null to object ("+f+")");r.call(u,f)&&i(A)?u[f]=c(Object(u[f]),d[f]):u[f]=A}}function c(u,d){if(u===d)return u;for(var f in d=Object(d))r.call(d,f)&&l(u,d,f);if(Object.getOwnPropertySymbols)for(var A=Object.getOwnPropertySymbols(d),m=0;m<A.length;m++)a.call(d,A[m])&&l(u,d,A[m]);return u}n.exports=function(u){u=(function(f){if(f==null)throw new TypeError("Sources cannot be null or undefined");return Object(f)})(u);for(var d=1;d<arguments.length;d++)c(u,arguments[d]);return u}},8480:n=>{n.exports=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},919:(n,t,e)=>{var i;i=typeof window<"u"?window:e.g!==void 0?e.g:typeof self<"u"?self:{},n.exports=i},1024:(n,t)=>{t.read=function(e,i,r,a,l){var c,u,d=8*l-a-1,f=(1<<d)-1,A=f>>1,m=-7,g=r?l-1:0,b=r?-1:1,x=e[i+g];for(g+=b,c=x&(1<<-m)-1,x>>=-m,m+=d;m>0;c=256*c+e[i+g],g+=b,m-=8);for(u=c&(1<<-m)-1,c>>=-m,m+=a;m>0;u=256*u+e[i+g],g+=b,m-=8);if(c===0)c=1-A;else{if(c===f)return u?NaN:1/0*(x?-1:1);u+=Math.pow(2,a),c-=A}return(x?-1:1)*u*Math.pow(2,c-a)},t.write=function(e,i,r,a,l,c){var u,d,f,A=8*c-l-1,m=(1<<A)-1,g=m>>1,b=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=a?0:c-1,E=a?1:-1,y=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(d=isNaN(i)?1:0,u=m):(u=Math.floor(Math.log(i)/Math.LN2),i*(f=Math.pow(2,-u))<1&&(u--,f*=2),(i+=u+g>=1?b/f:b*Math.pow(2,1-g))*f>=2&&(u++,f/=2),u+g>=m?(d=0,u=m):u+g>=1?(d=(i*f-1)*Math.pow(2,l),u+=g):(d=i*Math.pow(2,g-1)*Math.pow(2,l),u=0));l>=8;e[r+x]=255&d,x+=E,d/=256,l-=8);for(u=u<<l|d,A+=l;A>0;e[r+x]=255&u,x+=E,u/=256,A-=8);e[r+x-E]|=128*y}},2225:n=>{function t(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}n.exports=function(e){return e!=null&&(t(e)||(function(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&t(i.slice(0,0))})(e)||!!e._isBuffer)}},8847:n=>{n.exports=function(e){if(!e)return!1;var i=t.call(e);return i==="[object Function]"||typeof e=="function"&&i!=="[object RegExp]"||typeof window<"u"&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var t=Object.prototype.toString},6240:n=>{n.exports=function(t){var e=typeof t;return t!==null&&(e==="object"||e==="function")}},5651:(n,t,e)=>{var i=e(5406),r=e(4597),a=e(5734),l=["x","e","a","o","n","s","r","c","u","m","v","w","z"],c=["m","w"],u=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],d=9,f=32;function A(E){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(E)}function m(E){return new Function(["return function "+E+"() {","  return this._"+E,"}"].join(`
`))()}function g(E,y){if(!E.chars||E.chars.length===0)return null;var _=x(E.chars,y);return _>=0?E.chars[_]:null}function b(E,y,_){if(!E.kernings||E.kernings.length===0)return 0;for(var w=E.kernings,S=0;S<w.length;S++){var R=w[S];if(R.first===y&&R.second===_)return R.amount}return 0}function x(E,y,_){for(var w=_=_||0;w<E.length;w++)if(E[w].id===y)return w;return-1}n.exports=function(E){return new A(E)},A.prototype.update=function(E){if(E=r({measure:this._measure},E),this._opt=E,this._opt.tabSize=a(this._opt.tabSize,4),!E.font)throw new Error("must provide a valid bitmap font");var y=this.glyphs,_=E.text||"",w=E.font;this._setupSpaceGlyphs(w);var S=i.lines(_,E),R=E.width||0;y.length=0;var U=S.reduce((function(G,X){return Math.max(G,X.width,R)}),0),L=0,F=0,D=a(E.lineHeight,w.common.lineHeight),O=w.common.base,z=D-O,J=E.letterSpacing||0,$=D*S.length-z,nt=(function(G){return G==="center"?1:G==="right"?2:0})(this._opt.align);F-=$,this._width=U,this._height=$,this._descender=D-O,this._baseline=O,this._xHeight=(function(G){for(var X=0;X<l.length;X++){var tt=l[X].charCodeAt(0),ut=x(G.chars,tt);if(ut>=0)return G.chars[ut].height}return 0})(w),this._capHeight=(function(G){for(var X=0;X<u.length;X++){var tt=u[X].charCodeAt(0),ut=x(G.chars,tt);if(ut>=0)return G.chars[ut].height}return 0})(w),this._lineHeight=D,this._ascender=D-z-this._xHeight;var At=this;S.forEach((function(G,X){for(var tt,ut=G.start,xt=G.end,V=G.width,rt=ut;rt<xt;rt++){var yt=_.charCodeAt(rt),Et=At.getGlyph(w,yt);if(Et){tt&&(L+=b(w,tt.id,Et.id));var Ot=L;nt===1?Ot+=(U-V)/2:nt===2&&(Ot+=U-V),y.push({position:[Ot,F],data:Et,index:rt,line:X}),L+=Et.xadvance+J,tt=Et}}F+=D,L=0})),this._linesTotal=S.length},A.prototype._setupSpaceGlyphs=function(E){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,E.chars&&E.chars.length!==0){var y=g(E,f)||(function(w){for(var S=0;S<c.length;S++){var R=c[S].charCodeAt(0),U=x(w.chars,R);if(U>=0)return w.chars[U]}return 0})(E)||E.chars[0],_=this._opt.tabSize*y.xadvance;this._fallbackSpaceGlyph=y,this._fallbackTabGlyph=r(y,{x:0,y:0,xadvance:_,id:d,xoffset:0,yoffset:0,width:0,height:0})}},A.prototype.getGlyph=function(E,y){return g(E,y)||(y===d?this._fallbackTabGlyph:y===f?this._fallbackSpaceGlyph:null)},A.prototype.computeMetrics=function(E,y,_,w){var S,R=this._opt.letterSpacing||0,U=this._opt.font,L=0,F=0,D=0;if(!U.chars||U.chars.length===0)return{start:y,end:y,width:0};_=Math.min(E.length,_);for(var O=y;O<_;O++){var z,J=E.charCodeAt(O);if(z=this.getGlyph(U,J)){z.xoffset;var $=(L+=S?b(U,S.id,z.id):0)+z.xadvance+R,nt=L+z.width;if(nt>=w||$>=w)break;L=$,F=nt,S=z}D++}return S&&(F+=S.xoffset),{start:y,end:y+D,width:F}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach((function(E){Object.defineProperty(A.prototype,E,{get:m(E),configurable:!0})}))},5751:(n,t,e)=>{var i=e(9922).hp,r=e(3558),a=function(){},l=e(1476),c=e(7034),u=e(7480),d=e(573),f=e(4597),A=self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;n.exports=function(m,g){g=typeof g=="function"?g:a,typeof m=="string"?m={uri:m}:m||(m={}),m.binary&&(m=(function(b){if(A)return f(b,{responseType:"arraybuffer"});if(self.XMLHttpRequest===void 0)throw new Error("your browser does not support XHR loading");var x=new self.XMLHttpRequest;return x.overrideMimeType("text/plain; charset=x-user-defined"),f({xhr:x},b)})(m)),r(m,(function(b,x,E){if(b)return g(b);if(!/^2/.test(x.statusCode))return g(new Error("http status code: "+x.statusCode));if(!E)return g(new Error("no body result"));var y,_,w=!1;if(y=E,Object.prototype.toString.call(y)==="[object ArrayBuffer]"){var S=new Uint8Array(E);E=i.from(S,"binary")}d(E)&&(w=!0,typeof E=="string"&&(E=i.from(E,"binary"))),w||(i.isBuffer(E)&&(E=E.toString(m.encoding)),E=E.trim());try{var R=x.headers["content-type"];_=w?u(E):/json/.test(R)||E.charAt(0)==="{"?JSON.parse(E):/xml/.test(R)||E.charAt(0)==="<"?c(E):l(E)}catch(U){g(new Error("error parsing font "+U.message)),g=a}g(null,_)}))}},573:(n,t,e)=>{var i=e(9922).hp,r=e(911),a=i.from([66,77,70,3]);n.exports=function(l){return typeof l=="string"?l.substring(0,3)==="BMF":l.length>4&&r(l.slice(0,4),a)}},9192:n=>{var t=1e3,e=60*t,i=60*e,r=24*i,a=7*r;function l(c,u,d,f){var A=u>=1.5*d;return Math.round(c/d)+" "+f+(A?"s":"")}n.exports=function(c,u){u=u||{};var d,f,A=typeof c;if(A==="string"&&c.length>0)return(function(m){if(!((m=String(m)).length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(g){var b=parseFloat(g[1]);switch((g[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*b;case"weeks":case"week":case"w":return b*a;case"days":case"day":case"d":return b*r;case"hours":case"hour":case"hrs":case"hr":case"h":return b*i;case"minutes":case"minute":case"mins":case"min":case"m":return b*e;case"seconds":case"second":case"secs":case"sec":case"s":return b*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}})(c);if(A==="number"&&isFinite(c))return u.long?(d=c,(f=Math.abs(d))>=r?l(d,f,r,"day"):f>=i?l(d,f,i,"hour"):f>=e?l(d,f,e,"minute"):f>=t?l(d,f,t,"second"):d+" ms"):(function(m){var g=Math.abs(m);return g>=r?Math.round(m/r)+"d":g>=i?Math.round(m/i)+"h":g>=e?Math.round(m/e)+"m":g>=t?Math.round(m/t)+"s":m+"ms"})(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))}},1476:n=>{function t(i,r){if(!(i=i.replace(/\t+/g," ").trim()))return null;var a=i.indexOf(" ");if(a===-1)throw new Error("no named row at line "+r);var l=i.substring(0,a);i=(i=(i=(i=i.substring(a+1)).replace(/letter=[\'\"]\S+[\'\"]/gi,"")).split("=")).map((function(A){return A.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)}));for(var c=[],u=0;u<i.length;u++){var d=i[u];u===0?c.push({key:d[0],data:""}):u===i.length-1?c[c.length-1].data=e(d[0]):(c[c.length-1].data=e(d[0]),c.push({key:d[1],data:""}))}var f={key:l,data:{}};return c.forEach((function(A){f.data[A.key]=A.data})),f}function e(i){return i&&i.length!==0?i.indexOf('"')===0||i.indexOf("'")===0?i.substring(1,i.length-1):i.indexOf(",")!==-1?(function(r){return r.split(",").map((function(a){return parseInt(a,10)}))})(i):parseInt(i,10):""}n.exports=function(i){if(!i)throw new Error("no data provided");var r={pages:[],chars:[],kernings:[]},a=(i=i.toString().trim()).split(/\r\n?|\n/g);if(a.length===0)throw new Error("no data in BMFont file");for(var l=0;l<a.length;l++){var c=t(a[l],l);if(c)if(c.key==="page"){if(typeof c.data.id!="number")throw new Error("malformed file at line "+l+" -- needs page id=N");if(typeof c.data.file!="string")throw new Error("malformed file at line "+l+' -- needs page file="path"');r.pages[c.data.id]=c.data.file}else c.key==="chars"||c.key==="kernings"||(c.key==="char"?r.chars.push(c.data):c.key==="kerning"?r.kernings.push(c.data):r[c.key]=c.data)}return r}},7480:n=>{var t=[66,77,70];function e(r,a,l){if(l>a.length-1)return 0;var c=a.readUInt8(l++),u=a.readInt32LE(l);switch(l+=4,c){case 1:r.info=(function(d,f){var A={};A.size=d.readInt16LE(f);var m=d.readUInt8(f+2);return A.smooth=m>>7&1,A.unicode=m>>6&1,A.italic=m>>5&1,A.bold=m>>4&1,m>>3&1&&(A.fixedHeight=1),A.charset=d.readUInt8(f+3)||"",A.stretchH=d.readUInt16LE(f+4),A.aa=d.readUInt8(f+6),A.padding=[d.readInt8(f+7),d.readInt8(f+8),d.readInt8(f+9),d.readInt8(f+10)],A.spacing=[d.readInt8(f+11),d.readInt8(f+12)],A.outline=d.readUInt8(f+13),A.face=(function(g,b){return i(g,b).toString("utf8")})(d,f+14),A})(a,l);break;case 2:r.common=(function(d,f){var A={};return A.lineHeight=d.readUInt16LE(f),A.base=d.readUInt16LE(f+2),A.scaleW=d.readUInt16LE(f+4),A.scaleH=d.readUInt16LE(f+6),A.pages=d.readUInt16LE(f+8),d.readUInt8(f+10),A.packed=0,A.alphaChnl=d.readUInt8(f+11),A.redChnl=d.readUInt8(f+12),A.greenChnl=d.readUInt8(f+13),A.blueChnl=d.readUInt8(f+14),A})(a,l);break;case 3:r.pages=(function(d,f,A){for(var m=[],g=i(d,f),b=g.length+1,x=A/b,E=0;E<x;E++)m[E]=d.slice(f,f+g.length).toString("utf8"),f+=b;return m})(a,l,u);break;case 4:r.chars=(function(d,f,A){for(var m=[],g=A/20,b=0;b<g;b++){var x={},E=20*b;x.id=d.readUInt32LE(f+0+E),x.x=d.readUInt16LE(f+4+E),x.y=d.readUInt16LE(f+6+E),x.width=d.readUInt16LE(f+8+E),x.height=d.readUInt16LE(f+10+E),x.xoffset=d.readInt16LE(f+12+E),x.yoffset=d.readInt16LE(f+14+E),x.xadvance=d.readInt16LE(f+16+E),x.page=d.readUInt8(f+18+E),x.chnl=d.readUInt8(f+19+E),m[b]=x}return m})(a,l,u);break;case 5:r.kernings=(function(d,f,A){for(var m=[],g=A/10,b=0;b<g;b++){var x={},E=10*b;x.first=d.readUInt32LE(f+0+E),x.second=d.readUInt32LE(f+4+E),x.amount=d.readInt16LE(f+8+E),m[b]=x}return m})(a,l,u)}return 5+u}function i(r,a){for(var l=a;l<r.length&&r[l]!==0;l++);return r.slice(a,l)}n.exports=function(r){if(r.length<6)throw new Error("invalid buffer length for BMFont");var a=t.every((function(d,f){return r.readUInt8(f)===d}));if(!a)throw new Error("BMFont missing BMF byte header");var l=3;if(r.readUInt8(l++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var c={kernings:[],chars:[]},u=0;u<5;u++)l+=e(c,r,l);return c}},7034:(n,t,e)=>{var i=e(7829),r=e(1896),a={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};function l(c){var u=(function(d){for(var f=[],A=0;A<d.attributes.length;A++)f.push(d.attributes[A]);return f})(c);return u.reduce((function(d,f){var A;return d[A=f.nodeName,a[A.toLowerCase()]||A]=f.nodeValue,d}),{})}n.exports=function(c){c=c.toString();var u=r(c),d={pages:[],chars:[],kernings:[]};["info","common"].forEach((function(E){var y=u.getElementsByTagName(E)[0];y&&(d[E]=i(l(y)))}));var f=u.getElementsByTagName("pages")[0];if(!f)throw new Error("malformed file -- no <pages> element");for(var A=f.getElementsByTagName("page"),m=0;m<A.length;m++){var g=A[m],b=parseInt(g.getAttribute("id"),10),x=g.getAttribute("file");if(isNaN(b))throw new Error('malformed file -- page "id" attribute is NaN');if(!x)throw new Error('malformed file -- needs page "file" attribute');d.pages[parseInt(b,10)]=x}return["chars","kernings"].forEach((function(E){var y=u.getElementsByTagName(E)[0];if(y)for(var _=E.substring(0,E.length-1),w=y.getElementsByTagName(_),S=0;S<w.length;S++){var R=w[S];d[E].push(i(l(R)))}})),d}},7829:n=>{var t="chasrset";n.exports=function(e){for(var i in e=Object.assign({},e),t in e&&(e.charset=e[t],delete e[t]),e)i!=="face"&&i!=="charset"&&(e[i]=i==="padding"||i==="spacing"?e[i].split(",").map((function(r){return parseInt(r,10)})):parseInt(e[i],10));return e}},3216:n=>{var t=function(e){return e.replace(/^\s+|\s+$/g,"")};n.exports=function(e){if(!e)return{};for(var i,r={},a=t(e).split(`
`),l=0;l<a.length;l++){var c=a[l],u=c.indexOf(":"),d=t(c.slice(0,u)).toLowerCase(),f=t(c.slice(u+1));r[d]===void 0?r[d]=f:(i=r[d],Object.prototype.toString.call(i)==="[object Array]"?r[d].push(f):r[d]=[r[d],f])}return r}},9035:(n,t,e)=>{var i=e(8480),r=e(8167),a=e(2225),l=[0,2,3],c=[2,1,3];n.exports=function(u,d){u&&(r(u)||a(u))||(d=u||{},u=null);for(var f=typeof(d=typeof d=="number"?{count:d}:d||{}).type=="string"?d.type:"uint16",A=typeof d.count=="number"?d.count:1,m=d.start||0,g=d.clockwise!==!1?l:c,b=g[0],x=g[1],E=g[2],y=6*A,_=u||new(i(f))(y),w=0,S=0;w<y;w+=6,S+=4){var R=w+m;_[R+0]=S+0,_[R+1]=S+1,_[R+2]=S+2,_[R+3]=S+b,_[R+4]=S+x,_[R+5]=S+E}return _}},4433:(n,t,e)=>{var i=e(5651),r=e(9035),a=e(7106),l=e(1684);n.exports=function(u){return new c(u)};class c extends THREE.BufferGeometry{constructor(d){super(),typeof d=="string"&&(d={text:d}),this._opt=Object.assign({},d),d&&this.update(d)}update(d){if(typeof d=="string"&&(d={text:d}),!(d=Object.assign({},this._opt,d)).font)throw new TypeError("must specify a { font } in options");this.layout=i(d);var f=d.flipY!==!1,A=d.font,m=A.common.scaleW,g=A.common.scaleH,b=this.layout.glyphs.filter((function(w){var S=w.data;return S.width*S.height>0}));this.visibleGlyphs=b;var x=a.positions(b),E=a.uvs(b,m,g,f),y=r([],{clockwise:!0,type:"uint16",count:b.length});if(this.setIndex(y),this.setAttribute("position",new THREE.BufferAttribute(x,2)),this.setAttribute("uv",new THREE.BufferAttribute(E,2)),!d.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(d.multipage){var _=a.pages(b);this.setAttribute("page",new THREE.BufferAttribute(_,1))}this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere()}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new THREE.Sphere);var d=this.attributes.position.array,f=this.attributes.position.itemSize;if(!d||!f||d.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);l.computeSphere(d,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new THREE.Box3);var d=this.boundingBox,f=this.attributes.position.array,A=this.attributes.position.itemSize;!f||!A||f.length<2?d.makeEmpty():l.computeBox(f,d)}}},1684:n=>{var t={min:[0,0],max:[0,0]};function e(i){var r=i.length/2;t.min[0]=i[0],t.min[1]=i[1],t.max[0]=i[0],t.max[1]=i[1];for(var a=0;a<r;a++){var l=i[2*a+0],c=i[2*a+1];t.min[0]=Math.min(l,t.min[0]),t.min[1]=Math.min(c,t.min[1]),t.max[0]=Math.max(l,t.max[0]),t.max[1]=Math.max(c,t.max[1])}}n.exports.computeBox=function(i,r){e(i),r.min.set(t.min[0],t.min[1],0),r.max.set(t.max[0],t.max[1],0)},n.exports.computeSphere=function(i,r){e(i);var a=t.min[0],l=t.min[1],c=t.max[0]-a,u=t.max[1]-l,d=Math.sqrt(c*c+u*u);r.center.set(a+c/2,l+u/2,0),r.radius=d/2}},7106:n=>{n.exports.pages=function(t){var e=new Float32Array(4*t.length*1),i=0;return t.forEach((function(r){var a=r.data.page||0;e[i++]=a,e[i++]=a,e[i++]=a,e[i++]=a})),e},n.exports.uvs=function(t,e,i,r){var a=new Float32Array(4*t.length*2),l=0;return t.forEach((function(c){var u=c.data,d=u.x+u.width,f=u.y+u.height,A=u.x/e,m=u.y/i,g=d/e,b=f/i;r&&(m=(i-u.y)/i,b=(i-f)/i),a[l++]=A,a[l++]=m,a[l++]=A,a[l++]=b,a[l++]=g,a[l++]=b,a[l++]=g,a[l++]=m})),a},n.exports.positions=function(t){var e=new Float32Array(4*t.length*2),i=0;return t.forEach((function(r){var a=r.data,l=r.position[0]+a.xoffset,c=r.position[1]+a.yoffset,u=a.width,d=a.height;e[i++]=l,e[i++]=c,e[i++]=l,e[i++]=c+d,e[i++]=l+u,e[i++]=c+d,e[i++]=l+u,e[i++]=c})),e}},5406:n=>{var t=/\n/,e=/\s/;function i(l,c,u,d){var f=l.indexOf(c,u);return f===-1||f>d?d:f}function r(l){return e.test(l)}function a(l,c,u,d){return{start:c,end:c+Math.min(d,u-c)}}n.exports=function(l,c){return n.exports.lines(l,c).map((function(u){return l.substring(u.start,u.end)})).join(`
`)},n.exports.lines=function(l,c){if((c=c||{}).width===0&&c.mode!=="nowrap")return[];l=l||"";var u=typeof c.width=="number"?c.width:Number.MAX_VALUE,d=Math.max(0,c.start||0),f=typeof c.end=="number"?c.end:l.length,A=c.mode,m=c.measure||a;return A==="pre"?(function(g,b,x,E,y){for(var _=[],w=x,S=x;S<E&&S<b.length;S++){var R=b.charAt(S),U=t.test(R);if(U||S===E-1){var L=g(b,w,U?S:S+1,y);_.push(L),w=S+1}}return _})(m,l,d,f,u):(function(g,b,x,E,y,_){var w=[],S=y;for(_==="nowrap"&&(S=Number.MAX_VALUE);x<E&&x<b.length;){for(var R=i(b,`
`,x,E);x<R&&r(b.charAt(x));)x++;var U=g(b,x,R,S),L=x+(U.end-U.start),F=L+1;if(L<R){for(;L>x&&!r(b.charAt(L));)L--;if(L===x)F>x+1&&F--,L=F;else for(F=L;L>x&&r(b.charAt(L-1));)L--}if(L>=x){var D=g(b,x,L,S);w.push(D)}x=F}return w})(m,l,d,f,u,A)}},3558:(n,t,e)=>{var i=e(919),r=e(8847),a=e(3216),l=e(4597);function c(f,A,m){var g=f;return r(A)?(m=A,typeof f=="string"&&(g={uri:f})):g=l(A,{uri:f}),g.callback=m,g}function u(f,A,m){return d(A=c(f,A,m))}function d(f){if(f.callback===void 0)throw new Error("callback argument missing");var A=!1,m=function(z,J,$){A||(A=!0,f.callback(z,J,$))};function g(){var z=void 0;if(z=_.response?_.response:_.responseText||(function(J){try{if(J.responseType==="document")return J.responseXML;var $=J.responseXML&&J.responseXML.documentElement.nodeName==="parsererror";if(J.responseType===""&&!$)return J.responseXML}catch{}return null})(_),D)try{z=JSON.parse(z)}catch{}return z}function b(z){return clearTimeout(w),z instanceof Error||(z=new Error(""+(z||"Unknown XMLHttpRequest Error"))),z.statusCode=0,m(z,O)}function x(){if(!y){var z;clearTimeout(w),z=f.useXDR&&_.status===void 0?200:_.status===1223?204:_.status;var J=O,$=null;return z!==0?(J={body:g(),statusCode:z,method:R,headers:{},url:S,rawRequest:_},_.getAllResponseHeaders&&(J.headers=a(_.getAllResponseHeaders()))):$=new Error("Internal XMLHttpRequest Error"),m($,J,J.body)}}var E,y,_=f.xhr||null;_||(_=f.cors||f.useXDR?new u.XDomainRequest:new u.XMLHttpRequest);var w,S=_.url=f.uri||f.url,R=_.method=f.method||"GET",U=f.body||f.data,L=_.headers=f.headers||{},F=!!f.sync,D=!1,O={body:void 0,headers:{},statusCode:0,method:R,url:S,rawRequest:_};if("json"in f&&f.json!==!1&&(D=!0,L.accept||L.Accept||(L.Accept="application/json"),R!=="GET"&&R!=="HEAD"&&(L["content-type"]||L["Content-Type"]||(L["Content-Type"]="application/json"),U=JSON.stringify(f.json===!0?U:f.json))),_.onreadystatechange=function(){_.readyState===4&&setTimeout(x,0)},_.onload=x,_.onerror=b,_.onprogress=function(){},_.onabort=function(){y=!0},_.ontimeout=b,_.open(R,S,!F,f.username,f.password),F||(_.withCredentials=!!f.withCredentials),!F&&f.timeout>0&&(w=setTimeout((function(){if(!y){y=!0,_.abort("timeout");var z=new Error("XMLHttpRequest timeout");z.code="ETIMEDOUT",b(z)}}),f.timeout)),_.setRequestHeader)for(E in L)L.hasOwnProperty(E)&&_.setRequestHeader(E,L[E]);else if(f.headers&&!(function(z){for(var J in z)if(z.hasOwnProperty(J))return!1;return!0})(f.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in f&&(_.responseType=f.responseType),"beforeSend"in f&&typeof f.beforeSend=="function"&&f.beforeSend(_),_.send(U||null),_}n.exports=u,n.exports.default=u,u.XMLHttpRequest=i.XMLHttpRequest||function(){},u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:i.XDomainRequest,(function(f,A){for(var m=0;m<f.length;m++)A(f[m])})(["get","put","post","patch","head","delete"],(function(f){u[f==="delete"?"del":f]=function(A,m,g){return(m=c(A,m,g)).method=f.toUpperCase(),d(m)}}))},1896:n=>{n.exports=self.DOMParser!==void 0?function(t){return new self.DOMParser().parseFromString(t,"application/xml")}:self.ActiveXObject!==void 0&&new self.ActiveXObject("Microsoft.XMLDOM")?function(t){var e=new self.ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e}:function(t){var e=document.createElement("div");return e.innerHTML=t,e}},4597:n=>{n.exports=function(){for(var e={},i=0;i<arguments.length;i++){var r=arguments[i];for(var a in r)t.call(r,a)&&(e[a]=r[a])}return e};var t=Object.prototype.hasOwnProperty},8132:()=>{window.aframeStats=function(n){var t=null,e=n;return{update:function(){var i;t("te").set((i=e.querySelectorAll("*"),Array.prototype.slice.call(i).filter((function(r){return r.isEntity})),i.length)),window.performance.getEntriesByName&&t("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))},start:function(){},end:function(){},attach:function(i){t=i},values:{te:{caption:"Entities"},lt:{caption:"Load Time"}},groups:[{caption:"A-Frame",values:["te","lt"]}],fractions:[]}}},3729:n=>{window.glStats=function(){var t=null,e=0,i=0,r=0,a=0,l=0,c=0,u=0;function d(f,A){return function(){A.apply(this,arguments),f.apply(this,arguments)}}return WebGLRenderingContext.prototype.drawArrays=d(WebGLRenderingContext.prototype.drawArrays,(function(){e++,arguments[0]==this.POINTS?c+=arguments[2]:l+=arguments[2]})),WebGLRenderingContext.prototype.drawElements=d(WebGLRenderingContext.prototype.drawElements,(function(){i++,a+=arguments[1]/3,l+=arguments[1]})),WebGLRenderingContext.prototype.useProgram=d(WebGLRenderingContext.prototype.useProgram,(function(){r++})),WebGLRenderingContext.prototype.bindTexture=d(WebGLRenderingContext.prototype.bindTexture,(function(){u++})),{update:function(){t("allcalls").set(e+i),t("drawElements").set(i),t("drawArrays").set(e),t("bindTexture").set(u),t("useProgram").set(r),t("glfaces").set(a),t("glvertices").set(l),t("glpoints").set(c)},start:function(){e=0,i=0,r=0,a=0,l=0,c=0,u=0},end:function(){},attach:function(f){t=f},values:{allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},groups:[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[{base:"allcalls",steps:["drawelements","drawarrays"]}]}},window.threeStats=function(t){var e=null;return{update:function(){e("renderer.info.memory.geometries").set(t.info.memory.geometries),e("renderer.info.programs").set(t.info.programs?.length??NaN),e("renderer.info.memory.textures").set(t.info.memory.textures),e("renderer.info.render.calls").set(t.info.render.calls),e("renderer.info.render.triangles").set(t.info.render.triangles),e("renderer.info.render.points").set(t.info.render.points)},start:function(){},end:function(){},attach:function(i){e=i},values:{"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},groups:[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],fractions:[]}},window.BrowserStats=function(){var t=null,e=0,i=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),performance.memory.totalJSHeapSize===0&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var r=Math.log(1024);function a(l){var c=Math.floor(Math.log(l)/r);return Math.round(100*l/Math.pow(1024,c))/100}return{update:function(){e=a(performance.memory.usedJSHeapSize),i=a(performance.memory.totalJSHeapSize),t("memory").set(e),t("total").set(i)},start:function(){e=0},end:function(){},attach:function(l){t=l},values:{memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},groups:[{caption:"Browser",values:["memory","total"]}],fractions:[{base:"total",steps:["memory"]}]}},n.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats}},282:n=>{(function(){"performance"in window==0&&(window.performance={});var t=window.performance;if("now"in t==0){var e=Date.now();t.timing&&t.timing.navigationStart&&(e=t.timing.navigationStart),t.now=function(){return Date.now()-e}}t.mark||(t.mark=function(){}),t.measure||(t.measure=function(){})})(),window.rStats=function(t){function e(x,E){for(var y=Object.keys(x),_=0,w=y.length;_<w;_++)E(y[_])}var i=t||{},r=i.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],a=(i.CSSPath?i.CSSPath:"")+"rStats.css";(i.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",a]).forEach((function(x){var E,y;E=x,(y=document.createElement("link")).href=E,y.rel="stylesheet",y.type="text/css",document.getElementsByTagName("head")[0].appendChild(y)})),i.values||(i.values={});var l,c,u=10,d={};function f(x,E,y){var _=y||{},w=document.createElement("canvas"),S=w.getContext("2d"),R=0,U=0,L=_.color?_.color:"#666666",F=document.createElement("canvas"),D=F.getContext("2d");F.width=1,F.height=20,D.fillStyle="#444444",D.fillRect(0,0,1,20),D.fillStyle=L,D.fillRect(0,u,1,u),D.fillStyle="#ffffff",D.globalAlpha=.5,D.fillRect(0,u,1,1),D.globalAlpha=1;var O=document.createElement("canvas"),z=O.getContext("2d");return O.width=1,O.height=20,z.fillStyle="#444444",z.fillRect(0,0,1,20),z.fillStyle="#b70000",z.fillRect(0,u,1,u),z.globalAlpha=.5,z.fillStyle="#ffffff",z.fillRect(0,u,1,1),z.globalAlpha=1,w.width=200,w.height=u,w.style.width=w.width+"px",w.style.height=w.height+"px",w.className="rs-canvas",x.appendChild(w),S.fillStyle="#444444",S.fillRect(0,0,w.width,w.height),{draw:function(J,$){(U+=.1*(J-U))>(R*=.99)&&(R=U),S.drawImage(w,1,0,w.width-1,w.height,0,0,w.width-1,w.height),$?S.drawImage(O,w.width-1,w.height-U*w.height/R-u):S.drawImage(F,w.width-1,w.height-U*w.height/R-u)}}}function A(x,E){var y=document.createElement("canvas"),_=y.getContext("2d");return y.width=200,y.height=u*E,y.style.width=y.width+"px",y.style.height=y.height+"px",y.className="rs-canvas",x.appendChild(y),_.fillStyle="#444444",_.fillRect(0,0,y.width,y.height),{draw:function(w){_.drawImage(y,1,0,y.width-1,y.height,0,0,y.width-1,y.height);var S=0;e(w,(function(R){var U=w[R]*y.height;_.fillStyle=r[R],_.fillRect(y.width-1,S,1,U),S+=U}))}}}function m(x,E){var y,_=x,w=0,S=0,R=0,U=0,L=performance.now(),F=0,D=document.createElement("div"),O=document.createElement("span"),z=document.createElement("div"),J=document.createTextNode(""),$=i?i.values[_.toLowerCase()]:null,nt=new f(D,_,$),At=!1;function G(ut){if($&&$.average){U+=ut,F++;var xt=performance.now();xt-L>=($.avgMs||1e3)&&(R=U/F,U=0,L=xt,F=0)}}function X(){y=performance.now(),i.userTimingAPI&&performance.mark(_+"-start"),At=!0}function tt(){w=performance.now()-y,i.userTimingAPI&&(performance.mark(_+"-end"),At&&performance.measure(_,_+"-start",_+"-end")),G(w)}return O.className="rs-counter-id",O.textContent=$&&$.caption?$.caption:_,z.className="rs-counter-value",z.appendChild(J),D.appendChild(O),D.appendChild(z),E?E.div.appendChild(D):c.appendChild(D),y=performance.now(),{set:function(ut){G(w=ut)},start:X,tick:function(){tt(),X()},end:tt,frame:function(){var ut=performance.now(),xt=ut-y;S++,xt>1e3&&(w=$&&$.interpolate===!1?S:1e3*S/xt,S=0,y=ut,G(w))},value:function(){return w},draw:function(){var ut=$&&$.average?R:w;J.nodeValue=Math.round(100*ut)/100;var xt=$&&($.below&&w<$.below||$.over&&w>$.over);nt.draw(w,xt),D.className=xt?"rs-counter-base alarm":"rs-counter-base"}}}function g(x){var E=x.toLowerCase();if(E===void 0&&(E="default"),d[E])return d[E];var y=null;i&&i.groups&&e(i.groups,(function(w){var S=i.groups[parseInt(w,10)];y||S.values.indexOf(E.toLowerCase())===-1||(y=S)}));var _=new m(E,y);return d[E]=_,_}function b(){e(i.plugins,(function(x){i.plugins[x].update()})),e(d,(function(x){d[x].draw()})),i&&i.fractions&&e(i.fractions,(function(x){var E=i.fractions[parseInt(x,10)],y=[],_=d[E.base.toLowerCase()];_&&(_=_.value(),e(i.fractions[x].steps,(function(w){var S=i.fractions[x].steps[parseInt(w,10)].toLowerCase(),R=d[S];R&&y.push(R.value()/_)}))),E.graph.draw(y)}))}return(function(){if(i.plugins){i.values||(i.values={}),i.groups||(i.groups=[]),i.fractions||(i.fractions=[]);for(var x=0;x<i.plugins.length;x++)i.plugins[x].attach(g),e(i.plugins[x].values,(function(E){i.values[E]=i.plugins[x].values[E]})),i.groups=i.groups.concat(i.plugins[x].groups),i.fractions=i.fractions.concat(i.plugins[x].fractions)}else i.plugins={};(l=document.createElement("div")).className="rs-base",(c=document.createElement("div")).className="rs-container",c.style.height="auto",l.appendChild(c),document.body.appendChild(l),i&&(i.groups&&e(i.groups,(function(E){var y=i.groups[parseInt(E,10)],_=document.createElement("div");_.className="rs-group",y.div=_;var w=document.createElement("h1");w.textContent=y.caption,w.addEventListener("click",(function(S){this.classList.toggle("hidden"),S.preventDefault()}).bind(_)),c.appendChild(w),c.appendChild(_)})),i.fractions&&e(i.fractions,(function(E){var y=i.fractions[parseInt(E,10)],_=document.createElement("div");_.className="rs-fraction";var w=document.createElement("div");w.className="rs-legend";var S=0;e(i.fractions[E].steps,(function(U){var L=document.createElement("p");L.textContent=i.fractions[E].steps[U],L.style.color=r[S],w.appendChild(L),S++})),_.appendChild(w),_.style.height=S*u+"px",y.div=_;var R=new A(_,S);y.graph=R,c.appendChild(_)})))})(),function(x){return x?g(x):{element:l,update:b}}},n.exports=window.rStats},2535:n=>{var t={base64:function(e,i){return"data:"+e+";base64,"+i},isMobile:function(){var e,i=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(i=!0),i},isIOS:function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},isIFrame:function(){try{return window.self!==window.top}catch{return!0}},appendQueryParameter:function(e,i,r){var a=e.indexOf("?")<0?"?":"&";return e+(a+i+"=")+r},getQueryParameter:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return i===null?"":decodeURIComponent(i[1].replace(/\+/g," "))},isLandscapeMode:function(){return window.orientation==90||window.orientation==-90}};n.exports=t},5928:(n,t,e)=>{var i,r=e(2535);n.exports=(i=navigator.userAgent||navigator.vendor||window.opera).match(/iPhone/i)||i.match(/iPod/i)?function(){var a=null;this.request=function(){a||(a=setInterval((function(){window.location.href="/",setTimeout(window.stop,0)}),15e3))},this.release=function(){a&&(clearInterval(a),a=null)}}:function(){var a=document.createElement("video");a.addEventListener("ended",(function(){a.play()})),this.request=function(){a.paused&&(a.src=r.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),a.play())},this.release=function(){a.pause(),a.src=""}}},8217:(n,t,e)=>{e.d(t,{A:()=>S});var i=e(963),r=e.n(i),a=e(9089),l=e.n(a),c=e(6492),u=e.n(c),d=new URL(e(9169),e.b),f=new URL(e(6085),e.b),A=new URL(e(3931),e.b),m=new URL(e(7889),e.b),g=new URL(e(6517),e.b),b=l()(r()),x=u()(d),E=u()(f),y=u()(A),_=u()(m),w=u()(g);b.push([n.id,`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url(${x}) 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url(${E}) 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url(${y});
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(${_}) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(${w}) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`,"",{version:3,sources:["webpack://./src/style/aframe.css"],names:[],mappings:"AAAA,sCAAsC;AACtC;EACE,SAAS;EACT,OAAO;EACP,eAAe;EACf,QAAQ;EACR,MAAM;AACR;;AAEA;EACE,YAAY;EACZ,SAAS;EACT,gBAAgB;EAChB,UAAU;EACV,WAAW;AACb;;AAEA,oDAAoD;AACpD;EACE,sBAAsB;EACtB,uBAAuB;EACvB,iBAAiB;EACjB,kBAAkB;EAClB,mBAAmB;EACnB,oBAAoB;EACpB,0BAA0B;AAC5B;;AAEA;;EAEE,UAAU;EACV,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA,gEAAgE;AAChE;EACE,6BAA6B;AAC/B;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;EACE,YAAY;EACZ,OAAO;EACP,kBAAkB;EAClB,MAAM;EACN,WAAW;AACb;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,SAAS;EACT,QAAQ;EACR,iBAAiB;EACjB,WAAW;EACX,qBAAqB;EACrB,eAAe;EACf,8BAA8B;EAC9B,kBAAkB;EAClB,cAAc;EACd,YAAY;AACd;;AAEA,+BAA+B;AAC/B,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;;AAErE;EACE,sCAAsC;EACtC,8CAA8C;AAChD;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,YAAY;EACZ,WAAW;AACb;;AAEA;;;;EAIE,aAAa;AACf;;AAEA;;EAEE,0DAA0D;AAC5D;;AAEA;EACE,6BAA6B;EAC7B,cAAc;EACd,qBAAqB;EACrB,6BAA6B;AAC/B;;AAEA;EACE,sBAAsB;EACtB,WAAW;EACX,gBAAgB;EAChB,kBAAkB;EAClB,UAAU;AACZ;;AAEA;;EAEE,kCAAkC;EAClC,eAAe;EACf,WAAW;EACX,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;AACb;;AAEA;;;EAGE,WAAW;EACX,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,yFAA4qB;AAC9qB;;AAEA;EACE,yFAAkzB;AACpzB;;AAEA;EACE,yDAA2qK;AAC7qK;;AAEA;;EAEE,wBAAwB;EACxB,SAAS;EACT,SAAS;EACT,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB;;;;GAIC;EACD,gBAAgB;EAChB,cAAc;EACd,kBAAkB;EAClB,QAAQ;EACR,sCAAsC;EACtC,8CAA8C;EAC9C,aAAa;EACb,kBAAkB;EAClB,0BAA0B,EAAE,8CAA8C;AAC5E;;AAEA;EACE,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;;;;EAIE,yBAAyB;AAC3B;;AAEA;EACE,qCAAqC;AACvC;;AAEA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,kBAAkB;EAClB,YAAY;EACZ,YAAY;EACZ,SAAS;EACT,kBAAkB;AACpB;;AAEA;EACE,qCAAqC;EACrC,4BAA4B;EAC5B,kCAAkC;EAClC,qBAAqB;EACrB,WAAW;EACX,kBAAkB;EAClB,WAAW;EACX,QAAQ;EACR,QAAQ;EACR,SAAS;AACX;;AAEA;;EAEE,eAAe;AACjB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,2FAAivF;EACjvF,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,8CAA8C;EAC9C,cAAc;EACd,kBAAkB;EAClB,kBAAkB;EAClB,QAAQ;EACR,2BAA2B;EAC3B,WAAW;AACb;;AAEA;EACE,6DAA25B;EAC35B,YAAY;EACZ,YAAY;EACZ,oBAAoB;EACpB,WAAW;AACb;;AAEA;EACE,oCAAoC;EACpC,kCAAkC;EAClC,kBAAkB;EAClB,eAAe;EACf,YAAY;EACZ,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,UAAU;EACV,SAAS;EACT,QAAQ;EACR,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,+BAA+B;EAC/B,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,gCAAgC;EAChC,eAAe;EACf,YAAY;EACZ,aAAa;EACb,wBAAwB;EACxB,uBAAuB;EACvB,kCAAkC;EAClC,eAAe;EACf,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,WAAW;EACX,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,uBAAuB;EACvB,qBAAqB;EACrB,sBAAsB;AACxB;;AAEA;EACE,qBAAqB;EACrB,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,oBAAoB;EACpB,oBAAoB;EACpB,WAAW;EACX,WAAW;AACb;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,UAAU;EACV,eAAe;EACf,WAAW;EACX,kBAAkB;EAClB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,yCAAyC;EACzC,iCAAiC;EACjC,wEAAwE;EACxE,iBAAiB;AACnB;;AAEA;EACE,mEAAmE;AACrE;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,kBAAkB;EAClB,oBAAoB;EACpB,sBAAsB;EACtB,SAAS;EACT,OAAO;EACP,QAAQ;EACR,MAAM;EACN,YAAY;AACd;;AAEA;EACE,oBAAoB;AACtB",sourcesContent:[`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E");
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`],sourceRoot:""}]);const S=b},2470:(n,t,e)=>{e.d(t,{A:()=>c});var i=e(963),r=e.n(i),a=e(9089),l=e.n(a)()(r());l.push([n.id,`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`,"",{version:3,sources:["webpack://./src/style/rStats.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,cAAc;EACd,gBAAgB;EAChB,oBAAoB;EACpB,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,aAAa;EACb,eAAe;EACf,QAAQ;EACR,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,sCAAsC;EACtC,8BAA8B;EAC9B,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,sCAAsC;EACtC,8BAA8B;EAC9B,aAAa;AACf;;AAEA;EACE,cAAc;EACd;;;;;;;;2BAQyB;AAC3B;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;AACV;;AAEA;EACE;IACE,UAAU;IACV,SAAS;EACX;AACF",sourcesContent:[`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`],sourceRoot:""}]);const c=l},7180:(n,t,e)=>{e.r(t),e.d(t,{default:()=>y});var i=e(5072),r=e.n(i),a=e(7825),l=e.n(a),c=e(7659),u=e.n(c),d=e(5056),f=e.n(d),A=e(540),m=e.n(A),g=e(1113),b=e.n(g),x=e(8217),E={};E.styleTagTransform=b(),E.setAttributes=f(),E.insert=u().bind(null,"head"),E.domAPI=l(),E.insertStyleElement=m(),r()(x.A,E);const y=x.A&&x.A.locals?x.A.locals:void 0},9379:(n,t,e)=>{e.r(t),e.d(t,{default:()=>y});var i=e(5072),r=e.n(i),a=e(7825),l=e.n(a),c=e(7659),u=e.n(c),d=e(5056),f=e.n(d),A=e(540),m=e.n(A),g=e(1113),b=e.n(g),x=e(2470),E={};E.styleTagTransform=b(),E.setAttributes=f(),E.insert=u().bind(null,"head"),E.domAPI=l(),E.insertStyleElement=m(),r()(x.A,E);const y=x.A&&x.A.locals?x.A.locals:void 0},5072:n=>{var t=[];function e(a){for(var l=-1,c=0;c<t.length;c++)if(t[c].identifier===a){l=c;break}return l}function i(a,l){for(var c={},u=[],d=0;d<a.length;d++){var f=a[d],A=l.base?f[0]+l.base:f[0],m=c[A]||0,g="".concat(A," ").concat(m);c[A]=m+1;var b=e(g),x={css:f[1],media:f[2],sourceMap:f[3],supports:f[4],layer:f[5]};if(b!==-1)t[b].references++,t[b].updater(x);else{var E=r(x,l);l.byIndex=d,t.splice(d,0,{identifier:g,updater:E,references:1})}u.push(g)}return u}function r(a,l){var c=l.domAPI(l);return c.update(a),function(u){if(u){if(u.css===a.css&&u.media===a.media&&u.sourceMap===a.sourceMap&&u.supports===a.supports&&u.layer===a.layer)return;c.update(a=u)}else c.remove()}}n.exports=function(a,l){var c=i(a=a||[],l=l||{});return function(u){u=u||[];for(var d=0;d<c.length;d++){var f=e(c[d]);t[f].references--}for(var A=i(u,l),m=0;m<c.length;m++){var g=e(c[m]);t[g].references===0&&(t[g].updater(),t.splice(g,1))}c=A}}},7659:n=>{var t={};n.exports=function(e,i){var r=(function(a){if(t[a]===void 0){var l=document.querySelector(a);if(window.HTMLIFrameElement&&l instanceof window.HTMLIFrameElement)try{l=l.contentDocument.head}catch{l=null}t[a]=l}return t[a]})(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(i)}},540:n=>{n.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},5056:(n,t,e)=>{n.exports=function(i){var r=e.nc;r&&i.setAttribute("nonce",r)}},7825:n=>{n.exports=function(t){if(typeof document>"u")return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(i){(function(r,a,l){var c="";l.supports&&(c+="@supports (".concat(l.supports,") {")),l.media&&(c+="@media ".concat(l.media," {"));var u=l.layer!==void 0;u&&(c+="@layer".concat(l.layer.length>0?" ".concat(l.layer):""," {")),c+=l.css,u&&(c+="}"),l.media&&(c+="}"),l.supports&&(c+="}");var d=l.sourceMap;d&&typeof btoa<"u"&&(c+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(d))))," */")),a.styleTagTransform(c,r,a.options)})(e,t,i)},remove:function(){(function(i){if(i.parentNode===null)return!1;i.parentNode.removeChild(i)})(e)}}}},1113:n=>{n.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},3931:n=>{n.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"},6085:n=>{n.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},9169:n=>{n.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},6517:n=>{n.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"},7889:n=>{n.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"}},Tw={};function de(n){var t=Tw[n];if(t!==void 0)return t.exports;var e=Tw[n]={id:n,exports:{}};return UB[n](e,e.exports,de),e.exports}de.m=UB,de.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return de.d(t,{a:t}),t},de.d=(n,t)=>{for(var e in t)de.o(t,e)&&!de.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})},de.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),de.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),de.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},de.b=document.baseURI||self.location.href,de.nc=void 0;var OB={};de.d(OB,{A:()=>az});var fy={};de.r(fy),de.d(fy,{computeMikkTSpaceTangents:()=>iQ,computeMorphedAttributes:()=>uQ,deepCloneAttribute:()=>sQ,deinterleaveAttribute:()=>eA,deinterleaveGeometry:()=>oQ,estimateBytesUsed:()=>lQ,interleaveAttributes:()=>aQ,mergeAttributes:()=>Ty,mergeGeometries:()=>rQ,mergeGroups:()=>hQ,mergeVertices:()=>cQ,toCreasedNormals:()=>dQ,toTrianglesDrawMode:()=>Iy});var py={};de.r(py),de.d(py,{checkARSupport:()=>QE,checkHeadsetConnected:()=>kE,checkVRSupport:()=>Uy,isAppleVisionPro:()=>ET,isBrowserEnvironment:()=>qE,isFirefoxReality:()=>bT,isIOS:()=>wh,isIpad:()=>yT,isLandscape:()=>xT,isMobile:()=>Ia,isMobileDeviceRequestingDesktopSite:()=>zE,isMobileVR:()=>HE,isNodeEnvironment:()=>s8,isOculusBrowser:()=>GE,isR7:()=>VE,isTablet:()=>vT,isWebXRAvailable:()=>KA});var Ay={};de.r(Ay),de.d(Ay,{clearObject:()=>jE,createPool:()=>WE,removeUnusedKeys:()=>uh});var my={};de.r(my),de.d(my,{equals:()=>cp,isCoordinate:()=>u8,isCoordinates:()=>_T,parse:()=>sA,regex:()=>CT,stringify:()=>lp,toVector3:()=>h8});var gy={};de.r(gy),de.d(gy,{getComponentProperty:()=>wT,getComponentPropertyPath:()=>JA,setComponentProperty:()=>XE});var vy={};de.r(vy),de.d(vy,{parseUrl:()=>Oy,validateCubemapSrc:()=>ST,validateEnvMapSrc:()=>YE,validateSrc:()=>aA});var yy={};de.r(yy),de.d(yy,{createCompatibleTexture:()=>JE,handleTextureEvents:()=>KE,isCompatibleTexture:()=>BT,setTextureProperties:()=>oA,updateDistortionMap:()=>Fr,updateEnvMap:()=>Ny,updateMap:()=>hp,updateMapMaterialFromData:()=>ZA});var oc={};de.r(oc),de.d(oc,{parse:()=>hh,stringify:()=>A8,toCamelCase:()=>TT});var Ey={};de.r(Ey),de.d(Ey,{checkControllerPresentAndSetup:()=>Ki,emitIfAxesChanged:()=>ur,findMatchingControllerWebXR:()=>ZE,isControllerPresentWebXR:()=>IT,onButtonEvent:()=>be});var by={};de.r(by),de.d(by,{bind:()=>y8,checkHeadsetConnected:()=>E8,clone:()=>tb,coordinates:()=>my,debounce:()=>LT,debug:()=>Ze,deepEqual:()=>eb,device:()=>py,diff:()=>DT,entity:()=>gy,extend:()=>Ui,extendDeep:()=>Wi,findAllScenes:()=>OT,forceCanvasResizeSafariMobile:()=>MT,getElData:()=>M8,getUrlParameter:()=>dh,isIOS:()=>b8,isIframed:()=>UT,isMobile:()=>x8,material:()=>yy,objectPool:()=>Ay,shouldCaptureKeyEvent:()=>nb,split:()=>Us,splitString:()=>w8,srcLoader:()=>vy,styleParser:()=>oc,throttle:()=>C8,throttleLeadingAndTrailing:()=>RT,throttleTick:()=>_8,trackedControls:()=>Ey});var xy={};de.r(xy),de.d(xy,{isSingleProperty:()=>$A,parseProperties:()=>kT,parseProperty:()=>tm,process:()=>Mh,processPropertyDefinition:()=>Fy,stringifyProperties:()=>QT,stringifyProperty:()=>ib});var Cy={};de.r(Cy),de.d(Cy,{Component:()=>fh,components:()=>Tn,registerComponent:()=>le,registrationOrderWarnings:()=>HT});var _y={};de.r(_y),de.d(_y,{System:()=>hA,registerSystem:()=>cr,systems:()=>Bs});var NB={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},IE={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Nk=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],Zp={CSS:{},springs:{}};function Ss(n,t,e){return Math.min(Math.max(n,t),e)}function Lu(n,t){return n.indexOf(t)>-1}function Rf(n,t){return n.apply(null,t)}var Pk=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,Fk=/^rgb/,kk=/^hsl/,me={arr:function(n){return Array.isArray(n)},obj:function(n){return Lu(Object.prototype.toString.call(n),"Object")},pth:function(n){return me.obj(n)&&n.hasOwnProperty("totalLength")},svg:function(n){return n instanceof SVGElement},inp:function(n){return n instanceof HTMLInputElement},dom:function(n){return n.nodeType||me.svg(n)},str:function(n){return typeof n=="string"},fnc:function(n){return typeof n=="function"},und:function(n){return n===void 0},hex:function(n){return Pk.test(n)},rgb:function(n){return Fk.test(n)},hsl:function(n){return kk.test(n)},col:function(n){return me.hex(n)||me.rgb(n)||me.hsl(n)},key:function(n){return!NB.hasOwnProperty(n)&&!IE.hasOwnProperty(n)&&n!=="targets"&&n!=="keyframes"}},Qk=/\(([^)]+)\)/;function PB(n){var t=Qk.exec(n);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function FB(n,t){var e=PB(n),i=Ss(me.und(e[0])?1:e[0],.1,100),r=Ss(me.und(e[1])?100:e[1],.1,100),a=Ss(me.und(e[2])?10:e[2],.1,100),l=Ss(me.und(e[3])?0:e[3],.1,100),c=Math.sqrt(r/i),u=a/(2*Math.sqrt(r*i)),d=u<1?c*Math.sqrt(1-u*u):0,f=u<1?(u*c-l)/d:-l+c;function A(m){var g=t?t*m/1e3:m;return g=u<1?Math.exp(-g*u*c)*(1*Math.cos(d*g)+f*Math.sin(d*g)):(1+f*g)*Math.exp(-g*c),m===0||m===1?m:1-g}return t?A:function(){var m=Zp.springs[n];if(m)return m;for(var g=1/6,b=0,x=0;;)if(A(b+=g)===1){if(++x>=16)break}else x=0;var E=b*g*1e3;return Zp.springs[n]=E,E}}function Lf(n,t){n===void 0&&(n=1),t===void 0&&(t=.5);var e=Ss(n,1,10),i=Ss(t,.1,2);return function(r){return r===0||r===1?r:-e*Math.pow(2,10*(r-1))*Math.sin((r-1-i/(2*Math.PI)*Math.asin(1/e))*(2*Math.PI)/i)}}function zk(n){return n===void 0&&(n=10),function(t){return Math.round(t*n)*(1/n)}}var Iw=(function(){var n=.1;function t(l,c){return 1-3*c+3*l}function e(l,c){return 3*c-6*l}function i(l){return 3*l}function r(l,c,u){return((t(c,u)*l+e(c,u))*l+i(c))*l}function a(l,c,u){return 3*t(c,u)*l*l+2*e(c,u)*l+i(c)}return function(l,c,u,d){if(0<=l&&l<=1&&0<=u&&u<=1){var f=new Float32Array(11);if(l!==c||u!==d)for(var A=0;A<11;++A)f[A]=r(A*n,l,u);return function(m){return l===c&&u===d||m===0||m===1?m:r((function(g){for(var b=0,x=1;x!==10&&f[x]<=g;++x)b+=n;--x;var E=b+(g-f[x])/(f[x+1]-f[x])*n,y=a(E,l,u);return y>=.001?(function(_,w,S,R){for(var U=0;U<4;++U){var L=a(w,S,R);if(L===0)return w;w-=(r(w,S,R)-_)/L}return w})(g,E,l,u):y===0?E:(function(_,w,S,R,U){var L,F,D=0;do(L=r(F=w+(S-w)/2,R,U)-_)>0?S=F:w=F;while(Math.abs(L)>1e-7&&++D<10);return F})(g,b,b+n,l,u)})(m),c,d)}}}})(),kB=(function(){var n=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],t={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],Lf],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(l,c){return function(u){return 1-Lf(l,c)(1-u)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(l,c){return function(u){return u<.5?Lf(l,c)(2*u)/2:1-Lf(l,c)(-2*u+2)/2}}]},e={linear:[.25,.25,.75,.75]};for(var i in t)for(var r=0,a=t[i].length;r<a;r++)e["ease"+i+n[r]]=t[i][r];return e})();function wy(n,t){if(me.fnc(n))return n;var e=n.split("(")[0],i=kB[e],r=PB(n);switch(e){case"spring":return FB(n,t);case"cubicBezier":return Rf(Iw,r);case"steps":return Rf(zk,r);default:return me.fnc(i)?Rf(i,r):Rf(Iw,i)}}function QB(n){try{return document.querySelectorAll(n)}catch{return}}var Rw=[];function $p(n,t){for(var e=Rw,i=n.length,r=arguments.length>=2?arguments[1]:void 0,a=0;a<i;a++)if(a in n){var l=n[a];t.call(r,l,a,n)&&e.push(l)}return(Rw=n).length=0,e}function YA(n,t){t||(t=[]);for(var e=0,i=n.length;e<i;e++){var r=n[e];Array.isArray(r)?YA(r,t):t.push(r)}return t}function Lw(n){return me.arr(n)?n:(me.str(n)&&(n=QB(n)||n),n instanceof NodeList||n instanceof HTMLCollection?[].slice.call(n):[n])}function RE(n,t){return n.some((function(e){return e===t}))}function LE(n){var t={};for(var e in n)t[e]=n[e];return t}function My(n,t){var e=LE(n);for(var i in n)e[i]=t.hasOwnProperty(i)?t[i]:n[i];return e}function tA(n,t){var e=LE(n);for(var i in t)e[i]=me.und(n[i])?t[i]:n[i];return e}var Gk=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g,Hk=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Vk=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,qk=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,Wk=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g,jk=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function Ds(n){var t=jk.exec(n);if(t)return t[2]}function Sy(n,t){return me.fnc(n)?n(t.target,t.id,t.total):n}function Qr(n,t){return n.getAttribute(t)}function DE(n,t,e){if(RE([e,"deg","rad","turn"],Ds(t)))return t;var i=Zp.CSS[t+e];if(!me.und(i))return i;var r=document.createElement(n.tagName),a=n.parentNode&&n.parentNode!==document?n.parentNode:document.body;a.appendChild(r),r.style.position="absolute",r.style.width=100+e;var l=100/r.offsetWidth;a.removeChild(r);var c=l*parseFloat(t);return Zp.CSS[t+e]=c,c}function zB(n,t,e){if(t in n.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=n.style[t]||getComputedStyle(n).getPropertyValue(i)||"0";return e?DE(n,r,e):r}}function UE(n,t){return me.dom(n)&&!me.inp(n)&&(Qr(n,t)||me.svg(n)&&n[t])?"attribute":me.dom(n)&&RE(Nk,t)?"transform":me.dom(n)&&t!=="transform"&&zB(n,t)?"css":n[t]!=null?"object":void 0}var Xk=/(\w+)\(([^)]*)\)/g;function GB(n){if(me.dom(n)){for(var t,e=n.style.transform||"",i=new Map;t=Xk.exec(e);)i.set(t[1],t[2]);return i}}function OE(n,t,e,i){switch(UE(n,t)){case"transform":return(function(r,a,l,c){var u=Lu(a,"scale")?1:0+(function(f){return Lu(f,"translate")||f==="perspective"?"px":Lu(f,"rotate")||Lu(f,"skew")?"deg":void 0})(a),d=GB(r).get(a)||u;return l&&(l.transforms.list.set(a,d),l.transforms.last=a),c?DE(r,d,c):d})(n,t,i,e);case"css":return zB(n,t,e);case"attribute":return Qr(n,t);default:return n[t]||0}}var Yk=/^(\*=|\+=|-=)/;function NE(n,t){var e=Yk.exec(n);if(!e)return n;var i=Ds(n)||0,r=parseFloat(t),a=parseFloat(n.replace(e[0],""));switch(e[0][0]){case"+":return r+a+i;case"-":return r-a+i;case"*":return r*a+i}}var Kk=/\s/g;function HB(n,t){if(me.col(n))return(function(r){return me.rgb(r)?(a=r,(l=Gk.exec(a))?"rgba("+l[1]+",1)":a):me.hex(r)?(function(c){var u=c.replace(Hk,(function(f,A,m,g){return A+A+m+m+g+g})),d=Vk.exec(u);return"rgba("+parseInt(d[1],16)+","+parseInt(d[2],16)+","+parseInt(d[3],16)+",1)"})(r):me.hsl(r)?(function(c){var u,d,f,A=qk.exec(c)||Wk.exec(c),m=parseInt(A[1],10)/360,g=parseInt(A[2],10)/100,b=parseInt(A[3],10)/100,x=A[4]||1;function E(w,S,R){return R<0&&(R+=1),R>1&&(R-=1),R<1/6?w+6*(S-w)*R:R<.5?S:R<2/3?w+(S-w)*(2/3-R)*6:w}if(g==0)u=d=f=b;else{var y=b<.5?b*(1+g):b+g-b*g,_=2*b-y;u=E(_,y,m+1/3),d=E(_,y,m),f=E(_,y,m-1/3)}return"rgba("+255*u+","+255*d+","+255*f+","+x+")"})(r):void 0;var a,l})(n);var e=Ds(n),i=e?n.substr(0,n.length-e.length):n;return t&&!Kk.test(n)?i+t:i}function By(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Dw(n){for(var t,e=n.points,i=0,r=0;r<e.numberOfItems;r++){var a=e.getItem(r);r>0&&(i+=By(t,a)),t=a}return i}function Uw(n){if(n.getTotalLength)return n.getTotalLength();switch(n.tagName.toLowerCase()){case"circle":return(function(t){return 2*Math.PI*Qr(t,"r")})(n);case"rect":return(function(t){return 2*Qr(t,"width")+2*Qr(t,"height")})(n);case"line":return(function(t){return By({x:Qr(t,"x1"),y:Qr(t,"y1")},{x:Qr(t,"x2"),y:Qr(t,"y2")})})(n);case"polyline":return Dw(n);case"polygon":return(function(t){var e=t.points;return Dw(t)+By(e.getItem(e.numberOfItems-1),e.getItem(0))})(n)}}function VB(n,t){var e=t||{},i=e.el||(function(d){for(var f=d.parentNode;me.svg(f)&&(f=f.parentNode,me.svg(f.parentNode)););return f})(n),r=i.getBoundingClientRect(),a=Qr(i,"viewBox"),l=r.width,c=r.height,u=e.viewBox||(a?a.split(" "):[0,0,l,c]);return{el:i,viewBox:u,x:u[0]/1,y:u[1]/1,w:l/u[2],h:c/u[3]}}function Jk(n,t){function e(c){c===void 0&&(c=0);var u=t+c>=1?t+c:0;return n.el.getPointAtLength(u)}var i=VB(n.el,n.svg),r=e(),a=e(-1),l=e(1);switch(n.property){case"x":return(r.x-i.x)*i.w;case"y":return(r.y-i.y)*i.h;case"angle":return 180*Math.atan2(l.y-a.y,l.x-a.x)/Math.PI}}var ev=/-?\d*\.?\d+/g;function Ow(n,t){var e=HB(me.pth(n)?n.totalLength:n,t)+"";return{original:e,numbers:e.match(ev)?e.match(ev).map(Number):[0],strings:me.str(n)||t?e.split(ev):[]}}function qB(n){return $p(n?YA(me.arr(n)?n.map(Lw):Lw(n)):[],(function(t,e,i){return i.indexOf(t)===e}))}function WB(n){var t=qB(n);return t.map((function(e,i){return{target:e,id:i,total:t.length,transforms:{list:GB(e)}}}))}var Zk=/^spring/;function $k(n,t){var e=LE(t);if(Zk.test(e.easing)&&(e.duration=FB(e.easing)),me.arr(n)){var i=n.length;i!==2||me.obj(n[0])?me.fnc(t.duration)||(e.duration=t.duration/i):n={value:n}}var r=me.arr(n)?n:[n];return r.map((function(a,l){var c=me.obj(a)&&!me.pth(a)?a:{value:a};return me.und(c.delay)&&(c.delay=l?0:t.delay),me.und(c.endDelay)&&(c.endDelay=l===r.length-1?t.endDelay:0),c})).map((function(a){return tA(a,e)}))}var jB={css:function(n,t,e){return n.style[t]=e},attribute:function(n,t,e){return n.setAttribute(t,e)},object:function(n,t,e){return n[t]=e},transform:function(n,t,e,i,r){if(i.list.set(t,e),t===i.last||r){var a="";i.list.forEach((function(l,c){a+=c+"("+l+") "})),n.style.transform=a}}};function XB(n,t){for(var e=WB(n),i=0,r=e.length;i<r;i++){var a=e[i];for(var l in t){var c=Sy(t[l],a),u=a.target,d=Ds(c),f=OE(u,l,d,a),A=NE(HB(c,d||Ds(f)),f),m=UE(u,l);jB[m](u,l,A,a.transforms,!0)}}}function tQ(n,t){return $p(YA(n.map((function(e){return t.map((function(i){return(function(r,a){var l=UE(r.target,a.name);if(l){var c=(function(d,f){var A;return d.tweens.map((function(m){var g=(function(U,L){var F={};for(var D in U){var O=Sy(U[D],L);me.arr(O)&&(O=O.map((function(z){return Sy(z,L)}))).length===1&&(O=O[0]),F[D]=O}return F.duration=parseFloat(F.duration),F.delay=parseFloat(F.delay),F})(m,f),b=g.value,x=me.arr(b)?b[1]:b,E=Ds(x),y=OE(f.target,d.name,E,f),_=A?A.to.original:y,w=me.arr(b)?b[0]:_,S=Ds(w)||Ds(y),R=E||S;return me.und(x)&&(x=_),g.from=Ow(w,R),g.to=Ow(NE(x,w),R),g.start=A?A.end:0,g.end=g.start+g.delay+g.duration+g.endDelay,g.easing=wy(g.easing,g.duration),g.isPath=me.pth(b),g.isColor=me.col(g.from.original),g.isColor&&(g.round=1),A=g,g}))})(a,r),u=c[c.length-1];return{type:l,property:a.name,animatable:r,tweens:c,duration:u.end,delay:c[0].delay,endDelay:u.endDelay}}})(e,i)}))}))),(function(e){return!me.und(e)}))}function YB(n,t){var e=n.length,i=function(a){return a.timelineOffset?a.timelineOffset:0},r={};return r.duration=e?Math.max.apply(Math,n.map((function(a){return i(a)+a.duration}))):t.duration,r.delay=e?Math.min.apply(Math,n.map((function(a){return i(a)+a.delay}))):t.delay,r.endDelay=e?r.duration-Math.max.apply(Math,n.map((function(a){return i(a)+a.duration-a.endDelay}))):t.endDelay,r}var ap,Nw=0,Ri=[],nv=[],eQ=(function(){function n(){ap=requestAnimationFrame(t)}function t(e){var i=Ri.length;if(i){for(var r=0;r<i;){var a=Ri[r];if(a.paused){var l=Ri.indexOf(a);l>-1&&(Ri.splice(l,1),i=Ri.length)}else a.tick(e);r++}n()}else ap=cancelAnimationFrame(ap)}return n})();function Qn(n){n===void 0&&(n={});var t,e=0,i=0,r=0,a=0,l=null;function c(){return window.Promise&&new Promise((function(y){return l=y}))}var u=c(),d=(function(y){var _=My(NB,y),w=My(IE,y),S=(function(D,O){var z=[],J=O.keyframes;for(var $ in J&&(O=tA((function(nt){for(var At=$p(YA(nt.map((function(ut){return Object.keys(ut)}))),(function(ut){return me.key(ut)})).reduce((function(ut,xt){return ut.indexOf(xt)<0&&ut.push(xt),ut}),[]),G={},X=function(ut){var xt=At[ut];G[xt]=nt.map((function(V){var rt={};for(var yt in V)me.key(yt)?yt==xt&&(rt.value=V[yt]):rt[yt]=V[yt];return rt}))},tt=0;tt<At.length;tt++)X(tt);return G})(J),O)),O)me.key($)&&z.push({name:$,tweens:$k(O[$],D)});return z})(w,y),R=WB(y.targets),U=tQ(R,S),L=YB(U,w),F=Nw;return Nw++,tA(_,{id:F,children:[],animatables:R,animations:U,duration:L.duration,delay:L.delay,endDelay:L.endDelay})})(n);function f(){d.reversed=!d.reversed;for(var y=0,_=t.length;y<_;y++)t[y].reversed=d.reversed}function A(y){return d.reversed?d.duration-y:y}function m(){e=0,i=A(d.currentTime)*(1/Qn.speed)}function g(y,_){_&&_.seek(y-_.timelineOffset)}function b(y){for(var _=0,w=d.animations,S=w.length;_<S;){var R=w[_],U=R.animatable,L=R.tweens,F=L.length-1,D=L[F];F&&(D=$p(L,(function(Ot){return y<Ot.end}))[0]||D);for(var O=Ss(y-D.start-D.delay,0,D.duration)/D.duration,z=isNaN(O)?1:D.easing(O),J=D.to.strings,$=D.round,nt=[],At=D.to.numbers.length,G=void 0,X=0;X<At;X++){var tt=void 0,ut=D.to.numbers[X],xt=D.from.numbers[X]||0;tt=D.isPath?Jk(D.value,z*ut):xt+z*(ut-xt),$&&(D.isColor&&X>2||(tt=Math.round(tt*$)/$)),nt.push(tt)}var V=J.length;if(V){G=J[0];for(var rt=0;rt<V;rt++){J[rt];var yt=J[rt+1],Et=nt[rt];isNaN(Et)||(G+=yt?Et+yt:Et+" ")}}else G=nt[0];jB[R.type](U.target,R.property,G,U.transforms),R.currentValue=G,_++}}function x(y){d[y]&&!d.passThrough&&d[y](d)}function E(y){var _=d.duration,w=d.delay,S=_-d.endDelay,R=A(y);d.progress=Ss(R/_*100,0,100),d.reversePlayback=R<d.currentTime,t&&(function(U){if(d.reversePlayback)for(var L=a;L--;)g(U,t[L]);else for(var F=0;F<a;F++)g(U,t[F])})(R),!d.began&&d.currentTime>0&&(d.began=!0,x("begin"),x("loopBegin")),R<=w&&d.currentTime!==0&&b(0),(R>=S&&d.currentTime!==_||!_)&&b(_),R>w&&R<S?(d.changeBegan||(d.changeBegan=!0,d.changeCompleted=!1,x("changeBegin")),x("change"),b(R)):d.changeBegan&&(d.changeCompleted=!0,d.changeBegan=!1,x("changeComplete")),d.currentTime=Ss(R,0,_),d.began&&x("update"),y>=_&&(i=0,d.remaining&&d.remaining!==!0&&d.remaining--,d.remaining?(e=r,x("loopComplete"),x("loopBegin"),d.direction==="alternate"&&f()):(d.paused=!0,d.completed||(d.completed=!0,x("loopComplete"),x("complete"),"Promise"in window&&(l(),u=c()))))}return d.reset=function(){var y=d.direction;d.passThrough=!1,d.currentTime=0,d.progress=0,d.paused=!0,d.began=!1,d.changeBegan=!1,d.completed=!1,d.changeCompleted=!1,d.reversePlayback=!1,d.reversed=y==="reverse",d.remaining=d.loop,t=d.children;for(var _=a=t.length;_--;)d.children[_].reset();(d.reversed&&d.loop!==!0||y==="alternate"&&d.loop===1)&&d.remaining++,b(0)},d.set=function(y,_){return XB(y,_),d},d.tick=function(y){r=y,e||(e=r),E((r+(i-e))*Qn.speed)},d.seek=function(y){E(A(y))},d.pause=function(){d.paused=!0,m()},d.play=function(){d.paused&&(d.paused=!1,Ri.push(d),m(),ap||eQ())},d.reverse=function(){f(),m()},d.restart=function(){d.reset(),d.play()},d.finished=u,d.reset(),d.autoplay&&d.play(),d}function Pw(n,t){for(var e=t.length;e--;)RE(n,t[e].animatable.target)&&t.splice(e,1)}document.addEventListener("visibilitychange",(function(){if(document.hidden){for(var n=0,t=Ri.length;n<t;n++)activeInstance[n].pause();nv=Ri.slice(0),Ri=[]}else for(var e=0,i=nv.length;e<i;e++)nv[e].play()})),Qn.version="3.0.0",Qn.speed=1,Qn.running=Ri,Qn.remove=function(n){for(var t=qB(n),e=Ri.length;e--;){var i=Ri[e],r=i.animations,a=i.children;Pw(t,r);for(var l=a.length;l--;){var c=a[l],u=c.animations;Pw(t,u),u.length||c.children.length||a.splice(l,1)}r.length||a.length||i.pause()}},Qn.get=OE,Qn.set=XB,Qn.convertPx=DE,Qn.path=function(n,t){var e=me.str(n)?QB(n)[0]:n,i=t||100;return function(r){return{property:r,el:e,svg:VB(e),totalLength:Uw(e)*(i/100)}}},Qn.setDashoffset=function(n){var t=Uw(n);return n.setAttribute("stroke-dasharray",t),t},Qn.stagger=function(n,t){t===void 0&&(t={});var e=t.direction||"normal",i=t.easing?wy(t.easing):null,r=t.grid,a=t.axis,l=t.from||0,c=l==="first",u=l==="center",d=l==="last",f=me.arr(n),A=parseFloat(f?n[0]:n),m=f?parseFloat(n[1]):0,g=Ds(f?n[1]:n)||0,b=t.start||0+(f?A:0),x=[],E=0;return function(y,_,w){if(c&&(l=0),u&&(l=(w-1)/2),d&&(l=w-1),!x.length){for(var S=0;S<w;S++){if(r){var R=u?(r[0]-1)/2:l%r[0],U=u?(r[1]-1)/2:Math.floor(l/r[0]),L=R-S%r[0],F=U-Math.floor(S/r[0]),D=Math.sqrt(L*L+F*F);a==="x"&&(D=-L),a==="y"&&(D=-F),x.push(D)}else x.push(Math.abs(l-S));E=Math.max.apply(Math,x)}i&&(x=x.map((function(O){return i(O/E)*E}))),e==="reverse"&&(x=x.map((function(O){return a?O<0?-1*O:-O:Math.abs(E-O)})))}return b+(f?(m-A)/E:A)*(Math.round(100*x[_])/100)+g}},Qn.timeline=function(n){n===void 0&&(n={});var t=Qn(n);return t.duration=0,t.add=function(e,i){var r=Ri.indexOf(t),a=t.children;function l(m){m.passThrough=!0}r>-1&&Ri.splice(r,1);for(var c=0;c<a.length;c++)l(a[c]);var u=tA(e,My(IE,n));u.targets=u.targets||n.targets;var d=t.duration;u.autoplay=!1,u.direction=t.direction,u.timelineOffset=me.und(i)?d:NE(i,d),l(t),t.seek(u.timelineOffset);var f=Qn(u);l(f),a.push(f);var A=YB(a,n);return t.delay=A.delay,t.endDelay=A.endDelay,t.duration=A.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},Qn.easing=wy,Qn.penner=kB,Qn.random=function(n,t){return Math.floor(Math.random()*(t-n+1))+n};const op=Qn,M=Uk,iv=new WeakMap;class KB extends M.Loader{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,i,r){const a=new M.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(l=>{this.parse(l,e,r)}),i,r)}parse(t,e,i=()=>{}){this.decodeDracoFile(t,e,null,null,M.SRGBColorSpace,i).catch(i)}decodeDracoFile(t,e,i,r,a=M.LinearSRGBColorSpace,l=()=>{}){const c={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:a};return this.decodeGeometry(t,c).then(e).catch(l)}decodeGeometry(t,e){const i=JSON.stringify(e);if(iv.has(t)){const u=iv.get(t);if(u.key===i)return u.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const a=this.workerNextTaskID++,l=t.byteLength,c=this._getWorker(a,l).then((u=>(r=u,new Promise(((d,f)=>{r._callbacks[a]={resolve:d,reject:f},r.postMessage({type:"decode",id:a,taskConfig:e,buffer:t},[t])}))))).then((u=>this._createGeometry(u.geometry)));return c.catch((()=>!0)).then((()=>{r&&a&&this._releaseTask(r,a)})),iv.set(t,{key:i,promise:c}),c}_createGeometry(t){const e=new M.BufferGeometry;t.index&&e.setIndex(new M.BufferAttribute(t.index.array,1));for(let i=0;i<t.attributes.length;i++){const r=t.attributes[i],a=r.name,l=r.array,c=r.itemSize,u=new M.BufferAttribute(l,c);a==="color"&&(this._assignVertexColorSpace(u,r.vertexColorSpace),u.normalized=l instanceof Float32Array==0),e.setAttribute(a,u)}return e}_assignVertexColorSpace(t,e){if(e!==M.SRGBColorSpace)return;const i=new M.Color;for(let r=0,a=t.count;r<a;r++)i.fromBufferAttribute(t,r),M.ColorManagement.toWorkingColorSpace(i,M.SRGBColorSpace),t.setXYZ(r,i.r,i.g,i.b)}_loadLibrary(t,e){const i=new M.FileLoader(this.manager);return i.setPath(this.decoderPath),i.setResponseType(e),i.setWithCredentials(this.withCredentials),new Promise(((r,a)=>{i.load(t,r,void 0,a)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then((i=>{const r=i[0];t||(this.decoderConfig.wasmBinary=i[1]);const a=nQ.toString(),l=["/* draco decoder */",r,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l]))})),this.decoderPending}_getWorker(t,e){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(a){const l=a.data;switch(l.type){case"decode":r._callbacks[l.id].resolve(l);break;case"error":r._callbacks[l.id].reject(l);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+l.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort((function(r,a){return r._taskLoad>a._taskLoad?-1:1}));const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[t]=e,i._taskLoad+=e,i}))}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map((t=>t._taskLoad)))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function nQ(){let n,t;function e(i,r,a,l,c,u){const d=u.num_components(),f=a.num_points()*d,A=f*c.BYTES_PER_ELEMENT,m=(function(x,E){switch(E){case Float32Array:return x.DT_FLOAT32;case Int8Array:return x.DT_INT8;case Int16Array:return x.DT_INT16;case Int32Array:return x.DT_INT32;case Uint8Array:return x.DT_UINT8;case Uint16Array:return x.DT_UINT16;case Uint32Array:return x.DT_UINT32}})(i,c),g=i._malloc(A);r.GetAttributeDataArrayForAllPoints(a,u,m,A,g);const b=new c(i.HEAPF32.buffer,g,f).slice();return i._free(g),{name:l,array:b,itemSize:d}}onmessage=function(i){const r=i.data;switch(r.type){case"init":n=r.decoderConfig,t=new Promise((function(c){n.onModuleLoaded=function(u){c({draco:u})},DracoDecoderModule(n)}));break;case"decode":const a=r.buffer,l=r.taskConfig;t.then((c=>{const u=c.draco,d=new u.Decoder;try{const f=(function(m,g,b,x){const E=x.attributeIDs,y=x.attributeTypes;let _,w;const S=g.GetEncodedGeometryType(b);if(S===m.TRIANGULAR_MESH)_=new m.Mesh,w=g.DecodeArrayToMesh(b,b.byteLength,_);else{if(S!==m.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");_=new m.PointCloud,w=g.DecodeArrayToPointCloud(b,b.byteLength,_)}if(!w.ok()||_.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+w.error_msg());const R={index:null,attributes:[]};for(const U in E){const L=self[y[U]];let F,D;if(x.useUniqueIDs)D=E[U],F=g.GetAttributeByUniqueId(_,D);else{if(D=g.GetAttributeId(_,m[E[U]]),D===-1)continue;F=g.GetAttribute(_,D)}const O=e(m,g,_,U,L,F);U==="color"&&(O.vertexColorSpace=x.vertexColorSpace),R.attributes.push(O)}return S===m.TRIANGULAR_MESH&&(R.index=(function(U,L,F){const D=3*F.num_faces(),O=4*D,z=U._malloc(O);L.GetTrianglesUInt32Array(F,O,z);const J=new Uint32Array(U.HEAPF32.buffer,z,D).slice();return U._free(z),{array:J,itemSize:1}})(m,g,_)),m.destroy(_),R})(u,d,new Int8Array(a),l),A=f.attributes.map((m=>m.array.buffer));f.index&&A.push(f.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:f},A)}catch(f){console.error(f),self.postMessage({type:"error",id:r.id,error:f.message})}finally{u.destroy(d)}}))}}}function iQ(n,t,e=!0){if(!t||!t.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!n.hasAttribute("position")||!n.hasAttribute("normal")||!n.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function i(l){if(l.normalized||l.isInterleavedBufferAttribute){const c=new Float32Array(l.count*l.itemSize);for(let u=0,d=0;u<l.count;u++)c[d++]=l.getX(u),c[d++]=l.getY(u),l.itemSize>2&&(c[d++]=l.getZ(u));return c}return l.array instanceof Float32Array?l.array:new Float32Array(l.array)}const r=n.index?n.toNonIndexed():n,a=t.generateTangents(i(r.attributes.position),i(r.attributes.normal),i(r.attributes.uv));if(e)for(let l=3;l<a.length;l+=4)a[l]*=-1;return r.setAttribute("tangent",new M.BufferAttribute(a,4)),n!==r&&n.copy(r),n}function rQ(n,t=!1){const e=n[0].index!==null,i=new Set(Object.keys(n[0].attributes)),r=new Set(Object.keys(n[0].morphAttributes)),a={},l={},c=n[0].morphTargetsRelative,u=new M.BufferGeometry;let d=0;for(let f=0;f<n.length;++f){const A=n[f];let m=0;if(e!==(A.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+f+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const g in A.attributes){if(!i.has(g))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+f+'. All geometries must have compatible attributes; make sure "'+g+'" attribute exists among all geometries, or in none of them.'),null;a[g]===void 0&&(a[g]=[]),a[g].push(A.attributes[g]),m++}if(m!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+f+". Make sure all geometries have the same number of attributes."),null;if(c!==A.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+f+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const g in A.morphAttributes){if(!r.has(g))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+f+".  .morphAttributes must be consistent throughout all geometries."),null;l[g]===void 0&&(l[g]=[]),l[g].push(A.morphAttributes[g])}if(t){let g;if(e)g=A.index.count;else{if(A.attributes.position===void 0)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+f+". The geometry must have either an index or a position attribute"),null;g=A.attributes.position.count}u.addGroup(d,g,f),d+=g}}if(e){let f=0;const A=[];for(let m=0;m<n.length;++m){const g=n[m].index;for(let b=0;b<g.count;++b)A.push(g.getX(b)+f);f+=n[m].attributes.position.count}u.setIndex(A)}for(const f in a){const A=Ty(a[f]);if(!A)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+f+" attribute."),null;u.setAttribute(f,A)}for(const f in l){const A=l[f][0].length;if(A===0)break;u.morphAttributes=u.morphAttributes||{},u.morphAttributes[f]=[];for(let m=0;m<A;++m){const g=[];for(let x=0;x<l[f].length;++x)g.push(l[f][x][m]);const b=Ty(g);if(!b)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+f+" morphAttribute."),null;u.morphAttributes[f].push(b)}}return u}function Ty(n){let t,e,i,r=-1,a=0;for(let d=0;d<n.length;++d){const f=n[d];if(t===void 0&&(t=f.array.constructor),t!==f.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(e===void 0&&(e=f.itemSize),e!==f.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=f.normalized),i!==f.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(r===-1&&(r=f.gpuType),r!==f.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;a+=f.count*e}const l=new t(a),c=new M.BufferAttribute(l,e,i);let u=0;for(let d=0;d<n.length;++d){const f=n[d];if(f.isInterleavedBufferAttribute){const A=u/e;for(let m=0,g=f.count;m<g;m++)for(let b=0;b<e;b++){const x=f.getComponent(m,b);c.setComponent(m+A,b,x)}}else l.set(f.array,u);u+=f.count*e}return r!==void 0&&(c.gpuType=r),c}function sQ(n){return n.isInstancedInterleavedBufferAttribute||n.isInterleavedBufferAttribute?eA(n):n.isInstancedBufferAttribute?new M.InstancedBufferAttribute().copy(n):new M.BufferAttribute().copy(n)}function aQ(n){let t,e=0,i=0;for(let d=0,f=n.length;d<f;++d){const A=n[d];if(t===void 0&&(t=A.array.constructor),t!==A.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;e+=A.array.length,i+=A.itemSize}const r=new M.InterleavedBuffer(new t(e),i);let a=0;const l=[],c=["getX","getY","getZ","getW"],u=["setX","setY","setZ","setW"];for(let d=0,f=n.length;d<f;d++){const A=n[d],m=A.itemSize,g=A.count,b=new M.InterleavedBufferAttribute(r,m,a,A.normalized);l.push(b),a+=m;for(let x=0;x<g;x++)for(let E=0;E<m;E++)b[u[E]](x,A[c[E]](x))}return l}function eA(n){const t=n.data.array.constructor,e=n.count,i=n.itemSize,r=n.normalized,a=new t(e*i);let l;l=n.isInstancedInterleavedBufferAttribute?new M.InstancedBufferAttribute(a,i,r,n.meshPerAttribute):new M.BufferAttribute(a,i,r);for(let c=0;c<e;c++)l.setX(c,n.getX(c)),i>=2&&l.setY(c,n.getY(c)),i>=3&&l.setZ(c,n.getZ(c)),i>=4&&l.setW(c,n.getW(c));return l}function oQ(n){const t=n.attributes,e=n.morphTargets,i=new Map;for(const r in t){const a=t[r];a.isInterleavedBufferAttribute&&(i.has(a)||i.set(a,eA(a)),t[r]=i.get(a))}for(const r in e){const a=e[r];a.isInterleavedBufferAttribute&&(i.has(a)||i.set(a,eA(a)),e[r]=i.get(a))}}function lQ(n){let t=0;for(const i in n.attributes){const r=n.getAttribute(i);t+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}const e=n.getIndex();return t+=e?e.count*e.itemSize*e.array.BYTES_PER_ELEMENT:0,t}function cQ(n,t=1e-4){t=Math.max(t,Number.EPSILON);const e={},i=n.getIndex(),r=n.getAttribute("position"),a=i?i.count:r.count;let l=0;const c=Object.keys(n.attributes),u={},d={},f=[],A=["getX","getY","getZ","getW"],m=["setX","setY","setZ","setW"];for(let _=0,w=c.length;_<w;_++){const S=c[_],R=n.attributes[S];u[S]=new R.constructor(new R.array.constructor(R.count*R.itemSize),R.itemSize,R.normalized);const U=n.morphAttributes[S];U&&(d[S]||(d[S]=[]),U.forEach(((L,F)=>{const D=new L.array.constructor(L.count*L.itemSize);d[S][F]=new L.constructor(D,L.itemSize,L.normalized)})))}const g=.5*t,b=Math.log10(1/t),x=Math.pow(10,b),E=g*x;for(let _=0;_<a;_++){const w=i?i.getX(_):_;let S="";for(let R=0,U=c.length;R<U;R++){const L=c[R],F=n.getAttribute(L),D=F.itemSize;for(let O=0;O<D;O++)S+=~~(F[A[O]](w)*x+E)+","}if(S in e)f.push(e[S]);else{for(let R=0,U=c.length;R<U;R++){const L=c[R],F=n.getAttribute(L),D=n.morphAttributes[L],O=F.itemSize,z=u[L],J=d[L];for(let $=0;$<O;$++){const nt=A[$],At=m[$];if(z[At](l,F[nt](w)),D)for(let G=0,X=D.length;G<X;G++)J[G][At](l,D[G][nt](w))}}e[S]=l,f.push(l),l++}}const y=n.clone();for(const _ in n.attributes){const w=u[_];if(y.setAttribute(_,new w.constructor(w.array.slice(0,l*w.itemSize),w.itemSize,w.normalized)),_ in d)for(let S=0;S<d[_].length;S++){const R=d[_][S];y.morphAttributes[_][S]=new R.constructor(R.array.slice(0,l*R.itemSize),R.itemSize,R.normalized)}}return y.setIndex(f),y}function Iy(n,t){if(t===M.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(t===M.TriangleFanDrawMode||t===M.TriangleStripDrawMode){let e=n.getIndex();if(e===null){const l=[],c=n.getAttribute("position");if(c===void 0)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let u=0;u<c.count;u++)l.push(u);n.setIndex(l),e=n.getIndex()}const i=e.count-2,r=[];if(t===M.TriangleFanDrawMode)for(let l=1;l<=i;l++)r.push(e.getX(0)),r.push(e.getX(l)),r.push(e.getX(l+1));else for(let l=0;l<i;l++)l%2==0?(r.push(e.getX(l)),r.push(e.getX(l+1)),r.push(e.getX(l+2))):(r.push(e.getX(l+2)),r.push(e.getX(l+1)),r.push(e.getX(l)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=n.clone();return a.setIndex(r),a.clearGroups(),a}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),n}function uQ(n){const t=new M.Vector3,e=new M.Vector3,i=new M.Vector3,r=new M.Vector3,a=new M.Vector3,l=new M.Vector3,c=new M.Vector3,u=new M.Vector3,d=new M.Vector3;function f(X,tt,ut,xt,V,rt,yt,Et){t.fromBufferAttribute(tt,V),e.fromBufferAttribute(tt,rt),i.fromBufferAttribute(tt,yt);const Ot=X.morphTargetInfluences;if(ut&&Ot){c.set(0,0,0),u.set(0,0,0),d.set(0,0,0);for(let Gt=0,Lt=ut.length;Gt<Lt;Gt++){const ft=Ot[Gt],It=ut[Gt];ft!==0&&(r.fromBufferAttribute(It,V),a.fromBufferAttribute(It,rt),l.fromBufferAttribute(It,yt),xt?(c.addScaledVector(r,ft),u.addScaledVector(a,ft),d.addScaledVector(l,ft)):(c.addScaledVector(r.sub(t),ft),u.addScaledVector(a.sub(e),ft),d.addScaledVector(l.sub(i),ft)))}t.add(c),e.add(u),i.add(d)}X.isSkinnedMesh&&(X.applyBoneTransform(V,t),X.applyBoneTransform(rt,e),X.applyBoneTransform(yt,i)),Et[3*V+0]=t.x,Et[3*V+1]=t.y,Et[3*V+2]=t.z,Et[3*rt+0]=e.x,Et[3*rt+1]=e.y,Et[3*rt+2]=e.z,Et[3*yt+0]=i.x,Et[3*yt+1]=i.y,Et[3*yt+2]=i.z}const A=n.geometry,m=n.material;let g,b,x;const E=A.index,y=A.attributes.position,_=A.morphAttributes.position,w=A.morphTargetsRelative,S=A.attributes.normal,R=A.morphAttributes.position,U=A.groups,L=A.drawRange;let F,D,O,z,J,$,nt;const At=new Float32Array(y.count*y.itemSize),G=new Float32Array(S.count*S.itemSize);if(E!==null)if(Array.isArray(m))for(F=0,O=U.length;F<O;F++)for(J=U[F],$=Math.max(J.start,L.start),nt=Math.min(J.start+J.count,L.start+L.count),D=$,z=nt;D<z;D+=3)g=E.getX(D),b=E.getX(D+1),x=E.getX(D+2),f(n,y,_,w,g,b,x,At),f(n,S,R,w,g,b,x,G);else for($=Math.max(0,L.start),nt=Math.min(E.count,L.start+L.count),F=$,O=nt;F<O;F+=3)g=E.getX(F),b=E.getX(F+1),x=E.getX(F+2),f(n,y,_,w,g,b,x,At),f(n,S,R,w,g,b,x,G);else if(Array.isArray(m))for(F=0,O=U.length;F<O;F++)for(J=U[F],$=Math.max(J.start,L.start),nt=Math.min(J.start+J.count,L.start+L.count),D=$,z=nt;D<z;D+=3)g=D,b=D+1,x=D+2,f(n,y,_,w,g,b,x,At),f(n,S,R,w,g,b,x,G);else for($=Math.max(0,L.start),nt=Math.min(y.count,L.start+L.count),F=$,O=nt;F<O;F+=3)g=F,b=F+1,x=F+2,f(n,y,_,w,g,b,x,At),f(n,S,R,w,g,b,x,G);return{positionAttribute:y,normalAttribute:S,morphedPositionAttribute:new M.Float32BufferAttribute(At,3),morphedNormalAttribute:new M.Float32BufferAttribute(G,3)}}function hQ(n){if(n.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),n;let t=n.groups;if(t=t.sort(((l,c)=>l.materialIndex!==c.materialIndex?l.materialIndex-c.materialIndex:l.start-c.start)),n.getIndex()===null){const l=n.getAttribute("position"),c=[];for(let u=0;u<l.count;u+=3)c.push(u,u+1,u+2);n.setIndex(c)}const e=n.getIndex(),i=[];for(let l=0;l<t.length;l++){const c=t[l],u=c.start,d=u+c.count;for(let f=u;f<d;f++)i.push(e.getX(f))}n.dispose(),n.setIndex(i);let r=0;for(let l=0;l<t.length;l++){const c=t[l];c.start=r,r+=c.count}let a=t[0];n.groups=[a];for(let l=1;l<t.length;l++){const c=t[l];a.materialIndex===c.materialIndex?a.count+=c.count:(a=c,n.groups.push(a))}return n}function dQ(n,t=Math.PI/3){const e=Math.cos(t),i=100*(1+1e-10),r=[new M.Vector3,new M.Vector3,new M.Vector3],a=new M.Vector3,l=new M.Vector3,c=new M.Vector3,u=new M.Vector3;function d(x){return`${~~(x.x*i)},${~~(x.y*i)},${~~(x.z*i)}`}const f=n.index?n.toNonIndexed():n,A=f.attributes.position,m={};for(let x=0,E=A.count/3;x<E;x++){const y=3*x,_=r[0].fromBufferAttribute(A,y+0),w=r[1].fromBufferAttribute(A,y+1),S=r[2].fromBufferAttribute(A,y+2);a.subVectors(S,w),l.subVectors(_,w);const R=new M.Vector3().crossVectors(a,l).normalize();for(let U=0;U<3;U++){const L=d(r[U]);L in m||(m[L]=[]),m[L].push(R)}}const g=new Float32Array(3*A.count),b=new M.BufferAttribute(g,3,!1);for(let x=0,E=A.count/3;x<E;x++){const y=3*x,_=r[0].fromBufferAttribute(A,y+0),w=r[1].fromBufferAttribute(A,y+1),S=r[2].fromBufferAttribute(A,y+2);a.subVectors(S,w),l.subVectors(_,w),c.crossVectors(a,l).normalize();for(let R=0;R<3;R++){const U=m[d(r[R])];u.set(0,0,0);for(let L=0,F=U.length;L<F;L++){const D=U[L];c.dot(D)>e&&u.add(D)}u.normalize(),b.setXYZ(y+R,u.x,u.y,u.z)}}return f.setAttribute("normal",b),f}class PE extends M.Loader{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new gQ(e)})),this.register((function(e){return new vQ(e)})),this.register((function(e){return new SQ(e)})),this.register((function(e){return new BQ(e)})),this.register((function(e){return new TQ(e)})),this.register((function(e){return new EQ(e)})),this.register((function(e){return new bQ(e)})),this.register((function(e){return new xQ(e)})),this.register((function(e){return new CQ(e)})),this.register((function(e){return new mQ(e)})),this.register((function(e){return new _Q(e)})),this.register((function(e){return new yQ(e)})),this.register((function(e){return new MQ(e)})),this.register((function(e){return new wQ(e)})),this.register((function(e){return new pQ(e)})),this.register((function(e){return new IQ(e)})),this.register((function(e){return new RQ(e)}))}load(t,e,i,r){const a=this;let l;if(this.resourcePath!=="")l=this.resourcePath;else if(this.path!==""){const d=M.LoaderUtils.extractUrlBase(t);l=M.LoaderUtils.resolveURL(d,this.path)}else l=M.LoaderUtils.extractUrlBase(t);this.manager.itemStart(t);const c=function(d){r?r(d):console.error(d),a.manager.itemError(t),a.manager.itemEnd(t)},u=new M.FileLoader(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,(function(d){try{a.parse(d,l,(function(f){e(f),a.manager.itemEnd(t)}),c)}catch(f){c(f)}}),i,c)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,r){let a;const l={},c={},u=new TextDecoder;if(typeof t=="string")a=JSON.parse(t);else if(t instanceof ArrayBuffer)if(u.decode(new Uint8Array(t,0,4))===JB){try{l[Pe.KHR_BINARY_GLTF]=new LQ(t)}catch(f){return void(r&&r(f))}a=JSON.parse(l[Pe.KHR_BINARY_GLTF].content)}else a=JSON.parse(u.decode(t));else a=t;if(a.asset===void 0||a.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const d=new HQ(a,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const A=this.pluginCallbacks[f](d);A.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),c[A.name]=A,l[A.name]=!0}if(a.extensionsUsed)for(let f=0;f<a.extensionsUsed.length;++f){const A=a.extensionsUsed[f],m=a.extensionsRequired||[];switch(A){case Pe.KHR_MATERIALS_UNLIT:l[A]=new AQ;break;case Pe.KHR_DRACO_MESH_COMPRESSION:l[A]=new DQ(a,this.dracoLoader);break;case Pe.KHR_TEXTURE_TRANSFORM:l[A]=new UQ;break;case Pe.KHR_MESH_QUANTIZATION:l[A]=new OQ;break;default:m.indexOf(A)>=0&&c[A]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+A+'".')}}d.setExtensions(l),d.setPlugins(c),d.parse(i,r)}parseAsync(t,e){const i=this;return new Promise((function(r,a){i.parse(t,e,r,a)}))}}function fQ(){let n={};return{get:function(t){return n[t]},add:function(t,e){n[t]=e},remove:function(t){delete n[t]},removeAll:function(){n={}}}}const Pe={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class pQ{constructor(t){this.parser=t,this.name=Pe.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let i=0,r=e.length;i<r;i++){const a=e[i];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(t){const e=this.parser,i="light:"+t;let r=e.cache.get(i);if(r)return r;const a=e.json,l=((a.extensions&&a.extensions[this.name]||{}).lights||[])[t];let c;const u=new M.Color(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],M.LinearSRGBColorSpace);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new M.DirectionalLight(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new M.PointLight(u),c.distance=d;break;case"spot":c=new M.SpotLight(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),Cs(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=e.createUniqueName(l.name||"light_"+t),r=Promise.resolve(c),e.cache.add(i,r),r}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){const e=this,i=this.parser,r=i.json.nodes[t],a=(r.extensions&&r.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then((function(l){return i._getNodeRef(e.cache,a,l)}))}}class AQ{constructor(){this.name=Pe.KHR_MATERIALS_UNLIT}getMaterialType(){return M.MeshBasicMaterial}extendParams(t,e,i){const r=[];t.color=new M.Color(1,1,1),t.opacity=1;const a=e.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const l=a.baseColorFactor;t.color.setRGB(l[0],l[1],l[2],M.LinearSRGBColorSpace),t.opacity=l[3]}a.baseColorTexture!==void 0&&r.push(i.assignTexture(t,"map",a.baseColorTexture,M.SRGBColorSpace))}return Promise.all(r)}}class mQ{constructor(t){this.parser=t,this.name=Pe.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name].emissiveStrength;return r!==void 0&&(e.emissiveIntensity=r),Promise.resolve()}}class gQ{constructor(t){this.parser=t,this.name=Pe.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?M.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],l=r.extensions[this.name];if(l.clearcoatFactor!==void 0&&(e.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&a.push(i.assignTexture(e,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&a.push(i.assignTexture(e,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(a.push(i.assignTexture(e,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){const c=l.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new M.Vector2(c,c)}return Promise.all(a)}}class vQ{constructor(t){this.parser=t,this.name=Pe.KHR_MATERIALS_DISPERSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?M.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name];return e.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class yQ{constructor(t){this.parser=t,this.name=Pe.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?M.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],l=r.extensions[this.name];return l.iridescenceFactor!==void 0&&(e.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&a.push(i.assignTexture(e,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(e.iridescenceIOR=l.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&a.push(i.assignTexture(e,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(a)}}class EQ{constructor(t){this.parser=t,this.name=Pe.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?M.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[];e.sheenColor=new M.Color(0,0,0),e.sheenRoughness=0,e.sheen=1;const l=r.extensions[this.name];if(l.sheenColorFactor!==void 0){const c=l.sheenColorFactor;e.sheenColor.setRGB(c[0],c[1],c[2],M.LinearSRGBColorSpace)}return l.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&a.push(i.assignTexture(e,"sheenColorMap",l.sheenColorTexture,M.SRGBColorSpace)),l.sheenRoughnessTexture!==void 0&&a.push(i.assignTexture(e,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(a)}}class bQ{constructor(t){this.parser=t,this.name=Pe.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?M.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],l=r.extensions[this.name];return l.transmissionFactor!==void 0&&(e.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&a.push(i.assignTexture(e,"transmissionMap",l.transmissionTexture)),Promise.all(a)}}class xQ{constructor(t){this.parser=t,this.name=Pe.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?M.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],l=r.extensions[this.name];e.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&a.push(i.assignTexture(e,"thicknessMap",l.thicknessTexture)),e.attenuationDistance=l.attenuationDistance||1/0;const c=l.attenuationColor||[1,1,1];return e.attenuationColor=new M.Color().setRGB(c[0],c[1],c[2],M.LinearSRGBColorSpace),Promise.all(a)}}class CQ{constructor(t){this.parser=t,this.name=Pe.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?M.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name];return e.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class _Q{constructor(t){this.parser=t,this.name=Pe.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?M.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],l=r.extensions[this.name];e.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&a.push(i.assignTexture(e,"specularIntensityMap",l.specularTexture));const c=l.specularColorFactor||[1,1,1];return e.specularColor=new M.Color().setRGB(c[0],c[1],c[2],M.LinearSRGBColorSpace),l.specularColorTexture!==void 0&&a.push(i.assignTexture(e,"specularColorMap",l.specularColorTexture,M.SRGBColorSpace)),Promise.all(a)}}class wQ{constructor(t){this.parser=t,this.name=Pe.EXT_MATERIALS_BUMP}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?M.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],l=r.extensions[this.name];return e.bumpScale=l.bumpFactor!==void 0?l.bumpFactor:1,l.bumpTexture!==void 0&&a.push(i.assignTexture(e,"bumpMap",l.bumpTexture)),Promise.all(a)}}class MQ{constructor(t){this.parser=t,this.name=Pe.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?M.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],l=r.extensions[this.name];return l.anisotropyStrength!==void 0&&(e.anisotropy=l.anisotropyStrength),l.anisotropyRotation!==void 0&&(e.anisotropyRotation=l.anisotropyRotation),l.anisotropyTexture!==void 0&&a.push(i.assignTexture(e,"anisotropyMap",l.anisotropyTexture)),Promise.all(a)}}class SQ{constructor(t){this.parser=t,this.name=Pe.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,i=e.json,r=i.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const a=r.extensions[this.name],l=e.options.ktx2Loader;if(!l){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,a.source,l)}}class BQ{constructor(t){this.parser=t,this.name=Pe.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,i=this.parser,r=i.json,a=r.textures[t];if(!a.extensions||!a.extensions[e])return null;const l=a.extensions[e],c=r.images[l.source];let u=i.textureLoader;if(c.uri){const d=i.options.manager.getHandler(c.uri);d!==null&&(u=d)}return this.detectSupport().then((function(d){if(d)return i.loadTextureImage(t,l.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(e.height===1)}}))),this.isSupported}}class TQ{constructor(t){this.parser=t,this.name=Pe.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,i=this.parser,r=i.json,a=r.textures[t];if(!a.extensions||!a.extensions[e])return null;const l=a.extensions[e],c=r.images[l.source];let u=i.textureLoader;if(c.uri){const d=i.options.manager.getHandler(c.uri);d!==null&&(u=d)}return this.detectSupport().then((function(d){if(d)return i.loadTextureImage(t,l.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(e.height===1)}}))),this.isSupported}}class IQ{constructor(t){this.name=Pe.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,i=e.bufferViews[t];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],a=this.parser.getDependency("buffer",r.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then((function(c){const u=r.byteOffset||0,d=r.byteLength||0,f=r.count,A=r.byteStride,m=new Uint8Array(c,u,d);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(f,A,m,r.mode,r.filter).then((function(g){return g.buffer})):l.ready.then((function(){const g=new ArrayBuffer(f*A);return l.decodeGltfBuffer(new Uint8Array(g),f,A,m,r.mode,r.filter),g}))}))}return null}}class RQ{constructor(t){this.name=Pe.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,i=e.nodes[t];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=e.meshes[i.mesh];for(const u of r.primitives)if(u.mode!==or.TRIANGLES&&u.mode!==or.TRIANGLE_STRIP&&u.mode!==or.TRIANGLE_FAN&&u.mode!==void 0)return null;const a=i.extensions[this.name].attributes,l=[],c={};for(const u in a)l.push(this.parser.getDependency("accessor",a[u]).then((d=>(c[u]=d,c[u]))));return l.length<1?null:(l.push(this.parser.createNodeMesh(t)),Promise.all(l).then((u=>{const d=u.pop(),f=d.isGroup?d.children:[d],A=u[0].count,m=[];for(const g of f){const b=new M.Matrix4,x=new M.Vector3,E=new M.Quaternion,y=new M.Vector3(1,1,1),_=new M.InstancedMesh(g.geometry,g.material,A);for(let w=0;w<A;w++)c.TRANSLATION&&x.fromBufferAttribute(c.TRANSLATION,w),c.ROTATION&&E.fromBufferAttribute(c.ROTATION,w),c.SCALE&&y.fromBufferAttribute(c.SCALE,w),_.setMatrixAt(w,b.compose(x,E,y));for(const w in c)if(w==="_COLOR_0"){const S=c[w];_.instanceColor=new M.InstancedBufferAttribute(S.array,S.itemSize,S.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&g.geometry.setAttribute(w,c[w]);M.Object3D.prototype.copy.call(_,g),this.parser.assignFinalMaterial(_),m.push(_)}return d.isGroup?(d.clear(),d.add(...m),d):m[0]})))}}const JB="glTF";class LQ{constructor(t){this.name=Pe.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==JB)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,a=new DataView(t,12);let l=0;for(;l<r;){const c=a.getUint32(l,!0);l+=4;const u=a.getUint32(l,!0);if(l+=4,u===1313821514){const d=new Uint8Array(t,12+l,c);this.content=i.decode(d)}else if(u===5130562){const d=12+l;this.body=t.slice(d,d+c)}l+=c}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class DQ{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Pe.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const i=this.json,r=this.dracoLoader,a=t.extensions[this.name].bufferView,l=t.extensions[this.name].attributes,c={},u={},d={};for(const f in l){const A=Ry[f]||f.toLowerCase();c[A]=l[f]}for(const f in t.attributes){const A=Ry[f]||f.toLowerCase();if(l[f]!==void 0){const m=i.accessors[t.attributes[f]],g=nc[m.componentType];d[A]=g.name,u[A]=m.normalized===!0}}return e.getDependency("bufferView",a).then((function(f){return new Promise((function(A,m){r.decodeDracoFile(f,(function(g){for(const b in g.attributes){const x=g.attributes[b],E=u[b];E!==void 0&&(x.normalized=E)}A(g)}),c,d,M.LinearSRGBColorSpace,m)}))}))}}class UQ{constructor(){this.name=Pe.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(e.texCoord!==void 0&&e.texCoord!==t.channel||e.offset!==void 0||e.rotation!==void 0||e.scale!==void 0)&&(t=t.clone(),e.texCoord!==void 0&&(t.channel=e.texCoord),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class OQ{constructor(){this.name=Pe.KHR_MESH_QUANTIZATION}}class ZB extends M.Interpolant{constructor(t,e,i,r){super(t,e,i,r)}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=t*r*3+r;for(let l=0;l!==r;l++)e[l]=i[a+l];return e}interpolate_(t,e,i,r){const a=this.resultBuffer,l=this.sampleValues,c=this.valueSize,u=2*c,d=3*c,f=r-e,A=(i-e)/f,m=A*A,g=m*A,b=t*d,x=b-d,E=-2*g+3*m,y=g-m,_=1-E,w=y-m+A;for(let S=0;S!==c;S++){const R=l[x+S+c],U=l[x+S+u]*f,L=l[b+S+c],F=l[b+S]*f;a[S]=_*R+w*U+E*L+y*F}return a}}const NQ=new M.Quaternion;class PQ extends ZB{interpolate_(t,e,i,r){const a=super.interpolate_(t,e,i,r);return NQ.fromArray(a).normalize().toArray(a),a}}const or={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},nc={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Fw={9728:M.NearestFilter,9729:M.LinearFilter,9984:M.NearestMipmapNearestFilter,9985:M.LinearMipmapNearestFilter,9986:M.NearestMipmapLinearFilter,9987:M.LinearMipmapLinearFilter},kw={33071:M.ClampToEdgeWrapping,33648:M.MirroredRepeatWrapping,10497:M.RepeatWrapping},rv={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ry={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},va={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},FQ={CUBICSPLINE:void 0,LINEAR:M.InterpolateLinear,STEP:M.InterpolateDiscrete};function kQ(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new M.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:M.FrontSide})),n.DefaultMaterial}function fo(n,t,e){for(const i in e.extensions)n[i]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=e.extensions[i])}function Cs(n,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(n.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function QQ(n,t){if(n.updateMorphTargets(),t.weights!==void 0)for(let e=0,i=t.weights.length;e<i;e++)n.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(n.morphTargetInfluences.length===e.length){n.morphTargetDictionary={};for(let i=0,r=e.length;i<r;i++)n.morphTargetDictionary[e[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function zQ(n){let t;const e=n.extensions&&n.extensions[Pe.KHR_DRACO_MESH_COMPRESSION];if(t=e?"draco:"+e.bufferView+":"+e.indices+":"+sv(e.attributes):n.indices+":"+sv(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)t+=":"+sv(n.targets[i]);return t}function sv(n){let t="";const e=Object.keys(n).sort();for(let i=0,r=e.length;i<r;i++)t+=e[i]+":"+n[e[i]]+";";return t}function Ly(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const GQ=new M.Matrix4;class HQ{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new fQ,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,a=!1,l=-1;if(typeof navigator<"u"){const c=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(c)===!0;const u=c.match(/Version\/(\d+)/);r=i&&u?parseInt(u[1],10):-1,a=c.indexOf("Firefox")>-1,l=a?c.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||a&&l<98?this.textureLoader=new M.TextureLoader(this.options.manager):this.textureLoader=new M.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new M.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const i=this,r=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(l){return l._markDefs&&l._markDefs()})),Promise.all(this._invokeAll((function(l){return l.beforeRoot&&l.beforeRoot()}))).then((function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])})).then((function(l){const c={scene:l[0][r.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:r.asset,parser:i,userData:{}};return fo(a,c,r),Cs(c,r),Promise.all(i._invokeAll((function(u){return u.afterRoot&&u.afterRoot(c)}))).then((function(){for(const u of c.scenes)u.updateMatrixWorld();t(c)}))})).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],i=this.json.meshes||[];for(let r=0,a=e.length;r<a;r++){const l=e[r].joints;for(let c=0,u=l.length;c<u;c++)t[l[c]].isBone=!0}for(let r=0,a=t.length;r<a;r++){const l=t[r];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(i[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,i){if(t.refs[e]<=1)return i;const r=i.clone(),a=(l,c)=>{const u=this.associations.get(l);u!=null&&this.associations.set(c,u);for(const[d,f]of l.children.entries())a(f,c.children[d])};return a(i,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let i=0;i<e.length;i++){const r=t(e[i]);if(r)return r}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const i=[];for(let r=0;r<e.length;r++){const a=t(e[r]);a&&i.push(a)}return i}getDependency(t,e){const i=t+":"+e;let r=this.cache.get(i);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne((function(a){return a.loadNode&&a.loadNode(e)}));break;case"mesh":r=this._invokeOne((function(a){return a.loadMesh&&a.loadMesh(e)}));break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne((function(a){return a.loadBufferView&&a.loadBufferView(e)}));break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne((function(a){return a.loadMaterial&&a.loadMaterial(e)}));break;case"texture":r=this._invokeOne((function(a){return a.loadTexture&&a.loadTexture(e)}));break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne((function(a){return a.loadAnimation&&a.loadAnimation(e)}));break;case"camera":r=this.loadCamera(e);break;default:if(r=this._invokeOne((function(a){return a!=this&&a.getDependency&&a.getDependency(t,e)})),!r)throw new Error("Unknown type: "+t)}this.cache.add(i,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){const i=this,r=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(r.map((function(a,l){return i.getDependency(t,l)}))),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],i=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[Pe.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(a,l){i.load(M.LoaderUtils.resolveURL(e.uri,r.path),a,void 0,(function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(i){const r=e.byteLength||0,a=e.byteOffset||0;return i.slice(a,a+r)}))}loadAccessor(t){const e=this,i=this.json,r=this.json.accessors[t];if(r.bufferView===void 0&&r.sparse===void 0){const l=rv[r.type],c=nc[r.componentType],u=r.normalized===!0,d=new c(r.count*l);return Promise.resolve(new M.BufferAttribute(d,l,u))}const a=[];return r.bufferView!==void 0?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),r.sparse!==void 0&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then((function(l){const c=l[0],u=rv[r.type],d=nc[r.componentType],f=d.BYTES_PER_ELEMENT,A=f*u,m=r.byteOffset||0,g=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,b=r.normalized===!0;let x,E;if(g&&g!==A){const y=Math.floor(m/g),_="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+y+":"+r.count;let w=e.cache.get(_);w||(x=new d(c,y*g,r.count*g/f),w=new M.InterleavedBuffer(x,g/f),e.cache.add(_,w)),E=new M.InterleavedBufferAttribute(w,u,m%g/f,b)}else x=c===null?new d(r.count*u):new d(c,m,r.count*u),E=new M.BufferAttribute(x,u,b);if(r.sparse!==void 0){const y=rv.SCALAR,_=nc[r.sparse.indices.componentType],w=r.sparse.indices.byteOffset||0,S=r.sparse.values.byteOffset||0,R=new _(l[1],w,r.sparse.count*y),U=new d(l[2],S,r.sparse.count*u);c!==null&&(E=new M.BufferAttribute(E.array.slice(),E.itemSize,E.normalized)),E.normalized=!1;for(let L=0,F=R.length;L<F;L++){const D=R[L];if(E.setX(D,U[L*u]),u>=2&&E.setY(D,U[L*u+1]),u>=3&&E.setZ(D,U[L*u+2]),u>=4&&E.setW(D,U[L*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}E.normalized=b}return E}))}loadTexture(t){const e=this.json,i=this.options,r=e.textures[t].source,a=e.images[r];let l=this.textureLoader;if(a.uri){const c=i.manager.getHandler(a.uri);c!==null&&(l=c)}return this.loadTextureImage(t,r,l)}loadTextureImage(t,e,i){const r=this,a=this.json,l=a.textures[t],c=a.images[e],u=(c.uri||c.bufferView)+":"+l.sampler;if(this.textureCache[u])return this.textureCache[u];const d=this.loadImageSource(e,i).then((function(f){f.flipY=!1,f.name=l.name||c.name||"",f.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(f.name=c.uri);const A=(a.samplers||{})[l.sampler]||{};return f.magFilter=Fw[A.magFilter]||M.LinearFilter,f.minFilter=Fw[A.minFilter]||M.LinearMipmapLinearFilter,f.wrapS=kw[A.wrapS]||M.RepeatWrapping,f.wrapT=kw[A.wrapT]||M.RepeatWrapping,f.generateMipmaps=!f.isCompressedTexture&&f.minFilter!==M.NearestFilter&&f.minFilter!==M.LinearFilter,r.associations.set(f,{textures:t}),f})).catch((function(){return null}));return this.textureCache[u]=d,d}loadImageSource(t,e){const i=this.json,r=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then((f=>f.clone()));const a=i.images[t],l=self.URL||self.webkitURL;let c=a.uri||"",u=!1;if(a.bufferView!==void 0)c=this.getDependency("bufferView",a.bufferView).then((function(f){u=!0;const A=new Blob([f],{type:a.mimeType});return c=l.createObjectURL(A),c}));else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const d=Promise.resolve(c).then((function(f){return new Promise((function(A,m){let g=A;e.isImageBitmapLoader===!0&&(g=function(b){const x=new M.Texture(b);x.needsUpdate=!0,A(x)}),e.load(M.LoaderUtils.resolveURL(f,r.path),g,void 0,m)}))})).then((function(f){var A;return u===!0&&l.revokeObjectURL(c),Cs(f,a),f.userData.mimeType=a.mimeType||((A=a.uri).search(/\.jpe?g($|\?)/i)>0||A.search(/^data\:image\/jpeg/)===0?"image/jpeg":A.search(/\.webp($|\?)/i)>0||A.search(/^data\:image\/webp/)===0?"image/webp":A.search(/\.ktx2($|\?)/i)>0||A.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"),f})).catch((function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),f}));return this.sourceCache[t]=d,d}assignTexture(t,e,i,r){const a=this;return this.getDependency("texture",i.index).then((function(l){if(!l)return null;if(i.texCoord!==void 0&&i.texCoord>0&&((l=l.clone()).channel=i.texCoord),a.extensions[Pe.KHR_TEXTURE_TRANSFORM]){const c=i.extensions!==void 0?i.extensions[Pe.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const u=a.associations.get(l);l=a.extensions[Pe.KHR_TEXTURE_TRANSFORM].extendTexture(l,c),a.associations.set(l,u)}}return r!==void 0&&(l.colorSpace=r),t[e]=l,l}))}assignFinalMaterial(t){const e=t.geometry;let i=t.material;const r=e.attributes.tangent===void 0,a=e.attributes.color!==void 0,l=e.attributes.normal===void 0;if(t.isPoints){const c="PointsMaterial:"+i.uuid;let u=this.cache.get(c);u||(u=new M.PointsMaterial,M.Material.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,u.sizeAttenuation=!1,this.cache.add(c,u)),i=u}else if(t.isLine){const c="LineBasicMaterial:"+i.uuid;let u=this.cache.get(c);u||(u=new M.LineBasicMaterial,M.Material.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,this.cache.add(c,u)),i=u}if(r||a||l){let c="ClonedMaterial:"+i.uuid+":";r&&(c+="derivative-tangents:"),a&&(c+="vertex-colors:"),l&&(c+="flat-shading:");let u=this.cache.get(c);u||(u=i.clone(),a&&(u.vertexColors=!0),l&&(u.flatShading=!0),r&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(c,u),this.associations.set(u,this.associations.get(i))),i=u}t.material=i}getMaterialType(){return M.MeshStandardMaterial}loadMaterial(t){const e=this,i=this.json,r=this.extensions,a=i.materials[t];let l;const c={},u=[];if((a.extensions||{})[Pe.KHR_MATERIALS_UNLIT]){const f=r[Pe.KHR_MATERIALS_UNLIT];l=f.getMaterialType(),u.push(f.extendParams(c,a,e))}else{const f=a.pbrMetallicRoughness||{};if(c.color=new M.Color(1,1,1),c.opacity=1,Array.isArray(f.baseColorFactor)){const A=f.baseColorFactor;c.color.setRGB(A[0],A[1],A[2],M.LinearSRGBColorSpace),c.opacity=A[3]}f.baseColorTexture!==void 0&&u.push(e.assignTexture(c,"map",f.baseColorTexture,M.SRGBColorSpace)),c.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,c.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(u.push(e.assignTexture(c,"metalnessMap",f.metallicRoughnessTexture)),u.push(e.assignTexture(c,"roughnessMap",f.metallicRoughnessTexture))),l=this._invokeOne((function(A){return A.getMaterialType&&A.getMaterialType(t)})),u.push(Promise.all(this._invokeAll((function(A){return A.extendMaterialParams&&A.extendMaterialParams(t,c)}))))}a.doubleSided===!0&&(c.side=M.DoubleSide);const d=a.alphaMode||"OPAQUE";if(d==="BLEND"?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,d==="MASK"&&(c.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&l!==M.MeshBasicMaterial&&(u.push(e.assignTexture(c,"normalMap",a.normalTexture)),c.normalScale=new M.Vector2(1,1),a.normalTexture.scale!==void 0)){const f=a.normalTexture.scale;c.normalScale.set(f,f)}if(a.occlusionTexture!==void 0&&l!==M.MeshBasicMaterial&&(u.push(e.assignTexture(c,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&l!==M.MeshBasicMaterial){const f=a.emissiveFactor;c.emissive=new M.Color().setRGB(f[0],f[1],f[2],M.LinearSRGBColorSpace)}return a.emissiveTexture!==void 0&&l!==M.MeshBasicMaterial&&u.push(e.assignTexture(c,"emissiveMap",a.emissiveTexture,M.SRGBColorSpace)),Promise.all(u).then((function(){const f=new l(c);return a.name&&(f.name=a.name),Cs(f,a),e.associations.set(f,{materials:t}),a.extensions&&fo(r,f,a),f}))}createUniqueName(t){const e=M.PropertyBinding.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){const e=this,i=this.extensions,r=this.primitiveCache;function a(c){return i[Pe.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,e).then((function(u){return Qw(u,c,e)}))}const l=[];for(let c=0,u=t.length;c<u;c++){const d=t[c],f=zQ(d),A=r[f];if(A)l.push(A.promise);else{let m;m=d.extensions&&d.extensions[Pe.KHR_DRACO_MESH_COMPRESSION]?a(d):Qw(new M.BufferGeometry,d,e),r[f]={primitive:d,promise:m},l.push(m)}}return Promise.all(l)}loadMesh(t){const e=this,i=this.json,r=this.extensions,a=i.meshes[t],l=a.primitives,c=[];for(let u=0,d=l.length;u<d;u++){const f=l[u].material===void 0?kQ(this.cache):this.getDependency("material",l[u].material);c.push(f)}return c.push(e.loadGeometries(l)),Promise.all(c).then((function(u){const d=u.slice(0,u.length-1),f=u[u.length-1],A=[];for(let g=0,b=f.length;g<b;g++){const x=f[g],E=l[g];let y;const _=d[g];if(E.mode===or.TRIANGLES||E.mode===or.TRIANGLE_STRIP||E.mode===or.TRIANGLE_FAN||E.mode===void 0)y=a.isSkinnedMesh===!0?new M.SkinnedMesh(x,_):new M.Mesh(x,_),y.isSkinnedMesh===!0&&y.normalizeSkinWeights(),E.mode===or.TRIANGLE_STRIP?y.geometry=Iy(y.geometry,M.TriangleStripDrawMode):E.mode===or.TRIANGLE_FAN&&(y.geometry=Iy(y.geometry,M.TriangleFanDrawMode));else if(E.mode===or.LINES)y=new M.LineSegments(x,_);else if(E.mode===or.LINE_STRIP)y=new M.Line(x,_);else if(E.mode===or.LINE_LOOP)y=new M.LineLoop(x,_);else{if(E.mode!==or.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+E.mode);y=new M.Points(x,_)}Object.keys(y.geometry.morphAttributes).length>0&&QQ(y,a),y.name=e.createUniqueName(a.name||"mesh_"+t),Cs(y,a),E.extensions&&fo(r,y,E),e.assignFinalMaterial(y),A.push(y)}for(let g=0,b=A.length;g<b;g++)e.associations.set(A[g],{meshes:t,primitives:g});if(A.length===1)return a.extensions&&fo(r,A[0],a),A[0];const m=new M.Group;a.extensions&&fo(r,m,a),e.associations.set(m,{meshes:t});for(let g=0,b=A.length;g<b;g++)m.add(A[g]);return m}))}loadCamera(t){let e;const i=this.json.cameras[t],r=i[i.type];if(r)return i.type==="perspective"?e=new M.PerspectiveCamera(M.MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(e=new M.OrthographicCamera(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(e.name=this.createUniqueName(i.name)),Cs(e,i),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],i=[];for(let r=0,a=e.joints.length;r<a;r++)i.push(this._loadNodeShallow(e.joints[r]));return e.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",e.inverseBindMatrices)):i.push(null),Promise.all(i).then((function(r){const a=r.pop(),l=r,c=[],u=[];for(let d=0,f=l.length;d<f;d++){const A=l[d];if(A){c.push(A);const m=new M.Matrix4;a!==null&&m.fromArray(a.array,16*d),u.push(m)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[d])}return new M.Skeleton(c,u)}))}loadAnimation(t){const e=this.json,i=this,r=e.animations[t],a=r.name?r.name:"animation_"+t,l=[],c=[],u=[],d=[],f=[];for(let A=0,m=r.channels.length;A<m;A++){const g=r.channels[A],b=r.samplers[g.sampler],x=g.target,E=x.node,y=r.parameters!==void 0?r.parameters[b.input]:b.input,_=r.parameters!==void 0?r.parameters[b.output]:b.output;x.node!==void 0&&(l.push(this.getDependency("node",E)),c.push(this.getDependency("accessor",y)),u.push(this.getDependency("accessor",_)),d.push(b),f.push(x))}return Promise.all([Promise.all(l),Promise.all(c),Promise.all(u),Promise.all(d),Promise.all(f)]).then((function(A){const m=A[0],g=A[1],b=A[2],x=A[3],E=A[4],y=[];for(let _=0,w=m.length;_<w;_++){const S=m[_],R=g[_],U=b[_],L=x[_],F=E[_];if(S===void 0)continue;S.updateMatrix&&S.updateMatrix();const D=i._createAnimationTracks(S,R,U,L,F);if(D)for(let O=0;O<D.length;O++)y.push(D[O])}return new M.AnimationClip(a,void 0,y)}))}createNodeMesh(t){const e=this.json,i=this,r=e.nodes[t];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then((function(a){const l=i._getNodeRef(i.meshCache,r.mesh,a);return r.weights!==void 0&&l.traverse((function(c){if(c.isMesh)for(let u=0,d=r.weights.length;u<d;u++)c.morphTargetInfluences[u]=r.weights[u]})),l}))}loadNode(t){const e=this,i=this.json.nodes[t],r=e._loadNodeShallow(t),a=[],l=i.children||[];for(let u=0,d=l.length;u<d;u++)a.push(e.getDependency("node",l[u]));const c=i.skin===void 0?Promise.resolve(null):e.getDependency("skin",i.skin);return Promise.all([r,Promise.all(a),c]).then((function(u){const d=u[0],f=u[1],A=u[2];A!==null&&d.traverse((function(m){m.isSkinnedMesh&&m.bind(A,GQ)}));for(let m=0,g=f.length;m<g;m++)d.add(f[m]);return d}))}_loadNodeShallow(t){const e=this.json,i=this.extensions,r=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const a=e.nodes[t],l=a.name?r.createUniqueName(a.name):"",c=[],u=r._invokeOne((function(d){return d.createNodeMesh&&d.createNodeMesh(t)}));return u&&c.push(u),a.camera!==void 0&&c.push(r.getDependency("camera",a.camera).then((function(d){return r._getNodeRef(r.cameraCache,a.camera,d)}))),r._invokeAll((function(d){return d.createNodeAttachment&&d.createNodeAttachment(t)})).forEach((function(d){c.push(d)})),this.nodeCache[t]=Promise.all(c).then((function(d){let f;if(f=a.isBone===!0?new M.Bone:d.length>1?new M.Group:d.length===1?d[0]:new M.Object3D,f!==d[0])for(let A=0,m=d.length;A<m;A++)f.add(d[A]);if(a.name&&(f.userData.name=a.name,f.name=l),Cs(f,a),a.extensions&&fo(i,f,a),a.matrix!==void 0){const A=new M.Matrix4;A.fromArray(a.matrix),f.applyMatrix4(A)}else a.translation!==void 0&&f.position.fromArray(a.translation),a.rotation!==void 0&&f.quaternion.fromArray(a.rotation),a.scale!==void 0&&f.scale.fromArray(a.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=t,f})),this.nodeCache[t]}loadScene(t){const e=this.extensions,i=this.json.scenes[t],r=this,a=new M.Group;i.name&&(a.name=r.createUniqueName(i.name)),Cs(a,i),i.extensions&&fo(e,a,i);const l=i.nodes||[],c=[];for(let u=0,d=l.length;u<d;u++)c.push(r.getDependency("node",l[u]));return Promise.all(c).then((function(u){for(let d=0,f=u.length;d<f;d++)a.add(u[d]);return r.associations=(d=>{const f=new Map;for(const[A,m]of r.associations)(A instanceof M.Material||A instanceof M.Texture)&&f.set(A,m);return d.traverse((A=>{const m=r.associations.get(A);m!=null&&f.set(A,m)})),f})(a),a}))}_createAnimationTracks(t,e,i,r,a){const l=[],c=t.name?t.name:t.uuid,u=[];let d;switch(va[a.path]===va.weights?t.traverse((function(m){m.morphTargetInfluences&&u.push(m.name?m.name:m.uuid)})):u.push(c),va[a.path]){case va.weights:d=M.NumberKeyframeTrack;break;case va.rotation:d=M.QuaternionKeyframeTrack;break;case va.position:case va.scale:d=M.VectorKeyframeTrack;break;default:d=i.itemSize===1?M.NumberKeyframeTrack:M.VectorKeyframeTrack}const f=r.interpolation!==void 0?FQ[r.interpolation]:M.InterpolateLinear,A=this._getArrayFromAccessor(i);for(let m=0,g=u.length;m<g;m++){const b=new d(u[m]+"."+va[a.path],e.array,A,f);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(b),l.push(b)}return l}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){const i=Ly(e.constructor),r=new Float32Array(e.length);for(let a=0,l=e.length;a<l;a++)r[a]=e[a]*i;e=r}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(e){return new(this instanceof M.QuaternionKeyframeTrack?PQ:ZB)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Qw(n,t,e){const i=t.attributes,r=[];function a(l,c){return e.getDependency("accessor",l).then((function(u){n.setAttribute(c,u)}))}for(const l in i){const c=Ry[l]||l.toLowerCase();c in n.attributes||r.push(a(i[l],c))}if(t.indices!==void 0&&!n.index){const l=e.getDependency("accessor",t.indices).then((function(c){n.setIndex(c)}));r.push(l)}return M.ColorManagement.workingColorSpace!==M.LinearSRGBColorSpace&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${M.ColorManagement.workingColorSpace}" not supported.`),Cs(n,t),(function(l,c,u){const d=c.attributes,f=new M.Box3;if(d.POSITION===void 0)return;{const g=u.json.accessors[d.POSITION],b=g.min,x=g.max;if(b===void 0||x===void 0)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(f.set(new M.Vector3(b[0],b[1],b[2]),new M.Vector3(x[0],x[1],x[2])),g.normalized){const E=Ly(nc[g.componentType]);f.min.multiplyScalar(E),f.max.multiplyScalar(E)}}const A=c.targets;if(A!==void 0){const g=new M.Vector3,b=new M.Vector3;for(let x=0,E=A.length;x<E;x++){const y=A[x];if(y.POSITION!==void 0){const _=u.json.accessors[y.POSITION],w=_.min,S=_.max;if(w!==void 0&&S!==void 0){if(b.setX(Math.max(Math.abs(w[0]),Math.abs(S[0]))),b.setY(Math.max(Math.abs(w[1]),Math.abs(S[1]))),b.setZ(Math.max(Math.abs(w[2]),Math.abs(S[2]))),_.normalized){const R=Ly(nc[_.componentType]);b.multiplyScalar(R)}g.max(b)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}f.expandByVector(g)}l.boundingBox=f;const m=new M.Sphere;f.getCenter(m.center),m.radius=f.min.distanceTo(f.max)/2,l.boundingSphere=m})(n,t,e),Promise.all(r).then((function(){return t.targets!==void 0?(function(l,c,u){let d=!1,f=!1,A=!1;for(let x=0,E=c.length;x<E;x++){const y=c[x];if(y.POSITION!==void 0&&(d=!0),y.NORMAL!==void 0&&(f=!0),y.COLOR_0!==void 0&&(A=!0),d&&f&&A)break}if(!d&&!f&&!A)return Promise.resolve(l);const m=[],g=[],b=[];for(let x=0,E=c.length;x<E;x++){const y=c[x];if(d){const _=y.POSITION!==void 0?u.getDependency("accessor",y.POSITION):l.attributes.position;m.push(_)}if(f){const _=y.NORMAL!==void 0?u.getDependency("accessor",y.NORMAL):l.attributes.normal;g.push(_)}if(A){const _=y.COLOR_0!==void 0?u.getDependency("accessor",y.COLOR_0):l.attributes.color;b.push(_)}}return Promise.all([Promise.all(m),Promise.all(g),Promise.all(b)]).then((function(x){const E=x[0],y=x[1],_=x[2];return d&&(l.morphAttributes.position=E),f&&(l.morphAttributes.normal=y),A&&(l.morphAttributes.color=_),l.morphTargetsRelative=!0,l}))})(n,t.targets,e):n}))}class VQ{constructor(t=4){this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(t){if(!this.workers[t]){const e=this.workerCreator();e.addEventListener("message",this._onMessage.bind(this,t)),this.workers[t]=e}}_getIdleWorker(){for(let t=0;t<this.pool;t++)if(!(this.workerStatus&1<<t))return t;return-1}_onMessage(t,e){const i=this.workersResolve[t];if(i&&i(e),this.queue.length){const{resolve:r,msg:a,transfer:l}=this.queue.shift();this.workersResolve[t]=r,this.workers[t].postMessage(a,l)}else this.workerStatus^=1<<t}setWorkerCreator(t){this.workerCreator=t}setWorkerLimit(t){this.pool=t}postMessage(t,e){return new Promise((i=>{const r=this._getIdleWorker();r!==-1?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=i,this.workers[r].postMessage(t,e)):this.queue.push({resolve:i,msg:t,transfer:e})}))}dispose(){this.workers.forEach((t=>t.terminate())),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const $B=9,tT=15,eT=16,nT=22,iT=37,rT=43,sT=76,aT=83,oT=97,lT=100,cT=103,uT=109,hT=165,dT=166,FE=1000066e3;class qQ{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class vu{constructor(t,e,i,r){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+e,i),this._littleEndian=r,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint8Array(t){const e=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,t);return this._offset+=t,e}_skip(t){return this._offset+=t,this}_scan(t,e){e===void 0&&(e=0);const i=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==e&&r<t;)r++,this._offset++;return r<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,r)}}const di=[171,75,84,88,32,50,48,187,13,10,26,10];function zw(n){return new TextDecoder().decode(n)}var WQ=de(9922).hp;let av,xs,Dy;const ov={env:{emscripten_notify_memory_growth:function(n){Dy=new Uint8Array(xs.exports.memory.buffer)}}};class jQ{init(){return av||(av=typeof fetch<"u"?fetch("data:application/wasm;base64,"+Gw).then((t=>t.arrayBuffer())).then((t=>WebAssembly.instantiate(t,ov))).then(this._init):WebAssembly.instantiate(WQ.from(Gw,"base64"),ov).then(this._init),av)}_init(t){xs=t.instance,ov.env.emscripten_notify_memory_growth(0)}decode(t,e=0){if(!xs)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=t.byteLength,r=xs.exports.malloc(i);Dy.set(t,r),e=e||Number(xs.exports.ZSTD_findDecompressedSize(r,i));const a=xs.exports.malloc(e),l=xs.exports.ZSTD_decompress(a,e,r,i),c=Dy.slice(a,a+l);return xs.exports.free(r),xs.exports.free(a),c}}const Gw="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",lv=new WeakMap;let cv,uv=0;class ji extends M.Loader{constructor(t){super(t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new VQ,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(t){return this.transcoderPath=t,this}setWorkerLimit(t){return this.workerPool.setWorkerLimit(t),this}async detectSupportAsync(t){return this.workerConfig={astcSupported:await t.hasFeatureAsync("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:await t.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await t.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await t.hasFeatureAsync("texture-compression-bc"),bptcSupported:await t.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await t.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(t){return t.isWebGPURenderer===!0?this.workerConfig={astcSupported:t.hasFeature("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:t.hasFeature("texture-compression-etc1"),etc2Supported:t.hasFeature("texture-compression-etc2"),dxtSupported:t.hasFeature("texture-compression-bc"),bptcSupported:t.hasFeature("texture-compression-bptc"),pvrtcSupported:t.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:t.extensions.has("WEBGL_compressed_texture_astc"),astcHDRSupported:t.extensions.has("WEBGL_compressed_texture_astc")&&t.extensions.get("WEBGL_compressed_texture_astc").getSupportedProfiles().includes("hdr"),etc1Supported:t.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:t.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:t.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:t.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const t=new M.FileLoader(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);const e=t.loadAsync("basis_transcoder.js"),i=new M.FileLoader(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);const r=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([e,r]).then((([a,l])=>{const c=ji.BasisWorker.toString(),u=["/* constants */","let _EngineFormat = "+JSON.stringify(ji.EngineFormat),"let _EngineType = "+JSON.stringify(ji.EngineType),"let _TranscoderFormat = "+JSON.stringify(ji.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(ji.BasisFormat),"/* basis_transcoder.js */",a,"/* worker */",c.substring(c.indexOf("{")+1,c.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([u])),this.transcoderBinary=l,this.workerPool.setWorkerCreator((()=>{const d=new Worker(this.workerSourceURL),f=this.transcoderBinary.slice(0);return d.postMessage({type:"init",config:this.workerConfig,transcoderBinary:f},[f]),d}))})),uv>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),uv++}return this.transcoderPending}load(t,e,i,r){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const a=new M.FileLoader(this.manager);a.setResponseType("arraybuffer"),a.setWithCredentials(this.withCredentials),a.load(t,(l=>{this.parse(l,e,r)}),i,r)}parse(t,e,i){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(lv.has(t))return lv.get(t).promise.then(e).catch(i);this._createTexture(t).then((r=>e?e(r):null)).catch(i)}_createTextureFrom(t,e){const{type:i,error:r,data:{faces:a,width:l,height:c,format:u,type:d,dfdFlags:f}}=t;if(i==="error")return Promise.reject(r);let A;if(e.faceCount===6)A=new M.CompressedCubeTexture(a,u,d);else{const m=a[0].mipmaps;A=e.layerCount>1?new M.CompressedArrayTexture(m,l,c,e.layerCount,u,d):new M.CompressedTexture(m,l,c,u,d)}return A.minFilter=a[0].mipmaps.length===1?M.LinearFilter:M.LinearMipmapLinearFilter,A.magFilter=M.LinearFilter,A.generateMipmaps=!1,A.needsUpdate=!0,A.colorSpace=Hw(e),A.premultiplyAlpha=!!(1&f),A}async _createTexture(t,e={}){const i=(function(c){const u=new Uint8Array(c.buffer,c.byteOffset,di.length);if(u[0]!==di[0]||u[1]!==di[1]||u[2]!==di[2]||u[3]!==di[3]||u[4]!==di[4]||u[5]!==di[5]||u[6]!==di[6]||u[7]!==di[7]||u[8]!==di[8]||u[9]!==di[9]||u[10]!==di[10]||u[11]!==di[11])throw new Error("Missing KTX 2.0 identifier.");const d=new qQ,f=17*Uint32Array.BYTES_PER_ELEMENT,A=new vu(c,di.length,f,!0);d.vkFormat=A._nextUint32(),d.typeSize=A._nextUint32(),d.pixelWidth=A._nextUint32(),d.pixelHeight=A._nextUint32(),d.pixelDepth=A._nextUint32(),d.layerCount=A._nextUint32(),d.faceCount=A._nextUint32();const m=A._nextUint32();d.supercompressionScheme=A._nextUint32();const g=A._nextUint32(),b=A._nextUint32(),x=A._nextUint32(),E=A._nextUint32(),y=A._nextUint64(),_=A._nextUint64(),w=new vu(c,di.length+f,3*m*8,!0);for(let Et=0;Et<m;Et++)d.levels.push({levelData:new Uint8Array(c.buffer,c.byteOffset+w._nextUint64(),w._nextUint64()),uncompressedByteLength:w._nextUint64()});const S=new vu(c,g,b,!0),R={vendorId:S._skip(4)._nextUint16(),descriptorType:S._nextUint16(),versionNumber:S._nextUint16(),descriptorBlockSize:S._nextUint16(),colorModel:S._nextUint8(),colorPrimaries:S._nextUint8(),transferFunction:S._nextUint8(),flags:S._nextUint8(),texelBlockDimension:[S._nextUint8(),S._nextUint8(),S._nextUint8(),S._nextUint8()],bytesPlane:[S._nextUint8(),S._nextUint8(),S._nextUint8(),S._nextUint8(),S._nextUint8(),S._nextUint8(),S._nextUint8(),S._nextUint8()],samples:[]},U=(R.descriptorBlockSize/4-6)/4;for(let Et=0;Et<U;Et++){const Ot={bitOffset:S._nextUint16(),bitLength:S._nextUint8(),channelType:S._nextUint8(),samplePosition:[S._nextUint8(),S._nextUint8(),S._nextUint8(),S._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&Ot.channelType?(Ot.sampleLower=S._nextInt32(),Ot.sampleUpper=S._nextInt32()):(Ot.sampleLower=S._nextUint32(),Ot.sampleUpper=S._nextUint32()),R.samples[Et]=Ot}d.dataFormatDescriptor.length=0,d.dataFormatDescriptor.push(R);const L=new vu(c,x,E,!0);for(;L._offset<E;){const Et=L._nextUint32(),Ot=L._scan(Et),Gt=zw(Ot);if(d.keyValue[Gt]=L._nextUint8Array(Et-Ot.byteLength-1),Gt.match(/^ktx/i)){const Lt=zw(d.keyValue[Gt]);d.keyValue[Gt]=Lt.substring(0,Lt.lastIndexOf("\0"))}L._skip(Et%4?4-Et%4:0)}if(_<=0)return d;const F=new vu(c,y,_,!0),D=F._nextUint16(),O=F._nextUint16(),z=F._nextUint32(),J=F._nextUint32(),$=F._nextUint32(),nt=F._nextUint32(),At=[];for(let Et=0;Et<m;Et++)At.push({imageFlags:F._nextUint32(),rgbSliceByteOffset:F._nextUint32(),rgbSliceByteLength:F._nextUint32(),alphaSliceByteOffset:F._nextUint32(),alphaSliceByteLength:F._nextUint32()});const G=y+F._offset,X=G+z,tt=X+J,ut=tt+$,xt=new Uint8Array(c.buffer,c.byteOffset+G,z),V=new Uint8Array(c.buffer,c.byteOffset+X,J),rt=new Uint8Array(c.buffer,c.byteOffset+tt,$),yt=new Uint8Array(c.buffer,c.byteOffset+ut,nt);return d.globalData={endpointCount:D,selectorCount:O,imageDescs:At,endpointsData:xt,selectorsData:V,tablesData:rt,extendedData:yt},d})(new Uint8Array(t)),r=i.vkFormat===FE&&i.dataFormatDescriptor[0].colorModel===167;if(i.vkFormat!==0&&(!r||this.workerConfig.astcHDRSupported))return(async function(c){const{vkFormat:u}=c;if(hv[u]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let d;c.supercompressionScheme===2&&(cv||(cv=new Promise((async m=>{const g=new jQ;await g.init(),m(g)}))),d=await cv);const f=[];for(let m=0;m<c.levels.length;m++){const g=Math.max(1,c.pixelWidth>>m),b=Math.max(1,c.pixelHeight>>m),x=c.pixelDepth?Math.max(1,c.pixelDepth>>m):0,E=c.levels[m];let y,_;if(c.supercompressionScheme===0)y=E.levelData;else{if(c.supercompressionScheme!==2)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");y=d.decode(E.levelData,E.uncompressedByteLength)}_=dv[u]===M.FloatType?new Float32Array(y.buffer,y.byteOffset,y.byteLength/Float32Array.BYTES_PER_ELEMENT):dv[u]===M.HalfFloatType?new Uint16Array(y.buffer,y.byteOffset,y.byteLength/Uint16Array.BYTES_PER_ELEMENT):y,f.push({data:_,width:g,height:b,depth:x})}let A;if(XQ.has(hv[u]))A=c.pixelDepth===0?new M.DataTexture(f[0].data,c.pixelWidth,c.pixelHeight):new M.Data3DTexture(f[0].data,c.pixelWidth,c.pixelHeight,c.pixelDepth);else{if(c.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");A=new M.CompressedTexture(f,c.pixelWidth,c.pixelHeight),A.minFilter=f.length===1?M.LinearFilter:M.LinearMipmapLinearFilter,A.magFilter=M.LinearFilter}return A.mipmaps=f,A.type=dv[u],A.format=hv[u],A.colorSpace=Hw(c),A.needsUpdate=!0,Promise.resolve(A)})(i);const a=e,l=this.init().then((()=>this.workerPool.postMessage({type:"transcode",buffer:t,taskConfig:a},[t]))).then((c=>this._createTextureFrom(c.data,i)));return lv.set(t,{promise:l}),l}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),uv--,this}}ji.BasisFormat={ETC1S:0,UASTC:1,UASTC_HDR:2},ji.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16,BC6H:22,RGB_HALF:24,RGBA_HALF:25},ji.EngineFormat={RGBAFormat:M.RGBAFormat,RGBA_ASTC_4x4_Format:M.RGBA_ASTC_4x4_Format,RGB_BPTC_UNSIGNED_Format:M.RGB_BPTC_UNSIGNED_Format,RGBA_BPTC_Format:M.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:M.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:M.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:M.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:M.RGB_ETC1_Format,RGB_ETC2_Format:M.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:M.RGB_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format:M.RGBA_S3TC_DXT1_Format},ji.EngineType={UnsignedByteType:M.UnsignedByteType,HalfFloatType:M.HalfFloatType,FloatType:M.FloatType},ji.BasisWorker=function(){let n,t,e;const i=_EngineFormat,r=_EngineType,a=_TranscoderFormat,l=_BasisFormat;self.addEventListener("message",(function(A){const m=A.data;switch(m.type){case"init":n=m.config,g=m.transcoderBinary,t=new Promise((b=>{e={wasmBinary:g,onRuntimeInitialized:b},BASIS(e)})).then((()=>{e.initializeBasis(),e.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")}));break;case"transcode":t.then((()=>{try{const{faces:b,buffers:x,width:E,height:y,hasAlpha:_,format:w,type:S,dfdFlags:R}=(function(U){const L=new e.KTX2File(new Uint8Array(U));function F(){L.close(),L.delete()}if(!L.isValid())throw F(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");let D;if(L.isUASTC())D=l.UASTC;else if(L.isETC1S())D=l.ETC1S;else{if(!L.isHDR())throw new Error("THREE.KTX2Loader: Unknown Basis encoding");D=l.UASTC_HDR}const O=L.getWidth(),z=L.getHeight(),J=L.getLayers()||1,$=L.getLevels(),nt=L.getFaces(),At=L.getHasAlpha(),G=L.getDFDFlags(),{transcoderFormat:X,engineFormat:tt,engineType:ut}=(function(rt,yt,Et,Ot){const Gt=u[rt];for(let Lt=0;Lt<Gt.length;Lt++){const ft=Gt[Lt];if((!ft.if||n[ft.if])&&ft.basisFormat.includes(rt)&&!(Ot&&ft.transcoderFormat.length<2)&&(!ft.needsPowerOfTwo||d(yt)&&d(Et)))return{transcoderFormat:ft.transcoderFormat[Ot?1:0],engineFormat:ft.engineFormat[Ot?1:0],engineType:ft.engineType[0]}}throw new Error("THREE.KTX2Loader: Failed to identify transcoding target.")})(D,O,z,At);if(!O||!z||!$)throw F(),new Error("THREE.KTX2Loader:	Invalid texture");if(!L.startTranscoding())throw F(),new Error("THREE.KTX2Loader: .startTranscoding failed");const xt=[],V=[];for(let rt=0;rt<nt;rt++){const yt=[];for(let Et=0;Et<$;Et++){const Ot=[];let Gt,Lt;for(let It=0;It<J;It++){const Ft=L.getImageLevelInfo(Et,It,rt);rt!==0||Et!==0||It!==0||Ft.origWidth%4==0&&Ft.origHeight%4==0||console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),$>1?(Gt=Ft.origWidth,Lt=Ft.origHeight):(Gt=Ft.width,Lt=Ft.height);let Jt=new Uint8Array(L.getImageTranscodedSizeInBytes(Et,It,0,X));const Ct=L.transcodeImage(Jt,Et,It,rt,X,0,-1,-1);if(ut===r.HalfFloatType&&(Jt=new Uint16Array(Jt.buffer,Jt.byteOffset,Jt.byteLength/Uint16Array.BYTES_PER_ELEMENT)),!Ct)throw F(),new Error("THREE.KTX2Loader: .transcodeImage failed.");Ot.push(Jt)}const ft=f(Ot);yt.push({data:ft,width:Gt,height:Lt}),V.push(ft.buffer)}xt.push({mipmaps:yt,width:O,height:z,format:tt,type:ut})}return F(),{faces:xt,buffers:V,width:O,height:z,hasAlpha:At,dfdFlags:G,format:tt,type:ut}})(m.buffer);self.postMessage({type:"transcode",id:m.id,data:{faces:b,width:E,height:y,hasAlpha:_,format:w,type:S,dfdFlags:R}},x)}catch(b){console.error(b),self.postMessage({type:"error",id:m.id,error:b.message})}}))}var g}));const c=[{if:"astcSupported",basisFormat:[l.UASTC],transcoderFormat:[a.ASTC_4x4,a.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],engineType:[r.UnsignedByteType],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[l.ETC1S,l.UASTC],transcoderFormat:[a.BC7_M5,a.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],engineType:[r.UnsignedByteType],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[l.ETC1S,l.UASTC],transcoderFormat:[a.BC1,a.BC3],engineFormat:[i.RGBA_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],engineType:[r.UnsignedByteType],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[l.ETC1S,l.UASTC],transcoderFormat:[a.ETC1,a.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],engineType:[r.UnsignedByteType],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[l.ETC1S,l.UASTC],transcoderFormat:[a.ETC1],engineFormat:[i.RGB_ETC1_Format],engineType:[r.UnsignedByteType],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[l.ETC1S,l.UASTC],transcoderFormat:[a.PVRTC1_4_RGB,a.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],engineType:[r.UnsignedByteType],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0},{if:"bptcSupported",basisFormat:[l.UASTC_HDR],transcoderFormat:[a.BC6H],engineFormat:[i.RGB_BPTC_UNSIGNED_Format],engineType:[r.HalfFloatType],priorityHDR:1,needsPowerOfTwo:!1},{basisFormat:[l.ETC1S,l.UASTC],transcoderFormat:[a.RGBA32,a.RGBA32],engineFormat:[i.RGBAFormat,i.RGBAFormat],engineType:[r.UnsignedByteType,r.UnsignedByteType],priorityETC1S:100,priorityUASTC:100,needsPowerOfTwo:!1},{basisFormat:[l.UASTC_HDR],transcoderFormat:[a.RGBA_HALF],engineFormat:[i.RGBAFormat],engineType:[r.HalfFloatType],priorityHDR:100,needsPowerOfTwo:!1}],u={[l.ETC1S]:c.filter((A=>A.basisFormat.includes(l.ETC1S))).sort(((A,m)=>A.priorityUASTC-m.priorityUASTC)),[l.UASTC]:c.filter((A=>A.basisFormat.includes(l.UASTC))).sort(((A,m)=>A.priorityUASTC-m.priorityUASTC)),[l.UASTC_HDR]:c.filter((A=>A.basisFormat.includes(l.UASTC_HDR))).sort(((A,m)=>A.priorityHDR-m.priorityHDR))};function d(A){return A<=2||!(A&A-1)&&A!==0}function f(A){if(A.length===1)return A[0];let m=0;for(let x=0;x<A.length;x++)m+=A[x].byteLength;const g=new Uint8Array(m);let b=0;for(let x=0;x<A.length;x++){const E=A[x];g.set(E,b),b+=E.byteLength}return g}};const XQ=new Set([M.RGBAFormat,M.RGFormat,M.RedFormat]),hv={[uT]:M.RGBAFormat,[oT]:M.RGBAFormat,[iT]:M.RGBAFormat,[rT]:M.RGBAFormat,[cT]:M.RGFormat,[aT]:M.RGFormat,[eT]:M.RGFormat,[nT]:M.RGFormat,[lT]:M.RedFormat,[sT]:M.RedFormat,[tT]:M.RedFormat,[$B]:M.RedFormat,[FE]:M.RGBA_ASTC_4x4_Format,[dT]:M.RGBA_ASTC_6x6_Format,[hT]:M.RGBA_ASTC_6x6_Format},dv={[uT]:M.FloatType,[oT]:M.HalfFloatType,[iT]:M.UnsignedByteType,[rT]:M.UnsignedByteType,[cT]:M.FloatType,[aT]:M.HalfFloatType,[eT]:M.UnsignedByteType,[nT]:M.UnsignedByteType,[lT]:M.FloatType,[sT]:M.HalfFloatType,[tT]:M.UnsignedByteType,[$B]:M.UnsignedByteType,[FE]:M.HalfFloatType,[dT]:M.UnsignedByteType,[hT]:M.UnsignedByteType};function Hw(n){const t=n.dataFormatDescriptor[0];return t.colorPrimaries===1?t.transferFunction===2?M.SRGBColorSpace:M.LinearSRGBColorSpace:t.colorPrimaries===10?t.transferFunction===2?"display-p3":"display-p3-linear":(t.colorPrimaries===0||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${t.colorPrimaries}"`),M.NoColorSpace)}const He={c:null,u:[new M.Vector3,new M.Vector3,new M.Vector3],e:[]},tn={c:null,u:[new M.Vector3,new M.Vector3,new M.Vector3],e:[]},gn=[[],[],[]],we=[[],[],[]],pn=[],po=new M.Vector3,Ao=new M.Vector3,mo=new M.Vector3,kn=new M.Vector3,Vw=new M.Vector3,qw=new M.Vector3,br=new M.Matrix3,Ww=new M.Box3,Df=new M.Matrix4,jw=new M.Matrix4,Xw=new M.Ray;class nA{constructor(t=new M.Vector3,e=new M.Vector3,i=new M.Matrix3){this.center=t,this.halfSize=e,this.rotation=i}set(t,e,i){return this.center=t,this.halfSize=e,this.rotation=i,this}copy(t){return this.center.copy(t.center),this.halfSize.copy(t.halfSize),this.rotation.copy(t.rotation),this}clone(){return new this.constructor().copy(this)}getSize(t){return t.copy(this.halfSize).multiplyScalar(2)}clampPoint(t,e){const i=this.halfSize;kn.subVectors(t,this.center),this.rotation.extractBasis(po,Ao,mo),e.copy(this.center);const r=M.MathUtils.clamp(kn.dot(po),-i.x,i.x);e.add(po.multiplyScalar(r));const a=M.MathUtils.clamp(kn.dot(Ao),-i.y,i.y);e.add(Ao.multiplyScalar(a));const l=M.MathUtils.clamp(kn.dot(mo),-i.z,i.z);return e.add(mo.multiplyScalar(l)),e}containsPoint(t){return kn.subVectors(t,this.center),this.rotation.extractBasis(po,Ao,mo),Math.abs(kn.dot(po))<=this.halfSize.x&&Math.abs(kn.dot(Ao))<=this.halfSize.y&&Math.abs(kn.dot(mo))<=this.halfSize.z}intersectsBox3(t){return this.intersectsOBB(YQ.fromBox3(t))}intersectsSphere(t){return this.clampPoint(t.center,qw),qw.distanceToSquared(t.center)<=t.radius*t.radius}intersectsOBB(t,e=Number.EPSILON){He.c=this.center,He.e[0]=this.halfSize.x,He.e[1]=this.halfSize.y,He.e[2]=this.halfSize.z,this.rotation.extractBasis(He.u[0],He.u[1],He.u[2]),tn.c=t.center,tn.e[0]=t.halfSize.x,tn.e[1]=t.halfSize.y,tn.e[2]=t.halfSize.z,t.rotation.extractBasis(tn.u[0],tn.u[1],tn.u[2]);for(let a=0;a<3;a++)for(let l=0;l<3;l++)gn[a][l]=He.u[a].dot(tn.u[l]);kn.subVectors(tn.c,He.c),pn[0]=kn.dot(He.u[0]),pn[1]=kn.dot(He.u[1]),pn[2]=kn.dot(He.u[2]);for(let a=0;a<3;a++)for(let l=0;l<3;l++)we[a][l]=Math.abs(gn[a][l])+e;let i,r;for(let a=0;a<3;a++)if(i=He.e[a],r=tn.e[0]*we[a][0]+tn.e[1]*we[a][1]+tn.e[2]*we[a][2],Math.abs(pn[a])>i+r)return!1;for(let a=0;a<3;a++)if(i=He.e[0]*we[0][a]+He.e[1]*we[1][a]+He.e[2]*we[2][a],r=tn.e[a],Math.abs(pn[0]*gn[0][a]+pn[1]*gn[1][a]+pn[2]*gn[2][a])>i+r)return!1;return i=He.e[1]*we[2][0]+He.e[2]*we[1][0],r=tn.e[1]*we[0][2]+tn.e[2]*we[0][1],!(Math.abs(pn[2]*gn[1][0]-pn[1]*gn[2][0])>i+r||(i=He.e[1]*we[2][1]+He.e[2]*we[1][1],r=tn.e[0]*we[0][2]+tn.e[2]*we[0][0],Math.abs(pn[2]*gn[1][1]-pn[1]*gn[2][1])>i+r||(i=He.e[1]*we[2][2]+He.e[2]*we[1][2],r=tn.e[0]*we[0][1]+tn.e[1]*we[0][0],Math.abs(pn[2]*gn[1][2]-pn[1]*gn[2][2])>i+r||(i=He.e[0]*we[2][0]+He.e[2]*we[0][0],r=tn.e[1]*we[1][2]+tn.e[2]*we[1][1],Math.abs(pn[0]*gn[2][0]-pn[2]*gn[0][0])>i+r||(i=He.e[0]*we[2][1]+He.e[2]*we[0][1],r=tn.e[0]*we[1][2]+tn.e[2]*we[1][0],Math.abs(pn[0]*gn[2][1]-pn[2]*gn[0][1])>i+r||(i=He.e[0]*we[2][2]+He.e[2]*we[0][2],r=tn.e[0]*we[1][1]+tn.e[1]*we[1][0],Math.abs(pn[0]*gn[2][2]-pn[2]*gn[0][2])>i+r||(i=He.e[0]*we[1][0]+He.e[1]*we[0][0],r=tn.e[1]*we[2][2]+tn.e[2]*we[2][1],Math.abs(pn[1]*gn[0][0]-pn[0]*gn[1][0])>i+r||(i=He.e[0]*we[1][1]+He.e[1]*we[0][1],r=tn.e[0]*we[2][2]+tn.e[2]*we[2][0],Math.abs(pn[1]*gn[0][1]-pn[0]*gn[1][1])>i+r||(i=He.e[0]*we[1][2]+He.e[1]*we[0][2],r=tn.e[0]*we[2][1]+tn.e[1]*we[2][0],Math.abs(pn[1]*gn[0][2]-pn[0]*gn[1][2])>i+r)))))))))}intersectsPlane(t){this.rotation.extractBasis(po,Ao,mo);const e=this.halfSize.x*Math.abs(t.normal.dot(po))+this.halfSize.y*Math.abs(t.normal.dot(Ao))+this.halfSize.z*Math.abs(t.normal.dot(mo)),i=t.normal.dot(this.center)-t.constant;return Math.abs(i)<=e}intersectRay(t,e){return this.getSize(Vw),Ww.setFromCenterAndSize(kn.set(0,0,0),Vw),Df.setFromMatrix3(this.rotation),Df.setPosition(this.center),jw.copy(Df).invert(),Xw.copy(t).applyMatrix4(jw),Xw.intersectBox(Ww,e)?e.applyMatrix4(Df):null}intersectsRay(t){return this.intersectRay(t,kn)!==null}fromBox3(t){return t.getCenter(this.center),t.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(t){return t.center.equals(this.center)&&t.halfSize.equals(this.halfSize)&&t.rotation.equals(this.rotation)}applyMatrix4(t){const e=t.elements;let i=kn.set(e[0],e[1],e[2]).length();const r=kn.set(e[4],e[5],e[6]).length(),a=kn.set(e[8],e[9],e[10]).length();t.determinant()<0&&(i=-i),br.setFromMatrix4(t);const l=1/i,c=1/r,u=1/a;return br.elements[0]*=l,br.elements[1]*=l,br.elements[2]*=l,br.elements[3]*=c,br.elements[4]*=c,br.elements[5]*=c,br.elements[6]*=u,br.elements[7]*=u,br.elements[8]*=u,this.rotation.multiply(br),this.halfSize.x*=i,this.halfSize.y*=r,this.halfSize.z*=a,kn.setFromMatrixPosition(t),this.center.add(kn),this}}const YQ=new nA,KQ=/^[og]\s*(.+)?/,JQ=/^mtllib /,ZQ=/^usemtl /,$Q=/^usemap /,Yw=/\s+/,Kw=new M.Vector3,fv=new M.Vector3,Jw=new M.Vector3,Zw=new M.Vector3,ar=new M.Vector3,Uf=new M.Color;function t8(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,e){if(this.object&&this.object.fromDeclaration===!1)return this.object.name=t,void(this.object.fromDeclaration=e!==!1);const i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:e!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,a){const l=this._finalize(!1);l&&(l.inherited||l.groupCount<=0)&&this.materials.splice(l.index,1);const c={index:this.materials.length,name:r||"",mtllib:Array.isArray(a)&&a.length>0?a[a.length-1]:"",smooth:l!==void 0?l.smooth:this.smooth,groupStart:l!==void 0?l.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(u){const d={index:typeof u=="number"?u:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return d.clone=this.clone.bind(d),d}};return this.materials.push(c),c},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const a=this.currentMaterial();if(a&&a.groupEnd===-1&&(a.groupEnd=this.geometry.vertices.length/3,a.groupCount=a.groupEnd-a.groupStart,a.inherited=!1),r&&this.materials.length>1)for(let l=this.materials.length-1;l>=0;l--)this.materials[l].groupCount<=0&&this.materials.splice(l,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),a}},i&&i.name&&typeof i.clone=="function"){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(t,e){const i=parseInt(t,10);return 3*(i>=0?i-1:i+e/3)},parseNormalIndex:function(t,e){const i=parseInt(t,10);return 3*(i>=0?i-1:i+e/3)},parseUVIndex:function(t,e){const i=parseInt(t,10);return 2*(i>=0?i-1:i+e/2)},addVertex:function(t,e,i){const r=this.vertices,a=this.object.geometry.vertices;a.push(r[t+0],r[t+1],r[t+2]),a.push(r[e+0],r[e+1],r[e+2]),a.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,i){const r=this.normals,a=this.object.geometry.normals;a.push(r[t+0],r[t+1],r[t+2]),a.push(r[e+0],r[e+1],r[e+2]),a.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(t,e,i){const r=this.vertices,a=this.object.geometry.normals;Kw.fromArray(r,t),fv.fromArray(r,e),Jw.fromArray(r,i),ar.subVectors(Jw,fv),Zw.subVectors(Kw,fv),ar.cross(Zw),ar.normalize(),a.push(ar.x,ar.y,ar.z),a.push(ar.x,ar.y,ar.z),a.push(ar.x,ar.y,ar.z)},addColor:function(t,e,i){const r=this.colors,a=this.object.geometry.colors;r[t]!==void 0&&a.push(r[t+0],r[t+1],r[t+2]),r[e]!==void 0&&a.push(r[e+0],r[e+1],r[e+2]),r[i]!==void 0&&a.push(r[i+0],r[i+1],r[i+2])},addUV:function(t,e,i){const r=this.uvs,a=this.object.geometry.uvs;a.push(r[t+0],r[t+1]),a.push(r[e+0],r[e+1]),a.push(r[i+0],r[i+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},addFace:function(t,e,i,r,a,l,c,u,d){const f=this.vertices.length;let A=this.parseVertexIndex(t,f),m=this.parseVertexIndex(e,f),g=this.parseVertexIndex(i,f);if(this.addVertex(A,m,g),this.addColor(A,m,g),c!==void 0&&c!==""){const b=this.normals.length;A=this.parseNormalIndex(c,b),m=this.parseNormalIndex(u,b),g=this.parseNormalIndex(d,b),this.addNormal(A,m,g)}else this.addFaceNormal(A,m,g);if(r!==void 0&&r!==""){const b=this.uvs.length;A=this.parseUVIndex(r,b),m=this.parseUVIndex(a,b),g=this.parseUVIndex(l,b),this.addUV(A,m,g),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const e=this.vertices.length;for(let i=0,r=t.length;i<r;i++){const a=this.parseVertexIndex(t[i],e);this.addVertexPoint(a),this.addColor(a)}},addLineGeometry:function(t,e){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let a=0,l=t.length;a<l;a++)this.addVertexLine(this.parseVertexIndex(t[a],i));for(let a=0,l=e.length;a<l;a++)this.addUVLine(this.parseUVIndex(e[a],r))}};return n.startObject("",!1),n}class fT extends M.Loader{constructor(t){super(t),this.materials=null}load(t,e,i,r){const a=this,l=new M.FileLoader(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,(function(c){try{e(a.parse(c))}catch(u){r?r(u):console.error(u),a.manager.itemError(t)}}),i,r)}setMaterials(t){return this.materials=t,this}parse(t){const e=new t8;t.indexOf(`\r
`)!==-1&&(t=t.replace(/\r\n/g,`
`)),t.indexOf(`\\
`)!==-1&&(t=t.replace(/\\\n/g,""));const i=t.split(`
`);let r=[];for(let l=0,c=i.length;l<c;l++){const u=i[l].trimStart();if(u.length===0)continue;const d=u.charAt(0);if(d!=="#")if(d==="v"){const f=u.split(Yw);switch(f[0]){case"v":e.vertices.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),f.length>=7?(Uf.setRGB(parseFloat(f[4]),parseFloat(f[5]),parseFloat(f[6]),M.SRGBColorSpace),e.colors.push(Uf.r,Uf.g,Uf.b)):e.colors.push(void 0,void 0,void 0);break;case"vn":e.normals.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3]));break;case"vt":e.uvs.push(parseFloat(f[1]),parseFloat(f[2]))}}else if(d==="f"){const f=u.slice(1).trim().split(Yw),A=[];for(let g=0,b=f.length;g<b;g++){const x=f[g];if(x.length>0){const E=x.split("/");A.push(E)}}const m=A[0];for(let g=1,b=A.length-1;g<b;g++){const x=A[g],E=A[g+1];e.addFace(m[0],x[0],E[0],m[1],x[1],E[1],m[2],x[2],E[2])}}else if(d==="l"){const f=u.substring(1).trim().split(" ");let A=[];const m=[];if(u.indexOf("/")===-1)A=f;else for(let g=0,b=f.length;g<b;g++){const x=f[g].split("/");x[0]!==""&&A.push(x[0]),x[1]!==""&&m.push(x[1])}e.addLineGeometry(A,m)}else if(d==="p"){const f=u.slice(1).trim().split(" ");e.addPointGeometry(f)}else if((r=KQ.exec(u))!==null){const f=(" "+r[0].slice(1).trim()).slice(1);e.startObject(f)}else if(ZQ.test(u))e.object.startMaterial(u.substring(7).trim(),e.materialLibraries);else if(JQ.test(u))e.materialLibraries.push(u.substring(7).trim());else if($Q.test(u))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(d==="s"){if(r=u.split(" "),r.length>1){const A=r[1].trim().toLowerCase();e.object.smooth=A!=="0"&&A!=="off"}else e.object.smooth=!0;const f=e.object.currentMaterial();f&&(f.smooth=e.object.smooth)}else{if(u==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+u+'"')}}e.finalize();const a=new M.Group;if(a.materialLibraries=[].concat(e.materialLibraries),!(e.objects.length===1&&e.objects[0].geometry.vertices.length===0))for(let l=0,c=e.objects.length;l<c;l++){const u=e.objects[l],d=u.geometry,f=u.materials,A=d.type==="Line",m=d.type==="Points";let g=!1;if(d.vertices.length===0)continue;const b=new M.BufferGeometry;b.setAttribute("position",new M.Float32BufferAttribute(d.vertices,3)),d.normals.length>0&&b.setAttribute("normal",new M.Float32BufferAttribute(d.normals,3)),d.colors.length>0&&(g=!0,b.setAttribute("color",new M.Float32BufferAttribute(d.colors,3))),d.hasUVIndices===!0&&b.setAttribute("uv",new M.Float32BufferAttribute(d.uvs,2));const x=[];for(let y=0,_=f.length;y<_;y++){const w=f[y],S=w.name+"_"+w.smooth+"_"+g;let R=e.materials[S];if(this.materials!==null)if(R=this.materials.create(w.name),!A||!R||R instanceof M.LineBasicMaterial){if(m&&R&&!(R instanceof M.PointsMaterial)){const U=new M.PointsMaterial({size:10,sizeAttenuation:!1});M.Material.prototype.copy.call(U,R),U.color.copy(R.color),U.map=R.map,R=U}}else{const U=new M.LineBasicMaterial;M.Material.prototype.copy.call(U,R),U.color.copy(R.color),R=U}R===void 0&&(R=A?new M.LineBasicMaterial:m?new M.PointsMaterial({size:1,sizeAttenuation:!1}):new M.MeshPhongMaterial,R.name=w.name,R.flatShading=!w.smooth,R.vertexColors=g,e.materials[S]=R),x.push(R)}let E;if(x.length>1){for(let y=0,_=f.length;y<_;y++){const w=f[y];b.addGroup(w.groupStart,w.groupCount,y)}E=A?new M.LineSegments(b,x):m?new M.Points(b,x):new M.Mesh(b,x)}else E=A?new M.LineSegments(b,x[0]):m?new M.Points(b,x[0]):new M.Mesh(b,x[0]);E.name=u.name,a.add(E)}else if(e.vertices.length>0){const l=new M.PointsMaterial({size:1,sizeAttenuation:!1}),c=new M.BufferGeometry;c.setAttribute("position",new M.Float32BufferAttribute(e.vertices,3)),e.colors.length>0&&e.colors[0]!==void 0&&(c.setAttribute("color",new M.Float32BufferAttribute(e.colors,3)),l.vertexColors=!0);const u=new M.Points(c,l);a.add(u)}return a}}class pT extends M.Loader{constructor(t){super(t)}load(t,e,i,r){const a=this,l=this.path===""?M.LoaderUtils.extractUrlBase(t):this.path,c=new M.FileLoader(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,(function(u){try{e(a.parse(u,l))}catch(d){r?r(d):console.error(d),a.manager.itemError(t)}}),i,r)}setMaterialOptions(t){return this.materialOptions=t,this}parse(t,e){const i=t.split(`
`);let r={};const a=/\s+/,l={};for(let u=0;u<i.length;u++){let d=i[u];if(d=d.trim(),d.length===0||d.charAt(0)==="#")continue;const f=d.indexOf(" ");let A=f>=0?d.substring(0,f):d;A=A.toLowerCase();let m=f>=0?d.substring(f+1):"";if(m=m.trim(),A==="newmtl")r={name:m},l[m]=r;else if(A==="ka"||A==="kd"||A==="ks"||A==="ke"){const g=m.split(a,3);r[A]=[parseFloat(g[0]),parseFloat(g[1]),parseFloat(g[2])]}else r[A]=m}const c=new e8(this.resourcePath||e,this.materialOptions);return c.setCrossOrigin(this.crossOrigin),c.setManager(this.manager),c.setMaterials(l),c}}class e8{constructor(t="",e={}){this.baseUrl=t,this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:M.FrontSide,this.wrap=this.options.wrap!==void 0?this.options.wrap:M.RepeatWrapping}setCrossOrigin(t){return this.crossOrigin=t,this}setManager(t){this.manager=t}setMaterials(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(t){if(!this.options)return t;const e={};for(const i in t){const r=t[i],a={};e[i]=a;for(const l in r){let c=!0,u=r[l];const d=l.toLowerCase();switch(d){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(u=[u[0]/255,u[1]/255,u[2]/255]),this.options&&this.options.ignoreZeroRGBs&&u[0]===0&&u[1]===0&&u[2]===0&&(c=!1)}c&&(a[d]=u)}}return e}preload(){for(const t in this.materialsInfo)this.create(t)}getIndex(t){return this.nameLookup[t]}getAsArray(){let t=0;for(const e in this.materialsInfo)this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;return this.materialsArray}create(t){return this.materials[t]===void 0&&this.createMaterial_(t),this.materials[t]}createMaterial_(t){const e=this,i=this.materialsInfo[t],r={name:t,side:this.side};function a(l,c){if(r[l])return;const u=e.getTextureParams(c,r),d=e.loadTexture((f=e.baseUrl,typeof(A=u.url)!="string"||A===""?"":/^https?:\/\//i.test(A)?A:f+A));var f,A;d.repeat.copy(u.scale),d.offset.copy(u.offset),d.wrapS=e.wrap,d.wrapT=e.wrap,l!=="map"&&l!=="emissiveMap"||(d.colorSpace=M.SRGBColorSpace),r[l]=d}for(const l in i){const c=i[l];let u;if(c!=="")switch(l.toLowerCase()){case"kd":r.color=M.ColorManagement.toWorkingColorSpace(new M.Color().fromArray(c),M.SRGBColorSpace);break;case"ks":r.specular=M.ColorManagement.toWorkingColorSpace(new M.Color().fromArray(c),M.SRGBColorSpace);break;case"ke":r.emissive=M.ColorManagement.toWorkingColorSpace(new M.Color().fromArray(c),M.SRGBColorSpace);break;case"map_kd":a("map",c);break;case"map_ks":a("specularMap",c);break;case"map_ke":a("emissiveMap",c);break;case"norm":a("normalMap",c);break;case"map_bump":case"bump":a("bumpMap",c);break;case"map_d":a("alphaMap",c),r.transparent=!0;break;case"ns":r.shininess=parseFloat(c);break;case"d":u=parseFloat(c),u<1&&(r.opacity=u,r.transparent=!0);break;case"tr":u=parseFloat(c),this.options&&this.options.invertTrProperty&&(u=1-u),u>0&&(r.opacity=1-u,r.transparent=!0)}}return this.materials[t]=new M.MeshPhongMaterial(r),this.materials[t]}getTextureParams(t,e){const i={scale:new M.Vector2(1,1),offset:new M.Vector2(0,0)},r=t.split(/\s+/);let a;return a=r.indexOf("-bm"),a>=0&&(e.bumpScale=parseFloat(r[a+1]),r.splice(a,2)),a=r.indexOf("-s"),a>=0&&(i.scale.set(parseFloat(r[a+1]),parseFloat(r[a+2])),r.splice(a,4)),a=r.indexOf("-o"),a>=0&&(i.offset.set(parseFloat(r[a+1]),parseFloat(r[a+2])),r.splice(a,4)),i.url=r.join(" ").trim(),i}loadTexture(t,e,i,r,a){const l=this.manager!==void 0?this.manager:M.DefaultLoadingManager;let c=l.getHandler(t);c===null&&(c=new M.TextureLoader(l)),c.setCrossOrigin&&c.setCrossOrigin(this.crossOrigin);const u=c.load(t,i,r,a);return e!==void 0&&(u.mapping=e),u}}class AT{static fromCubeTexture(t){let e=0;const i=new M.Vector3,r=new M.Vector3,a=new M.Color,l=[0,0,0,0,0,0,0,0,0],c=new M.SphericalHarmonics3,u=c.coefficients;for(let f=0;f<6;f++){const A=t.image[f],m=A.width,g=A.height,b=document.createElement("canvas");b.width=m,b.height=g;const x=b.getContext("2d");x.drawImage(A,0,0,m,g);const E=x.getImageData(0,0,m,g),y=E.data,_=E.width,w=2/_;for(let S=0,R=y.length;S<R;S+=4){a.setRGB(y[S]/255,y[S+1]/255,y[S+2]/255),$w(a,t.colorSpace);const U=S/4,L=(U%_+.5)*w-1,F=1-(Math.floor(U/_)+.5)*w;switch(f){case 0:i.set(-1,F,-L);break;case 1:i.set(1,F,L);break;case 2:i.set(-L,1,-F);break;case 3:i.set(-L,-1,F);break;case 4:i.set(-L,F,1);break;case 5:i.set(L,F,-1)}const D=i.lengthSq(),O=4/(Math.sqrt(D)*D);e+=O,r.copy(i).normalize(),M.SphericalHarmonics3.getBasisAt(r,l);for(let z=0;z<9;z++)u[z].x+=l[z]*a.r*O,u[z].y+=l[z]*a.g*O,u[z].z+=l[z]*a.b*O}}const d=4*Math.PI/e;for(let f=0;f<9;f++)u[f].x*=d,u[f].y*=d,u[f].z*=d;return new M.LightProbe(c)}static async fromCubeRenderTarget(t,e){const i=t.coordinateSystem===M.WebGLCoordinateSystem?-1:1;let r=0;const a=new M.Vector3,l=new M.Vector3,c=new M.Color,u=[0,0,0,0,0,0,0,0,0],d=new M.SphericalHarmonics3,f=d.coefficients,A=e.texture.type,m=e.width;let g;t.isWebGLRenderer&&(g=A===M.HalfFloatType?new Uint16Array(m*m*4):new Uint8Array(m*m*4));for(let x=0;x<6;x++){t.isWebGLRenderer?await t.readRenderTargetPixelsAsync(e,0,0,m,m,g,x):g=await t.readRenderTargetPixelsAsync(e,0,0,m,m,0,x);const E=2/m;for(let y=0,_=g.length;y<_;y+=4){let w,S,R;A===M.HalfFloatType?(w=M.DataUtils.fromHalfFloat(g[y]),S=M.DataUtils.fromHalfFloat(g[y+1]),R=M.DataUtils.fromHalfFloat(g[y+2])):(w=g[y]/255,S=g[y+1]/255,R=g[y+2]/255),c.setRGB(w,S,R),$w(c,e.texture.colorSpace);const U=y/4,L=(1-(U%m+.5)*E)*i,F=1-(Math.floor(U/m)+.5)*E;switch(x){case 0:a.set(-1*i,F,L*i);break;case 1:a.set(1*i,F,-L*i);break;case 2:a.set(L,1,-F);break;case 3:a.set(L,-1,F);break;case 4:a.set(L,F,1);break;case 5:a.set(-L,F,-1)}const D=a.lengthSq(),O=4/(Math.sqrt(D)*D);r+=O,l.copy(a).normalize(),M.SphericalHarmonics3.getBasisAt(l,u);for(let z=0;z<9;z++)f[z].x+=u[z]*c.r*O,f[z].y+=u[z]*c.g*O,f[z].z+=u[z]*c.b*O}}const b=4*Math.PI/r;for(let x=0;x<9;x++)f[x].x*=b,f[x].y*=b,f[x].z*=b;return new M.LightProbe(d)}}function $w(n,t){switch(t){case M.SRGBColorSpace:n.convertSRGBToLinear();break;case M.LinearSRGBColorSpace:case M.NoColorSpace:break;default:console.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported color space.")}return n}var mT=function(n){var t=this;this.object=n,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var e,i,r,a,l=function(d){t.deviceOrientation=d},c=function(){t.screenOrientation=window.orientation||0},u=(e=new THREE.Vector3(0,0,1),i=new THREE.Euler,r=new THREE.Quaternion,a=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),function(d,f,A,m,g){i.set(A,f,-m,"YXZ"),d.setFromEuler(i),d.multiply(a),d.multiply(r.setFromAxisAngle(e,-g))});this.connect=function(){c(),window.addEventListener("orientationchange",c,!1),window.addEventListener("deviceorientation",l,!1),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",c,!1),window.removeEventListener("deviceorientation",l,!1),t.enabled=!1},this.update=function(){if(t.enabled!==!1){var d=t.deviceOrientation;if(d){var f=d.alpha?THREE.MathUtils.degToRad(d.alpha)+t.alphaOffset:0,A=d.beta?THREE.MathUtils.degToRad(d.beta):0,m=d.gamma?THREE.MathUtils.degToRad(d.gamma):0,g=t.screenOrientation?THREE.MathUtils.degToRad(t.screenOrientation):0;u(t.object.quaternion,f,A,m,g)}}},this.dispose=function(){t.disconnect()},this.connect()},Cr=globalThis.THREE={...M};Cr.DRACOLoader=KB,Cr.GLTFLoader=PE,Cr.KTX2Loader=ji,Cr.OBJLoader=fT,Cr.MTLLoader=pT,Cr.OBB=nA,Cr.BufferGeometryUtils=fy,Cr.LightProbeGenerator=AT,Cr.DeviceOrientationControls=mT,Cr.Cache.enabled=!0;const gT=Cr;var Bn=window.AFRAME_CDN_ROOT||"https://cdn.aframe.io/",ti="aframe-injected",n8=de(8878),ch=de.n(n8),t2={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}};ch().formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" "),this.useColors){var t;this.color=(t=(function(a){var l=a.split(":");return l[l.length-1]})(this.namespace),t2.colors&&t2.colors[t]||null);var e="color: "+this.color;n.splice(1,0,e,"color: inherit");var i=0,r=0;n[0].replace(/%[a-zA-Z%]/g,(function(a){a!=="%%"&&(i++,a==="%c"&&(r=i))})),n.splice(r,0,e)}};var pv=(function(){try{return window.localStorage}catch{}})();pv&&(parseInt(pv.logs,10)||pv.logs==="true")?ch().enable("*"):ch().enable("*:error,*:info,*:warn");const Ze=ch();var i8=de(1124),r8=de.n(i8),e2=Ze("device:error"),iA=!1,rA=!1,KA=navigator.xr!==void 0;if(KA){var zl=function(){var n=document.querySelector("a-scene");n?n.hasLoaded?n.components["xr-mode-ui"].updateEnterInterfaces():n.addEventListener("loaded",zl):window.addEventListener("DOMContentLoaded",zl)},n2=function(n){e2("WebXR session support error: "+n.message)};navigator.xr.isSessionSupported?(navigator.xr.isSessionSupported("immersive-vr").then((function(n){iA=n,zl()})).catch(n2),navigator.xr.isSessionSupported("immersive-ar").then((function(n){rA=n,zl()})).catch((function(){}))):navigator.xr.supportsSession?(navigator.xr.supportsSession("immersive-vr").then((function(){iA=!0,zl()})).catch(n2),navigator.xr.supportsSession("immersive-ar").then((function(){rA=!0,zl()})).catch((function(){}))):e2("WebXR has neither isSessionSupported or supportsSession?!")}function kE(){return iA||rA}function QE(){return rA}function Uy(){return iA}var yu,Av,Ia=(yu=!1,Av=window.navigator.userAgent||window.navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(Av)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(Av.substr(0,4)))&&(yu=!0),(wh()||vT()||VE())&&(yu=!0),HE()&&(yu=!1),function(){return yu});function vT(n){var t=n||window.navigator.userAgent;return/Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(t)||yT()}function yT(n,t,e){var i=n||window.navigator.userAgent,r=t||window.navigator.platform,a=e||window.navigator.maxTouchPoints||0;return(r==="iPad"||r==="MacIntel")&&a>0&&/Macintosh|Intel|iPad|ipad/i.test(i)&&!window.MSStream}function ET(){var n=navigator.userAgent.includes("Macintosh"),t=navigator.maxTouchPoints===5;return n&&t&&KA}function wh(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}function zE(){return!Ia()&&!HE()&&window.orientation!==void 0}function GE(){return/(OculusBrowser)/i.test(window.navigator.userAgent)}function bT(){return/(Mobile VR)/i.test(window.navigator.userAgent)}function HE(){return GE()||bT()||ET()}function VE(){return/R7 Build/.test(window.navigator.userAgent)}function xT(){var n=window.orientation;return VE()&&(n+=90),n===90||n===-90}var qE=typeof process>"u"||process.browser===!0,s8=!qE,a8=Object.freeze(Object.create(null));function o8(){return{}}function WE(n){var t=[],e=null;function i(r){var a,l;if((r=r===void 0?t.length:r)>0&&e==null&&(e=0),r>0)for(a=t.length,t.length+=Number(r),l=a;l<t.length;l++)t[l]=n();return t.length}return n=n||o8,{grow:i,pool:t,recycle:function(r){r instanceof Object&&(e!==null&&e!==-1?t[--e]=r:t[t.length]=r)},size:function(){return t.length},use:function(){var r;return e!==null&&e!==t.length||i(t.length||5),r=t[e],t[e++]=a8,jE(r),r}}}function jE(n){var t;if(n&&n.constructor===Object)for(t in n)n[t]=void 0}function uh(n,t){var e;if(n&&n.constructor===Object)for(e in n)e in t||delete n[e]}var l8=Ze("utils:coordinates:warn"),i2=["x","y","z","w"],CT=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/,c8=/\s+/g;function sA(n,t,e){var i,r,a,l,c,u,d,f,A=e&&typeof e=="object"?e:{};if(n&&n instanceof Object)return c=n.x===void 0?t&&t.x:n.x,u=n.y===void 0?t&&t.y:n.y,d=n.z===void 0?t&&t.z:n.z,f=n.w===void 0?t&&t.w:n.w,c!=null&&(A.x=Eu(c)),u!=null&&(A.y=Eu(u)),d!=null&&(A.z=Eu(d)),f!=null&&(A.w=Eu(f)),A;if(n==null)return typeof t=="object"?Object.assign(A,t):t;for(i=n.trim().split(c8),l=0;l<i2.length;l++)if(a=i2[l],i[l])A[a]=parseFloat(i[l],10);else{if((r=t&&t[a])===void 0)continue;A[a]=Eu(r)}return A}function lp(n){var t;return typeof n!="object"?n:(t=n.x+" "+n.y,n.z!=null&&(t+=" "+n.z),n.w!=null&&(t+=" "+n.w),t)}function cp(n,t){return typeof n!="object"||typeof t!="object"?n===t:n.x===t.x&&n.y===t.y&&n.z===t.z&&n.w===t.w}function _T(n){return CT.test(n)}function u8(n){return l8("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),_T(n)}function Eu(n){return n!=null&&n.constructor===String?parseFloat(n,10):n}function h8(n){return new M.Vector3(n.x,n.y,n.z)}var Us=(function(){var n={};return function(t,e){return e in n||(n[e]={}),t in n[e]||(n[e][t]=t.split(e)),n[e][t]}})();function JA(n,t){var e=Us(n,t=t||".");return e.length===1?e[0]:e}function wT(n,t,e){var i;return e=e||".",t.indexOf(e)!==-1?(i=JA(t,e)).constructor===String?n.getAttribute(i):n.getAttribute(i[0])[i[1]]:n.getAttribute(t)}function XE(n,t,e,i){var r;i=i||".",t.indexOf(i)===-1?n.setAttribute(t,e):(r=JA(t,i)).constructor===String?n.setAttribute(r,e):n.setAttribute(r[0],r[1],e)}function MT(n){var t=n.style.width,e=n.style.height;n.style.width=parseInt(t,10)+1+"px",n.style.height=parseInt(e,10)+1+"px",setTimeout((function(){n.style.width=t,n.style.height=e}),200)}var up=Ze("utils:src-loader:warn");function aA(n,t,e){(function(i,r){var a;i.tagName?r(i.tagName==="IMG"):((a=new XMLHttpRequest).open("HEAD",i),a.addEventListener("load",(function(l){var c;a.status>=200&&a.status<300?(c=a.getResponseHeader("Content-Type"))==null?r2(i,r):c.startsWith("image")?r(!0):r(!1):r2(i,r),a.abort()})),a.send())})(n,(function(i){i?t(n):e(n)}))}function YE(n,t,e){var i,r,a,l="",c=[];if(typeof n=="string"){let u=function(d){c.push(d),c.length===6&&t(c)};for(r=0;r<5;r++)l+="(url\\((?:[^\\)]+)\\),\\s*)";if(l+="(url\\((?:[^\\)]+)\\)\\s*)",a=n.match(new RegExp(l))){for(r=1;r<7;r++)aA(Oy(a[r]),u);return}if(!n.startsWith("#"))return void aA(Oy(n)||n,e)}if(i=n.tagName?n:(function(u){try{var d=document.querySelector(u);return d||up('No element was found matching the selector: "%s"',u),d}catch{return void up('"%s" is not a valid selector',u)}})(n))return i.tagName==="A-CUBEMAP"&&i.srcs?t(i.srcs):i.tagName==="IMG"?e(i):void up('Selector "%s" does not point to <a-cubemap> or <img>',n)}function ST(n,t){return YE(n,t,(function(){up("Expected cubemap but got image")}))}function Oy(n){var t=n.match(/url\((.+)\)/);if(t)return t[1]}function r2(n,t){var e=new Image;e.addEventListener("load",(function(){t(!0)})),e.addEventListener("error",(function(){t(!1)})),e.src=n}var d8=Ze("utils:material:warn"),f8=new Set(["emissiveMap","envMap","map","specularMap"]);function oA(n,t){var e=t.offset||{x:0,y:0},i=t.repeat||{x:1,y:1},r=t.npot||!1,a=t.anisotropy||M.Texture.DEFAULT_ANISOTROPY,l=n.wrapS,c=n.wrapT,u=n.magFilter,d=n.minFilter;r&&(l=M.ClampToEdgeWrapping,c=M.ClampToEdgeWrapping,u=M.LinearFilter,d=M.LinearFilter),i.x===1&&i.y===1||(l=M.RepeatWrapping,c=M.RepeatWrapping),n.offset.set(e.x,e.y),n.repeat.set(i.x,i.y),n.wrapS===l&&n.wrapT===c&&n.magFilter===u&&n.minFilter===d&&n.anisotropy===a||(n.wrapS=l,n.wrapT=c,n.magFilter=u,n.minFilter=d,n.anisotropy=a,n.needsUpdate=!0)}function ZA(n,t,e,i){var r=e.el,a=e.material,l=r.sceneEl.systems.renderer,c=i[t];if(e.materialSrcs||(e.materialSrcs={}),!c)return delete e.materialSrcs[n],void u(null);function u(d){a[n]!==d&&(a[n]&&a[n].dispose(),a[n]=d,a.needsUpdate=!0,KE(r,d))}c===e.materialSrcs[n]&&a[n]?oA(a[n],i):(e.materialSrcs[n]=c,c instanceof M.Texture?u(c):r.sceneEl.systems.material.loadTextureSource(c,(function(d){if(e.materialSrcs[n]===c){var f=a[n];!f||d!==null&&BT(f,d)||(f=null),!f&&d&&(f=JE(d)),f&&(f.source!==d&&(f.source=d,f.needsUpdate=!0),f8.has(n)&&l.applyColorCorrection(f),oA(f,i)),u(f)}})))}function hp(n,t){return ZA("map","src",n,t)}function Fr(n,t,e){var i=n;n==="ambientOcclusion"&&(i="ao");var r={};return r.src=e[n+"Map"],r.offset=e[n+"TextureOffset"],r.repeat=e[n+"TextureRepeat"],r.wrap=e[n+"TextureWrap"],ZA(i+"Map","src",t,r)}var mv={};function Ny(n,t){var e=n.material,i=n.el,r="envMap",a=t.envMap,l=t.sphericalEnvMap,c=t.refract;if(l&&(a=l,d8("`sphericalEnvMap` property is deprecated, using spherical map as equirectangular map instead. Use `envMap` property with a CubeMap or Equirectangular image instead.")),n.materialSrcs||(n.materialSrcs={}),!a)return delete n.materialSrcs[r],e.envMap=null,void(e.needsUpdate=!0);function u(d){n.materialSrcs[r]===a&&(e.envMap=d,e.needsUpdate=!0,KE(i,d))}n.materialSrcs[r]=a,mv[a]?mv[a].then(u):mv[a]=new Promise((function(d){YE(a,(function(f){i.sceneEl.systems.material.loadCubeMapTexture(f,(function(A){A.mapping=c?M.CubeRefractionMapping:M.CubeReflectionMapping,u(A),d(A)}))}),(function(f){i.sceneEl.systems.material.loadTexture(f,{src:f},(function(A){A.mapping=c?M.EquirectangularRefractionMapping:M.EquirectangularReflectionMapping,u(A),d(A)}))}))}))}function KE(n,t){function e(){n.emit("materialvideoloadeddata",{src:t.image,texture:t})}function i(){n.emit("materialvideoended",{src:t.image,texture:t})}t&&(n.emit("materialtextureloaded",{src:t.image,texture:t}),t.image&&t.image.tagName==="VIDEO"&&(t.image.addEventListener("loadeddata",e),t.image.addEventListener("ended",i),t.addEventListener("dispose",(function(){t.image.removeEventListener("loadeddata",e),t.image.removeEventListener("ended",i)}))))}function BT(n,t){return n.source===t&&(t.data instanceof HTMLCanvasElement?n.isCanvasTexture:t.data instanceof HTMLVideoElement?n.isVideoTexture:n.isTexture&&!n.isCanvasTexture&&!n.isVideoTexture)}function JE(n){var t;return(t=n.data instanceof HTMLCanvasElement?new M.CanvasTexture:n.data instanceof HTMLVideoElement?new M.VideoTexture(n.data):new M.Texture).source=n,t.needsUpdate=!0,t}var p8=/-([a-z])/g;function hh(n,t){var e;return typeof n!="string"?n:(e=(function(i,r){var a,l,c,u,d,f;for(r=r||{},a=m8(i),l=0;l<a.length;l++)(c=a[l])&&(u=c.indexOf(":"),d=c.substr(0,u).trim(),f=c.substr(u+1).trim(),r[TT(d)]=f);return r})(n,t),e[""]?n:e)}function A8(n){return typeof n=="string"?n:(function(t){var e,i=0,r=0,a="";for(e in t)i++;for(e in t)a+=e+": "+t[e],r<i-1&&(a+="; "),r++;return a})(n)}function TT(n){return n.replace(p8,g8)}var Of,s2,m8=(Of=[],s2=/url\([^)]+$/,function(n){var t,e="",i=0;for(Of.length=0;i<n.length;)(t=n.indexOf(";",i))===-1&&(t=n.length),e+=n.substring(i,t),s2.test(e)?(e+=";",i=t+1):(Of.push(e.trim()),e="",i=t+1);return Of});function g8(n){return n[1].toUpperCase()}var v8=["x","y","z","w"];function Ki(n,t,e){var i,r,a=n.el;if((r=!!(i=IT(n,t,e)))===n.controllerPresent)return r;n.controllerPresent=r,r?(n.addEventListeners(),n.injectTrackedControls(i),a.emit("controllerconnected",{name:n.name,component:n})):(n.removeEventListeners(),a.emit("controllerdisconnected",{name:n.name,component:n}))}function IT(n,t,e){var i,r=n.el.sceneEl,a=r&&r.systems["tracked-controls"];return!!a&&!(!(i=a.controllers)||!i.length)&&ZE(i,t,e.hand,e.index,e.iterateControllerProfiles,e.handTracking)}function ZE(n,t,e,i,r,a){var l,c,u,d,f=!1;for(l=0;l<n.length;l++){if(d=(u=n[l]).profiles,a)f=u.hand;else if(r)for(c=0;c<d.length&&!(f=d[c].startsWith(t));c++);else f=d.length>0&&d[0].startsWith(t);if(f){if(u.handedness==="right"||u.handedness==="left"){if(u.handedness===e)return n[l]}else if(l===i)return n[l]}}}function ur(n,t,e){var i,r,a,l,c;for(r in t){for(i=t[r],a=!1,c=0;c<i.length;c++)e.detail.changed[i[c]]&&(a=!0);if(a){for(l={},c=0;c<i.length;c++)l[v8[c]]=e.detail.axis[i[c]];n.el.emit(r+"moved",l)}}}function be(n,t,e,i){var r=(i?e.mapping[i]:e.mapping).buttons[n];e.el.emit(r+t),e.updateModel&&e.updateModel(r,t)}var $E=Ze("utils:warn");function y8(n){return n.bind.apply(n,Array.prototype.slice.call(arguments,1))}function E8(){return $E("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),kE()}function b8(){return $E("`utils.isIOS` has moved to `utils.device.isIOS`"),wh()}function x8(){return $E("`utils.isMobile has moved to `utils.device.isMobile`"),Ia(arguments)}function C8(n,t,e){var i;return e&&(n=n.bind(e)),function(){var r=Date.now();(i===void 0||(i===void 0?t:r-i)>=t)&&(i=r,n.apply(null,arguments))}}function RT(n,t,e){var i,r,a;e&&(n=n.bind(e));var l=function(){i=Date.now(),n.apply(this,a),r=void 0};return function(){var c=Date.now(),u=i===void 0?t:c-i;u>=t?(clearTimeout(r),r=void 0,i=c,n.apply(null,arguments)):(r=r||setTimeout(l,t-u),a=arguments)}}function _8(n,t,e){var i;return e&&(n=n.bind(e)),function(r,a){var l=i===void 0?a:r-i;(i===void 0||l>=t)&&(i=r,n(r,l))}}function LT(n,t,e){var i;return function(){var r=this,a=arguments,l=e&&!i;clearTimeout(i),i=setTimeout((function(){i=null,e||n.apply(r,a)}),t),l&&n.apply(r,a)}}var Ui=Object.assign,Wi=r8();function tb(n){return JSON.parse(JSON.stringify(n))}var xr,go,eb=(xr=WE((function(){return[]})),function(n,t){var e,i,r,a,l,c;if(n===void 0||t===void 0||n===null||t===null||!(n&&t&&n.constructor===Object&&t.constructor===Object||n.constructor===Array&&t.constructor===Array))return n===t;for(e in i=xr.use(),r=xr.use(),i.length=0,r.length=0,n)i.push(e);for(e in t)r.push(e);if(i.length!==r.length)return xr.recycle(i),xr.recycle(r),!1;for(a=0;a<i.length;++a)if(l=n[i[a]],c=t[i[a]],typeof l=="object"||typeof c=="object"||Array.isArray(l)&&Array.isArray(c)){if(l===c)continue;if(!eb(l,c))return xr.recycle(i),xr.recycle(r),!1}else if(l!==c)return xr.recycle(i),xr.recycle(r),!1;return xr.recycle(i),xr.recycle(r),!0}),DT=(go=[],function(n,t,e){var i,r,a,l,c,u,d;for(c in l=e||{},go.length=0,n)go.push(c);if(!t)return l;for(a in t)go.indexOf(a)===-1&&go.push(a);for(u=0;u<go.length;u++)i=n[c=go[u]],r=t[c],((d=i&&r&&i.constructor===Object&&r.constructor===Object)&&!eb(i,r)||!d&&i!==r)&&(l[c]=r);return l});function nb(n){return!n.metaKey&&document.activeElement===document.body}function w8(n,t){t===void 0&&(t=" ");var e=new RegExp(t,"g");return(n=(n||"").replace(e,t)).split(t)}function M8(n,t){t=t||{};var e={};return Object.keys(t).forEach((function(i){n.hasAttribute(i)&&(e[i]=n.getAttribute(i))})),e}function dh(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+n+"=([^&#]*)").exec(location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function UT(){return window.top!==window.self}function OT(n){for(var t=[],e=n.getElementsByTagName("*"),i=0,r=e.length;i<r;i++)e[i].isScene&&t.push(e[i]);return t}var gv,S8=[Hu({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),Hu({name:"mobile-web-app-capable",content:"yes"}),Hu({name:"theme-color",content:"black"})],B8=[Hu({name:"apple-mobile-web-app-capable",content:"yes"}),Hu({name:"apple-mobile-web-app-status-bar-style",content:"black"}),(gv={rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"},{tagName:"link",attributes:gv,exists:function(){return document.querySelector('link[rel="'+gv.rel+'"]')}})];function Hu(n){return{tagName:"meta",attributes:n,exists:function(){return document.querySelector('meta[name="'+n.name+'"]')}}}var wr,ya,NT,T8=de(5928),I8=de.n(T8),R8=oc,a2="loading-screen";function vv(n){var t=wr.hasAttribute("embedded"),e=NT(wr.canvas,t,wr.maxCanvasSize,wr.is("vr-mode"));n.aspect=e.width/e.height,n.updateProjectionMatrix(),wr.renderer.setSize(e.width,e.height,!1)}const Do=[];var PT=ch()("core:propertyTypes:warn"),Py={},L8=/[,> .[\]:]/,D8=/url\((.+)\)/;function Zn(n,t,e,i,r,a){if(n in Py)throw new Error("Property type "+n+" is already registered.");Py[n]={default:t,parse:e||U8,stringify:i||lA,equals:r||FT,isCacheable:a!==!1}}function o2(n,t){if(!Array.isArray(n)||!Array.isArray(t))return n===t;if(n.length!==t.length)return!1;for(var e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function bu(n){var t,e;return typeof n!="string"?n:(e=n.match(D8))?e[1]:n.charAt(0)==="#"?(t=document.getElementById(n.substring(1)))?t.tagName==="CANVAS"||t.tagName==="VIDEO"||t.tagName==="IMG"?t:t.getAttribute("src"):void PT('"'+n+'" asset not found.'):n}function xu(n){return n.getAttribute?n.getAttribute("id")?"#"+n.getAttribute("id"):n.getAttribute("src"):lA(n)}function U8(n){return n}function lA(n){return n===null?"null":n.toString()}function FT(n,t){return n===t}function l2(n){return parseInt(n,10)}function yv(n,t,e){return sA(n,t,e)}function Ev(n,t){if(n===null)return!0;if(typeof n!="object"||Object.keys(n).length!==t)return!1;var e=n.x,i=n.y,r=n.z,a=n.w;return!(typeof e!="number"||typeof i!="number"||t>2&&typeof r!="number"||t>3&&typeof a!="number")}Zn("audio","",bu,xu),Zn("array",[],(function(n){return Array.isArray(n)?n:n&&typeof n=="string"?n.split(",").map((function(t){return t.trim()})):[]}),(function(n){return n.join(", ")}),o2),Zn("asset","",bu,xu),Zn("boolean",!1,(function(n){return n!=="false"&&n!==!1})),Zn("color","#FFF"),Zn("int",0,l2),Zn("number",0,(function(n){return parseFloat(n,10)})),Zn("map","",bu,xu),Zn("model","",bu,xu),Zn("selector",null,(function(n){return n?typeof n!="string"?n:n[0]!=="#"||L8.test(n)?document.querySelector(n):document.getElementById(n.substring(1)):null}),(function(n){return n.getAttribute?"#"+n.getAttribute("id"):lA(n)}),FT,!1),Zn("selectorAll",null,(function(n){return n?typeof n!="string"?n:Array.prototype.slice.call(document.querySelectorAll(n),0):null}),(function(n){return n instanceof Array?n.map((function(t){return"#"+t.getAttribute("id")})).join(", "):lA(n)}),o2,!1),Zn("src","",(function(n){return PT("`src` property type is deprecated. Use `asset` instead."),bu(n)}),xu),Zn("string",""),Zn("time",0,l2),Zn("vec2",{x:0,y:0},yv,lp,cp),Zn("vec3",{x:0,y:0,z:0},yv,lp,cp),Zn("vec4",{x:0,y:0,z:0,w:1},yv,lp,cp);var O8=function(n,t){return(n!=="audio"||typeof t=="string")&&!(n==="array"&&!Array.isArray(t))&&(n!=="asset"||typeof t=="string")&&(n!=="boolean"||typeof t=="boolean")&&(n!=="color"||typeof t=="string")&&(n!=="int"||typeof t=="number")&&(n!=="number"||typeof t=="number")&&(n!=="map"||typeof t=="string")&&(n!=="model"||typeof t=="string")&&(n!=="selector"||typeof t=="string"||t===null)&&(n!=="selectorAll"||typeof t=="string"||t===null)&&(n!=="src"||typeof t=="string")&&(n!=="string"||typeof t=="string")&&(n!=="time"||typeof t=="number")&&(n==="vec2"?Ev(t,2):n==="vec3"?Ev(t,3):n!=="vec4"||Ev(t,4))},N8=Py,cA=Ze("core:schema:warn");function $A(n){return"type"in n?typeof n.type=="string":"default"in n}function Mh(n,t){var e;if($A(n))return Fy(n,t);for(e in n)n[e]=Fy(n[e],t);return n}function Fy(n,t){var e,i,r=n.default,a=n.type;return n.type?n.type==="bool"?a="boolean":n.type==="float"&&(a="number"):a=r===void 0||typeof r!="boolean"&&typeof r!="number"?Array.isArray(r)?"array":"string":typeof r,(i=N8[a])||cA("Unknown property type for component `"+t+"`: "+a),e=!!n.parse,n.parse=n.parse||i.parse,n.stringify=n.stringify||i.stringify,n.equals=n.equals||i.equals,n.isCacheable=n.isCacheable===!0||i.isCacheable,n.type=a,"default"in n?e||O8(a,r)||cA("Default value `"+r+"` does not match type `"+a+"` in component `"+t+"`"):n.default=i.default,n}var Cu,kT=(Cu=[],function(n,t,e,i,r){var a,l,c,u;for(l in Cu.length=0,e?n:t)e&&n[l]===void 0||Cu.push(l);if(n===null||typeof n!="object")return n;for(l in n)n[l]===void 0||t[l]||r||cA("Unknown property `"+l+"` for component/system `"+i+"`.");for(a=0;a<Cu.length;a++){if(c=t[l=Cu[a]],u=n[l],!t[l])return;n[l]=tm(u,c)}return n});function tm(n,t,e){return n!=null&&n!==""||(n=t.default,Array.isArray(n)&&(n=n.slice())),t.parse(n,t.default,e)}function QT(n,t){var e,i,r,a,l={};for(e in n)i=t[e],typeof(a=r=n[e])=="object"&&(a=ib(r,i),i||cA("Unknown component property: "+e)),a!==void 0&&(l[e]=a);return l}function ib(n,t){return typeof n!="object"?n:t&&n!==null?t.stringify(n):JSON.stringify(n)}var Tn={},Du=tm,zT=Mh,P8=$A,F8=QT,k8=ib,bv=oc,Vu=Ze("core:component:warn"),Q8=document.currentScript,z8=new RegExp("[A-Z]+"),GT={},G8=Object.freeze({}),Gl=[],H8={get:function(n,t){return n.getComputedPropertyValue(t)},set:function(n,t,e){return t in n.schema?n.recomputeProperty(t,e):e!==void 0&&n.handleUnknownProperty(t,e),!0}},fh=function(n,t,e){var i=this;if(this.sceneOnly&&!n.isScene)throw new Error("Component `"+this.name+"` can only be applied to <a-scene>");if(e&&!this.multiple)throw new Error("Trying to initialize multiple components of type `"+this.name+"`. There can only be one component of this type per entity.");this.el=n,this.id=e,this.attrName=this.name+(e?"__"+e:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.objectPool=GT[this.name];var r=this.events;this.events={},(function(a,l){var c;for(c in l)a.events[c]=l[c].bind(a)})(this,r),this.attrValue=void 0,this.isObjectBased?(this.data=this.objectPool.use(),uh(this.data,this.schema),this.oldData=this.objectPool.use(),uh(this.oldData,this.schema),this.attrValueProxy=new Proxy(this,H8)):(this.data=void 0,this.oldData=void 0,this.attrValueProxy=void 0),this.deferUnknownPropertyWarnings=!!this.updateSchema,this.throttledEmitComponentChanged=RT((function(){n.emit("componentchanged",i.evtDetail,!1)}),200),this.updateProperties(t,!0)};fh.prototype={schema:{},init:function(){},events:{},update:function(n){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},stringify:function(n){var t=this.schema;return typeof n=="string"?n:this.isSingleProperty?k8(n,t):(n=F8(n,t),bv.stringify(n))},flushToDOM:function(n){var t=n?this.data:this.attrValue;t!=null&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(t))},updateProperties:function(n,t){var e=this.el;this.updateData(n,t),(e.hasLoaded||e.isLoading)&&(this.initialized?this.callUpdateHandler():this.initComponent())},initComponent:function(){var n,t=this.el;t.initializingComponents[this.name]||(t.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete t.initializingComponents[this.name],n=this.isObjectBased?G8:void 0,this.dataChanged=!1,this.storeOldData(),this.update(n),t.isPlaying&&this.play(),t.emit("componentinitialized",this.evtDetail,!1))},updateData:function(n,t){this.isSingleProperty?this.recomputeProperty(void 0,n):(t?(jE(this.attrValue),this.recomputeData(n),this.schemaChangeRequired=!!this.updateSchema):typeof n=="string"?bv.parse(n,this.attrValueProxy):Ui(this.attrValueProxy,n),this.updateSchemaIfNeeded(n))},updateSchemaIfNeeded:function(n){if(this.schemaChangeRequired&&this.updateSchema)for(var t in Gl.length=0,this.updateSchema(this.data),uh(this.data,this.schema),this.recomputeData(n),this.schemaChangeRequired=!1,this.attrValue)this.attrValue[t]!==void 0&&Gl.indexOf(t)===-1&&(t in this.schema||Vu("Unknown property `"+t+"` for component `"+this.name+"`."));for(var e=0;e<Gl.length;e++)Vu("Unknown property `"+Gl[e]+"` for component `"+this.name+"`.");Gl.length=0},callUpdateHandler:function(){if(this.isPositionRotationScale||this.dataChanged){this.dataChanged=!1;var n=this.oldData;this.oldDataInUse=!0,this.update(n),n!==this.oldData&&this.objectPool.recycle(n),this.oldDataInUse=!1,this.storeOldData(),this.throttledEmitComponentChanged()}},handleMixinUpdate:function(){this.recomputeData(),this.updateSchemaIfNeeded(),this.callUpdateHandler()},resetProperty:function(n){(this.isSingleProperty||n in this.schema)&&(n?this.attrValue[n]=void 0:(this.isObjectBased&&this.objectPool.recycle(this.attrValue),this.attrValue=void 0),this.recomputeProperty(n,void 0),this.updateSchemaIfNeeded(),this.callUpdateHandler())},extendSchema:function(n){var t;t=Ui({},Tn[this.name].schema),Ui(t,n),this.schema=zT(t),this.el.emit("schemachanged",this.evtDetail)},getComputedPropertyValue:function(n){var t=this.el.mixinEls,e=this.attrValue&&n?this.attrValue[n]:this.attrValue;if(e!==void 0)return e;for(var i=t.length-1;i>=0;i--){var r=t[i].getAttribute(this.attrName);if(r!==null&&(!n||n in r))return n?r[n]:r}return n?this.schema[n].default:this.schema.default},recomputeProperty:function(n,t){var e=n?this.schema[n]:this.schema;if(t!=null){this.attrValue===void 0&&this.isObjectBased&&(this.attrValue=this.objectPool.use());var i=n?this.attrValue[n]:this.attrValue;typeof(i=e.isCacheable?Du(t,e,i):t)=="string"&&(i=t===""?void 0:t),n?this.attrValue[n]=i:this.attrValue=i}this.oldDataInUse&&(this.oldData=this.objectPool.use(),uh(this.oldData,this.schema),this.storeOldData(),this.oldDataInUse=!1);var r=n?this.oldData[n]:this.oldData,a=n?this.data[n]:this.data,l=Du(this.getComputedPropertyValue(n),e,a);return e.type!=="array"||n||(l=tb(l)),e.equals(l,r)||(this.dataChanged=!0,e.schemaChange&&(this.schemaChangeRequired=!0)),n?this.data[n]=l:this.data=l,l},handleUnknownProperty:function(n,t){this.attrValue===void 0&&(this.attrValue=this.objectPool.use()),this.attrValue[n]=t,this.deferUnknownPropertyWarnings?Gl.push(n):this.silenceUnknownPropertyWarnings||Vu("Unknown property `"+n+"` for component `"+this.name+"`.")},storeOldData:function(){var n;if(this.isObjectBased)if(this.isSingleProperty)this.oldData=Du(this.data,this.schema,this.oldData);else for(n in this.schema)this.data[n]!==void 0&&(this.data[n]&&typeof this.data[n]=="object"?this.oldData[n]=Du(this.data[n],this.schema[n],this.oldData[n]):this.oldData[n]=this.data[n]);else this.oldData=this.data},recomputeData:function(n){var t;if(this.isSingleProperty)this.recomputeProperty(void 0,n);else{for(t in this.schema)this.attrValueProxy[t]=void 0;n&&typeof n=="object"?Ui(this.attrValueProxy,n):typeof n=="string"&&bv.parse(n,this.attrValueProxy)}},eventsAttach:function(){var n;for(n in this.eventsDetach(),this.events)this.el.addEventListener(n,this.events[n])},eventsDetach:function(){var n;for(n in this.events)this.el.removeEventListener(n,this.events[n])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.data),this.objectPool.recycle(this.oldData),this.attrValue=this.data=this.oldData=this.attrValueProxy=void 0}};var HT={};function le(n,t){var e,i,r,a,l,c={};if(document.currentScript&&document.currentScript!==Q8&&Do.forEach((function(d){d.hasLoaded||document.currentScript.compareDocumentPosition(d)!==Node.DOCUMENT_POSITION_FOLLOWING&&(Vu("The component `"+n+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(HT[n]=!0))})),z8.test(n)===!0&&Vu("The component name `"+n+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+n.toLowerCase()+"`"),n.indexOf("__")!==-1)throw new Error("The component name `"+n+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(t).forEach((function(d){c[d]={value:t[d],writable:!0}})),Tn[n])throw new Error("The component `"+n+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");((e=function(d,f,A){fh.call(this,d,f,A)}).prototype=Object.create(fh.prototype,c)).name=n,e.prototype.isPositionRotationScale=n==="position"||n==="rotation"||n==="scale",e.prototype.constructor=e,e.prototype.system=_y&&Bs[n],e.prototype.play=(a=e.prototype.play,function(){var d=this.el.sceneEl,f=this.el.isPlaying&&!this.isPlaying;this.initialized&&f&&(a.call(this),this.isPlaying=!0,this.eventsAttach(),c2(this)&&d.addBehavior(this))}),e.prototype.pause=(l=e.prototype.pause,function(){var d=this.el.sceneEl;this.isPlaying&&(l.call(this),this.isPlaying=!1,this.eventsDetach(),c2(this)&&d.removeBehavior(this))}),i=Ui(zT(e.prototype.schema,e.prototype.name)),e.prototype.isSingleProperty=r=P8(e.prototype.schema),e.prototype.isObjectBased=!r||r&&(u2(i.default)||u2(Du(void 0,i))),GT[n]=WE(),Tn[n]={Component:e,dependencies:e.prototype.dependencies,before:e.prototype.before,after:e.prototype.after,isSingleProperty:e.prototype.isSingleProperty,isObjectBased:e.prototype.isObjectBased,multiple:e.prototype.multiple,sceneOnly:e.prototype.sceneOnly,name:n,schema:i,stringify:e.prototype.stringify};for(var u=0;u<Do.length;u++)Do[u].emit("componentregistered",{name:n},!1);return e}function c2(n){return n.tick||n.tock}function u2(n){return n&&n.constructor===Object&&!(n instanceof window.HTMLElement)}var uA=!1;function ky(){uA||(uA=!0,setTimeout((function(){document.dispatchEvent(new CustomEvent("aframeready"))})))}var V8=oc,Bs={},hA=function(n){var t=Cy&&Tn[this.name];this.el=n,this.sceneEl=n,t&&(t.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};function cr(n,t){var e,i,r={},a=OT(document);if(Object.keys(t).forEach((function(l){r[l]={value:t[l],writable:!0}})),Bs[n])throw new Error("The system `"+n+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");if(i=function(l){hA.call(this,l)},(i.prototype=Object.create(hA.prototype,r)).name=n,i.prototype.constructor=i,i.prototype.schema=Ui(Mh(i.prototype.schema)),Bs[n]=i,uA)for(e=0;e<a.length;e++)a[e].initSystem(n)}hA.prototype={schema:{},init:function(){},update:function(n){},updateProperties:function(n){var t=this.data;Object.keys(this.schema).length!==0&&(this.buildData(n),this.update(t))},buildData:function(n){var t=this.schema;Object.keys(t).length!==0&&(n=n||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),$A(t)?this.data=tm(n,t):this.data=kT(V8.parse(n)||{},t,!1,this.name))},tick:void 0,tock:void 0,play:function(){},pause:function(){}};var xv=Ze("core:a-node:warn"),Qy={"a-scene":!0,"a-assets":!0,"a-assets-items":!0,"a-cubemap":!0,"a-mixin":!0,"a-node":!0,"a-entity":!0};function q8(n){return n.tagName.toLowerCase()in Qy||n.isANode}class ei extends HTMLElement{constructor(){super(),this.computedMixinStr="",this.hasLoaded=!1,this.isANode=!0,this.mixinEls=[]}connectedCallback(){uA?this.doConnectedCallback():document.addEventListener("aframeready",this.connectedCallback.bind(this))}doConnectedCallback(){var t;this.sceneEl=this.closestScene(),this.sceneEl||xv("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(t=this.getAttribute("mixin"))&&this.updateMixins(t)}attributeChangedCallback(t,e,i){i!==this.computedMixinStr&&(t!=="mixin"||this.isMixin||this.updateMixins(i,e))}closestScene(){for(var t=this;t&&!t.isScene;)t=t.parentElement;return t}closest(t){for(var e=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,i=this;i&&!e.call(i,t);)i=i.parentElement;return i}disconnectedCallback(){this.hasLoaded=!1}load(t,e){var i,r=this;this.hasLoaded||(e=e||q8,i=this.getChildren().filter(e).map((function(a){return new Promise((function(l,c){if(a.hasLoaded)return l();a.addEventListener("loaded",l),a.addEventListener("error",c)}))})),Promise.allSettled(i).then((function(a){a.forEach((function(l){l.status==="rejected"&&xv("Rendering scene with errors on node: ",l.reason.target)})),r.isLoading=!0,r.setupMutationObserver(),t&&t(),r.isLoading=!1,r.hasLoaded=!0,r.emit("loaded-private",void 0,!1),r.emit("loaded",void 0,!1)})))}setupMutationObserver(){var t=this;new MutationObserver((function(e){var i;for(i=0;i<e.length;i++)if(e[i].type==="attributes"){var r=e[i].attributeName,a=window.HTMLElement.prototype.getAttribute.call(t,r),l=e[i].oldValue;t.attributeChangedCallback(r,l,a)}})).observe(this,{attributes:!0,attributeOldValue:!0})}getChildren(){return Array.prototype.slice.call(this.children,0)}updateMixins(t,e){var i,r,a,l=ei.newMixinIdArray,c=ei.oldMixinIdArray,u=ei.mixinIds;for(l.length=0,c.length=0,r=t?Us(t.trim(),/\s+/):l,a=e?Us(e.trim(),/\s+/):c,u.newMixinIds=r,u.oldMixinIds=a,i=0;i<a.length;i++)r.indexOf(a[i])===-1&&this.unregisterMixin(a[i]);for(this.computedMixinStr="",this.mixinEls.length=0,i=0;i<r.length;i++)this.registerMixin(r[i]);return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),r.length===0&&window.HTMLElement.prototype.removeAttribute.call(this,"mixin"),u}registerMixin(t){var e,i,r,a=document.getElementById(t);if(a){if(r=a.getAttribute("mixin"))for(e=Us(r.trim(),/\s+/),i=0;i<e.length;i++)this.registerMixin(e[i]);this.computedMixinStr=this.computedMixinStr+" "+a.id,this.mixinEls.push(a)}else xv("No mixin was found with id `%s`",t)}setAttribute(t,e){t==="mixin"&&this.updateMixins(e),window.HTMLElement.prototype.setAttribute.call(this,t,e)}unregisterMixin(t){var e,i=this.mixinEls;for(e=0;e<i.length;++e)if(t===i[e].id){i.splice(e,1);break}}emit(t,e,i,r){var a=ei.evtData;i===void 0&&(i=!0),a.bubbles=!!i,a.detail=e,r&&(a=Ui({},r,a)),this.dispatchEvent(new CustomEvent(t,a))}}ei.evtData={},ei.newMixinIdArray=[],ei.oldMixinIdArray=[],ei.mixinIds={},customElements.define("a-node",ei);var W8=Ze("core:a-entity:debug"),Cv=Ze("core:a-entity:warn"),dA="__",_v=["position","rotation","scale","visible"],j8={once:!0};class zn extends ei{constructor(){super(),this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new M.Group,this.object3D.rotation.order="YXZ",this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}attributeChangedCallback(t,e,i){var r=this.components[t];super.attributeChangedCallback(),r&&r.justInitialized&&i===""?delete r.justInitialized:(r||i!==null)&&this.setEntityAttribute(t,e,i)}doConnectedCallback(){var t,e,i=this;super.doConnectedCallback(),e=this.sceneEl,this.addToParent(),this.isScene||(e?!(t=e.querySelector("a-assets"))||t.hasLoaded?this.load():t.addEventListener("loaded",(function(){i.load()})):this.load())}disconnectedCallback(){var t;if(this.parentEl){for(t in this.components)this.removeComponent(t,!1);this.isScene||(this.removeFromParent(),super.disconnectedCallback(),this.object3D.el=null)}}getObject3D(t){return this.object3DMap[t]}setObject3D(t,e){var i,r=this;if(!(e instanceof M.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");(i=this.getObject3D(t))&&this.object3D.remove(i),e.el=this,e.children.length&&e.traverse((function(a){a.el=r})),this.object3D.add(e),this.object3DMap[t]=e,this.emit("object3dset",{object:e,type:t})}removeObject3D(t){var e=this.getObject3D(t);e?(this.object3D.remove(e),delete this.object3DMap[t],this.emit("object3dremove",{type:t})):Cv("Tried to remove `Object3D` of type:",t,"which was not defined.")}getOrCreateObject3D(t,e){var i=this.getObject3D(t);return!i&&e&&(i=new e,this.setObject3D(t,i)),Cv("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),i}add(t){if(!t.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(t.object3D),this.emit("child-attached",{el:t})}addToParent(){var t=this.parentEl=this.parentNode;t&&t.add&&!this.attachedToParent&&(t.add(this),this.attachedToParent=!0)}removeFromParent(){var t=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,t.emit("child-detached",{el:this})}load(){var t=this;!this.hasLoaded&&this.parentEl&&super.load.call(this,(function(){t.parentEl&&(t.updateComponents(),(t.isScene||t.parentEl.isPlaying)&&t.play())}))}remove(t){t?this.object3D.remove(t.object3D):this.parentNode.removeChild(this)}getChildEntities(){for(var t=this.children,e=[],i=0;i<t.length;i++){var r=t[i];r instanceof zn&&e.push(r)}return e}initComponent(t,e,i){var r,a,l,c;c=(l=Us(t,dA))[0],a=l.length>2?l.slice(1).join("__"):l[1],Tn[c]&&(h2(this,t)||e!==void 0||i)&&(t in this.components||(this.initComponentDependencies(c),r=new Tn[c].Component(this,e,a),this.isPlaying&&r.play(),this.hasAttribute(t)||(r.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,t,"")),W8("Component initialized: %s",t)))}initComponentDependencies(t){var e,i;if(Tn[t]&&(e=Tn[t].dependencies))for(i=0;i<e.length;i++)this.initComponent(e[i],window.HTMLElement.prototype.getAttribute.call(this,e[i])||void 0,!0)}removeComponent(t,e){var i;(i=this.components[t])&&(i.initialized?(i.pause(),i.remove(),e&&(i.destroy(),delete this.components[t],this.hasAttribute(t)&&window.HTMLElement.prototype.removeAttribute.call(this,t)),this.emit("componentremoved",i.evtDetail,!1)):this.addEventListener("componentinitialized",(function r(a){a.detail.name===t&&(this.removeComponent(t,e),this.removeEventListener("componentinitialized",r))})))}updateComponents(){var t,e,i,r,a,l,c=this.componentsToUpdate;if(this.hasLoaded||this.isLoading){for(i=0;i<this.mixinEls.length;i++)for(r in this.mixinEls[i].componentCache)wv(r)&&(c[r]=!0);if(this.getExtraComponents)for(r in e=this.getExtraComponents())wv(r)&&(c[r]=!0);for(i=0;i<this.attributes.length;++i)r=this.attributes[i].name,_v.indexOf(r)===-1&&wv(r)&&(c[r]=!0);for(i=0;i<_v.length;i++)r=_v[i],this.hasAttribute(r)&&this.updateComponent(r,this.getDOMAttribute(r));for(r in c)a=this.getDOMAttribute(r),t=(l=e&&e[r])?l.constructor===Object?Ui(l,hh(a||{})):a||l:a,this.updateComponent(r,t),delete c[r]}}updateComponent(t,e,i){var r=this.components[t];if(r)return e!==null||h2(this,t)?void r.updateProperties(e,i):void this.removeComponent(t,!0);this.initComponent(t,e,!1)}removeAttribute(t,e){var i=this.components[t];i&&e===void 0&&this.removeComponent(t,!0),i&&e!==void 0?i.resetProperty(e):(t==="mixin"&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,t))}play(){var t,e,i;if(!this.isPlaying&&(this.hasLoaded||this.isLoading)){for(i in this.isPlaying=!0,this.components)this.components[i].play();for(t=this.getChildEntities(),e=0;e<t.length;e++)t[e].play();this.emit("play")}}pause(){var t,e,i;if(this.isPlaying){for(i in this.isPlaying=!1,this.components)this.components[i].pause();for(t=this.getChildEntities(),e=0;e<t.length;e++)t[e].pause();this.emit("pause")}}setEntityAttribute(t,e,i){if(Tn[t]||this.components[t])this.updateComponent(t,i);else if(t==="mixin"){if(i===this.computedMixinStr)return;this.mixinUpdate(i,e)}}mixinUpdate(t,e,i){var r,a,l,c,u=zn.componentsUpdated,d=this;if(i||(e=e||this.getAttribute("mixin")),this.hasLoaded){for(l=this.updateMixins(t,e),u.length=0,c=0;c<this.mixinEls.length;c++)for(r in this.mixinEls[c].componentCache)u.indexOf(r)===-1&&(this.components[r]?this.components[r].handleMixinUpdate():this.initComponent(r,null),u.push(r));for(c=0;c<l.oldMixinIds.length;c++)if(a=document.getElementById(l.oldMixinIds[c]))for(r in a.componentCache)u.indexOf(r)===-1&&this.components[r]&&(this.getDOMAttribute(r)?this.components[r].handleMixinUpdate():this.removeComponent(r,!0))}else this.addEventListener("loaded-private",(function(){d.mixinUpdate(t,e,!0)}),j8)}setAttribute(t,e,i){var r,a,l,c,u,d=zn.singlePropUpdate;if(l=(c=t.indexOf(dA))>0?t.substring(0,c):t,!Tn[l])return t==="mixin"&&this.mixinUpdate(e),void super.setAttribute.call(this,t,e);if(!this.components[t]&&this.hasAttribute(t)&&this.updateComponent(t,window.HTMLElement.prototype.getAttribute.call(this,t)),i!==void 0&&typeof e=="string"&&e.length>0&&typeof hh(e)=="string"){for(u in d)delete d[u];(r=d)[e]=i,a=!1}else r=e,a=i===!0;this.updateComponent(t,r,a),this.sceneEl&&this.sceneEl.getAttribute("debug")&&this.components[t].flushToDOM()}flushToDOM(t){var e,i,r,a=this.components,l=this.children;for(r in a)a[r].flushToDOM();if(t)for(i=0;i<l.length;++i)(e=l[i]).flushToDOM&&e.flushToDOM(t)}getAttribute(t){var e,i,r,a;return t==="position"?this.object3D.position:t==="rotation"?(i=M.MathUtils.radToDeg,r=this.object3D.rotation,(a=this.rotationObj).x=i(r.x),a.y=i(r.y),a.z=i(r.z),a):t==="scale"?this.object3D.scale:t==="visible"?this.object3D.visible:(e=this.components[t])?e.data:window.HTMLElement.prototype.getAttribute.call(this,t)}getDOMAttribute(t){var e=this.components[t];return e?e.attrValue:window.HTMLElement.prototype.getAttribute.call(this,t)}addState(t){this.is(t)||(this.states.push(t),this.emit("stateadded",t))}removeState(t){var e=this.states.indexOf(t);e!==-1&&(this.states.splice(e,1),this.emit("stateremoved",t))}is(t){return this.states.indexOf(t)!==-1}inspect(){this.sceneEl.components.inspector.openInspector(this)}destroy(){var t;if(this.parentNode)Cv("Entity can only be destroyed if detached from scenegraph.");else for(t in this.components)this.components[t].destroy()}}function h2(n,t){return!(!n.components[t]||!n.components[t].attrValue)||(function(e,i){var r,a=!1;for(r=0;r<i.length&&!(a=i[r].hasAttribute(e));++r);return a})(t,n.mixinEls)}function wv(n){return n.indexOf(dA)!==-1&&(n=Us(n,dA)[0]),!!Tn[n]}function X8(n){if(n.data&&n.data.type==="vr")switch(n.data.data){case"enter":this.enterVR();break;case"exit":this.exitVR()}}zn.componentsUpdated=[],zn.singlePropUpdate={},customElements.define("a-entity",zn),wh()&&window.addEventListener("orientationchange",(function(){document.documentElement.style.height="initial",setTimeout((function(){document.documentElement.style.height="100%",setTimeout((function(){window.scrollTo(0,1)}),500)}),500)}));var Mv=Ze("core:a-scene:warn"),Y8=wh(),d2=Ia(),K8=KA;class VT extends zn{constructor(){var t;super(),(t=this).clock=new M.Clock,t.isIOS=Y8,t.isMobile=d2,t.hasWebXR=K8,t.isAR=!1,t.isScene=!0,t.object3D=new M.Scene,t.resize=t.resize.bind(t),t.render=t.render.bind(t),t.systems={},t.systemNames=[],t.time=t.delta=0,t.usedOfferSession=!1,t.componentOrder=[],t.behaviors={},t.hasLoaded=!1,t.isPlaying=!1,t.originalHTML=t.innerHTML}addFullScreenStyles(){document.documentElement.classList.add("a-fullscreen")}removeFullScreenStyles(){document.documentElement.classList.remove("a-fullscreen")}doConnectedCallback(){var t=this,e=this.hasAttribute("embedded");this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("xr-mode-ui",""),this.setAttribute("device-orientation-permission-ui",""),super.doConnectedCallback(),(function(i){var r;function a(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||i.exitVR(),document.activeElement.blur(),document.body.focus()}(r=document.createElement("canvas")).classList.add("a-canvas"),r.dataset.aframeCanvas=!0,i.appendChild(r),document.addEventListener("fullscreenchange",a),document.addEventListener("mozfullscreenchange",a),document.addEventListener("webkitfullscreenchange",a),document.addEventListener("MSFullscreenChange",a),r.addEventListener("touchmove",(function(l){l.preventDefault()}),{passive:!1}),i.canvas=r,i.emit("render-target-loaded",{target:r}),setTimeout(i.resize.bind(i),0)})(this),this.setupRenderer(),(function(i,r){NT=r;var a,l,c,u,d,f,A,m,g,b,x=(wr=i).hasAttribute(a2)?R8.parse(wr.getAttribute(a2)):void 0,E=x&&x.dotsColor||"white",y=x&&x.backgroundColor||"#24CAFF";(x===void 0||x.enabled==="true"||x.enabled===void 0)&&(a=new M.Scene,l=new M.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),c=new M.MeshBasicMaterial({color:E}),u=new M.Mesh(l,c),d=u.clone(),f=u.clone(),A=new M.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),m=new M.Clock,g=0,b=function(){wr.renderer.render(a,A),g=m.getElapsedTime()%4,u.visible=g>=1,d.visible=g>=2,f.visible=g>=3},a.background=new M.Color(y),a.add(A),u.position.set(-1,0,-15),d.position.set(0,0,-15),f.position.set(1,0,-15),A.add(u),A.add(d),A.add(f),(ya=document.createElement("div")).className="a-loader-title",ya.innerHTML=document.title,ya.style.display="none",ya.setAttribute(ti,""),wr.appendChild(ya),setTimeout((function(){wr.hasLoaded||(vv(A),ya.style.display="block",window.addEventListener("resize",(function(){vv(A)})),wr.renderer.setAnimationLoop(b))}),200))})(this,A2),this.resize(),e||this.addFullScreenStyles(),UT()&&window.addEventListener("message",X8.bind(this)),(function(i){var r,a=document.head,l=a.querySelector("script"),c=[];return S8.forEach(u),i.isIOS&&B8.forEach(u),c;function u(d){d&&!d.exists()&&(r=(function(f){if(f&&f.tagName){var A=document.createElement(f.tagName);return A.setAttribute(ti,""),Ui(A,f.attributes)}})(d),r&&(l?l.parentNode.insertBefore(r,l):a.appendChild(r),c.push(r)))}})(this),(function(i){if(i.isMobile){var r=i.wakelock=new(I8());i.addEventListener("enter-vr",(function(){r.request()})),i.addEventListener("exit-vr",(function(){r.release()}))}})(this),this.enterVRBound=function(){t.enterVR()},this.exitVRBound=function(){t.exitVR()},window.addEventListener("sessionend",this.resize),this.addEventListener("cameraready",(function(){t.attachedCallbackPostCamera()})),this.initSystems(),this.componentOrder=f2(Tn,this.componentOrder),this.addEventListener("componentregistered",(function(){t.componentOrder=f2(Tn,t.componentOrder)})),this.hasWebXR&&navigator.xr&&navigator.xr.addEventListener&&navigator.xr.addEventListener("sessiongranted",(function(){t.enterVR()}))}attachedCallbackPostCamera(){var t=this;window.addEventListener("load",void 0),window.addEventListener("resize",(function(){t.isIOS?setTimeout(t.resize,100):t.resize()})),this.play(),Do.push(this)}initSystems(){var t;for(t in this.initSystem("camera"),Bs)t!=="camera"&&this.initSystem(t)}initSystem(t){this.systems[t]||(this.systems[t]=new Bs[t](this),this.systemNames.push(t))}disconnectedCallback(){var t=Do.indexOf(this);super.disconnectedCallback(),Do.splice(t,1),window.removeEventListener("sessionend",this.resize),this.removeFullScreenStyles(),this.renderer.dispose()}addBehavior(t){var e,i,r=this.behaviors[t.name];for(i in r||(r=this.behaviors[t.name]={tick:{inUse:!1,array:[],markedForRemoval:[]},tock:{inUse:!1,array:[],markedForRemoval:[]}}),r)if(t[i]){if((e=r[i]).inUse){var a=e.markedForRemoval.indexOf(t);a!==-1&&e.markedForRemoval.splice(a,1)}e.array.indexOf(t)===-1&&e.array.push(t)}}getPointerLockElement(){return document.pointerLockElement}checkHeadsetConnected(){return kE()}enterAR(){var t;if(!this.hasWebXR)throw t="Failed to enter AR mode, WebXR not supported.",new Error(t);if(!QE())throw t="Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.",new Error(t);return this.enterVR(!0)}enterVR(t,e){var i,r=this,a=r.renderer.xr;if(e&&(!navigator.xr||!navigator.xr.offerSession))return Promise.resolve("OfferSession is not supported.");if(r.usedOfferSession&&e)return Promise.resolve("OfferSession was already called.");if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){var l=r.getAttribute("renderer");if(a.enabled=!0,this.hasWebXR){this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound);var c=this.sceneEl.systems.webxr.sessionReferenceSpaceType;a.setReferenceSpaceType(c);var u=t?"immersive-ar":"immersive-vr";return i=this.sceneEl.systems.webxr.sessionConfiguration,new Promise((function(f,A){var m=e?navigator.xr.offerSession.bind(navigator.xr):navigator.xr.requestSession.bind(navigator.xr);r.usedOfferSession|=e,m(u,i).then((function(g){e&&(r.usedOfferSession=!1),a.layersEnabled=i.requiredFeatures.indexOf("layers")!==-1,a.setSession(g).then((function(){a.setFoveation(l.foveationLevel),r.xrSession=g,r.systems.renderer.setWebXRFrameRate(g),g.addEventListener("end",r.exitVRBound),d(f)}))}),(function(g){A(new Error("Failed to enter "+(u==="immersive-ar"?"AR":"VR")+" mode (`requestSession`)",{cause:g}))}))}))}throw new Error("Failed to enter "+(t?"AR":"VR")+" no WebXR")}return d(),Promise.resolve();function d(f){var A;t?r.addState("ar-mode"):r.addState("vr-mode"),r.emit("enter-vr",{target:r}),!r.hasWebXR&&r.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),r.addFullScreenStyles(),r.isMobile||r.checkHeadsetConnected()||((A=r.canvas).requestFullscreen||A.webkitRequestFullscreen||A.mozRequestFullScreen||A.msRequestFullscreen).apply(A,[{navigationUI:"hide"}]),r.resize(),f&&f()}}exitVR(){var t=this,e=this.renderer.xr;if(!this.is("vr-mode")&&!this.is("ar-mode"))return Promise.resolve("Not in immersive mode.");if(this.checkHeadsetConnected()||this.isMobile){if(e.enabled=!1,!this.hasWebXR)throw Error("Failed to exit VR - no WebXR");this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end().then((function(){}),(function(){})),this.xrSession=void 0}else(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen());return t.removeState("vr-mode"),t.removeState("ar-mode"),t.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),t.hasAttribute("embedded")&&t.removeFullScreenStyles(),t.resize(),t.isIOS&&MT(t.canvas),t.renderer.setPixelRatio(window.devicePixelRatio),t.emit("exit-vr",{target:t}),Promise.resolve()}getAttribute(t){var e=this.systems[t];return e?e.data:zn.prototype.getAttribute.call(this,t)}getDOMAttribute(t){var e=this.systems[t];return e?e.data:zn.prototype.getDOMAttribute.call(this,t)}setAttribute(t,e,i){if(Bs[t]){ei.prototype.setAttribute.call(this,t,e);var r=this.systems[t];r&&r.updateProperties(e)}else zn.prototype.setAttribute.call(this,t,e,i)}removeBehavior(t){var e,i,r,a=this.behaviors[t.name];for(i in a)t[i]&&(r=(e=a[i]).array.indexOf(t))!==-1&&(e.inUse?e.markedForRemoval.indexOf(t)===-1&&e.markedForRemoval.push(t):(e.array[r]=e.array[e.array.length-1],e.array.pop()))}resize(){var t,e,i=this.camera,r=this.canvas,a=this.renderer.xr.isPresenting;t=this.renderer.xr.enabled&&a,!i||!r||this.is("vr-mode")&&(this.isMobile||t)||(e=A2(r,this.getAttribute("embedded")&&!this.is("vr-mode"),this.maxCanvasSize,this.is("vr-mode")),i.aspect=e.width/e.height,i.updateProjectionMatrix(),this.renderer.setSize(e.width,e.height,!1),this.emit("rendererresize",null,!1))}setupRenderer(){var t,e,i,r=this;i={alpha:!0,antialias:!d2,canvas:this.canvas,logarithmicDepthBuffer:!1,powerPreference:"high-performance"},this.maxCanvasSize={height:-1,width:-1},this.hasAttribute("renderer")&&((e=hh(this.getAttribute("renderer"))).precision&&(i.precision=e.precision+"p"),e.antialias&&e.antialias!=="auto"&&(i.antialias=e.antialias==="true"),e.logarithmicDepthBuffer&&e.logarithmicDepthBuffer!=="auto"&&(i.logarithmicDepthBuffer=e.logarithmicDepthBuffer==="true"),e.alpha&&(i.alpha=e.alpha==="true"),e.stencil&&(i.stencil=e.stencil==="true"),e.multiviewStereo&&(i.multiviewStereo=e.multiviewStereo==="true"),this.maxCanvasSize={width:e.maxCanvasWidth?parseInt(e.maxCanvasWidth):this.maxCanvasSize.width,height:e.maxCanvasHeight?parseInt(e.maxCanvasHeight):this.maxCanvasSize.height});var a=["WebGLRenderer","WebGPURenderer"].find((function(l){return M[l]}));(t=this.renderer=new M[a](i)).xr.setPoseTarget||(t.xr.setPoseTarget=function(){}),t.setPixelRatio(window.devicePixelRatio),this.camera&&t.xr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",(function(){t.xr.setPoseTarget(r.camera.el.object3D)}))}play(){var t=this,e=this;this.renderStarted?zn.prototype.play.call(this):(this.addEventListener("loaded",(function(){var i=this.renderer;zn.prototype.play.call(this),e.renderStarted||(e.resize(),e.renderer&&(window.performance&&window.performance.mark("render-started"),window.removeEventListener("resize",vv),ya&&(ya.style.display="none"),i.setAnimationLoop(this.render),e.renderStarted=!0,e.emit("renderstart")))})),setTimeout((function(){zn.prototype.load.call(t)})))}updateComponent(t){t in Bs||zn.prototype.updateComponent.apply(this,arguments)}tick(t,e){var i,r=this.systems;for(this.callComponentBehaviors("tick",t,e),i=0;i<this.systemNames.length;i++)r[this.systemNames[i]].tick&&r[this.systemNames[i]].tick(t,e)}tock(t,e,i){var r,a=this.systems;for(this.callComponentBehaviors("tock",t,e),r=0;r<this.systemNames.length;r++)a[this.systemNames[r]].tock&&a[this.systemNames[r]].tock(t,e,i)}render(t,e){var i=this.renderer;this.frame=e,this.delta=1e3*this.clock.getDelta(),this.time=1e3*this.clock.elapsedTime,this.isPlaying&&this.tick(this.time,this.delta);var r=null;if(this.is("ar-mode")&&(r=this.object3D.background,this.object3D.background=null),i.render(this.object3D,this.camera),r&&(this.object3D.background=r),this.isPlaying){var a=i.xr.isPresenting?i.xr.getCamera():this.camera;this.tock(this.time,this.delta,a)}}callComponentBehaviors(t,e,i){for(var r,a=0;a<this.componentOrder.length;a++){var l=this.behaviors[this.componentOrder[a]];if(l){var c=l[t];for(c.inUse=!0,r=0;r<c.array.length;r++)c.array[r].isPlaying&&c.array[r][t](e,i);for(c.inUse=!1,r=0;r<c.markedForRemoval.length;r++)this.removeBehavior(c.markedForRemoval[r]);c.markedForRemoval.length=0}}}}function f2(n,t){var e,i,r={},a=t||[];for(i in a.length=0,n){var l=n[i];if(l!==void 0){var c=l.before?l.before.slice(0):[],u=l.after?l.after.slice(0):[];r[i]={before:c,after:u,visited:!1,done:!1}}}for(i in r)for(e=0;e<r[i].before.length;e++){var d=r[i].before[e];d in r?r[d].after.push(i):Mv("Invalid ordering constraint, no component named `"+d+"` referenced by `"+i+"`")}function f(A){if(A in r&&!r[A].done)if(r[A].visited)Mv("Cycle detected, ignoring one or more before/after constraints. The resulting order might be incorrect");else{r[A].visited=!0;for(var m=0;m<r[A].after.length;m++){var g=r[A].after[m];g in r||Mv("Invalid before/after constraint, no component named `"+g+"` referenced in `"+A+"`"),f(g)}r[A].done=!0,a.push(A)}}for(i in r)r[i].done||f(i);return a}function p2(n,t){var e,i=window.devicePixelRatio;return!t||t.width===-1&&t.height===-1||n.width*i<t.width&&n.height*i<t.height||(e=n.width/n.height,n.width*i>t.width&&t.width!==-1&&(n.width=Math.round(t.width/i),n.height=Math.round(t.width/e/i)),n.height*i>t.height&&t.height!==-1&&(n.height=Math.round(t.height/i),n.width=Math.round(t.height*e/i))),n}function A2(n,t,e,i){return n.parentElement?t?p2({height:n.parentElement.offsetHeight,width:n.parentElement.offsetWidth},e):(function(r,a){var l;return l={height:document.body.offsetHeight,width:document.body.offsetWidth},a?l:p2(l,r)})(e,i):{height:0,width:0}}customElements.define("a-scene",VT);var J8=Mh,Ra={},rb=[],zy=function(){};function gi(n,t){var e,i={};if(Object.keys(t).forEach((function(r){i[r]={value:t[r],writable:!0}})),Ra[n])throw new Error("The geometry `"+n+"` has been already registered");return((e=function(){zy.call(this)}).prototype=Object.create(zy.prototype,i)).name=n,e.prototype.constructor=e,Ra[n]={Geometry:e,schema:J8(e.prototype.schema)},rb.push(n),e}zy.prototype={schema:{},init:function(n){return this.geometry=new M.BufferGeometry,this.geometry},update:function(n){}};var sb=Ze,Z8=XE,$8=sb("extras:primitives:debug"),m2=sb("extras:primitives:warn"),t5=sb("extras:primitives:error"),qT={};function pi(n,t){if(n=n.toLowerCase(),!Qy[n]){Qy[n]=!0,$8("Registering <%s>",n),t.defaultAttributes&&m2("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var e=t.mappings||{},i=class extends zn{constructor(){super(),this.defaultComponentsFromPrimitive=t.defaultComponents||t.defaultAttributes||{},this.deprecated=t.deprecated||null,this.deprecatedMappings=t.deprecatedMappings||{},this.mappings=e,t.deprecated&&console.warn(t.deprecated),this.resolveMappingCollisions()}resolveMappingCollisions(){var r=this.mappings,a=this;Object.keys(r).forEach((function(l){var c;l!==l.toLowerCase()&&m2("Mapping keys should be specified in lower case. The mapping key "+l+" may not be recognized"),Tn[l]&&(c=r[l].replace(".","-"),r[c]=r[l],delete r[l],console.warn("The primitive "+a.tagName.toLowerCase()+" has a mapping collision. The attribute "+l+" has the same name as a registered component and has been renamed to "+c))}))}getExtraComponents(){var r,a,l,c,u,d=this;for(a=tb(this.defaultComponentsFromPrimitive),(u=this.getAttribute("mixin"))&&(u=Us(u.trim(),/\s+/)).forEach((function(g){var b,x,E=document.getElementById(g);if(E){var y=E.rawAttributeCache,_=E.componentCache;for(var w in y){if(c=d.mappings[w])return void g2(c,y[w],a);w in _&&(a[w]=(b=a[w],x=_[w],f(b)?A(x):f(x)?A(b):m(b)&&m(x)?Wi(b,x):A(x)))}}})),l=0;l<this.attributes.length;l++)r=this.attributes[l],(c=this.mappings[r.name])&&g2(c,r.value,a);return a;function f(g){return g===void 0}function A(g){return m(g)?Wi({},g):g}function m(g){return g!==null&&g.constructor===Object}}attributeChangedCallback(r,a,l){var c=this.mappings[r];r in this.deprecatedMappings&&console.warn(this.deprecatedMappings[r]),r&&c?Z8(this,c,l):super.attributeChangedCallback(r,a,l)}};return customElements.define(n,i),i.mappings=e,qT[n]=i,i}t5("Trying to register primitive "+n+" that has been already previously registered")}function g2(n,t,e){var i=JA(n);i.constructor===Array?(e[i[0]]=e[i[0]]||{},e[i[0]][i[1]]=t.trim()):e[i]=t.trim()}var Hr={},WT=[],e5={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},Gy=function(){};function Ca(n,t){var e,i={};if(Object.keys(t).forEach((function(r){i[r]={value:t[r],writable:!0}})),Hr[n])throw new Error("The shader "+n+" has already been registered");return((e=function(){Gy.call(this)}).prototype=Object.create(Gy.prototype,i)).name=n,e.prototype.constructor=e,Hr[n]={Shader:e,schema:Mh(e.prototype.schema)},WT.push(n),e}Gy.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(n){return this.uniforms=this.initUniforms(),this.material=new(this.raw?M.RawShaderMaterial:M.ShaderMaterial)({uniforms:this.uniforms,glslVersion:this.raw||this.glsl3?M.GLSL3:null,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initUniforms:function(){var n,t,e=this.schema,i={};for(n in e)e[n].is==="uniform"&&(t=e5[e[n].type],i[n]={type:t,value:void 0});return i},update:function(n){var t,e,i=this.schema,r=this.uniforms;for(t in n)if(i[t]&&i[t].is==="uniform")if(i[t].type!=="map")r[t].value=this.parseValue(i[t].type,n[t]),r[t].needsUpdate=!0;else{if(!r[t]||r[t].value===n[t])continue;e="_texture_"+t,this.setMapOnTextureLoad(r,t,e),ZA(e,t,this,n)}},parseValue:function(n,t){var e;switch(n){case"vec2":return new M.Vector2(t.x,t.y);case"vec3":return new M.Vector3(t.x,t.y,t.z);case"vec4":return new M.Vector4(t.x,t.y,t.z,t.w);case"color":return e=new M.Color(t),new M.Vector3(e.r,e.g,e.b);default:return t}},setMapOnTextureLoad:function(n,t,e){var i=this;this.el.addEventListener("materialtextureloaded",(function(){n[t].value=i.material[e],n[t].needsUpdate=!0}))}};var Sv=new M.FileLoader,Hy=Ze("core:a-assets:warn");function n5(n){if(n.hasAttribute("autoplay")||n.getAttribute("preload")==="auto")return new Promise((function(t,e){if(n.readyState===4)return t();if(n.error)return e();function i(){for(var r=0,a=0;a<n.buffered.length;a++)r+=n.buffered.end(a)-n.buffered.start(a);r>=n.duration&&(n.tagName==="VIDEO"&&M.Cache.add(n.getAttribute("src"),n),t())}n.addEventListener("loadeddata",i,!1),n.addEventListener("progress",i,!1),n.addEventListener("error",e,!1)}))}function v2(n){var t=(function(e){var i,r,a;return e.hasAttribute("crossorigin")||(i=e.getAttribute("src"))!==null&&(i.indexOf("://")===-1||(a=(r=i).indexOf("://")>-1?r.split("/")[2]:r.split("/")[0]).substring(0,a.indexOf(":"))===window.location.host)?e:(Hy('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',i),e.crossOrigin="anonymous",e.cloneNode(!0))})(n);return t.tagName&&t.tagName.toLowerCase()==="video"&&(t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline","")),t!==n&&(n.parentNode.appendChild(t),n.parentNode.removeChild(n)),t}customElements.define("a-assets",class extends ei{constructor(){super(),this.isAssets=!0,this.fileLoader=Sv,this.timeout=null}doConnectedCallback(){var n,t,e,i,r,a,l=this,c=[];if(super.doConnectedCallback(),!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(r=this.querySelectorAll("img"),n=0;n<r.length;n++)i=v2(r[n]),c.push(new Promise((function(u,d){M.Cache.add(r[n].getAttribute("src"),i),i.complete?u():(i.onload=u,i.onerror=d)})));for(e=this.querySelectorAll("audio, video"),n=0;n<e.length;n++)(t=v2(e[n])).src||t.srcObject||Hy("Audio/video asset has neither `src` nor `srcObject` attributes."),c.push(n5(t));this.getChildren().forEach((function(u){u.isAssetItem&&u.hasAttribute("src")&&c.push(new Promise((function(d,f){if(u.hasLoaded)return d();u.addEventListener("loaded",d),u.addEventListener("error",f)})))})),Promise.allSettled(c).then((function(){l.timeout!==null&&l.load()})),a=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout((function(){l.hasLoaded||(Hy("Asset loading timed out in",a,"ms"),l.timeout=null,l.emit("timeout"),l.load())}),a)}disconnectedCallback(){super.disconnectedCallback(),this.timeout&&clearTimeout(this.timeout)}load(){super.load.call(this,null,(function(){return!1}))}}),customElements.define("a-asset-item",class extends ei{constructor(){super(),this.data=null,this.isAssetItem=!0}connectedCallback(){var n=this,t=this.getAttribute("src");Sv.setResponseType(this.getAttribute("response-type")||(function(e){var i=(function(a){var l=document.createElement("a");l.href=a;var c=l.search.replace(/^\?/,""),u=a.replace(c,"").replace("?","");return u.substring(u.lastIndexOf("/")+1)})(e),r=i.lastIndexOf(".");return r>=0&&i.slice(r,e.search(/\?|#|$/))===".glb"?"arraybuffer":"text"})(t)),Sv.load(t,(function(e){n.data=e,ei.prototype.load.call(n)}),(function(e){n.emit("progress",{loadedBytes:e.loaded,totalBytes:e.total,xhr:e})}),(function(e){n.emit("error",{xhr:e},!1)}))}});var i5=Ze("core:cubemap:warn");class ab extends HTMLElement{constructor(t){return super(t)}onReadyStateChange(){document.readyState==="complete"&&this.doConnectedCallback()}connectedCallback(){document.readyState==="complete"?ab.prototype.doConnectedCallback.call(this):document.addEventListener("readystatechange",this.onReadyStateChange.bind(this))}doConnectedCallback(){this.srcs=this.validate()}validate(){var t,e=this.querySelectorAll("[src]"),i=[];if(e.length===6){for(t=0;t<e.length;t++)e[t].tagName==="IMG"?i.push(e[t]):i.push(e[t].getAttribute("src"));return i}i5("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")}}customElements.define("a-cubemap",ab),customElements.define("a-mixin",class extends ei{constructor(){super(),this.componentCache={},this.rawAttributeCache={},this.isMixin=!0}doConnectedCallback(){super.doConnectedCallback(),this.sceneEl=this.closestScene(),this.id=this.getAttribute("id"),this.cacheAttributes(),this.updateEntities(),this.load()}attributeChangedCallback(n,t,e){super.attributeChangedCallback(),this.cacheAttribute(n,e),this.updateEntities()}setAttribute(n,t){window.HTMLElement.prototype.setAttribute.call(this,n,t),this.cacheAttribute(n,t)}cacheAttribute(n,t){var e,i;i=Us(n,"__")[0],e=Tn[i],t===void 0&&(t=window.HTMLElement.prototype.getAttribute.call(this,n)),this.rawAttributeCache[n]=t,e&&(this.componentCache[n]=this.parseComponentAttrValue(e,t))}parseComponentAttrValue(n,t){var e;return typeof t!="string"?t:(n.isSingleProperty?typeof(e=n.schema.parse(t))=="string"&&(e=t):e=hh(t),e)}getAttribute(n){return this.componentCache[n]||window.HTMLElement.prototype.getAttribute.call(this,n)}cacheAttributes(){var n,t,e=this.attributes;for(t=0;t<e.length;t++)n=e[t].name,this.cacheAttribute(n)}updateEntities(){var n,t,e;if(this.sceneEl)for(t=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),e=0;e<t.length;e++)(n=t[e]).hasLoaded&&!n.isMixin&&n.mixinUpdate(this.id)}});const jT="1.7.0";var Nf=new M.Color,Pf=new M.Color,y2=wT,E2=XE,Bv={},XT="color",b2="rotation",YT="components";function x2(n){n.x=M.MathUtils.degToRad(n.x),n.y=M.MathUtils.degToRad(n.y),n.z=M.MathUtils.degToRad(n.z)}function Tv(n,t,e){var i;for(i=0;i<t.length;i++)n.addEventListener(t[i],e)}function Iv(n,t,e){var i;for(i=0;i<t.length;i++)n.removeEventListener(t[i],e)}function C2(n,t){var e,i,r;for(i=fA(t),r=n,e=0;e<i.length;e++)r=r[i[e]];if(r===void 0)throw console.log(n),new Error("[animation] property ("+t+") could not be found");return r}function _2(n,t,e,i){var r,a,l,c;for(t.startsWith("object3D.rotation")&&(e=M.MathUtils.degToRad(e)),a=fA(t),c=n,r=0;r<a.length-1;r++)c=c[a[r]];l=a[a.length-1],i!==XT?c[l]=e:"r"in c[l]?(c[l].r=e.r,c[l].g=e.g,c[l].b=e.b):(c[l].x=e.r,c[l].y=e.g,c[l].z=e.b)}function fA(n){return n in Bv||(Bv[n]=n.split(".")),Bv[n]}function Rv(n){return n.isRawProperty||n.property.startsWith(YT)||n.property.startsWith("object3D")}le("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(n){return n===!0||n==="true"||n!==!1&&n!=="false"&&parseInt(n,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var n=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){n.animationIsPlaying=!1,n.el.emit("animationcomplete",n.eventDetail,!1),n.id&&n.el.emit("animationcomplete__"+n.id,n.eventDetail,!1)}}},update:function(n){var t=this.config,e=this.data;this.animationIsPlaying=!1,this.data.enabled&&e.property&&(t.autoplay=!1,t.direction=e.dir,t.duration=e.dur,t.easing=e.easing,t.elasticity=e.elasticity,t.loop=e.loop,t.round=e.round,this.createAndStartAnimation())},tick:function(n,t){this.animationIsPlaying&&(this.time+=t,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var n=this.data;this.updateConfig(),this.animationIsPlaying=!1,this.animation=op(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!n.autoplay||n.startEvents&&n.startEvents.length||(n.delay?setTimeout(this.beginAnimation,n.delay):this.beginAnimation())},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){this.data.enabled&&(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=op(this.config),this.data.delay?setTimeout(this.beginAnimation,this.data.delay):this.beginAnimation())},updateConfigForRawColor:function(){var n,t,e,i=this.config,r=this.data,a=this.el;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){for(t in n=r.from===""?C2(a,r.property):r.from,e=r.to,this.setColorConfig(n,e),n=this.fromColor,e=this.toColor,this.targetsArray.length=0,this.targetsArray.push(n),i.targets=this.targetsArray,e)i[t]=e[t];var l;i.update=(l={},function(c){var u;(u=c.animatables[0].target).r===l.r&&u.g===l.g&&u.b===l.b||_2(a,r.property,u,r.type)})}},updateConfigForDefault:function(){var n,t,e,i,r=this.config,a=this.data,l=this.el;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(n=a.from===""?Rv(a)?C2(l,a.property):y2(l,a.property):a.from,e=a.to,isNaN(n||e)?(n=n&&n.toString(),e=e&&e.toString()):(n=parseFloat(n),e=parseFloat(e)),(t=a.to==="true"||a.to==="false"||a.to===!0||a.to===!1)&&(n=a.from==="true"||a.from===!0?1:0,e=a.to==="true"||a.to===!0?1:0),this.targets.aframeProperty=n,r.targets=this.targets,r.aframeProperty=e,r.update=function(c){var u;(u=c.animatables[0].target.aframeProperty)!==i&&(i=u,t&&(u=u>=1),Rv(a)?_2(l,a.property,u,a.type):E2(l,a.property,u))})},updateConfigForVector:function(){var n,t,e,i,r=this.config,a=this.data,l=this.el,c=fA(a.property),u=c[0]==="object3D"?c[1]:c[0];for(n in t=a.from!==""?sA(a.from):y2(l,u),e=sA(a.to),u===b2&&(x2(t),x2(e)),this.targetsArray.length=0,this.targetsArray.push(t),r.targets=this.targetsArray,e)r[n]=e[n];r.update=u!=="position"&&u!==b2&&u!=="scale"?(function(){var d={};return function(f){var A=f.animatables[0].target;A.x===d.x&&A.y===d.y&&A.z===d.z||(d.x=A.x,d.y=A.y,d.z=A.z,E2(l,a.property,A))}})():(i={},function(d){var f=d.animatables[0].target;f.x===i.x&&f.y===i.y&&f.z===i.z||(i.x=f.x,i.y=f.y,i.z=f.z,l.object3D[u].set(f.x,f.y,f.z))})},updateConfig:function(){var n;n=(function(t,e){var i,r,a,l;return(a=e.split("."))[0]!=="object3D"||a[2]||a[1]!=="position"&&a[1]!=="rotation"&&a[1]!=="scale"?(r=a[0],l=a[1],(i=t.components[r]||Tn[r])?l&&!i.schema[l]?null:l?i.schema[l].type:i.schema.type:null):"vec3"})(this.el,this.data.property),Rv(this.data)&&this.data.type===XT?this.updateConfigForRawColor():n==="vec2"||n==="vec3"||n==="vec4"?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(n){var t,e=this.data,i=this.el,r=this;return e.from===""&&!!e.property.startsWith(YT)&&(t=fA(e.property)[1],!i.components[t]&&(i.addEventListener("componentinitialized",(function a(l){l.detail.name===t&&(n(),r.animation=op(r.config),i.removeEventListener("componentinitialized",a))})),!0))},stopRelatedAnimations:function(){var n,t;for(t in this.el.components)n=this.el.components[t],t!==this.attrName&&n.name==="animation"&&n.animationIsPlaying&&n.data.property===this.data.property&&(n.animationIsPlaying=!1)},addEventListeners:function(){var n=this.data,t=this.el;Tv(t,n.startEvents,this.onStartEvent),Tv(t,n.pauseEvents,this.pauseAnimation),Tv(t,n.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var n=this.data,t=this.el;Iv(t,n.startEvents,this.onStartEvent),Iv(t,n.pauseEvents,this.pauseAnimation),Iv(t,n.resumeEvents,this.resumeAnimation)},setColorConfig:function(n,t){Nf.set(n),Pf.set(t),n=this.fromColor,t=this.toColor,n.r=Nf.r,n.g=Nf.g,n.b=Nf.b,t.r=Pf.r,t.g=Pf.g,t.b=Pf.b}});var Lv=Ze("components:anchored:warn");le("anchored",{schema:{persistent:{default:!1}},init:function(){var n=this.el.sceneEl.getAttribute("webxr"),t=n.optionalFeatures;t.indexOf("anchors")===-1&&(t.push("anchors"),this.el.sceneEl.setAttribute("webxr",n)),this.auxQuaternion=new M.Quaternion,this.onEnterVR=this.onEnterVR.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR)},onEnterVR:function(){this.anchor=void 0,this.requestPersistentAnchorPending=this.data.persistent,this.requestAnchorPending=!this.data.persistent},tick:function(){var n,t,e,i=this.el.sceneEl,r=i.renderer.xr,a=this.el.object3D;(i.is("ar-mode")||i.is("vr-mode"))&&(!this.anchor&&this.requestPersistentAnchorPending&&this.restorePersistentAnchor(),!this.anchor&&this.requestAnchorPending&&this.createAnchor(),this.anchor&&(n=i.frame,t=r.getReferenceSpace(),e=n.getPose(this.anchor.anchorSpace,t),a.position.copy(e.transform.position),a.quaternion.copy(e.transform.orientation)))},createAnchor:async function(n,t){var e,i,r,a,l=this.el.sceneEl,c=l.renderer.xr,u=this.el.object3D;n=n||u.position,t=t||this.auxQuaternion.setFromEuler(u.rotation),(function(d){var f=d.renderer.xr.getSession();return f&&f.restorePersistentAnchor})(l)?(this.anchor&&this.deleteAnchor(),e=l.frame,i=c.getReferenceSpace(),r=new XRRigidTransform({x:n.x,y:n.y,z:n.z},{x:t.x,y:t.y,z:t.z,w:t.w}),this.requestAnchorPending=!1,a=await e.createAnchor(r,i),this.data.persistent&&(this.el.id?(this.persistentHandle=await a.requestPersistentHandle(),localStorage.setItem(this.el.id,this.persistentHandle)):Lv("The anchor won't be persisted because the entity has no assigned id.")),l.object3D.attach(this.el.object3D),this.anchor=a):Lv("This browser doesn't support the WebXR anchors module")},restorePersistentAnchor:async function(){var n,t=this.el.sceneEl.renderer.xr.getSession(),e=t.persistentAnchors;if(this.requestPersistentAnchorPending=!1,!this.el.id)return Lv("The entity associated to the persistent anchor cannot be retrieved because it doesn't have an assigned id."),void(this.requestAnchorPending=!0);if(e){n=localStorage.getItem(this.el.id);for(var i=0;i<e.length;++i)if(n===e[i]){this.anchor=await t.restorePersistentAnchor(e[i]),this.anchor&&(this.persistentHandle=e[i]);break}this.anchor||(this.requestAnchorPending=!0)}else this.requestPersistentAnchorPending=!0},deleteAnchor:function(){var n,t=this.anchor;t&&(n=this.el.sceneEl.renderer.xr.getSession(),t.delete(),this.el.sceneEl.object3D.add(this.el.object3D),this.persistentHandle&&n.deletePersistentAnchor(this.persistentHandle),this.anchor=void 0)}}),le("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var n,t=this.el;n=this.camera=new M.PerspectiveCamera,t.setObject3D("camera",n)},update:function(n){var t=this.data,e=this.camera;e.aspect=t.aspect||window.innerWidth/window.innerHeight,e.far=t.far,e.fov=t.fov,e.near=t.near,e.zoom=t.zoom,e.updateProjectionMatrix(),this.updateActiveCamera(n),this.updateSpectatorCamera(n)},updateActiveCamera:function(n){var t=this.data,e=this.el,i=this.system;n&&n.active===t.active||t.spectator||(t.active&&i.activeCameraEl!==e?i.setActiveCamera(e):t.active||i.activeCameraEl!==e||i.disableActiveCamera())},updateSpectatorCamera:function(n){var t=this.data,e=this.el,i=this.system;n&&n.spectator===t.spectator||(t.spectator&&i.spectatorCameraEl!==e?i.setSpectatorCamera(e):t.spectator||i.spectatorCameraEl!==e||i.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}});var Ea,vo,ba,w2,M2="click",S2="mouseup",Ff="cursor-fusing",Dv="cursor-hovering",Uv="cursor-hovered",kf={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},Qf={DOWN:["selectstart"],UP:["selectend"]},B2="a-mouse-cursor-hover",r5=(le("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:Ia()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity","xrselect"]}},after:["tracked-controls"],multiple:!0,init:function(){var n=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.isCursorDown=!1,this.activeXRInput=null,this.updateCanvasBounds=LT((function(){n.canvasBounds=n.el.sceneEl.canvas.getBoundingClientRect()}),500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=this.onCursorDown.bind(this),this.onCursorUp=this.onCursorUp.bind(this),this.onIntersection=this.onIntersection.bind(this),this.onIntersectionCleared=this.onIntersectionCleared.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onEnterVR=this.onEnterVR.bind(this)},update:function(n){var t=this.data.rayOrigin;t!==n.rayOrigin&&(t==="entity"&&this.resetRaycaster(),this.updateMouseEventListeners(),t!=="xrselect"&&t!=="entity"||this.addWebXREventListeners(),n.rayOrigin!=="xrselect"&&n.rayOrigin!=="entity"||this.removeWebXREventListeners())},tick:function(){var n=this.el.sceneEl.frame,t=this.activeXRInput;this.data.rayOrigin==="xrselect"&&n&&t&&this.onMouseMove({frame:n,inputSource:t,type:"fakeselectevent"})},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var n=this.el;n.removeState(Dv),n.removeState(Ff),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(Uv),this.removeEventListeners()},addEventListeners:function(){var n,t=this.data,e=this.el,i=this;function r(){n=e.sceneEl.canvas,t.downEvents.length||t.upEvents.length||(kf.DOWN.forEach((function(a){n.addEventListener(a,i.onCursorDown,{passive:!1})})),kf.UP.forEach((function(a){n.addEventListener(a,i.onCursorUp,{passive:!1})})))}(n=e.sceneEl.canvas)?r():e.sceneEl.addEventListener("render-target-loaded",r),t.downEvents.forEach((function(a){e.addEventListener(a,i.onCursorDown)})),t.upEvents.forEach((function(a){e.addEventListener(a,i.onCursorUp)})),e.addEventListener("raycaster-intersection",this.onIntersection),e.addEventListener("raycaster-closest-entity-changed",this.onIntersection),e.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),e.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),e.sceneEl.addEventListener("enter-vr",this.onEnterVR),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var n,t=this.data,e=this.el,i=this;!(n=e.sceneEl.canvas)||t.downEvents.length||t.upEvents.length||(kf.DOWN.forEach((function(r){n.removeEventListener(r,i.onCursorDown)})),kf.UP.forEach((function(r){n.removeEventListener(r,i.onCursorUp)}))),t.downEvents.forEach((function(r){e.removeEventListener(r,i.onCursorDown)})),t.upEvents.forEach((function(r){e.removeEventListener(r,i.onCursorUp)})),e.removeEventListener("raycaster-intersection",this.onIntersection),e.removeEventListener("raycaster-closest-entity-changed",this.onIntersection),e.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),n.removeEventListener("mousemove",this.onMouseMove),n.removeEventListener("touchstart",this.onMouseMove),n.removeEventListener("touchmove",this.onMouseMove),e.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),e.sceneEl.removeEventListener("enter-vr",this.onEnterVR),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds),this.removeWebXREventListeners()},updateMouseEventListeners:function(){var n,t=this.el;(n=t.sceneEl.canvas).removeEventListener("mousemove",this.onMouseMove),n.removeEventListener("touchmove",this.onMouseMove),t.setAttribute("raycaster","useWorldCoordinates",!1),this.data.rayOrigin==="mouse"&&(n.addEventListener("mousemove",this.onMouseMove),n.addEventListener("touchmove",this.onMouseMove,{passive:!1}),t.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},resetRaycaster:function(){this.el.setAttribute("raycaster",{direction:new M.Vector3().set(0,0,-1),origin:new M.Vector3})},addWebXREventListeners:function(){var n=this,t=this.el.sceneEl.xrSession;t&&(Qf.DOWN.forEach((function(e){t.addEventListener(e,n.onCursorDown)})),Qf.UP.forEach((function(e){t.addEventListener(e,n.onCursorUp)})))},removeWebXREventListeners:function(){var n=this,t=this.el.sceneEl.xrSession;t&&(Qf.DOWN.forEach((function(e){t.removeEventListener(e,n.onCursorDown)})),Qf.UP.forEach((function(e){t.removeEventListener(e,n.onCursorUp)})))},onMouseMove:(Ea=new M.Vector3,vo=new M.Vector2,ba=new M.Vector3,w2={origin:ba,direction:Ea},function(n){var t,e,i,r,a,l,c,u,d,f=this.canvasBounds,A=this.el.sceneEl.camera;A.parent.updateMatrixWorld(),e=(i=n.type==="touchmove"||n.type==="touchstart"?n.touches.item(0):n).clientX-f.left,r=i.clientY-f.top,vo.x=e/f.width*2-1,vo.y=-r/f.height*2+1,this.data.rayOrigin!=="xrselect"||n.type!=="selectstart"&&n.type!=="fakeselectevent"?n.type==="fakeselectout"?(Ea.set(0,1,0),ba.set(0,9999,0)):A&&A.isPerspectiveCamera?(ba.setFromMatrixPosition(A.matrixWorld),Ea.set(vo.x,vo.y,.5).unproject(A).sub(ba).normalize()):A&&A.isOrthographicCamera?(ba.set(vo.x,vo.y,(A.near+A.far)/(A.near-A.far)).unproject(A),Ea.set(0,0,-1).transformDirection(A.matrixWorld)):console.error("AFRAME.Raycaster: Unsupported camera type: "+A.type):(a=n.frame,l=n.inputSource,c=this.el.sceneEl.renderer.xr.getReferenceSpace(),(u=a.getPose(l.targetRaySpace,c))&&(d=u.transform,Ea.set(0,0,-1),Ea.applyQuaternion(d.orientation),ba.copy(d.position),(t=A.el.object3D.parent).localToWorld(ba),Ea.transformDirection(t.matrixWorld))),this.el.setAttribute("raycaster",w2),n.type==="touchmove"&&n.preventDefault()}),onCursorDown:function(n){this.isCursorDown=!0,this.data.rayOrigin==="mouse"&&n.type==="touchstart"&&(this.onMouseMove(n),this.el.components.raycaster.checkIntersections(),n.preventDefault()),this.data.rayOrigin==="xrselect"&&n.type==="selectstart"&&(this.activeXRInput=n.inputSource,this.onMouseMove(n),this.el.components.raycaster.checkIntersections(),this.el.components.raycaster.intersectedEls.length&&this.el.sceneEl.components["ar-hit-test"]!==void 0&&this.el.sceneEl.getAttribute("ar-hit-test").enabled&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!1),this.reenableARHitTest=!0)),this.twoWayEmit("mousedown",n),this.cursorDownEl=this.intersectedEl},onCursorUp:function(n){if(this.isCursorDown&&(this.data.rayOrigin!=="xrselect"||this.activeXRInput===n.inputSource)){this.isCursorDown=!1;var t=this.data;this.twoWayEmit(S2,n),this.reenableARHitTest===!0&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!0),this.reenableARHitTest=void 0),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(S2,this.intersectedEventDetail)),t.fuse&&t.rayOrigin!=="mouse"&&t.rayOrigin!=="xrselect"||!this.intersectedEl||this.cursorDownEl!==this.intersectedEl||this.twoWayEmit(M2,n),t.rayOrigin==="xrselect"&&this.onMouseMove({type:"fakeselectout"}),this.activeXRInput=null,this.cursorDownEl=null,n.type==="touchend"&&n.preventDefault()}},onIntersection:function(n){var t,e,i,r,a=this.el;e=n.detail.els[0]===a?1:0,r=n.detail.intersections[e],(i=n.detail.els[e])&&this.intersectedEl!==i&&(this.intersectedEl&&(t=this.el.components.raycaster.getIntersection(this.intersectedEl))&&t.distance<=r.distance||(this.clearCurrentIntersection(!0),this.setIntersection(i,r)))},onIntersectionCleared:function(n){n.detail.clearedEls.indexOf(this.intersectedEl)!==-1&&this.clearCurrentIntersection()},onEnterVR:function(){var n=this.data.rayOrigin;this.clearCurrentIntersection(!0),n!=="xrselect"&&n!=="entity"||this.addWebXREventListeners()},setIntersection:function(n,t){var e=this.el,i=this.data,r=this;this.intersectedEl!==n&&(this.intersectedEl=n,e.addState(Dv),n.addState(Uv),this.twoWayEmit("mouseenter"),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.add(B2),i.fuseTimeout!==0&&i.fuse&&i.rayOrigin!=="xrselect"&&i.rayOrigin!=="mouse"&&(e.addState(Ff),this.twoWayEmit("fusing"),this.fuseTimeout=setTimeout((function(){e.removeState(Ff),r.twoWayEmit(M2)}),i.fuseTimeout)))},clearCurrentIntersection:function(n){var t,e,i=this.el;this.intersectedEl&&(this.intersectedEl.removeState(Uv),i.removeState(Dv),i.removeState(Ff),this.twoWayEmit("mouseleave"),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.remove(B2),this.intersectedEl=null,clearTimeout(this.fuseTimeout),n!==!0&&(e=this.el.components.raycaster.intersections).length!==0&&(t=e[e[0].object.el===i?1:0])&&this.setIntersection(t.object.el,t))},twoWayEmit:function(n,t){var e,i=this.el,r=this.intersectedEl;function a(l,c){t instanceof MouseEvent?l.mouseEvent=t:typeof TouchEvent<"u"&&t instanceof TouchEvent&&(l.touchEvent=t)}e=this.el.components.raycaster.getIntersection(r),this.eventDetail.intersectedEl=r,this.eventDetail.intersection=e,a(this.eventDetail),i.emit(n,this.eventDetail),r&&(this.intersectedEventDetail.intersection=e,a(this.intersectedEventDetail),r.emit(n,this.intersectedEventDetail))}}),new M.BufferGeometry),T2=(le("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:rb,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(n){var t,e=this.data,i=this.el,r=this.system;this.geometry&&(r.unuseGeometry(n),this.geometry=null),this.geometry=r.getOrCreateGeometry(e),(t=i.getObject3D("mesh"))?t.geometry=this.geometry:((t=new M.Mesh).geometry=this.geometry,this.el.getAttribute("material")||(t.material=new M.MeshStandardMaterial({color:16777215*Math.random(),metalness:0,roughness:.5})),i.setObject3D("mesh",t))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=r5,this.geometry=null},updateSchema:function(n){var t=this.oldData&&this.oldData.primitive,e=n.primitive,i=Ra[e]&&Ra[e].schema;if(!i)throw new Error("Unknown geometry schema `"+e+"`");t&&t===e||this.extendSchema(i)}}),"generic"),s5=(le("generic-tracked-controller-controls",{schema:{hand:{default:""},defaultModel:{default:!0},defaultModelColor:{default:"gray"},disabled:{default:!1}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick"]},bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var n=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){be(t.detail.id,"down",n)},this.onButtonUp=function(t){be(t.detail.id,"up",n)},this.onButtonTouchStart=function(t){be(t.detail.id,"touchstart",n)},this.onButtonTouchEnd=function(t){be(t.detail.id,"touchend",n)},this.controllerPresent=!1,this.wasControllerConnected=!1,this.bindMethods(),this.el.addEventListener("controllerconnected",(function(t){t.detail.name!==n.name&&(n.wasControllerConnected=!0,n.removeEventListeners(),n.removeControllersUpdateListener())}))},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var n=this.data,t=n.hand?n.hand:void 0;Ki(this,T2,{hand:t,iterateControllerProfiles:!0})},play:function(){this.wasControllerConnected||(this.checkIfControllerPresent(),this.addControllersUpdateListener())},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var n=this.el,t=this.data;this.el.components["tracked-controls"]?this.removeEventListeners():(n.setAttribute("tracked-controls",{hand:t.hand,idPrefix:T2,iterateControllerProfiles:!0}),this.data.defaultModel&&this.initDefaultModel())},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.wasControllerConnected&&this.checkIfControllerPresent()},onButtonChanged:function(n){var t=this.mapping.buttons[n.detail.id];t&&this.el.emit(t+"changed",n.detail.state)},onAxisMoved:function(n){ur(this,this.mapping.axes,n)},initDefaultModel:function(){var n=this.modelEl=document.createElement("a-entity");n.setAttribute("geometry",{primitive:"sphere",radius:.03}),n.setAttribute("material",{color:this.data.color}),this.el.appendChild(n),this.el.emit("controllermodelready",{name:"generic-tracked-controller-controls",model:this.modelEl,rayOrigin:{origin:{x:0,y:0,z:-.01},direction:{x:0,y:0,z:-1}}})}}),Ze("components:gltf-model:warn"));le("gltf-model",{schema:{type:"model"},init:function(){var n=this,t=this.system.getDRACOLoader(),e=this.system.getMeshoptDecoder(),i=this.system.getKTX2Loader();this.model=null,this.loader=new PE,t&&this.loader.setDRACOLoader(t),this.ready=e?e.then((function(r){n.loader.setMeshoptDecoder(r)})):Promise.resolve(),i&&this.loader.setKTX2Loader(i)},update:function(){var n=this,t=this.el,e=this.data;e&&(this.remove(),this.ready.then((function(){n.loader.load(e,(function(i){n.model=i.scene||i.scenes[0],n.model.animations=i.animations,t.setObject3D("mesh",n.model),t.emit("model-loaded",{format:"gltf",model:n.model})}),void 0,(function(i){var r=i&&i.message?i.message:"Failed to load glTF model";s5(r),t.emit("model-error",{format:"gltf",src:e})}))})))},remove:function(){this.model&&this.el.removeObject3D("mesh")}}),le("grabbable",{init:function(){this.el.setAttribute("obb-collider","centerModel: true")}});var zf,a5=Bn+"controllers/oculus-hands/v4/left.glb",o5=Bn+"controllers/oculus-hands/v4/right.glb",Ov=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"];le("hand-tracking-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},modelStyle:{default:"mesh",oneOf:["dots","mesh"]},modelColor:{default:"white"},modelOpacity:{default:1}},after:["tracked-controls"],bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded);for(var n=0;n<this.jointEls.length;++n)this.jointEls[n].object3D.visible=!0},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded);for(var n=0;n<this.jointEls.length;++n)this.jointEls[n].object3D.visible=!1},init:function(){var n=this.el.sceneEl,t=n.getAttribute("webxr"),e=t.optionalFeatures;e.indexOf("hand-tracking")===-1&&(e.push("hand-tracking"),n.setAttribute("webxr",t)),this.wristObject3D=new M.Object3D,this.el.sceneEl.object3D.add(this.wristObject3D),this.onModelLoaded=this.onModelLoaded.bind(this),this.onChildAttached=this.onChildAttached.bind(this),this.jointEls=[],this.controllerPresent=!1,this.isPinched=!1,this.pinchEventDetail={position:new M.Vector3,wristRotation:new M.Quaternion},this.indexTipPosition=new M.Vector3,this.hasPoses=!1,this.jointPoses=new Float32Array(16*Ov.length),this.jointRadii=new Float32Array(Ov.length),this.bindMethods(),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.updateReferenceSpace),this.el.sceneEl.addEventListener("exit-vr",this.updateReferenceSpace),this.el.addEventListener("child-attached",this.onChildAttached),this.wristObject3D.visible=!1},onChildAttached:function(n){this.addChildEntity(n.detail.el)},update:function(){this.updateModelMaterial()},updateModelMaterial:function(){var n=this.jointEls,t=this.skinnedMesh,e=this.data.modelOpacity!==1;t&&(this.skinnedMesh.material.color.set(this.data.modelColor),this.skinnedMesh.material.transparent=e,this.skinnedMesh.material.opacity=this.data.modelOpacity);for(var i=0;i<n.length;i++)n[i].setAttribute("material",{color:this.data.modelColor,transparent:e,opacity:this.data.modelOpacity})},updateReferenceSpace:function(){var n=this,t=this.el.sceneEl.xrSession;if(this.referenceSpace=void 0,t){var e=n.el.sceneEl.systems.webxr.sessionReferenceSpaceType;t.requestReferenceSpace(e).then((function(i){n.referenceSpace=i})).catch((function(i){throw n.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(e,"tracked-controls-webxr uses reference space "+e),i}))}},checkIfControllerPresent:function(){var n=this.data;Ki(this,"",{hand:n.hand?n.hand:void 0,iterateControllerProfiles:!0,handTracking:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},tick:function(){var n=this.el.sceneEl,t=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,e=n.frame,i=this.el.components["tracked-controls"],r=this.referenceSpace;t&&e&&r&&i&&(this.hasPoses=!1,t.hand&&(this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),this.hasPoses=e.fillPoses(t.hand.values(),r,this.jointPoses)&&e.fillJointRadii(t.hand.values(),this.jointRadii),this.updateHandModel(),this.detectGesture(),this.updateWristObject()))},updateWristObject:(zf=new M.Matrix4,function(){var n=this.wristObject3D;n&&this.hasPoses&&(zf.fromArray(this.jointPoses,0),n.position.setFromMatrixPosition(zf),n.quaternion.setFromRotationMatrix(zf))}),updateHandModel:function(){this.wristObject3D.visible=!0,this.el.object3D.visible=!0,this.data.modelStyle==="dots"&&this.updateHandDotsModel(),this.data.modelStyle==="mesh"&&this.updateHandMeshModel()},getBone:function(n){for(var t=this.bones,e=0;e<t.length;e++)if(t[e].name===n)return t[e];return null},updateHandMeshModel:(function(){var n=new M.Matrix4;return function(){var t=0,e=this.jointPoses,i=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller;if(i&&this.mesh&&(this.mesh.visible=!1,this.hasPoses))for(var r of i.hand.values()){var a=this.getBone(r.jointName);a!=null&&(this.mesh.visible=!0,n.fromArray(e,16*t),a.position.setFromMatrixPosition(n),a.quaternion.setFromRotationMatrix(n)),t++}}})(),updateHandDotsModel:function(){for(var n,t,e=this.jointPoses,i=this.jointRadii,r=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,a=0;a<r.hand.size;a++)t=(n=this.jointEls[a]).object3D,n.object3D.visible=this.hasPoses,this.hasPoses&&(t.matrix.fromArray(e,16*a),t.matrix.decompose(t.position,t.rotation,t.scale),n.setAttribute("scale",{x:i[a],y:i[a],z:i[a]}))},detectGesture:function(){this.detectPinch()},detectPinch:(function(){var n=new M.Vector3,t=new M.Matrix4;return function(){var e=this.indexTipPosition,i=this.pinchEventDetail;if(this.hasPoses){n.setFromMatrixPosition(t.fromArray(this.jointPoses,64)),e.setFromMatrixPosition(t.fromArray(this.jointPoses,144)),i.wristRotation.setFromRotationMatrix(t.fromArray(this.jointPoses,0));var r=e.distanceTo(n);r<.015&&this.isPinched===!1&&(this.isPinched=!0,i.position.copy(e).add(n).multiplyScalar(.5),this.el.emit("pinchstarted",i)),r>.02&&this.isPinched===!0&&(this.isPinched=!1,i.position.copy(e).add(n).multiplyScalar(.5),this.el.emit("pinchended",i)),this.isPinched&&(i.position.copy(e).add(n).multiplyScalar(.5),this.el.emit("pinchmoved",i))}}})(),pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var n=this.el,t=this.data;n.setAttribute("tracked-controls",{id:"",hand:t.hand,iterateControllerProfiles:!0,handTrackingEnabled:!0}),this.mesh?this.mesh!==n.getObject3D("mesh")&&n.setObject3D("mesh",this.mesh):this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){var n,t=this.el;this.checkIfControllerPresent(),n=t.components["tracked-controls"]&&t.components["tracked-controls"].controller,this.mesh&&n&&n.hand&&n.hand instanceof XRHand&&t.setObject3D("mesh",this.mesh)},initDefaultModel:function(){var n=this.data;n.modelStyle==="dots"&&this.initDotsModel(),n.modelStyle==="mesh"&&this.initMeshHandModel(),this.el.object3D.visible=!0,this.wristObject3D.visible=!0},initDotsModel:function(){if(this.jointEls.length===0){for(var n=0;n<Ov.length;++n){var t=this.jointEl=document.createElement("a-entity");t.setAttribute("geometry",{primitive:"sphere",radius:1}),t.object3D.visible=!1,this.el.appendChild(t),this.jointEls.push(t)}this.updateModelMaterial()}},initMeshHandModel:function(){var n=this.data.hand==="left"?a5:o5;this.el.setAttribute("gltf-model",n)},onModelLoaded:function(){var n=this.mesh=this.el.getObject3D("mesh").children[0],t=this.skinnedMesh=n.getObjectByProperty("type","SkinnedMesh");this.skinnedMesh&&(this.bones=t.skeleton.bones,this.el.removeObject3D("mesh"),n.position.set(0,0,0),n.rotation.set(0,0,0),t.frustumCulled=!1,t.material=new M.MeshStandardMaterial,this.updateModelMaterial(),this.setupChildrenEntities(),this.el.setObject3D("mesh",n),this.el.emit("controllermodelready",{name:"hand-tracking-controls",model:this.data.model,rayOrigin:new M.Vector3(0,0,0)}))},setupChildrenEntities:function(){for(var n=this.el.children,t=0;t<n.length;++t)n[t]instanceof zn&&this.addChildEntity(n[t])},addChildEntity:function(n){n instanceof zn&&this.wristObject3D.add(n.object3D)}}),le("hand-tracking-grab-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},color:{type:"color",default:"white"},hoverColor:{type:"color",default:"#538df1"},hoverEnabled:{default:!1}},init:function(){var n,t=this.el,e=this.data;n=e.hand==="right"?"components.hand-tracking-controls.bones.3":"components.hand-tracking-controls.bones.21",t.setAttribute("hand-tracking-controls",{hand:e.hand}),t.setAttribute("obb-collider",{trackedObject3D:n,size:.04}),this.auxMatrix=new M.Matrix4,this.onCollisionStarted=this.onCollisionStarted.bind(this),this.el.addEventListener("obbcollisionstarted",this.onCollisionStarted),this.onCollisionEnded=this.onCollisionEnded.bind(this),this.el.addEventListener("obbcollisionended",this.onCollisionEnded),this.onPinchStarted=this.onPinchStarted.bind(this),this.el.addEventListener("pinchstarted",this.onPinchStarted),this.onPinchEnded=this.onPinchEnded.bind(this),this.el.addEventListener("pinchended",this.onPinchEnded)},transferEntityOwnership:function(){for(var n,t=this.el.sceneEl.querySelectorAll("[hand-tracking-grab-controls]"),e=0;e<t.length;++e)(n=t[e].components["hand-tracking-grab-controls"])!==this&&this.grabbedEl&&this.grabbedEl===n.grabbedEl&&n.releaseGrabbedEntity();return!1},onCollisionStarted:function(n){var t=n.detail.withEl;this.collidedEl||t.getAttribute("grabbable")&&(this.collidedEl=t,this.grabbingObject3D=n.detail.trackedObject3D,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.hoverColor))},onCollisionEnded:function(){this.collidedEl=void 0,this.grabbedEl||(this.grabbingObject3D=void 0,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.color))},onPinchStarted:function(n){this.collidedEl&&(this.grabbedEl=this.collidedEl,this.transferEntityOwnership(),this.grab())},onPinchEnded:function(){this.releaseGrabbedEntity()},releaseGrabbedEntity:function(){var n=this.grabbedEl;if(n){var t=n.object3D,e=t.parent,i=this.originalParent;t.applyMatrix4(e.matrixWorld),t.applyMatrix4(this.auxMatrix.copy(i.matrixWorld).invert()),e.remove(t),i.add(t),this.el.emit("grabended",{grabbedEl:n}),this.grabbedEl=void 0,this.originalParent=void 0}},grab:function(){var n=this.grabbedEl,t=n.object3D,e=t.parent;this.originalParent=e;var i=this.el.components["hand-tracking-controls"].wristObject3D;t.applyMatrix4(e.matrixWorld),t.applyMatrix4(this.auxMatrix.copy(i.matrixWorld).invert()),e.remove(t),i.add(t),this.el.emit("grabstarted",{grabbedEl:n})}});var l5={toonLeft:Bn+"controllers/hands/leftHand.glb",toonRight:Bn+"controllers/hands/rightHand.glb",lowPolyLeft:Bn+"controllers/hands/leftHandLow.glb",lowPolyRight:Bn+"controllers/hands/rightHandLow.glb",highPolyLeft:Bn+"controllers/hands/leftHandHigh.glb",highPolyRight:Bn+"controllers/hands/rightHandHigh.glb"},Nv="Point",Pv="Fist",I2="Thumb Up",dp={};function R2(n,t){var e;if(n)return(e=dp[n])==="grip"?e+(t?"close":"open"):e==="point"?e+(t?"up":"down"):e==="pointing"||e==="pistol"?e+(t?"start":"end"):void 0}dp[Pv]="grip",dp[I2]="pistol",dp[Nv]="pointing",le("hand-controls",{schema:{color:{default:"white",type:"color"},hand:{default:"left"},handModelStyle:{default:"lowPoly",oneOf:["lowPoly","highPoly","toon"]}},after:["tracked-controls"],init:function(){var n=this,t=this.el;this.pressedButtons={},this.touchedButtons={},this.loader=new PE,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){n.handleButton("grip","down")},this.onGripUp=function(){n.handleButton("grip","up")},this.onTrackpadDown=function(){n.handleButton("trackpad","down")},this.onTrackpadUp=function(){n.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){n.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){n.handleButton("trackpad","touchend")},this.onTriggerDown=function(){n.handleButton("trigger","down")},this.onTriggerUp=function(){n.handleButton("trigger","up")},this.onTriggerTouchStart=function(){n.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){n.handleButton("trigger","touchend")},this.onGripTouchStart=function(){n.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){n.handleButton("grip","touchend")},this.onThumbstickDown=function(){n.handleButton("thumbstick","down")},this.onThumbstickUp=function(){n.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){n.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){n.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){n.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){n.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){n.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){n.handleButton("surface","touchend")},this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),t.addEventListener("controllerconnected",this.onControllerConnected),t.addEventListener("controllerdisconnected",this.onControllerDisconnected),t.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(n,t){var e=this.el.getObject3D("mesh");e&&e.mixer&&e.mixer.update(t/1e3)},onControllerConnected:function(n){var t=this.el,e=this.data.hand,i=this.el.getObject3D("mesh");t.object3D.visible=!0;var r=e==="left"?Math.PI/2:-Math.PI/2,a=t.sceneEl.hasWebXR?-Math.PI/2:0;n.detail.name==="pico-controls"&&(a+=Math.PI/4),i.position.set(0,0,0),i.rotation.set(a,0,r)},onControllerDisconnected:function(){this.el.object3D.visible=!1},addEventListeners:function(){var n=this.el;n.addEventListener("gripdown",this.onGripDown),n.addEventListener("gripup",this.onGripUp),n.addEventListener("trackpaddown",this.onTrackpadDown),n.addEventListener("trackpadup",this.onTrackpadUp),n.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),n.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),n.addEventListener("triggerdown",this.onTriggerDown),n.addEventListener("triggerup",this.onTriggerUp),n.addEventListener("triggertouchstart",this.onTriggerTouchStart),n.addEventListener("triggertouchend",this.onTriggerTouchEnd),n.addEventListener("griptouchstart",this.onGripTouchStart),n.addEventListener("griptouchend",this.onGripTouchEnd),n.addEventListener("thumbstickdown",this.onThumbstickDown),n.addEventListener("thumbstickup",this.onThumbstickUp),n.addEventListener("abuttontouchstart",this.onAorXTouchStart),n.addEventListener("abuttontouchend",this.onAorXTouchEnd),n.addEventListener("bbuttontouchstart",this.onBorYTouchStart),n.addEventListener("bbuttontouchend",this.onBorYTouchEnd),n.addEventListener("xbuttontouchstart",this.onAorXTouchStart),n.addEventListener("xbuttontouchend",this.onAorXTouchEnd),n.addEventListener("ybuttontouchstart",this.onBorYTouchStart),n.addEventListener("ybuttontouchend",this.onBorYTouchEnd),n.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),n.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var n=this.el;n.removeEventListener("gripdown",this.onGripDown),n.removeEventListener("gripup",this.onGripUp),n.removeEventListener("trackpaddown",this.onTrackpadDown),n.removeEventListener("trackpadup",this.onTrackpadUp),n.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),n.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),n.removeEventListener("triggerdown",this.onTriggerDown),n.removeEventListener("triggerup",this.onTriggerUp),n.removeEventListener("triggertouchstart",this.onTriggerTouchStart),n.removeEventListener("triggertouchend",this.onTriggerTouchEnd),n.removeEventListener("griptouchstart",this.onGripTouchStart),n.removeEventListener("griptouchend",this.onGripTouchEnd),n.removeEventListener("thumbstickdown",this.onThumbstickDown),n.removeEventListener("thumbstickup",this.onThumbstickUp),n.removeEventListener("abuttontouchstart",this.onAorXTouchStart),n.removeEventListener("abuttontouchend",this.onAorXTouchEnd),n.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),n.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),n.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),n.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),n.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),n.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),n.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),n.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(n){var t,e=this.el,i=this.data.hand,r=this.data.handModelStyle,a=this.data.color,l=this;if(t={hand:i,model:!1},i!==n){var c=l5[r+i.charAt(0).toUpperCase()+i.slice(1)];this.loader.load(c,(function(u){var d=u.scene.children[0];d.mixer=new M.AnimationMixer(d),l.clips=u.animations,e.setObject3D("mesh",d),d.traverse((function(f){f.isMesh&&(f.material.color=new M.Color(a))})),e.setAttribute("magicleap-controls",t),e.setAttribute("vive-controls",t),e.setAttribute("meta-touch-controls",t),e.setAttribute("pico-controls",t),e.setAttribute("windows-motion-controls",t),e.setAttribute("hp-mixed-reality-controls",t)}))}},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(n,t){var e,i=t==="down",r=t==="touchstart";if(t.indexOf("touch")===0){if(r===this.touchedButtons[n])return;this.touchedButtons[n]=r}else{if(i===this.pressedButtons[n])return;this.pressedButtons[n]=i}e=this.gesture,this.gesture=this.determineGesture(),this.gesture!==e&&(this.animateGesture(this.gesture,e),this.emitGestureEvents(this.gesture,e))},determineGesture:function(){var n,t,e,i=this.pressedButtons.grip,r=this.pressedButtons.surface||this.touchedButtons.surface,a=this.pressedButtons.trackpad||this.touchedButtons.trackpad,l=this.pressedButtons.trigger||this.touchedButtons.trigger,c=this.touchedButtons.AorX||this.touchedButtons.BorY;return t=this.el.components["tracked-controls"],(e=t&&t.controller)&&(e.id&&e.id.indexOf("OpenVR ")===0||e.profiles&&e.profiles[0]&&e.profiles[0]==="htc-vive")?i||l?n=Pv:a&&(n=Nv):i?n=r||c||a?l?Pv:Nv:l?I2:"Point + Thumb":l&&(n="Hold"),n},getClip:function(n){var t,e;for(e=0;e<this.clips.length;e++)if((t=this.clips[e]).name===n)return t},animateGesture:function(n,t){n?this.playAnimation(n||"Open",t,!1):this.playAnimation(t,t,!0)},emitGestureEvents:function(n,t){var e,i=this.el;t!==n&&((e=R2(t,!1))&&i.emit(e),(e=R2(n,!0))&&i.emit(e))},playAnimation:function(n,t,e){var i,r,a=this.el.getObject3D("mesh");if(a){if(i=this.getClip(n),r=a.mixer.clipAction(i),e)return r.paused=!1,void(r.timeScale=-1);if(r.clampWhenFinished=!0,r.loop=M.LoopOnce,r.repetitions=0,r.timeScale=1,r.time=0,r.weight=1,!t)return a.mixer.stopAllAction(),void r.play();i=this.getClip(t),r.reset(),r.play(),a.mixer.clipAction(i).crossFadeTo(r,.15,!0)}}}),le("hide-on-enter-ar",{init:function(){var n=this;this.el.sceneEl.addEventListener("enter-vr",(function(){n.el.sceneEl.is("ar-mode")&&(n.el.object3D.visible=!1)})),this.el.sceneEl.addEventListener("exit-vr",(function(){n.el.object3D.visible=!0}))}}),le("hide-on-enter-vr",{init:function(){var n=this;this.el.sceneEl.addEventListener("enter-vr",(function(){n.el.sceneEl.is("vr-mode")&&(n.el.object3D.visible=!1)})),this.el.sceneEl.addEventListener("exit-vr",(function(){n.el.object3D.visible=!0}))}});var L2="hp-mixed-reality",c5=Bn+"controllers/hp/mixed-reality/",u5={x:0,y:0,z:.06},h5={_x:Math.PI/4,_y:0,_z:0,_order:"XYZ"},d5=(le("hp-mixed-reality-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{left:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}},init:function(){var n=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){be(t.detail.id,"down",n,n.data.hand)},this.onButtonUp=function(t){be(t.detail.id,"up",n,n.data.hand)},this.onButtonTouchEnd=function(t){be(t.detail.id,"touchend",n,n.data.hand)},this.onButtonTouchStart=function(t){be(t.detail.id,"touchstart",n,n.data.hand)},this.previousButtonValues={},this.bindMethods()},update:function(){var n=this.data;this.controllerIndex=n.hand==="right"?0:n.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("axismove",this.onAxisMoved),n.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("axismove",this.onAxisMoved),n.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var n=this.data;Ki(this,L2,{index:this.controllerIndex,hand:n.hand})},injectTrackedControls:function(){var n=this.el,t=this.data;n.setAttribute("tracked-controls",{idPrefix:L2,hand:t.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",c5+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(n){var t,e=this.mapping[this.data.hand].buttons[n.detail.id];e&&(e==="trigger"&&(t=n.detail.state.value,console.log("analog value of trigger press: "+t)),this.el.emit(e+"changed",n.detail.state))},onModelLoaded:function(n){var t=n.detail.model;this.data.model&&(t.position.copy(u5),t.rotation.copy(h5),this.el.emit("controllermodelready",{name:"hp-mixed-reality-controls",model:this.data.model,rayOrigin:new M.Vector3(0,0,0)}))},onAxisMoved:function(n){ur(this,this.mapping.axes,n)}}),Ze("components:layer:warn"));function D2(n,t,e){return(t.dot(n)-t.dot(e))/t.length()}le("layer",{schema:{type:{default:"quad",oneOf:["quad","monocubemap","stereocubemap"]},src:{type:"map"},rotateCubemap:{default:!1},width:{default:0},height:{default:0}},init:function(){var n=this.el.sceneEl.renderer.getContext();this.quaternion=new M.Quaternion,this.position=new M.Vector3,this.bindMethods(),this.needsRedraw=!1,this.frameBuffer=n.createFramebuffer();var t=this.el.sceneEl.getAttribute("webxr"),e=t.requiredFeatures;e.indexOf("layers")===-1&&(e.push("layers"),this.el.sceneEl.setAttribute("webxr",t)),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},bindMethods:function(){this.onRequestedReferenceSpace=this.onRequestedReferenceSpace.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this)},update:function(n){this.data.src!==n.src&&this.updateSrc()},updateSrc:function(){var n=this.data.type;this.texture=void 0,n!=="quad"?n!=="monocubemap"&&n!=="stereocubemap"||this.loadCubeMapImages():this.loadQuadImage()},loadCubeMapImages:function(){var n,t=this.xrGLFactory,e=this.el.sceneEl.frame,i=this.data.src,r=this.data.type;this.visibilityChanged=!1,this.layer&&(r!=="monocubemap"&&r!=="stereocubemap"||(i.complete?this.pendingCubeMapUpdate=!1:this.pendingCubeMapUpdate=!0,this.loadingScreen?this.loadingScreen=!1:this.loadingScreen=!0,r==="monocubemap"?(n=t.getSubImage(this.layer,e),this.loadCubeMapImage(n.colorTexture,i,0)):(n=t.getSubImage(this.layer,e,"left"),this.loadCubeMapImage(n.colorTexture,i,0),n=t.getSubImage(this.layer,e,"right"),this.loadCubeMapImage(n.colorTexture,i,6))))},loadQuadImage:function(){var n=this.data.src,t=this;this.el.sceneEl.systems.material.loadTexture(n,{src:n},(function(e){t.el.sceneEl.renderer.initTexture(e),t.texture=e,n.tagName==="VIDEO"&&setTimeout((function(){t.textureIsVideo=!0}),1e3),t.layer&&(t.layer.height=t.data.height/2||t.texture.image.height/1e3,t.layer.width=t.data.width/2||t.texture.image.width/1e3,t.needsRedraw=!0),t.updateQuadPanel()}))},preGenerateCubeMapTextures:function(n,t){this.data.type==="monocubemap"?this.generateCubeMapTextures(n,0,t):(this.generateCubeMapTextures(n,0,t),this.generateCubeMapTextures(n,6,t))},generateCubeMapTextures:function(n,t,e){for(var i,r,a=this.data,l=this.cubeFaceSize,c=Math.min(n.width,n.height),u=[],d=0;d<6;d++){var f=document.createElement("CANVAS");f.width=f.height=l;var A=f.getContext("2d");a.rotateCubemap&&(d!==2&&d!==3||(A.save(),A.translate(l,l),A.rotate(Math.PI))),A.drawImage(n,(d+t)*c,0,c,c,0,0,l,l),A.restore(),e&&e(),u.push(f)}return a.rotateCubemap&&(i=u[0],r=u[1],u[0]=r,u[1]=i,i=u[4],r=u[5],u[4]=r,u[5]=i),e&&e(),u},loadCubeMapImage:function(n,t,e){var i,r=this.el.sceneEl.renderer.getContext();r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.bindTexture(r.TEXTURE_CUBE_MAP,n),i=!t.complete||this.loadingScreen?this.loadingScreenImages:this.generateCubeMapTextures(t,e);var a=0;i.forEach((function(l,c){r.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,0,0,r.RGBA,r.UNSIGNED_BYTE,l),a=r.getError()})),a!==0&&console.log("renderingError, WebGL Error Code: "+a),r.bindTexture(r.TEXTURE_CUBE_MAP,null)},tick:function(){this.el.sceneEl.xrSession&&this.referenceSpace&&(this.layer||!this.el.sceneEl.is("vr-mode")&&!this.el.sceneEl.is("ar-mode")||this.initLayer(),this.updateTransform(),this.data.src.complete&&(this.pendingCubeMapUpdate||this.loadingScreen||this.visibilityChanged)&&this.loadCubeMapImages(),(this.needsRedraw||this.layer.needsRedraw||this.textureIsVideo)&&(this.data.type==="quad"&&this.draw(),this.needsRedraw=!1))},initLayer:function(){var n=this,t=this.data.type;this.el.sceneEl.xrSession.onvisibilitychange=function(e){n.visibilityChanged=e.session.visibilityState!=="hidden"},t!=="quad"?t!=="monocubemap"&&t!=="stereocubemap"||this.initCubeMapLayer():this.initQuadLayer()},initQuadLayer:function(){var n=this.el.sceneEl,t=n.renderer.getContext(),e=this.xrGLFactory=new XRWebGLBinding(n.xrSession,t);this.texture&&(this.layer=e.createQuadLayer({space:this.referenceSpace,viewPixelHeight:2048,viewPixelWidth:2048,height:this.data.height/2||this.texture.image.height/1e3,width:this.data.width/2||this.texture.image.width/1e3}),this.initLoadingScreenImages(),n.renderer.xr.addLayer(this.layer))},initCubeMapLayer:function(){var n=this.data.src,t=this.el.sceneEl,e=t.renderer.getContext(),i=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),r=this.cubeFaceSize=Math.min(i,Math.min(n.width,n.height)),a=this.xrGLFactory=new XRWebGLBinding(t.xrSession,e);this.layer=a.createCubeLayer({space:this.referenceSpace,viewPixelWidth:r,viewPixelHeight:r,layout:this.data.type==="monocubemap"?"mono":"stereo",isStatic:!1}),this.initLoadingScreenImages(),this.loadCubeMapImages(),t.renderer.xr.addLayer(this.layer)},initLoadingScreenImages:function(){for(var n=this.cubeFaceSize,t=this.loadingScreenImages=[],e=0;e<6;e++){var i=document.createElement("CANVAS");i.width=i.height=n;var r=i.getContext("2d");i.width=i.height=n,r.fillStyle="black",r.fillRect(0,0,n,n),e!==2&&e!==3&&(r.translate(n,0),r.scale(-1,1),r.fillStyle="white",r.font="30px Arial",r.fillText("Loading",n/2,n/2)),t.push(i)}},destroyLayer:function(){this.layer&&(this.el.sceneEl.renderer.xr.removeLayer(this.layer),this.layer.destroy(),this.layer=void 0)},toggleCompositorLayer:function(){this.enableCompositorLayer(!this.layerEnabled)},enableCompositorLayer:function(n){this.layerEnabled=n,this.quadPanelEl.object3D.visible=!this.layerEnabled},updateQuadPanel:function(){var n=this.quadPanelEl;this.quadPanelEl||(n=this.quadPanelEl=document.createElement("a-entity"),this.el.appendChild(n)),n.setAttribute("material",{shader:"flat",src:this.data.src,transparent:!0}),n.setAttribute("geometry",{primitive:"plane",height:this.data.height||this.texture.image.height/1e3,width:this.data.width||this.texture.image.height/1e3})},draw:function(){var n=this.el.sceneEl,t=this.el.sceneEl.renderer.getContext(),e=this.xrGLFactory.getSubImage(this.layer,n.frame),i=n.renderer.properties.get(this.texture).__webglTexture,r=t.getParameter(t.FRAMEBUFFER_BINDING);t.viewport(e.viewport.x,e.viewport.y,e.viewport.width,e.viewport.height),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.colorTexture,0),(function(a,l,c,u){var d=a.createFramebuffer(),f=c.viewport.x,A=c.viewport.y,m=c.viewport.x+c.viewport.width,g=c.viewport.y+c.viewport.height;u.tagName==="VIDEO"&&(a.bindTexture(a.TEXTURE_2D,l),a.texSubImage2D(a.TEXTURE_2D,0,0,0,u.width,u.height,a.RGB,a.UNSIGNED_BYTE,u)),a.bindFramebuffer(a.READ_FRAMEBUFFER,d),a.framebufferTexture2D(a.READ_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,l,0),a.readBuffer(a.COLOR_ATTACHMENT0),a.blitFramebuffer(0,0,u.width,u.height,f,A,m,g,a.COLOR_BUFFER_BIT,a.NEAREST),a.bindFramebuffer(a.READ_FRAMEBUFFER,null),a.deleteFramebuffer(d)})(t,i,e,this.data.src),t.bindFramebuffer(t.FRAMEBUFFER,r)},updateTransform:function(){var n=this.el,t=this.position,e=this.quaternion;n.object3D.updateMatrixWorld(),t.setFromMatrixPosition(n.object3D.matrixWorld),e.setFromRotationMatrix(n.object3D.matrixWorld),this.layerEnabled||t.set(0,0,1e8),this.layer.transform=new XRRigidTransform(t,e)},onEnterVR:function(){var n=this.el.sceneEl,t=n.xrSession;n.hasWebXR&&XRWebGLBinding&&t?(t.requestReferenceSpace("local-floor").then(this.onRequestedReferenceSpace),this.layerEnabled=!0,this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!1),this.data.src.play&&this.data.src.play()):d5("The layer component requires WebXR and the layers API enabled")},onExitVR:function(){this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!0),this.destroyLayer()},onRequestedReferenceSpace:function(n){this.referenceSpace=n}}),le("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var n=this.config,t=this.data,e=this.el,i=this,r={hand:t.hand,model:t.model};function a(l){var c=n[l.detail.name];if(c){var u=Ui({showLine:!0},c.raycaster||{});l.detail.rayOrigin&&(u.origin=l.detail.rayOrigin.origin,u.direction=l.detail.rayOrigin.direction,u.showLine=!0),l.detail.rayOrigin||!i.modelReady?e.setAttribute("raycaster",u):e.setAttribute("raycaster","showLine",!0),e.setAttribute("cursor",Ui({fuse:!1},c.cursor))}}e.setAttribute("hp-mixed-reality-controls",r),e.setAttribute("magicleap-controls",r),e.setAttribute("oculus-go-controls",r),e.setAttribute("meta-touch-controls",r),e.setAttribute("pico-controls",r),e.setAttribute("valve-index-controls",r),e.setAttribute("vive-controls",r),e.setAttribute("vive-focus-controls",r),e.setAttribute("windows-motion-controls",r),e.setAttribute("generic-tracked-controller-controls",{hand:r.hand}),e.addEventListener("controllerconnected",a),e.addEventListener("controllerdisconnected",(function(l){n[l.detail.name]&&e.setAttribute("raycaster","showLine",!1)})),e.addEventListener("controllermodelready",(function(l){a(l),i.modelReady=!0}))},config:{"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"hp-mixed-reality-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"magicleap-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"meta-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"pico-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"valve-index-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}});var Fv,Gf,Hf,Vf,ys,U2,kv,_u,wu,qf,O2=M.MathUtils.degToRad,f5=Ze("components:light:warn"),p5=new M.CubeTextureLoader,yo={};function N2(n,t){return!(!n||!t)&&n.x===t.x&&n.y===t.y&&n.z===t.z}le("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color",if:{type:["ambient","directional","hemisphere","point","spot"]}},envMap:{default:"",if:{type:["probe"]}},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:3.14,min:0,if:{type:["ambient","directional","hemisphere","point","spot","probe"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot","probe"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowCameraAutomatic:{default:"",if:{type:["directional"]}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var n=this.el;this.light=null,this.defaultTarget=null,this.system.registerLight(n)},update:function(n){var t=this.data,e=DT(t,n),i=this.light,r=this;if(!i||"type"in e)this.setLight(this.data),this.updateShadow();else{var a=!1;Object.keys(e).forEach((function(l){var c=t[l];switch(l){case"color":i.color.set(c);break;case"groundColor":i.groundColor.set(c);break;case"angle":i.angle=O2(c);break;case"target":c===null?t.type!=="spot"&&t.type!=="directional"||(i.target=r.defaultTarget):c.hasLoaded?r.onSetTarget(c,i):c.addEventListener("loaded",r.onSetTarget.bind(r,c,i));break;case"envMap":r.updateProbeMap(t,i);break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":a||(r.updateShadow(),a=!0);break;case"shadowCameraAutomatic":t.shadowCameraAutomatic?r.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(t.shadowCameraAutomatic)):r.shadowCameraAutomaticEls=[];break;default:i[l]=c}}))}},tick:(Fv=new M.Box3,Gf=new M.Vector3,Hf=new M.Vector3,Vf=new M.Matrix4,ys=new M.Sphere,U2=new M.Vector3,function(){if(this.data.type==="directional"&&this.light.shadow&&this.light.shadow.camera instanceof M.OrthographicCamera&&this.shadowCameraAutomaticEls.length){var n=this.light.shadow.camera;n.getWorldDirection(Gf),n.getWorldPosition(Hf),Vf.copy(n.matrixWorld),Vf.invert(),n.near=1,n.left=1e5,n.right=-1e5,n.top=-1e5,n.bottom=1e5,this.shadowCameraAutomaticEls.forEach((function(t){Fv.setFromObject(t.object3D),Fv.getBoundingSphere(ys);var e,i,r,a,l,c=D2(Hf,Gf,ys.center),u=(e=Hf,i=Gf,r=ys.center,a=U2,l=D2(e,i,r),a.copy(i),a.multiplyScalar(l),a.add(r),a).applyMatrix4(Vf);n.near=Math.min(-c-ys.radius-1,n.near),n.left=Math.min(-ys.radius+u.x,n.left),n.right=Math.max(ys.radius+u.x,n.right),n.top=Math.max(ys.radius+u.y,n.top),n.bottom=Math.min(-ys.radius+u.y,n.bottom)})),n.updateProjectionMatrix()}}),setLight:function(n){var t=this.el,e=this.getLight(n);e&&(this.light&&t.removeObject3D("light"),this.light=e,this.light.el=t,t.setObject3D("light",this.light),n.type!=="spot"&&n.type!=="directional"&&n.type!=="hemisphere"||t.getObject3D("light").translateY(-1),n.type==="spot"&&(t.setObject3D("light-target",this.defaultTarget),t.getObject3D("light-target").position.set(0,0,-1)),n.shadowCameraAutomatic?this.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(n.shadowCameraAutomatic)):this.shadowCameraAutomaticEls=[])},updateShadow:function(){var n=this.el,t=this.data,e=this.light;e.castShadow=t.castShadow;var i=n.getObject3D("cameraHelper");if(t.shadowCameraVisible&&!i?(i=new M.CameraHelper(e.shadow.camera),n.setObject3D("cameraHelper",i)):!t.shadowCameraVisible&&i&&n.removeObject3D("cameraHelper"),!t.castShadow)return e;e.shadow.bias=t.shadowBias,e.shadow.radius=t.shadowRadius,e.shadow.mapSize.height=t.shadowMapHeight,e.shadow.mapSize.width=t.shadowMapWidth,e.shadow.camera.near=t.shadowCameraNear,e.shadow.camera.far=t.shadowCameraFar,e.shadow.camera instanceof M.OrthographicCamera?(e.shadow.camera.top=t.shadowCameraTop,e.shadow.camera.right=t.shadowCameraRight,e.shadow.camera.bottom=t.shadowCameraBottom,e.shadow.camera.left=t.shadowCameraLeft):e.shadow.camera.fov=t.shadowCameraFov,e.shadow.camera.updateProjectionMatrix(),i&&i.update()},getLight:function(n){var t=n.angle,e=new M.Color(n.color);e=e.getHex();var i=n.decay,r=n.distance,a=new M.Color(n.groundColor);a=a.getHex();var l=n.intensity,c=n.type,u=n.target,d=null;switch(c.toLowerCase()){case"ambient":return new M.AmbientLight(e,l);case"directional":return d=new M.DirectionalLight(e,l),this.defaultTarget=d.target,u&&(u.hasLoaded?this.onSetTarget(u,d):u.addEventListener("loaded",this.onSetTarget.bind(this,u,d))),d;case"hemisphere":return new M.HemisphereLight(e,a,l);case"point":return new M.PointLight(e,l,r,i);case"spot":return d=new M.SpotLight(e,l,r,O2(t),n.penumbra,i),this.defaultTarget=d.target,u&&(u.hasLoaded?this.onSetTarget(u,d):u.addEventListener("loaded",this.onSetTarget.bind(this,u,d))),d;case"probe":return d=new M.LightProbe,this.updateProbeMap(n,d),d;default:f5("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",c)}},updateProbeMap:function(n,t){n.envMap?(yo[n.envMap]===void 0&&(yo[n.envMap]=new window.Promise((function(e){ST(n.envMap,(function(i){p5.load(i,(function(r){var a=AT.fromCubeTexture(r);yo[n.envMap]=a,e(a)}))}))}))),yo[n.envMap]instanceof window.Promise?yo[n.envMap].then((function(e){t.copy(e)})):yo[n.envMap]instanceof M.LightProbe&&t.copy(yo[n.envMap])):t.copy(new M.LightProbe)},onSetTarget:function(n,t){t.target=n.object3D},remove:function(){var n=this.el;n.removeObject3D("light"),n.getObject3D("cameraHelper")&&n.removeObject3D("cameraHelper")}}),le("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var n,t,e=this.data;t=this.material=new M.LineBasicMaterial({color:e.color,opacity:e.opacity,transparent:e.opacity<1,visible:e.visible}),(n=this.geometry=new M.BufferGeometry).setAttribute("position",new M.BufferAttribute(new Float32Array(6),3)),this.line=new M.Line(n,t),this.el.setObject3D(this.attrName,this.line)},update:function(n){var t=this.data,e=this.geometry,i=!1,r=this.material,a=e.attributes.position.array;N2(t.start,n.start)||(a[0]=t.start.x,a[1]=t.start.y,a[2]=t.start.z,i=!0),N2(t.end,n.end)||(a[3]=t.end.x,a[4]=t.end.y,a[5]=t.end.z,i=!0),i&&(e.attributes.position.needsUpdate=!0,e.computeBoundingSphere()),r.color.setStyle(t.color),r.opacity=t.opacity,r.transparent=t.opacity<1,r.visible=t.visible},remove:function(){this.el.removeObject3D(this.attrName,this.line)}}),le("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new M.Quaternion,this.hiddenEls=[]},update:function(n){var t,e,i=this.data,r=this.el;if(i.visualAspectEnabled){var a=this.el.getAttribute("scale");this.previewDistance=15*(a.x+a.y)/2,this.initVisualAspect(),t=i.highlighted?i.highlightedColor:i.backgroundColor,e=i.highlighted?i.highlightedColor:i.borderColor,r.setAttribute("material","backgroundColor",t),r.setAttribute("material","strokeColor",e),i.on!==n.on&&this.updateEventListener(),n.peekMode!==void 0&&i.peekMode!==n.peekMode&&this.updatePeekMode(),i.image&&n.image!==i.image&&r.setAttribute("material","pano",typeof i.image=="string"?i.image:i.image.src)}},updatePeekMode:function(){var n=this.el,t=this.sphereEl;this.data.peekMode?(this.hideAll(),n.getObject3D("mesh").visible=!1,t.setAttribute("visible",!0)):(this.showAll(),n.getObject3D("mesh").visible=!0,t.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var n=this.el;n.isPlaying&&(this.removeEventListener(),n.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var n=this.data.on;n&&this.el.removeEventListener(n,this.navigate)},initVisualAspect:function(){var n,t,e,i=this.el;this.data.visualAspectEnabled&&!this.visualAspectInitialized&&(e=this.textEl=this.textEl||document.createElement("a-entity"),t=this.sphereEl=this.sphereEl||document.createElement("a-entity"),n=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),i.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),i.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double",previewDistance:this.previewDistance}),e.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),e.setAttribute("position","0 1.5 0"),i.appendChild(e),n.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),n.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back",previewDistance:this.previewDistance}),n.setAttribute("rotation","0 180 0"),n.setAttribute("position","0 0 0"),n.setAttribute("visible",!1),i.appendChild(n),t.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),t.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back",previewDistance:this.previewDistance}),t.setAttribute("visible",!1),i.appendChild(t),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:(function(){var n=new M.Vector3,t=new M.Vector3,e=new M.Quaternion,i=new M.Vector3;return function(){var r,a,l=this.el,c=l.object3D,u=l.sceneEl.camera,d=this.textEl;if(this.data.visualAspectEnabled)if(c.updateMatrixWorld(),u.parent.updateMatrixWorld(),u.updateMatrixWorld(),c.matrix.decompose(t,e,i),t.setFromMatrixPosition(c.matrixWorld),n.setFromMatrixPosition(u.matrixWorld),(a=t.distanceTo(n))>1.33333*this.previewDistance)this.previousQuaternion||(this.quaternionClone.copy(e),this.previousQuaternion=this.quaternionClone),c.lookAt(n);else{if(r=this.calculateCameraPortalOrientation(),a<.5){if(this.semiSphereEl.getAttribute("visible")===!0)return;d.setAttribute("text","width",1.5),r<=0?(d.setAttribute("position","0 0 0.75"),d.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(d.setAttribute("position","0 0 -0.75"),d.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),l.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=r}else r<=0?d.setAttribute("rotation","0 180 0"):d.setAttribute("rotation","0 0 0"),d.setAttribute("text","width",5),d.setAttribute("position","0 1.5 0"),l.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(c.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}})(),hideAll:function(){var n=this.el,t=this.hiddenEls,e=this;t.length>0||n.sceneEl.object3D.traverse((function(i){i&&i.el&&i.el.hasAttribute("link-controls")||i.el&&i!==n.sceneEl.object3D&&i.el!==n&&i.el!==e.sphereEl&&i.el!==n.sceneEl.cameraEl&&i.el.getAttribute("visible")!==!1&&i.el!==e.textEl&&i.el!==e.semiSphereEl&&(i.el.setAttribute("visible",!1),t.push(i.el))}))},showAll:function(){this.hiddenEls.forEach((function(n){n.setAttribute("visible",!0)})),this.hiddenEls=[]},calculateCameraPortalOrientation:(kv=new M.Matrix4,_u=new M.Vector3,wu=new M.Vector3(0,0,1),qf=new M.Vector3(0,0,0),function(){var n=this.el,t=n.sceneEl.camera;return _u.set(0,0,0),wu.set(0,0,1),qf.set(0,0,0),n.object3D.matrixWorld.extractRotation(kv),wu.applyMatrix4(kv),n.object3D.updateMatrixWorld(),n.object3D.localToWorld(qf),t.parent.parent.updateMatrixWorld(),t.parent.updateMatrixWorld(),t.updateMatrixWorld(),t.localToWorld(_u),_u.sub(qf).normalize(),wu.normalize(),Math.sign(wu.dot(_u))}),remove:function(){this.removeEventListener()}}),Ca("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"},previewDistance:{default:15,type:"float",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join(`
`),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","uniform float previewDistance;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / previewDistance), 2.0), 0.0, 1.0));","}","}"].join(`
`)});var P2="logitech-mx-ink",A5=Bn+"controllers/logitech/",F2=(le("logitech-mx-ink-controls",{schema:{hand:{default:"left"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{left:{buttons:["front","back","none","none","none","tip"]},right:{buttons:["front","back","none","none","none","tip"]}},init:function(){var n=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){be(t.detail.id,"down",n,n.data.hand)},this.onButtonUp=function(t){be(t.detail.id,"up",n,n.data.hand)},this.onButtonTouchEnd=function(t){be(t.detail.id,"touchend",n,n.data.hand)},this.onButtonTouchStart=function(t){be(t.detail.id,"touchstart",n,n.data.hand)},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("axismove",this.onAxisMoved),n.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("axismove",this.onAxisMoved),n.removeEventListener("model-loaded",this.onModelLoaded),n.sceneEl.removeEventListener("enter-vr",this.onEnterVR),n.sceneEl.removeEventListener("exit-vr",this.onExitVR),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var n=this.controllerObject3D;n&&(n.visible=!1),Ki(this,P2,{hand:this.data.hand,iterateControllerProfiles:!0})},injectTrackedControls:function(){var n=this.el,t=this.data,e=P2;n.setAttribute("tracked-controls",{id:e,hand:t.hand,handTrackingEnabled:!1,iterateControllerProfiles:!0,orientationOffset:t.orientationOffset}),this.loadModel()},loadModel:function(){var n=this.controllerObject3D;if(this.data.model)return n?(n.visible=this.el.sceneEl.is("vr-mode"),void this.el.setObject3D("mesh",n)):void this.el.setAttribute("gltf-model",A5+"logitech-mx-ink.glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(n){var t,e=this.mapping[this.data.hand].buttons[n.detail.id];e&&(e==="trigger"&&(t=n.detail.state.value,console.log("analog value of trigger press: "+t)),this.el.emit(e+"changed",n.detail.state))},onModelLoaded:function(n){n.target===this.el&&this.data.model&&(this.el.emit("controllermodelready",{name:"logitech-mx-ink-controls",model:this.data.model,rayOrigin:new M.Vector3(0,0,0)}),this.controllerObject3D=this.el.getObject3D("mesh"),this.controllerObject3D.visible=this.el.sceneEl.is("vr-mode"))},onAxisMoved:function(n){ur(this,this.mapping.axes,n)}}),Math.PI/2),k2=(le("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},magicWindowTrackingEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0},mouseEnabled:{default:!0}},init:function(){this.deltaYaw=0,this.previousHMDPosition=new M.Vector3,this.hmdQuaternion=new M.Quaternion,this.magicWindowAbsoluteEuler=new M.Euler,this.magicWindowDeltaEuler=new M.Euler,this.position=new M.Vector3,this.magicWindowObject=new M.Object3D,this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.previousMouseEvent={},this.setupMagicWindowControls(),this.savedPose={position:new M.Vector3,rotation:new M.Euler},(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.onEnterVR()},setupMagicWindowControls:function(){var n,t=this.data;(Ia()||zE())&&(n=this.magicWindowControls=new mT(this.magicWindowObject),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission&&(n.enabled=!1,this.el.sceneEl.components["device-orientation-permission-ui"].permissionGranted?n.enabled=t.magicWindowTrackingEnabled:this.el.sceneEl.addEventListener("deviceorientationpermissiongranted",(function(){n.enabled=t.magicWindowTrackingEnabled}))))},update:function(n){var t=this.data;t.enabled!==n.enabled&&this.updateGrabCursor(t.enabled),n&&!t.magicWindowTrackingEnabled&&n.magicWindowTrackingEnabled&&(this.magicWindowAbsoluteEuler.set(0,0,0),this.magicWindowDeltaEuler.set(0,0,0)),this.magicWindowControls&&(this.magicWindowControls.enabled=t.magicWindowTrackingEnabled),n&&!t.pointerLockEnabled!==n.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(n){this.data.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this),this.onPointerLockError=this.onPointerLockError.bind(this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new M.Object3D,this.yawObject=new M.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var n=this.el.sceneEl,t=n.canvas;t?(t.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),t.addEventListener("touchstart",this.onTouchStart,{passive:!0}),window.addEventListener("touchmove",this.onTouchMove,{passive:!0}),window.addEventListener("touchend",this.onTouchEnd,{passive:!0}),n.addEventListener("enter-vr",this.onEnterVR),n.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))):n.addEventListener("render-target-loaded",this.addEventListeners.bind(this))},removeEventListeners:function(){var n=this.el.sceneEl,t=n&&n.canvas;t&&(t.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),n.removeEventListener("enter-vr",this.onEnterVR),n.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var n=this.el.object3D,t=this.pitchObject,e=this.yawObject,i=this.el.sceneEl;(i.is("vr-mode")||i.is("ar-mode"))&&i.checkHeadsetConnected()||(this.updateMagicWindowOrientation(),n.rotation.x=this.magicWindowDeltaEuler.x+t.rotation.x,n.rotation.y=this.magicWindowDeltaEuler.y+e.rotation.y,n.rotation.z=this.magicWindowDeltaEuler.z)},updateMagicWindowOrientation:function(){var n=this.magicWindowAbsoluteEuler,t=this.magicWindowDeltaEuler;this.magicWindowControls&&this.magicWindowControls.enabled&&(this.magicWindowControls.update(),n.setFromQuaternion(this.magicWindowObject.quaternion,"YXZ"),this.previousMagicWindowYaw||n.y===0||(this.previousMagicWindowYaw=n.y),this.previousMagicWindowYaw&&(t.x=n.x,t.y+=n.y-this.previousMagicWindowYaw,t.z=n.z,this.previousMagicWindowYaw=n.y))},onMouseMove:function(n){var t,e,i,r=this.pitchObject,a=this.previousMouseEvent,l=this.yawObject;this.data.enabled&&(this.mouseDown||this.pointerLocked)&&(this.pointerLocked?(e=n.movementX||n.mozMovementX||0,i=n.movementY||n.mozMovementY||0):(e=n.screenX-a.screenX,i=n.screenY-a.screenY),this.previousMouseEvent.screenX=n.screenX,this.previousMouseEvent.screenY=n.screenY,t=this.data.reverseMouseDrag?1:-1,l.rotation.y+=.002*e*t,r.rotation.x+=.002*i*t,r.rotation.x=Math.max(-F2,Math.min(F2,r.rotation.x)))},onMouseDown:function(n){var t=this.el.sceneEl;if(this.data.enabled&&this.data.mouseEnabled&&(!t.is("vr-mode")&&!t.is("ar-mode")||!t.checkHeadsetConnected())&&n.button===0){var e=t&&t.canvas;this.mouseDown=!0,this.previousMouseEvent.screenX=n.screenX,this.previousMouseEvent.screenY=n.screenY,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(e.requestPointerLock?e.requestPointerLock():e.mozRequestPointerLock&&e.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(n){n.touches.length!==1||!this.data.touchEnabled||this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode")||(this.touchStart={x:n.touches[0].pageX,y:n.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(n){var t,e,i=this.el.sceneEl.canvas,r=this.yawObject;this.touchStarted&&this.data.touchEnabled&&(e=2*Math.PI*(n.touches[0].pageX-this.touchStart.x)/i.clientWidth,t=this.data.reverseTouchDrag?1:-1,r.rotation.y-=.5*e*t,this.touchStart={x:n.touches[0].pageX,y:n.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){var n=this.el.sceneEl;n.checkHeadsetConnected()&&(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),n.hasWebXR&&(this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix()))},onExitVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0),this.el.object3D.matrixAutoUpdate=!0)},onPointerLockChange:function(){this.pointerLocked=!(!document.pointerLockElement&&!document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(n){var t=this.el.sceneEl;function e(){t.canvas.classList.add("a-grab-cursor")}function i(){t.canvas.classList.remove("a-grab-cursor")}t.canvas?n?e():i():n?t.addEventListener("render-target-loaded",e):t.addEventListener("render-target-loaded",i)},saveCameraPose:function(){var n=this.el;this.savedPose.position.copy(n.object3D.position),this.savedPose.rotation.copy(n.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var n=this.el,t=this.savedPose;this.hasSavedPose&&(n.object3D.position.copy(t.position),n.object3D.rotation.copy(t.rotation),this.hasSavedPose=!1)}}),"magicleap-one"),m5=Bn+"controllers/magicleap/magicleap-one-controller.glb",g5=(le("magicleap-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","menu"]},init:function(){var n=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){be(t.detail.id,"down",n)},this.onButtonUp=function(t){be(t.detail.id,"up",n)},this.onButtonTouchEnd=function(t){be(t.detail.id,"touchend",n)},this.onButtonTouchStart=function(t){be(t.detail.id,"touchstart",n)},this.previousButtonValues={},this.bindMethods()},update:function(){var n=this.data;this.controllerIndex=n.hand==="right"?0:n.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("axismove",this.onAxisMoved),n.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("axismove",this.onAxisMoved),n.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var n=this.data;Ki(this,k2,{index:this.controllerIndex,hand:n.hand})},injectTrackedControls:function(){var n=this.el,t=this.data;n.setAttribute("tracked-controls",{idPrefix:k2,hand:t.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",m5)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(n){var t,e=this.mapping.buttons[n.detail.id];e&&(e==="trigger"&&(t=n.detail.state.value,console.log("analog value of trigger press: "+t)),this.el.emit(e+"changed",n.detail.state))},onModelLoaded:function(n){n.detail.model.scale.set(.01,.01,.01)},onAxisMoved:function(n){ur(this,this.mapping.axes,n)},updateModel:function(n,t){},setButtonColor:function(n,t){}}),Ze("components:material:error"));function Q2(n,t){n.dispose(),t.unregisterMaterial(n),Object.keys(n).filter((function(e){return n[e]&&n[e].isTexture})).forEach((function(e){n[e].dispose()}))}le("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:WT,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColorsEnabled:{default:!1},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]},dithering:{default:!0},anisotropy:{default:0,min:0}},init:function(){this.material=null},update:function(n){var t=this.data;this.shader&&t.shader===n.shader||this.updateShader(t.shader),this.shader.update(this.data),this.updateMaterial(n)},updateSchema:function(n){var t,e,i,r;e=n&&n.shader,t=this.oldData&&this.oldData.shader,(i=Hr[r=e||t]&&Hr[r].schema)||g5("Unknown shader schema "+r),t&&e===t||(this.extendSchema(i),this.updateBehavior())},updateBehavior:function(){var n,t,e=this.el.sceneEl,i=this.schema,r=this;function a(l,c){var u;for(u in t)t[u]=l;r.shader.update(t)}for(n in this.tick=void 0,t={},i)i[n].type==="time"&&(this.tick=a,t[n]=!0);e&&(this.tick?e.addBehavior(this):e.removeBehavior(this))},updateShader:function(n){var t,e=this.data,i=Hr[n]&&Hr[n].Shader;if(!i)throw new Error("Unknown shader "+n);(t=this.shader=new i).el=this.el,t.init(e),this.setMaterial(t.material),this.updateSchema(e)},updateMaterial:function(n){var t,e=this.data,i=this.material;for(t in i.alphaTest=e.alphaTest,i.depthTest=e.depthTest!==!1,i.depthWrite=e.depthWrite!==!1,i.opacity=e.opacity,i.flatShading=e.flatShading,i.side=(function(r){switch(r){case"back":return M.BackSide;case"double":return M.DoubleSide;default:return M.FrontSide}})(e.side),i.transparent=e.transparent!==!1||e.opacity<1,i.vertexColors=e.vertexColorsEnabled,i.visible=e.visible,i.blending=(function(r){switch(r){case"none":return M.NoBlending;case"additive":return M.AdditiveBlending;case"subtractive":return M.SubtractiveBlending;case"multiply":return M.MultiplyBlending;default:return M.NormalBlending}})(e.blending),i.dithering=e.dithering,n)break;!t||n.alphaTest===e.alphaTest&&n.side===e.side&&n.vertexColorsEnabled===e.vertexColorsEnabled||(i.needsUpdate=!0)},remove:function(){var n=new M.MeshBasicMaterial,t=this.material,e=this.el.getObject3D("mesh");e&&(e.material=n),Q2(t,this.system)},setMaterial:function(n){var t,e=this.el,i=this.system;this.material&&Q2(this.material,i),this.material=n,i.registerMaterial(n),(t=e.getObject3D("mesh"))?t.material=n:e.addEventListener("object3dset",(function r(a){a.detail.type==="mesh"&&a.target===e&&(e.getObject3D("mesh").material=n,e.removeEventListener("object3dset",r))}))}});var Wf,jf,Qv,z2,zv,G2="oculus-touch",tc=Bn+"controllers/oculus/oculus-touch-controller-",Xf=Bn+"controllers/meta/",v5={left:{modelUrl:tc+"left.gltf",rayOrigin:{origin:{x:.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new M.Vector3(-.005,.036,-.037),modelPivotRotation:new M.Euler(Math.PI/4.5,0,0)},right:{modelUrl:tc+"right.gltf",rayOrigin:{origin:{x:-.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new M.Vector3(.005,.036,-.037),modelPivotRotation:new M.Euler(Math.PI/4.5,0,0)}},H2="oculus-touch",Eo={"oculus-touch":v5,"oculus-touch-v2":{left:{modelUrl:tc+"gen2-left.gltf",rayOrigin:{origin:{x:-.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new M.Vector3(0,-.007,-.021),modelPivotRotation:new M.Euler(-Math.PI/4,0,0)},right:{modelUrl:tc+"gen2-right.gltf",rayOrigin:{origin:{x:.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new M.Vector3(0,-.007,-.021),modelPivotRotation:new M.Euler(-Math.PI/4,0,0)}},"oculus-touch-v3":{left:{modelUrl:tc+"v3-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new M.Vector3(0,0,0),modelPivotRotation:new M.Euler(0,0,0)},right:{modelUrl:tc+"v3-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new M.Vector3(0,0,0),modelPivotRotation:new M.Euler(0,0,0)}},"meta-quest-touch-pro":{left:{modelUrl:Xf+"quest-touch-pro-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new M.Vector3(0,0,0),modelPivotRotation:new M.Euler(0,0,0)},right:{modelUrl:Xf+"quest-touch-pro-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new M.Vector3(0,0,0),modelPivotRotation:new M.Euler(0,0,0)}},"meta-quest-touch-plus":{left:{modelUrl:Xf+"quest-touch-plus-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new M.Vector3(0,0,0),modelPivotRotation:new M.Euler(0,0,0)},right:{modelUrl:Xf+"quest-touch-plus-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new M.Vector3(0,0,0),modelPivotRotation:new M.Euler(0,0,0)}}},V2={schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},controllerType:{default:"auto",oneOf:["auto","oculus-touch","oculus-touch-v2","oculus-touch-v3"]}},after:["tracked-controls"],mapping:{left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton","surface"]}},bindMethods:function(){this.onButtonChanged=this.onButtonChanged.bind(this),this.onThumbstickMoved=this.onThumbstickMoved.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var n=this;this.onButtonDown=function(t){be(t.detail.id,"down",n,n.data.hand)},this.onButtonUp=function(t){be(t.detail.id,"up",n,n.data.hand)},this.onButtonTouchStart=function(t){be(t.detail.id,"touchstart",n,n.data.hand)},this.onButtonTouchEnd=function(t){be(t.detail.id,"touchend",n,n.data.hand)},this.controllerPresent=!1,this.previousButtonValues={},this.bindMethods(),this.triggerEuler=new M.Euler},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("axismove",this.onAxisMoved),n.addEventListener("model-loaded",this.onModelLoaded),n.addEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("axismove",this.onAxisMoved),n.removeEventListener("model-loaded",this.onModelLoaded),n.removeEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var n=this.controllerObject3D;n&&(n.visible=!1),Ki(this,G2,{hand:this.data.hand,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(n){var t,e=this.data;if(e.model){if(this.controllerObject3D)return this.controllerObject3D.visible=!0,void this.el.setObject3D("mesh",this.controllerObject3D);if(this.displayModel=Eo[e.controllerType]||Eo[H2],e.controllerType==="auto"){t=H2;for(var i=Object.keys(Eo),r=0;r<n.profiles.length;r++)if(i.indexOf(n.profiles[r])!==-1){t=n.profiles[r];break}this.displayModel=Eo[t]}var a=this.displayModel[e.hand].modelUrl;this.isTouchV3orPROorPlus=this.displayModel===Eo["oculus-touch-v3"]||this.displayModel===Eo["meta-quest-touch-pro"]||this.displayModel===Eo["meta-quest-touch-plus"],this.el.setAttribute("gltf-model",a)}},injectTrackedControls:function(n){var t=this.data,e=G2;this.el.setAttribute("tracked-controls",{id:e,hand:t.hand,handTrackingEnabled:!1,iterateControllerProfiles:!0}),this.loadModel(n)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(n){var t=this.mapping[this.data.hand].buttons[n.detail.id];if(t){if(this.isTouchV3orPROorPlus)this.onButtonChangedV3orPROorPlus(n);else{var e,i=this.buttonMeshes;t!=="trigger"&&t!=="grip"||(e=n.detail.state.value),i&&(t==="trigger"&&i.trigger&&(i.trigger.rotation.x=this.originalXRotationTrigger-e*(Math.PI/26)),t==="grip"&&i.grip&&(e*=this.data.hand==="left"?-1:1,i.grip.position.x=this.originalXPositionGrip+.004*e))}this.el.emit(t+"changed",n.detail.state)}},onButtonChangedV3orPROorPlus:function(n){var t,e=this.mapping[this.data.hand].buttons[n.detail.id],i=this.buttonObjects;i&&i[e]&&(t=n.detail.state.value,i[e].quaternion.slerpQuaternions(this.buttonRanges[e].min.quaternion,this.buttonRanges[e].max.quaternion,t),i[e].position.lerpVectors(this.buttonRanges[e].min.position,this.buttonRanges[e].max.position,t))},onModelLoaded:function(n){if(n.target===this.el&&this.data.model){if(this.isTouchV3orPROorPlus)this.onTouchV3orPROorPlusModelLoaded(n);else{var t,e=this.controllerObject3D=n.detail.model;(t=this.buttonMeshes={}).grip=e.getObjectByName("buttonHand"),this.originalXPositionGrip=t.grip&&t.grip.position.x,t.trigger=e.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=t.trigger&&t.trigger.rotation.x,t.thumbstick=e.getObjectByName("stick"),t.xbutton=e.getObjectByName("buttonX"),t.abutton=e.getObjectByName("buttonA"),t.ybutton=e.getObjectByName("buttonY"),t.bbutton=e.getObjectByName("buttonB")}for(var i in this.buttonMeshes)this.buttonMeshes[i]&&y5(this.buttonMeshes[i]);this.applyOffset(n.detail.model),this.el.emit("controllermodelready",{name:"meta-touch-controls",model:this.data.model,rayOrigin:this.displayModel[this.data.hand].rayOrigin})}},applyOffset:function(n){n.position.copy(this.displayModel[this.data.hand].modelPivotOffset),n.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation)},onTouchV3orPROorPlusModelLoaded:function(n){var t=this.controllerObject3D=n.detail.model,e=this.buttonObjects={},i=this.buttonMeshes={},r=this.buttonRanges={};i.grip=t.getObjectByName("squeeze"),e.grip=t.getObjectByName("xr_standard_squeeze_pressed_value"),r.grip={min:t.getObjectByName("xr_standard_squeeze_pressed_min"),max:t.getObjectByName("xr_standard_squeeze_pressed_max")},e.grip.minX=e.grip.position.x,i.thumbstick=t.getObjectByName("thumbstick"),e.thumbstick=t.getObjectByName("xr_standard_thumbstick_pressed_value"),r.thumbstick={min:t.getObjectByName("xr_standard_thumbstick_pressed_min"),max:t.getObjectByName("xr_standard_thumbstick_pressed_max")},e.thumbstickXAxis=t.getObjectByName("xr_standard_thumbstick_xaxis_pressed_value"),r.thumbstickXAxis={min:t.getObjectByName("xr_standard_thumbstick_xaxis_pressed_min"),max:t.getObjectByName("xr_standard_thumbstick_xaxis_pressed_max")},e.thumbstickYAxis=t.getObjectByName("xr_standard_thumbstick_yaxis_pressed_value"),r.thumbstickYAxis={min:t.getObjectByName("xr_standard_thumbstick_yaxis_pressed_min"),max:t.getObjectByName("xr_standard_thumbstick_yaxis_pressed_max")},i.trigger=t.getObjectByName("trigger"),e.trigger=t.getObjectByName("xr_standard_trigger_pressed_value"),r.trigger={min:t.getObjectByName("xr_standard_trigger_pressed_min"),max:t.getObjectByName("xr_standard_trigger_pressed_max")},r.trigger.diff={x:Math.abs(r.trigger.max.rotation.x)-Math.abs(r.trigger.min.rotation.x),y:Math.abs(r.trigger.max.rotation.y)-Math.abs(r.trigger.min.rotation.y),z:Math.abs(r.trigger.max.rotation.z)-Math.abs(r.trigger.min.rotation.z)};var a=this.data.hand==="left"?"x":"a",l=this.data.hand==="left"?"y":"b",c=a+"button",u=l+"button";i[c]=t.getObjectByName(a+"_button"),e[c]=t.getObjectByName(a+"_button_pressed_value"),r[c]={min:t.getObjectByName(a+"_button_pressed_min"),max:t.getObjectByName(a+"_button_pressed_max")},i[u]=t.getObjectByName(l+"_button"),e[u]=t.getObjectByName(l+"_button_pressed_value"),r[u]={min:t.getObjectByName(l+"_button_pressed_min"),max:t.getObjectByName(l+"_button_pressed_max")}},onAxisMoved:function(n){ur(this,this.mapping[this.data.hand].axes,n)},onThumbstickMoved:function(n){if(this.buttonMeshes&&this.buttonMeshes.thumbstick)if(this.isTouchV3orPROorPlus)this.updateThumbstickTouchV3orPROorPlus(n);else for(var t in n.detail)this.buttonObjects.thumbstick.rotation[this.axisMap[t]]=this.buttonRanges.thumbstick.originalRotation[this.axisMap[t]]-Math.PI/8*n.detail[t]*(t==="y"||this.data.hand==="right"?-1:1)},axisMap:{y:"x",x:"z"},updateThumbstickTouchV3orPROorPlus:function(n){var t=(n.detail.x+1)/2;this.buttonObjects.thumbstickXAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickXAxis.min.quaternion,this.buttonRanges.thumbstickXAxis.max.quaternion,t);var e=(n.detail.y+1)/2;this.buttonObjects.thumbstickYAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickYAxis.min.quaternion,this.buttonRanges.thumbstickYAxis.max.quaternion,e)},updateModel:function(n,t){this.data.model&&this.updateButtonModel(n,t)},updateButtonModel:function(n,t){var e,i=this.buttonMeshes;i&&i[n]&&(e=t==="up"||t==="touchend"?i[n].originalColor||this.data.buttonColor:t==="touchstart"?this.data.buttonTouchColor:this.data.buttonHighlightColor,i[n].material.color.set(e))}};function y5(n){n.traverse((function(t){var e;t.type==="Mesh"&&(e=t.material.clone(),n.originalColor=t.material.color,t.material.dispose(),t.material=e)}))}le("oculus-touch-controls",V2),le("meta-touch-controls",V2),le("obb-collider",{schema:{size:{default:0},trackedObject3D:{default:""},minimumColliderDimension:{default:.02},centerModel:{default:!1}},init:function(){this.previousScale=new M.Vector3().copy(this.el.object3D.scale),this.auxEuler=new M.Euler,this.boundingBox=new M.Box3,this.boundingBoxSize=new M.Vector3,this.updateCollider=this.updateCollider.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.updateBoundingBox=this.updateBoundingBox.bind(this),this.el.addEventListener("model-loaded",this.onModelLoaded),this.updateCollider(),this.system.addCollider(this.el)},remove:function(){this.system.removeCollider(this.el)},update:function(){this.data.trackedObject3D&&(this.trackedObject3DPath=this.data.trackedObject3D.split("."))},onModelLoaded:function(){this.data.centerModel&&this.centerModel(),this.updateCollider()},centerModel:function(){var n,t=this.el,e=t.components["gltf-model"]&&t.components["gltf-model"].model;e&&(this.el.removeObject3D("mesh"),n=new M.Box3().setFromObject(e).getCenter(new M.Vector3),e.position.x+=e.position.x-n.x,e.position.y+=e.position.y-n.y,e.position.z+=e.position.z-n.z,this.el.setObject3D("mesh",e))},updateCollider:function(){var n=this.el,t=this.boundingBoxSize,e=this.aabb=this.aabb||new nA;this.obb=this.obb||new nA,n.hasLoaded?(this.updateBoundingBox(),e.halfSize.copy(t).multiplyScalar(.5),this.el.sceneEl.systems["obb-collider"].data.showColliders&&this.showCollider()):n.addEventListener("loaded",this.updateCollider)},showCollider:function(){this.updateColliderMesh(),this.renderColliderMesh.visible=!0},updateColliderMesh:function(){var n=this.renderColliderMesh,t=this.boundingBoxSize;n?(n.geometry.dispose(),n.geometry=new M.BoxGeometry(t.x,t.y,t.z)):this.initColliderMesh()},hideCollider:function(){this.renderColliderMesh&&(this.renderColliderMesh.visible=!1)},initColliderMesh:function(){var n,t,e;n=this.boundingBoxSize,t=this.renderColliderGeometry=new M.BoxGeometry(n.x,n.y,n.z),(e=this.renderColliderMesh=new M.Mesh(t,new M.MeshLambertMaterial({color:65280,side:M.DoubleSide}))).matrixAutoUpdate=!1,e.matrixWorldAutoUpdate=!1,e.updateMatrixWorld=function(){},this.el.sceneEl.object3D.add(e)},updateBoundingBox:(Wf=new M.Vector3,jf=new M.Vector3,Qv=new M.Quaternion,z2=new M.Quaternion,zv=new M.Matrix4,function(){var n=this.auxEuler,t=this.boundingBox,e=this.data.size,i=this.trackedObject3D||this.el.object3D,r=this.boundingBoxSize,a=this.data.minimumColliderDimension;if(e)return this.boundingBoxSize.x=e,this.boundingBoxSize.y=e,void(this.boundingBoxSize.z=e);n.copy(i.rotation),i.rotation.set(0,0,0),i.parent.matrixWorld.decompose(Wf,Qv,jf),zv.compose(Wf,z2,jf),i.parent.matrixWorld.copy(zv),t.setFromObject(i,!0),t.getSize(r),r.x=r.x<a?a:r.x,r.y=r.y<a?a:r.y,r.z=r.z<a?a:r.z,i.parent.matrixWorld.compose(Wf,Qv,jf),this.el.object3D.rotation.copy(n)}),checkTrackedObject:function(){var n,t=this.trackedObject3DPath;if(t&&t.length&&!this.trackedObject3D){n=this.el;for(var e=0;e<t.length&&(n=n[t[e]]);e++);n&&(this.trackedObject3D=n,this.updateCollider())}return this.trackedObject3D},tick:(function(){var n=new M.Vector3,t=new M.Vector3,e=new M.Quaternion,i=new M.Matrix4;return function(){var r=this.obb,a=this.renderColliderMesh,l=this.checkTrackedObject()||this.el.object3D;l&&(l.updateMatrix(),l.updateMatrixWorld(!0),l.matrixWorld.decompose(n,e,t),(Math.abs(t.x-this.previousScale.x)>1e-4||Math.abs(t.y-this.previousScale.y)>1e-4||Math.abs(t.z-this.previousScale.z)>1e-4)&&this.updateCollider(),this.previousScale.copy(t),t.set(1,1,1),i.compose(n,e,t),a&&a.matrixWorld.copy(i),r.copy(this.aabb),r.applyMatrix4(i))}})()});var E5=Ze("components:obj-model:warn"),b5=(le("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var n=this;this.model=null,this.objLoader=new fT,this.mtlLoader=new pT(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",(function(t){n.model&&t.detail.name==="material"&&n.applyMaterial()}))},update:function(){var n=this.data;n.obj&&(this.resetMesh(),this.loadObj(n.obj,n.mtl))},remove:function(){this.resetMesh()},resetMesh:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(n,t){var e=this,i=this.el,r=this.mtlLoader,a=this.objLoader,l=this.el.sceneEl.systems.renderer,c=t.substr(0,t.lastIndexOf("/")+1);if(t)return i.hasAttribute("material")&&E5("Material component properties are ignored when a .MTL is provided"),r.setResourcePath(c),void r.load(t,(function(u){u.preload(),a.setMaterials(u),a.load(n,(function(d){e.model=d,e.model.traverse((function(f){if(f.isMesh){var A=f.material;A.map&&l.applyColorCorrection(A.map),A.emissiveMap&&l.applyColorCorrection(A.emissiveMap)}})),i.setObject3D("mesh",d),i.emit("model-loaded",{format:"obj",model:d})}))}));a.load(n,(function(u){e.model=u,e.applyMaterial(),i.setObject3D("mesh",u),i.emit("model-loaded",{format:"obj",model:u})}))},applyMaterial:function(){var n=this.el.components.material;n&&this.model.traverse((function(t){t instanceof M.Mesh&&(t.material=n.material)}))}}),Bn+"controllers/oculus/go/oculus-go-controller.gltf"),q2="oculus-go",W2=(le("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0}},mapping:{axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad"]},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var n=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){be(t.detail.id,"down",n)},this.onButtonUp=function(t){be(t.detail.id,"up",n)},this.onButtonTouchStart=function(t){be(t.detail.id,"touchstart",n)},this.onButtonTouchEnd=function(t){be(t.detail.id,"touchend",n)},this.controllerPresent=!1,this.bindMethods()},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("model-loaded",this.onModelLoaded),n.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("model-loaded",this.onModelLoaded),n.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){Ki(this,q2,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var n=this.el,t=this.data;n.setAttribute("tracked-controls",{hand:t.hand,idPrefix:q2}),this.data.model&&this.el.setAttribute("gltf-model",b5)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(n){var t,e=n.detail.model;n.target===this.el&&this.data.model&&((t=this.buttonMeshes={}).trigger=e.getObjectByName("oculus_go_button_trigger"),t.trackpad=e.getObjectByName("oculus_go_touchpad"),t.touchpad=e.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(n){var t=this.mapping.buttons[n.detail.id];t&&this.el.emit(t+"changed",n.detail.state)},onAxisMoved:function(n){ur(this,this.mapping.axes,n)},updateModel:function(n,t){this.data.model&&this.updateButtonModel(n,t)},updateButtonModel:function(n,t){var e=this.buttonMeshes;if(e&&e[n]){var i;switch(t){case"down":i=this.data.buttonHighlightColor;break;case"touchstart":i=this.data.buttonTouchedColor;break;default:i=this.data.buttonColor}e[n].material.color.set(i)}}}),"pico-4"),x5=Bn+"controllers/pico/pico4/",j2=(le("pico-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}},init:function(){var n=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){be(t.detail.id,"down",n,n.data.hand)},this.onButtonUp=function(t){be(t.detail.id,"up",n,n.data.hand)},this.onButtonTouchEnd=function(t){be(t.detail.id,"touchend",n,n.data.hand)},this.onButtonTouchStart=function(t){be(t.detail.id,"touchstart",n,n.data.hand)},this.bindMethods()},update:function(){var n=this.data;this.controllerIndex=n.hand==="right"?0:n.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("axismove",this.onAxisMoved),n.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("axismove",this.onAxisMoved),n.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var n=this.data;Ki(this,W2,{index:this.controllerIndex,hand:n.hand})},injectTrackedControls:function(){var n=this.el,t=this.data;n.setAttribute("tracked-controls",{idPrefix:W2,hand:t.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",x5+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(n){var t,e=this.mapping[this.data.hand].buttons[n.detail.id];e&&(e==="trigger"&&(t=n.detail.state.value,console.log("analog value of trigger press: "+t)),this.el.emit(e+"changed",n.detail.state))},onModelLoaded:function(n){n.target===this.el&&this.data.model&&this.el.emit("controllermodelready",{name:"pico-controls",model:this.data.model,rayOrigin:new M.Vector3(0,0,0)})},onAxisMoved:function(n){ur(this,this.mapping[this.data.hand].axes,n)}}),le("position",{schema:{type:"vec3"},update:function(){var n=this.el.object3D,t=this.data;n.position.set(t.x,t.y,t.z)},remove:function(){this.el.object3D.position.set(0,0,0)}}),Ze("components:raycaster:warn")),C5=/^[\w\s-.,[\]#]*$/,_5={childList:!0,attributes:!0,subtree:!0},X2="raycaster-intersected-cleared",Y2="raycaster-intersection-cleared";function K2(n,t){var e;for(n.length=t.length,e=0;e<t.length;e++)n[e]=t[e]}le("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},lineColor:{default:"white"},lineOpacity:{default:1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new M.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new M.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new M.Vector3,this.otherLineEndVec3=new M.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(n){var t=this.data,e=this.el,i=this.raycaster;i.far=t.far,i.near=t.near,!t.showLine||t.far===n.far&&t.origin===n.origin&&t.direction===n.direction&&n.showLine||(this.unitLineEndVec3.copy(t.direction).normalize(),this.drawLine()),!t.showLine&&n.showLine&&e.removeAttribute("line"),t.objects===n.objects||C5.test(t.objects)||j2('[raycaster] Selector "'+t.objects+'" may not update automatically with DOM changes.'),t.objects||j2('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),t.autoRefresh!==n.autoRefresh&&e.isPlaying&&(t.autoRefresh?this.addEventListeners():this.removeEventListeners()),n.enabled&&!t.enabled&&this.clearAllIntersections(),t.objects!==n.objects&&this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,_5),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var n,t=this.data;n=t.objects?this.el.sceneEl.querySelectorAll(t.objects):this.el.sceneEl.querySelectorAll("*"),this.objects=this.flattenObject3DMaps(n),this.dirty=!1},tock:function(n){var t=this.data,e=this.prevCheckTime;t.enabled&&(e&&n-e<t.interval||(this.prevCheckTime=n,this.checkIntersections()))},checkIntersections:function(){var n,t,e=this.clearedIntersectedEls,i=this.el,r=this.data,a=this.intersectedEls,l=this.intersections,c=this.newIntersectedEls,u=this.newIntersections,d=this.prevIntersectedEls,f=this.rawIntersections;for(this.dirty&&this.refreshObjects(),K2(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),f.length=0,this.raycaster.intersectObjects(this.objects,!0,f),l.length=0,a.length=0,n=0;n<f.length;n++)t=f[n],r.showLine&&t.object===i.getObject3D("line")||t.object.el&&(l.push(t),a.push(t.object.el));for(u.length=0,c.length=0,n=0;n<l.length;n++)d.indexOf(l[n].object.el)===-1&&(u.push(l[n]),c.push(l[n].object.el));for(e.length=0,n=0;n<d.length;n++)a.indexOf(d[n])===-1&&(d[n].emit(X2,this.intersectedClearedDetail),e.push(d[n]));for(e.length&&i.emit(Y2,this.intersectionClearedDetail),n=0;n<c.length;n++)c[n].emit("raycaster-intersected",this.intersectedDetail);u.length&&(this.intersectionDetail.els=c,this.intersectionDetail.intersections=u,i.emit("raycaster-intersection",this.intersectionDetail)),(d.length===0&&l.length>0||d.length>0&&l.length===0||d.length&&l.length&&d[0]!==l[0].object.el)&&(this.intersectionDetail.els=this.intersectedEls,this.intersectionDetail.intersections=l,i.emit("raycaster-closest-entity-changed",this.intersectionDetail)),r.showLine&&setTimeout(this.updateLine)},updateLine:function(){var n,t=this.el,e=this.intersections;e.length&&(n=e[0].object.el===t&&e[1]?e[1].distance:e[0].distance),this.drawLine(n)},getIntersection:function(n){var t,e;for(t=0;t<this.intersections.length;t++)if((e=this.intersections[t]).object.el===n)return e;return null},updateOriginDirection:(function(){var n=new M.Vector3,t=new M.Vector3;return function(){var e=this.el,i=this.data;i.useWorldCoordinates?this.raycaster.set(i.origin,i.direction):(e.object3D.updateMatrixWorld(),t.setFromMatrixPosition(e.object3D.matrixWorld),i.origin.x===0&&i.origin.y===0&&i.origin.z===0||(t=e.object3D.localToWorld(t.copy(i.origin))),n.copy(i.direction).transformDirection(e.object3D.matrixWorld).normalize(),this.raycaster.set(t,n))}})(),drawLine:function(n){var t,e=this.data,i=this.el;t=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,n===void 0&&(n=e.far===1/0?1e3:e.far),this.lineData.start=e.origin,this.lineData.end=t.copy(this.unitLineEndVec3).multiplyScalar(n).add(e.origin),this.lineData.color=e.lineColor,this.lineData.opacity=e.lineOpacity,i.setAttribute("line",this.lineData)},flattenObject3DMaps:function(n){var t,e,i=this.objects,r=this.el.sceneEl.object3D;function a(c){return c.parent?a(c.parent):c===r}for(i.length=0,e=0;e<n.length;e++){var l=n[e];if(l.isEntity&&l.object3D&&a(l.object3D))for(t in l.object3DMap)i.push(l.getObject3D(t))}return i},clearAllIntersections:function(){var n;for(n=0;n<this.intersectedEls.length;n++)this.intersectedEls[n].emit(X2,this.intersectedClearedDetail);K2(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit(Y2,this.intersectionClearedDetail)}});var J2,Hl,Z2,$2,Gv=M.MathUtils.degToRad,Hv=(le("rotation",{schema:{type:"vec3"},update:function(){var n=this.data;this.el.object3D.rotation.set(Gv(n.x),Gv(n.y),Gv(n.z),"YXZ")},remove:function(){this.el.object3D.rotation.set(0,0,0)}}),le("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var n=this.data;this.el.object3D.scale.set(n.x,n.y,n.z)},remove:function(){this.el.object3D.scale.set(1,1,1)}}),le("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=this.update.bind(this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var n=this.data;this.updateDescendants(n.cast,n.receive)},remove:function(){this.el.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(n,t){var e=this.el.sceneEl;this.el.object3D.traverse((function(i){if(i instanceof M.Mesh&&(i.castShadow=n,i.receiveShadow=t,e.hasLoaded&&i.material))for(var r=Array.isArray(i.material)?i.material:[i.material],a=0;a<r.length;a++)r[a].needsUpdate=!0}))}}),Ze("components:sound:warn")),w5=(le("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},loopStart:{default:0},loopEnd:{default:0},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var n=this;this.listener=null,this.audioLoader=new M.AudioLoader,this.pool=new M.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){n.playSound()}},update:function(n){var t,e,i=this.data,r=i.src!==n.src;if(r){if(!i.src)return;this.setupSound()}for(t=0;t<this.pool.children.length;t++)e=this.pool.children[t],i.positional&&(e.setDistanceModel(i.distanceModel),e.setMaxDistance(i.maxDistance),e.setRefDistance(i.refDistance),e.setRolloffFactor(i.rolloffFactor)),e.setLoop(i.loop),e.setLoopStart(i.loopStart),i.loopStart!==0&&i.loopEnd===0?e.setLoopEnd(e.buffer.duration):e.setLoopEnd(i.loopEnd),e.setVolume(i.volume),e.isPaused=!1;if(i.on!==n.on&&this.updateEventListener(n.on),r){var a=this;this.loaded=!1,this.audioLoader.load(i.src,(function(l){for(t=0;t<a.pool.children.length;t++)(e=a.pool.children[t]).setBuffer(l);a.loaded=!0,M.Cache.remove(i.src),(a.data.autoplay||a.mustPlay)&&a.playSound(a.processSound),a.el.emit("sound-loaded",a.evtDetail,!1)}))}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var n;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(n=0;n<this.pool.children.length;n++)this.pool.children[n].disconnect()}catch{Hv("Audio source not properly disconnected")}},updateEventListener:function(n){var t=this.el;n&&t.removeEventListener(n,this.playSoundBound),t.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var n,t,e=this.el,i=e.sceneEl,r=this;this.pool.children.length>0&&(this.stopSound(),e.removeObject3D("sound"));var a=this.listener=i.audioListener||new M.AudioListener;for(i.audioListener=a,i.camera&&i.camera.add(a),i.addEventListener("camera-set-active",(function(l){l.detail.cameraEl.getObject3D("camera").add(a)})),this.pool=new M.Group,n=0;n<this.data.poolSize;n++)t=this.data.positional?new M.PositionalAudio(a):new M.Audio(a),this.pool.add(t);for(e.setObject3D(this.attrName,this.pool),n=0;n<this.pool.children.length;n++)(t=this.pool.children[n]).onEnded=function(){this.isPlaying=!1,r.el.emit("sound-ended",r.evtDetail,!1)}},pauseSound:function(){var n,t;for(this.isPlaying=!1,n=0;n<this.pool.children.length;n++)(t=this.pool.children[n]).source&&t.source.buffer&&t.isPlaying&&!t.isPaused&&(t.isPaused=!0,t.pause())},playSound:function(n){var t,e,i;if(!this.loaded)return Hv("Sound not loaded yet. It will be played once it finished loading"),this.mustPlay=!0,void(this.processSound=n);for(t=!1,this.isPlaying=!0,e=0;e<this.pool.children.length;e++)(i=this.pool.children[e]).isPlaying||!i.buffer||t||(n&&n(i),i.play(),i.isPaused=!1,t=!0);t?(this.mustPlay=!1,this.processSound=void 0):Hv("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el)},stopSound:function(){var n,t;for(this.isPlaying=!1,n=0;n<this.pool.children.length;n++){if(!(t=this.pool.children[n]).source||!t.source.buffer)return;t.stop()}}}),de(4433)),M5=de.n(w5),S5=de(5751),B5=de.n(S5),Vl=Ze("components:text:error"),T5=Ze("components:text:warn"),Es=Bn+"fonts/",tM={aileronsemibold:Es+"Aileron-Semibold.fnt",dejavu:Es+"DejaVu-sdf.fnt",exo2bold:Es+"Exo2Bold.fnt",exo2semibold:Es+"Exo2SemiBold.fnt",kelsonsans:Es+"KelsonSans.fnt",monoid:Es+"Monoid.fnt",mozillavr:Es+"mozillavr.fnt",roboto:Es+"Roboto-msdf.json",sourcecodepro:Es+"SourceCodePro.fnt"},eM=["roboto"],Vv="roboto",nM=new function(){var n=this.cache={};this.get=function(t,e){return t in n||(n[t]=e()),n[t]}},iM={},Yf={},I5=/^\w+:/;function rM(n,t,e){return n||(.5+t)*e}le("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:Vv},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:Hr},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=M5()(),this.createOrUpdateMaterial(),this.explicitGeoDimensionsChecked=!1},update:function(n){var t=this.data,e=this.currentFont;Yf[t.font]?this.texture=Yf[t.font]:(this.texture=Yf[t.font]=new M.Texture,this.texture.anisotropy=16),this.createOrUpdateMaterial(),n.font===t.font?e&&(this.updateGeometry(this.geometry,e),this.updateLayout()):this.updateFont()},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var n,t,e,i=this.data,r=this.material,a=this.shaderData;if(e=i.shader,eM.indexOf(i.font)!==-1||i.font.indexOf("-msdf.")>=0?e="msdf":i.font in tM&&eM.indexOf(i.font)===-1&&(e="sdf"),n=(this.shaderObject&&this.shaderObject.name)!==e,a.alphaTest=i.alphaTest,a.color=i.color,a.map=this.texture,a.opacity=i.opacity,a.side=(function(l){switch(l){case"back":return M.FrontSide;case"double":return M.DoubleSide;default:return M.BackSide}})(i.side),a.transparent=i.transparent,a.negate=i.negate,!n)return this.shaderObject.update(a),r.transparent=a.transparent,void(r.side=a.side);t=(function(l,c,u){var d,f;return(f=new Hr[c].Shader).el=l,f.init(u),f.update(u),(d=f.material).transparent=u.transparent,{material:d,shader:f}})(this.el,e,a),this.material=t.material,this.shaderObject=t.shader,this.material.side=a.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var n,t=this.data,e=this.el,i=this.geometry,r=this;t.font||T5("No font specified. Using the default font."),this.mesh&&(this.mesh.visible=!1),n=this.lookupFont(t.font||Vv)||t.font,nM.get(n,(function(){return(function(a,l){return new Promise((function(c,u){B5()(a,(function(d,f){if(d)return Vl("Error loading font",a),void u(d);a.indexOf("/Roboto-msdf.json")>=0&&(l=30),l&&f.chars.forEach((function(A){A.yoffset+=l})),c(f)}))}))})(n,t.yOffset)})).then((function(a){var l;if(a.pages.length!==1)throw new Error("Currently only single-page bitmap fonts are supported.");iM[n]||(a.widthFactor=iM[a]=(function(c){var u=0,d=0,f=0;return c.chars.forEach((function(A){u+=A.xadvance,A.id>=48&&A.id<=57&&(f++,d+=A.xadvance)})),f?d/f:u/c.chars.length})(a)),r.currentFont=a,l=r.getFontImageSrc(),nM.get(l,(function(){return(function(c){return new Promise((function(u,d){new M.ImageLoader().load(c,(function(f){u(f)}),void 0,(function(){Vl("Error loading font image",c),d(null)}))}))})(l)})).then((function(c){var u=r.texture;u&&(u.image=c,u.needsUpdate=!0,Yf[t.font]=u,r.texture=u,r.initMesh(),r.currentFont=a,r.updateGeometry(i,a),r.updateLayout(),r.mesh.visible=!0,e.emit("textfontset",{font:t.font,fontObj:a}))})).catch((function(c){Vl(c.message),Vl(c.stack)}))})).catch((function(a){Vl(a.message),Vl(a.stack)}))},initMesh:function(){this.mesh||(this.mesh=new M.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh))},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var n=this.lookupFont(this.data.font||Vv)||this.data.font,t=this.currentFont.pages[0];return t.match(I5)&&t.indexOf("http")!==0?n.replace(/(\.fnt)|(\.json)/,".png"):M.LoaderUtils.extractUrlBase(n)+t},updateLayout:function(){var n,t,e,i,r,a,l,c,u,d=this.el,f=this.data,A=this.geometry,m=this.mesh;if(m&&A.layout){if(e=d.getAttribute("geometry"),i=(a=(l=f.width||e&&e.width||1)/rM(f.wrapPixels,f.wrapCount,this.currentFont.widthFactor))*((r=A.layout).height+r.descender),e&&e.primitive==="plane"&&(this.explicitGeoDimensionsChecked||(this.explicitGeoDimensionsChecked=!0,this.hasExplicitGeoWidth=!!e.width,this.hasExplicitGeoHeight=!!e.height),this.hasExplicitGeoWidth||d.setAttribute("geometry","width",l),this.hasExplicitGeoHeight||d.setAttribute("geometry","height",i)),(n=f.anchor==="align"?f.align:f.anchor)==="left")c=0;else if(n==="right")c=-1*r.width;else{if(n!=="center")throw new TypeError("Invalid text.anchor property value",n);c=-1*r.width/2}if((t=f.baseline)==="bottom")u=0;else if(t==="top")u=-1*r.height+r.ascender;else{if(t!=="center")throw new TypeError("Invalid text.baseline property value",t);u=-1*r.height/2}m.position.x=c*a+f.xOffset,m.position.y=u*a,m.position.z=f.zOffset,m.scale.set(a,-1*a,a)}},lookupFont:function(n){return tM[n]},updateGeometry:(J2={},Hl={},Z2=/\\n/g,$2=/\\t/g,function(n,t){var e=this.data;Hl.font=t,Hl.lineHeight=e.lineHeight&&isFinite(e.lineHeight)?e.lineHeight:t.common.lineHeight,Hl.text=e.value.toString().replace(Z2,`
`).replace($2,"	"),Hl.width=rM(e.wrapPixels,e.wrapCount,t.widthFactor),n.update(Ui(J2,e,Hl))})});var ql,qv,sM=(le("tracked-controls",{schema:{id:{type:"string",default:""},controller:{default:-1},autoHide:{default:!0},hand:{type:"string",default:""},handTrackingEnabled:{default:!1},iterateControllerProfiles:{default:!1}},init:function(){this.buttonEventDetails={},this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.changedAxes=[],this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.updateController=this.updateController.bind(this)},update:function(){this.updateController()},play:function(){var n=this.el.sceneEl;this.updateController(),n.addEventListener("controllersupdated",this.updateController)},pause:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.updateController)},isControllerPresent:function(n){return!(!this.controller||this.controller.gamepad||n.inputSource.handedness!=="none"&&n.inputSource.handedness!==this.data.hand)},updateController:function(){this.controller=ZE(this.system.controllers,this.data.id,this.data.hand,this.data.controller,this.data.iterateControllerProfiles,this.data.handTrackingEnabled),this.el.components["tracked-controls"].controller=this.controller},tick:function(){var n=this.el.sceneEl,t=this.controller,e=n.frame;this.data.autoHide&&(this.el.object3D.visible=!!t),t&&n.frame&&this.system.referenceSpace&&(t.hand||(this.pose=e.getPose(t.gripSpace,this.system.referenceSpace),this.updatePose(),this.updateButtons()))},updatePose:function(){var n=this.el.object3D,t=this.pose;t&&(n.matrix.elements=t.transform.matrix,n.matrix.decompose(n.position,n.rotation,n.scale))},updateButtons:function(){var n,t,e,i=this.controller;if(i&&i.gamepad){for(e=i.gamepad,t=0;t<e.buttons.length;++t)this.buttonStates[t]||(this.buttonStates[t]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[t]||(this.buttonEventDetails[t]={id:t,state:this.buttonStates[t]}),n=e.buttons[t],this.handleButton(t,n);this.handleAxes()}},handleButton:function(n,t){return!!(this.handlePress(n,t)|this.handleTouch(n,t)|this.handleValue(n,t))&&(this.el.emit("buttonchanged",this.buttonEventDetails[n],!1),!0)},handleAxes:function(){var n,t=!1,e=this.controller.gamepad.axes,i=this.axis,r=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),n=0;n<e.length;++n)r.push(i[n]!==e[n]),r[n]&&(t=!0);if(!t)return!1;for(this.axis.splice(0,this.axis.length),n=0;n<e.length;n++)this.axis.push(e[n]);return this.el.emit("axismove",this.axisMoveEventDetail,!1),!0},handlePress:function(n,t){var e,i=this.buttonStates[n];return t.pressed!==i.pressed&&(e=t.pressed?"buttondown":"buttonup",this.el.emit(e,this.buttonEventDetails[n],!1),i.pressed=t.pressed,!0)},handleTouch:function(n,t){var e,i=this.buttonStates[n];return t.touched!==i.touched&&(e=t.touched?"touchstart":"touchend",this.el.emit(e,this.buttonEventDetails[n],!1),i.touched=t.touched,!0)},handleValue:function(n,t){var e=this.buttonStates[n];return t.value!==e.value&&(e.value=t.value,!0)}}),le("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}}),Bn+"controllers/valve/index/valve-index-"),R5={left:sM+"left.glb",right:sM+"right.glb"},aM="valve",L5={left:{x:0,y:-.05,z:.06},right:{x:0,y:-.05,z:.06}},D5={left:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"},right:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"}},U5=(le("valve-index-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{trackpad:[0,1],thumbstick:[2,3]},buttons:["trigger","grip","trackpad","thumbstick","abutton"]},init:function(){var n=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){be(t.detail.id,"down",n)},this.onButtonUp=function(t){be(t.detail.id,"up",n)},this.onButtonTouchEnd=function(t){be(t.detail.id,"touchend",n)},this.onButtonTouchStart=function(t){be(t.detail.id,"touchstart",n)},this.previousButtonValues={},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("model-loaded",this.onModelLoaded),n.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("model-loaded",this.onModelLoaded),n.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var n=this.data,t=n.hand==="right"?0:n.hand==="left"?1:2;Ki(this,aM,{index:t,iterateControllerProfiles:!0,hand:n.hand})},injectTrackedControls:function(){var n=this.el,t=this.data;n.setAttribute("tracked-controls",{idPrefix:aM,controller:t.hand==="right"?1:t.hand==="left"?0:2,hand:t.hand}),this.loadModel()},loadModel:function(){var n=this.data;n.model&&this.el.setAttribute("gltf-model",""+R5[n.hand])},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(n){var t,e=this.mapping.buttons[n.detail.id],i=this.buttonMeshes;e&&(e==="trigger"&&(t=n.detail.state.value,i&&i.trigger&&(i.trigger.rotation.x=this.triggerOriginalRotationX-t*(Math.PI/40))),this.el.emit(e+"changed",n.detail.state))},onModelLoaded:function(n){var t,e=n.detail.model,i=this;n.target===this.el&&this.data.model&&((t=this.buttonMeshes={}).grip={left:e.getObjectByName("leftgrip"),right:e.getObjectByName("rightgrip")},t.menu=e.getObjectByName("menubutton"),t.system=e.getObjectByName("systembutton"),t.trackpad=e.getObjectByName("touchpad"),t.trigger=e.getObjectByName("trigger"),this.triggerOriginalRotationX=t.trigger.rotation.x,Object.keys(t).forEach((function(r){i.setButtonColor(r,i.data.buttonColor)})),e.position.copy(D5[this.data.hand]),e.rotation.copy(L5[this.data.hand]),this.el.emit("controllermodelready",{name:"valve-index-controls",model:this.data.model,rayOrigin:new M.Vector3(0,0,0)}))},onAxisMoved:function(n){ur(this,this.mapping.axes,n)},updateModel:function(n,t){var e;this.data.model&&(t.indexOf("touch")!==-1||(e=t==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(n,e)))},setButtonColor:function(n,t){}}),Bn+"controllers/vive/vr_controller_vive.obj"),O5=Bn+"controllers/vive/vr_controller_vive.mtl",oM="htc-vive",N5=(le("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","none"]},init:function(){var n=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){be(t.detail.id,"down",n)},this.onButtonUp=function(t){be(t.detail.id,"up",n)},this.onButtonTouchEnd=function(t){be(t.detail.id,"touchend",n)},this.onButtonTouchStart=function(t){be(t.detail.id,"touchstart",n)},this.previousButtonValues={},this.bindMethods()},update:function(){var n=this.data;this.controllerIndex=n.hand==="right"?0:n.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("model-loaded",this.onModelLoaded),n.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("model-loaded",this.onModelLoaded),n.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var n=this.data;Ki(this,oM,{index:this.controllerIndex,hand:n.hand})},injectTrackedControls:function(){var n=this.el,t=this.data;n.setAttribute("tracked-controls",{idPrefix:oM,hand:t.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("obj-model",{obj:U5,mtl:O5})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(n){var t,e=this.mapping.buttons[n.detail.id],i=this.buttonMeshes;e&&(e==="trigger"&&(t=n.detail.state.value,i&&i.trigger&&(i.trigger.rotation.x=-t*(Math.PI/12))),this.el.emit(e+"changed",n.detail.state))},onModelLoaded:function(n){var t,e=n.detail.model,i=this;n.target===this.el&&this.data.model&&((t=this.buttonMeshes={}).grip={left:e.getObjectByName("leftgrip"),right:e.getObjectByName("rightgrip")},t.menu=e.getObjectByName("menubutton"),t.system=e.getObjectByName("systembutton"),t.trackpad=e.getObjectByName("touchpad"),t.touchpad=e.getObjectByName("touchpad"),t.trigger=e.getObjectByName("trigger"),Object.keys(t).forEach((function(r){i.setButtonColor(r,i.data.buttonColor)})),e.position.set(0,-.015,.04))},onAxisMoved:function(n){ur(this,this.mapping.axes,n)},updateModel:function(n,t){var e;this.data.model&&(t.indexOf("touch")!==-1||(e=t==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(n,e)))},setButtonColor:function(n,t){var e=this.buttonMeshes;if(e)return n==="grip"?(e.grip.left.material.color.set(t),void e.grip.right.material.color.set(t)):void e[n].material.color.set(t)}}),Bn+"controllers/vive/focus-controller/focus-controller.gltf"),lM="htc-vive-focus",cM=(le("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad","none","menu"]},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var n=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){be(t.detail.id,"down",n)},this.onButtonUp=function(t){be(t.detail.id,"up",n)},this.onButtonTouchStart=function(t){be(t.detail.id,"touchstart",n)},this.onButtonTouchEnd=function(t){be(t.detail.id,"touchend",n)},this.controllerPresent=!1,this.bindMethods()},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("model-loaded",this.onModelLoaded),n.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("model-loaded",this.onModelLoaded),n.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){Ki(this,lM,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){this.el.setAttribute("tracked-controls",{idPrefix:lM}),this.data.model&&this.el.setAttribute("gltf-model",N5)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(n){var t,e=n.detail.model;n.target===this.el&&this.data.model&&((t=this.buttonMeshes={}).trigger=e.getObjectByName("BumperKey"),t.triggerPressed=e.getObjectByName("BumperKey_Press"),t.triggerPressed&&(t.triggerPressed.visible=!1),t.touchpad=e.getObjectByName("TouchPad"),t.touchpadPressed=e.getObjectByName("TouchPad_Press"),t.trackpad=e.getObjectByName("TouchPad"),t.trackpadPressed=e.getObjectByName("TouchPad_Press"),t.trackpadPressed&&(t.trackpadPressed.visible=!1))},onButtonChanged:function(n){var t=this.mapping.buttons[n.detail.id];t&&this.el.emit(t+"changed",n.detail.state)},onAxisMoved:function(n){ur(this,this.mapping.axes,n)},updateModel:function(n,t){this.data.model&&this.updateButtonModel(n,t)},updateButtonModel:function(n,t){var e=this.buttonMeshes,i=n+"Pressed";if(e&&e[n]&&e[i]){var r;switch(t){case"down":r=this.data.buttonHighlightColor;break;case"touchstart":r=this.data.buttonTouchedColor}r&&e[i].material.color.set(r),e[i].visible=!!r,e[n].visible=!r}}}),{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}),P5=nb,uM=1e-5,F5=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];le("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},after:["look-controls"],init:function(){this.keys={},this.easing=1.1,this.velocity=new M.Vector3,this.onBlur=this.onBlur.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onFocus=this.onFocus.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.attachVisibilityEventListeners()},tick:function(n,t){var e=this.data,i=this.el,r=this.velocity;(r[e.adAxis]||r[e.wsAxis]||!(function(a){var l;for(l in a)return!1;return!0})(this.keys))&&(t/=1e3,this.updateVelocity(t),(r[e.adAxis]||r[e.wsAxis])&&i.object3D.position.add(this.getMovementVector(t)))},update:function(n){n.adAxis!==this.data.adAxis&&(this.velocity[n.adAxis]=0),n.wsAxis!==this.data.wsAxis&&(this.velocity[n.wsAxis]=0)},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(n){var t,e,i,r,a,l=this.data,c=this.keys,u=this.velocity;if(e=l.adAxis,r=l.wsAxis,n>.2)return u[e]=0,void(u[r]=0);var d=Math.pow(1/this.easing,60*n);u[e]!==0&&(u[e]=u[e]*d),u[r]!==0&&(u[r]=u[r]*d),Math.abs(u[e])<uM&&(u[e]=0),Math.abs(u[r])<uM&&(u[r]=0),l.enabled&&(t=l.acceleration,l.adEnabled&&(i=l.adInverted?-1:1,(c.KeyA||c.ArrowLeft)&&(u[e]-=i*t*n),(c.KeyD||c.ArrowRight)&&(u[e]+=i*t*n)),l.wsEnabled&&(a=l.wsInverted?-1:1,(c.KeyW||c.ArrowUp)&&(u[r]-=a*t*n),(c.KeyS||c.ArrowDown)&&(u[r]+=a*t*n)))},getMovementVector:(ql=new M.Vector3(0,0,0),qv=new M.Euler(0,0,0,"YXZ"),function(n){var t,e=this.el.getAttribute("rotation"),i=this.velocity;return ql.copy(i),ql.multiplyScalar(n),e&&(t=this.data.fly?e.x:0,qv.set(M.MathUtils.degToRad(t),M.MathUtils.degToRad(e.y),0),ql.applyEuler(qv)),ql}),attachVisibilityEventListeners:function(){window.oncontextmenu=this.onContextMenu,window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onContextMenu:function(){for(var n=Object.keys(this.keys),t=0;t<n.length;t++)delete this.keys[n[t]]},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(n){var t;P5(n)&&(t=n.code||cM[n.keyCode],F5.indexOf(t)!==-1&&(this.keys[t]=!0))},onKeyUp:function(n){var t;t=n.code||cM[n.keyCode],delete this.keys[t]}});var Wv,Kf,Mu,Su=Ze("components:windows-motion-controls:debug"),Wl=Ze("components:windows-motion-controls:warn"),k5=Bn+"controllers/microsoft/",hM={left:"left.glb",right:"right.glb",default:"universal.glb"},dM="windows-mixed-reality",jl=(le("windows-motion-controls",{schema:{hand:{default:"right"},pair:{default:0},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick","menu"],axisMeshNames:["TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_X","THUMBSTICK_X","THUMBSTICK_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",squeeze:"GRASP",thumbstick:"THUMBSTICK_PRESS",touchpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},bindMethods:function(){this.onModelError=this.onModelError.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var n=this,t=this.el;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(e){be(e.detail.id,"down",n)},this.onButtonUp=function(e){be(e.detail.id,"up",n)},this.onButtonTouchStart=function(e){be(e.detail.id,"touchstart",n)},this.onButtonTouchEnd=function(e){be(e.detail.id,"touchend",n)},this.onControllerConnected=function(){n.setModelVisibility(!0)},this.onControllerDisconnected=function(){n.setModelVisibility(!1)},this.controllerPresent=!1,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new M.Vector3,direction:new M.Vector3(0,0,-1),createdFromMesh:!1},t.addEventListener("controllerconnected",this.onControllerConnected),t.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("axismove",this.onAxisMoved),n.addEventListener("model-error",this.onModelError),n.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("axismove",this.onAxisMoved),n.removeEventListener("model-error",this.onModelError),n.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){Ki(this,dM,{hand:this.data.hand,index:this.data.pair,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(this.data.model&&!this.rayOrigin.createdFromMesh){var n=this.createControllerModelUrl();this.loadModel(n)}else this.modelReady()},createControllerModelUrl:function(n){var t=this.data.hand;return k5+"default/"+(hM[t]||hM.default)},injectTrackedControls:function(){var n=this.data;this.el.setAttribute("tracked-controls",{idPrefix:dM,controller:n.pair,hand:n.hand}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(n){var t=this.createControllerModelUrl(!0);n.detail.src!==t?(Wl("Failed to load controller model for device, attempting to load default."),this.loadModel(t)):Wl("Failed to load default controller model.")},loadModel:function(n){this.el.setAttribute("gltf-model","url("+n+")")},onModelLoaded:function(n){var t,e,i,r,a=this.controllerModel=n.detail.model,l=this.loadedMeshInfo;if(n.target===this.el){if(Su("Processing model"),l.buttonMeshes={},l.axisMeshes={},a){for(t=0;t<this.mapping.buttons.length;t++)(e=this.mapping.buttonMeshNames[this.mapping.buttons[t]])?(i=a.getObjectByName(e))?(r={index:t,value:c(i,"VALUE"),pressed:c(i,"PRESSED"),unpressed:c(i,"UNPRESSED")}).value&&r.pressed&&r.unpressed?l.buttonMeshes[this.mapping.buttons[t]]=r:Wl("Missing button submesh under mesh with name: "+e+"(VALUE: "+!!r.value+", PRESSED: "+!!r.pressed+", UNPRESSED:"+!!r.unpressed+")"):Wl("Missing button mesh with name: "+e):Su("Skipping unknown button at index: "+t+" with mapped name: "+this.mapping.buttons[t]);for(t=0;t<this.mapping.axisMeshNames.length;t++)(e=this.mapping.axisMeshNames[t])?(i=a.getObjectByName(e))?(r={index:t,value:c(i,"VALUE"),min:c(i,"MIN"),max:c(i,"MAX")}).value&&r.min&&r.max?l.axisMeshes[t]=r:Wl("Missing axis submesh under mesh with name: "+e+"(VALUE: "+!!r.value+", MIN: "+!!r.min+", MAX:"+!!r.max+")"):Wl("Missing axis mesh with name: "+e):Su("Skipping unknown axis at index: "+t);this.calculateRayOriginFromMesh(a),this.setModelVisibility()}Su("Model load complete.")}function c(u,d){for(var f=0,A=u.children.length;f<A;f++){var m=u.children[f];if(m&&m.name===d)return m}}},calculateRayOriginFromMesh:(function(){var n=new M.Quaternion;return function(t){var e;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,e=t.getObjectByName(this.mapping.pointingPoseMeshName)){var i=t.parent;i&&(t.parent=null,t.updateMatrixWorld(!0),t.parent=i),e.getWorldPosition(this.rayOrigin.origin),e.getWorldQuaternion(n),this.rayOrigin.direction.applyQuaternion(n),i&&t.updateMatrixWorld(!0)}else Su("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}})(),lerpAxisTransform:(function(){var n=new M.Quaternion;return function(t,e){var i=this.loadedMeshInfo.axisMeshes[t];if(i){var r=i.min,a=i.max,l=i.value,c=.5*e+.5;l.setRotationFromQuaternion(n.copy(r.quaternion).slerp(a.quaternion,c)),l.position.lerpVectors(r.position,a.position,c)}}})(),lerpButtonTransform:(function(){var n=new M.Quaternion;return function(t,e){var i=this.loadedMeshInfo.buttonMeshes[t];if(i){var r=i.unpressed,a=i.pressed,l=i.value;l.setRotationFromQuaternion(n.copy(r.quaternion).slerp(a.quaternion,e)),l.position.lerpVectors(r.position,a.position,e)}}})(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(n){var t=this.mapping.buttons[n.detail.id];t&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(t,n.detail.state.value),this.el.emit(t+"changed",n.detail.state))},onAxisMoved:function(n){var t=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var e=0;e<t;e++)this.lerpAxisTransform(e,n.detail.axis[e]||0);ur(this,this.mapping.axes,n)},setModelVisibility:function(n){var t=this.el.getObject3D("mesh");this.controllerPresent&&(n=n!==void 0?n:this.modelVisible,this.modelVisible=n,t&&(t.visible=n))}}),Wv=new M.Quaternion,Kf=new M.Vector3,function(n,t,e){t.position.copy(n.transform.position),t.quaternion.copy(n.transform.orientation),Kf.copy(e),Wv.copy(n.transform.orientation),Kf.applyQuaternion(Wv),t.position.sub(Kf)});function oi(n,t){this.renderer=n,this.xrHitTestSource=null,n.xr.addEventListener("sessionend",(function(){this.xrHitTestSource=null}).bind(this)),n.xr.addEventListener("sessionstart",(function(){this.sessionStart(t)}).bind(this)),this.renderer.xr.isPresenting&&this.sessionStart(t)}function jv(n){console.warn(n.message),console.warn('Cannot requestHitTestSource Are you missing: webxr="optionalFeatures: hit-test;" from <a-scene>?')}jl.tempFakePose={transform:{orientation:new M.Quaternion,position:new M.Vector3}},oi.prototype.previousFrameAnchors=new Set,oi.prototype.anchorToObject3D=new Map,oi.prototype.sessionStart=function(n){this.session=this.renderer.xr.getSession(),"requestHitTestSource"in this.session?n.space?this.session.requestHitTestSource(n).then((function(t){this.xrHitTestSource=t}).bind(this)).catch(jv):n.profile&&this.session.requestHitTestSourceForTransientInput(n).then((function(t){this.xrHitTestSource=t,this.transient=!0}).bind(this)).catch(jv):jv({message:"No requestHitTestSource on the session."})},oi.prototype.anchorFromLastHitTestResult=function(n,t){var e=this.lastHitTest;if(e){var i={object3D:n,offset:t};Array.from(this.anchorToObject3D.entries()).forEach((function(r){var a=r[1].object3D,l=r[0];a===n&&(this.anchorToObject3D.delete(l),l.delete())}).bind(this)),e.createAnchor&&e.createAnchor().then((function(r){this.anchorToObject3D.set(r,i)}).bind(this)).catch((function(r){console.warn(r.message),console.warn('Cannot create anchor, are you missing: webxr="optionalFeatures: anchors;" from <a-scene>?')}))}},oi.prototype.doHit=function(n){if(this.renderer.xr.isPresenting){var t,e,i=this.renderer.xr.getReferenceSpace(),r=n.getViewerPose(i);return this.xrHitTestSource&&r?this.transient?(t=n.getHitTestResultsForTransientInput(this.xrHitTestSource)).length>0&&(e=t[0].results).length>0&&(this.lastHitTest=e[0],e[0].getPose(i)):(t=n.getHitTestResults(this.xrHitTestSource)).length>0&&(this.lastHitTest=t[0],t[0].getPose(i)):void 0}},oi.updateAnchorPoses=function(n,t){var e=n.trackedAnchors||oi.prototype.previousFrameAnchors;oi.prototype.previousFrameAnchors.forEach((function(i){e.has(i)||oi.prototype.anchorToObject3D.delete(i)})),e.forEach((function(i){var r,a,l,c;try{if(r=n.getPose(i.anchorSpace,t)){if(!(a=oi.prototype.anchorToObject3D.get(i)))return;l=a.offset,c=a.object3D,jl(r,c,l)}}catch(u){console.error("while updating anchor poses:",u)}})),oi.prototype.previousFrameAnchors=e},le("ar-hit-test",{schema:{target:{type:"selector"},enabled:{default:!0},src:{default:"data:image/webp;base64,UklGRkQHAABXRUJQVlA4WAoAAAAQAAAA/wEA/wEAQUxQSL0DAAARDzD/ERGCjrY9sYYFfgo6aa1kJ7K0w9Lo3AadLSVeFxevQwj5kuM8RfR/Atw/C0+ozB/oUBrloFZs6ElSW88j1KA4yExNWQaqRZquIDF0JYmlq0hAuUDTFu66tng3teW7pa3cQf1V1edvur54M/Slm6Wv3Gx9zw0MXlQLntcsBN6wkHjTQuYtC4W3LTw8mGRVG57TbAROtxHfZNhInGkjc5aNwtk2Hg6Mvki14k+NkZzCwQgCxalcAv3kddRTPI1DcUrXId1FLf1uHpzaQz4tquhZVLlKesbVpqKeTj0n0F5PpXDlFN9UqmhalL/ImuZFo6KmToWLoKlddMprqlS8cKovBvHo2kTiFV2LN4msaxKZl3QNiair8xYRdDWivIvXVXmbcMqJ51UebZuFXxZt6xd4laxtciqRtA3Cv0nU1t+kEUFbI8JvCa+tvkm3FDlO/W+OR99+kWEp/YYo+tYfTVnf/K8cE/F///3vv//993eeL+a+uvjawLcX3xjYvJotBFY3kVjTRGFtE+BU2AiMbiQyhpHMWEYeBozAH5qNBYRDB5KBCaTDBKKBAZTDBoKBDjwHAN5ABeCJBsAZcAAC0YHHxAYSMYBiYgGZWEA2MYFCbCCZGAAIANFEB+AnYgMQTDQAYSJ2AN5EBZAm4gDgTDgAeSIu4DGygTIRN1CMLOCZiACykQlg4jsAycgA8AO+BxCNdJyDkcbwRirDGXGnx8w+FDPrkM3MQ9JQZMYhiiwV/RDMtIM3U1/DmXHUo+IR2kSR2ToWkQ1NIn2qf2J8LCqJKiDUiSADHY3whirhdHgZ94HKaR97PhE+twEUJUFoAcgyTct8hfSxSkShASDKdMJ/ritKHwgyQ0sD4D/miCxU5SbhOOUDTnZpccCjYP/i0bZ/8bAgtVGEoGapWIQXyzKVKLwgNJFk2rtMIgoNRJlOZF7SNSSyUEeQmbxBFKEmtYjEe8S8zOZ1AkJVCmS88FJOtF40Ksg4oUaFiygk3C8qlTVNyl8UTevCUdAE2t14PfVqU1FPp57TopKeQZWromddTQp6QOfTOEQt/ZDuipZ11w/wOiqO8dRORcc6BQEkDQMClaHcn5wV9yLbxsNZNgpn2sicYSNxuo34Js1G4FQbnuNsOPa28PCWhcKbFjJvWEi8ZiHwqgXPcxbc5db33Cx95WboSzddX7yp+vyN0+eul7ZyN7Xlu64t3jVt4c5pc4JLV5EYupJE0xUknC4nOjVlmaYpyLit53HCQ0+ScnqceNcS5dzUkd0/CwMAVlA4IGADAAAQXwCdASoAAgACP8ne6Wy/tjCpqJ/IA/A5CWlu4XYBG/Pz8AfwD8APz//f3v8E1fuHZnxKYACtfuHZnxKYACrYTb5mOslhxu843ecbvON3nG7zjd3a0VCn7G1MABVxwH/Xd25gAK1+4dmfEpe2+PHhQaj75++riG6FuYACtfuHZnxKYACRrK3q9xO8Ss3uWKnMhs/rDF1hi6wxdYYusMXWGI5QRcCFDZog5OgqNlse1NDuz/UoFa/cOzPiUwAEsAOK4/nu5eZHK2tlXxJfNYlMABWv3Dsz4bvNJ5YA/LtxJ38SmAArX7h2Z8Sk5vdZUYv7mZPiUwAFa/cOzPh21s5OgZxf1mfEpemRyFr/rM+JS9noA/LtxJ38SmAAlUJIotzAASn6TjdhK+D3Dsz4dyvB7h2Z8O2tnJ0DOL+sz4lL2nKLT4lL/+iSLOocxq639w7M34MNZdm55uJ8v8ra2cpVZnxKTq2F3PN/cNksAfl24k7+JTAASqrD37h2Z7b1W+VtbOUqsz4lJ1bC7nm/uGyWAPy7cSd/EpgAJVVh79w7M9t6rfK2tnKVWZ8Sk6thdzzf3DZLAH5duJO/iUwAEqqw9+4dme29VvlbWzlKrM+JSdWwu55v7hslgD8u3EnfxKYACVVYe/cOzPbeq3ytrZylVme0kYJ8557FLerqFrzIbPrrf3DZLAH5duJO/iUvaVMS9BoaF4p7pSDFTP1XMyfElelrM0DOL+sz4eBJ13nV1OppBGPuKb4YzXQgq9uH19uS/0+JS9t9fr6ZUlQBelDG6GMgq97otb5QMPJwtKyBTbFp8Sl7b6/X0ykkawEOsgdiE6Fi0vb/Eve6xkwsmug0Z4nGNHQO8839bpTsjpz7SWIJxKagvd1QWMa6FYT1KEw3j4XDT6vJ9Xk+nyfT5Pq8n1eEmk5dinMM/9Fcfz4Z3Dsz3KD2dw7LxBRxKrqUUGQPH/7zxr1KIfNpLEJ0MZB2ITM/0Z2EFoh12NlXnEcpYcbvON3nG7zjd5xu84vfcNIAAP7+y8ceyzbVxkakPYY4lcr72fqOnDwipv+yxC71wAADBrjKnAAAAAAAAAAAAAAw7oNGHttqWONcoFN/2WIDc2pa6WVFtFYROlsaMaTXdcOjXHz93+YxAglKa4AAAAA=",type:"map"},type:{default:"footprint",oneOf:["footprint","map"]},footprintDepth:{default:.1},mapSize:{type:"vec2",default:{x:.5,y:.5}}},sceneOnly:!0,init:function(){this.hitTest=null,this.imageDataArray=new Uint8ClampedArray(1048576),this.imageData=new ImageData(this.imageDataArray,512,512),this.textureCache=new Map,this.orthoCam=new M.OrthographicCamera,this.orthoCam.layers.set(21),this.textureTarget=new M.WebGLRenderTarget(512,512,{}),this.basicMaterial=new M.MeshBasicMaterial({color:0,side:M.DoubleSide}),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.canvas.width=512,this.canvas.height=512,this.canvasTexture=new M.CanvasTexture(this.canvas,{alpha:!0}),this.canvasTexture.flipY=!1;var n=this.el.getAttribute("webxr"),t=n.optionalFeatures;t.includes("hit-test")&&t.includes("anchors")||(t.push("hit-test"),t.push("anchors"),this.el.setAttribute("webxr",n)),this.el.sceneEl.renderer.xr.addEventListener("sessionend",(function(){this.hitTest=null}).bind(this)),this.el.sceneEl.addEventListener("enter-vr",(function(){if(this.el.is("ar-mode")){var e=this.el.sceneEl.renderer,i=this.session=e.xr.getSession();this.hasPosedOnce=!1,this.bboxMesh.visible=!1,Mu||(Mu=new Map),i.requestReferenceSpace("viewer").then((function(c){this.viewerHitTest=this.hitTest=new oi(e,{space:c}),this.el.emit("ar-hit-test-start")}).bind(this));var r=this;this.el.sceneEl.addEventListener("controllersupdated",(function(){var c=this.xrSession&&this.xrSession.inputSources;if(c){for(var u=0;u<c.length;++u)if(c[u].targetRayMode==="tracked-pointer"){r.hitTest=new oi(e,{space:c[u].targetRaySpace}),Mu.set(c[u],r.hitTest),r.viewerHitTest&&typeof r.viewerHitTest.cancel=="function"&&(r.viewerHitTest.cancel(),r.viewerHitTest=null);break}}}));var a="generic-touchscreen",l=new oi(e,{profile:a});i.addEventListener("selectstart",(function(c){if(this.data.enabled===!0){var u=c.inputSource;this.bboxMesh.visible=!0,this.hasPosedOnce===!0&&(this.el.emit("ar-hit-test-select-start",{inputSource:u,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),u.profiles[0]===a?this.hitTest=l:(this.hitTest=Mu.get(u)||new oi(e,{space:u.targetRaySpace}),Mu.set(u,this.hitTest)))}}).bind(this)),i.addEventListener("selectend",(function(c){if(this.hitTest&&this.data.enabled===!0){var u,d=c.inputSource;this.hasPosedOnce===!0&&(this.bboxMesh.visible=!1,this.data.target&&(u=this.data.target.object3D)&&(jl.tempFakePose.transform.position.copy(this.bboxMesh.position),jl.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion),jl(jl.tempFakePose,u,this.bboxOffset),u.visible=!0,this.hitTest.anchorFromLastHitTestResult(u,this.bboxOffset)),this.el.emit("ar-hit-test-select",{inputSource:d,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),this.hitTest=null)}else this.hitTest=null}).bind(this))}}).bind(this)),this.bboxOffset=new M.Vector3,this.update=this.update.bind(this),this.makeBBox()},update:function(){this.data.enabled===!1&&(this.hitTest=null,this.bboxMesh.visible=!1),this.data.target&&(this.data.target.object3D?(this.data.target.addEventListener("model-loaded",this.update),this.data.target.object3D.layers.enable(21),this.data.target.object3D.traverse((function(n){n.layers.enable(21)}))):this.data.target.addEventListener("loaded",this.update,{once:!0})),this.bboxNeedsUpdate=!0},makeBBox:function(){var n=new M.PlaneGeometry(1,1),t=new M.MeshBasicMaterial({transparent:!0,color:16777215});n.rotateX(-Math.PI/2),n.rotateY(-Math.PI/2),this.bbox=new M.Box3,this.bboxMesh=new M.Mesh(n,t),this.el.setObject3D("ar-hit-test",this.bboxMesh),this.bboxMesh.visible=!1},updateFootprint:function(){var n,t,e,i=this.el.sceneEl.renderer,r=i.xr.enabled;this.bboxMesh.material.map=this.canvasTexture,this.bboxMesh.material.needsUpdate=!0,this.orthoCam.rotation.set(-Math.PI/2,0,-Math.PI/2),this.orthoCam.position.copy(this.bboxMesh.position),this.orthoCam.position.y-=this.bboxMesh.scale.y/2,this.orthoCam.near=.1,this.orthoCam.far=this.orthoCam.near+this.data.footprintDepth*this.bboxMesh.scale.y,this.orthoCam.position.y+=this.orthoCam.far,this.orthoCam.right=this.bboxMesh.scale.z/2,this.orthoCam.left=-this.bboxMesh.scale.z/2,this.orthoCam.top=this.bboxMesh.scale.x/2,this.orthoCam.bottom=-this.bboxMesh.scale.x/2,this.orthoCam.updateProjectionMatrix(),t=i.getRenderTarget(),i.setRenderTarget(this.textureTarget),i.xr.enabled=!1,e=this.el.object3D.background,this.el.object3D.overrideMaterial=this.basicMaterial,this.el.object3D.background=null,i.render(this.el.object3D,this.orthoCam),this.el.object3D.background=e,this.el.object3D.overrideMaterial=null,i.xr.enabled=r,i.setRenderTarget(t),i.readRenderTargetPixels(this.textureTarget,0,0,512,512,this.imageDataArray),this.context.putImageData(this.imageData,0,0),this.context.shadowColor="white",this.context.shadowBlur=10,this.context.drawImage(this.canvas,0,0),n=this.context.getImageData(0,0,512,512);for(var a=0;a<262144;a++)n.data[4*a+3]!==0&&n.data[4*a+3]!==255&&(n.data[4*a+3]=128);this.context.putImageData(n,0,0),this.canvasTexture.needsUpdate=!0},tick:function(){var n,t,e=this.el.sceneEl.frame,i=this.el.sceneEl.renderer;e&&oi.updateAnchorPoses(e,i.xr.getReferenceSpace()),this.bboxNeedsUpdate&&(this.bboxNeedsUpdate=!1,this.data.target&&this.data.type!=="map"||(this.textureCache.has(this.data.src)?t=this.textureCache.get(this.data.src):(t=new M.TextureLoader().load(this.data.src),this.textureCache.set(this.data.src,t)),this.bboxMesh.material.map=t,this.bboxMesh.material.needsUpdate=!0),this.data.target&&this.data.target.object3D?(this.bbox.setFromObject(this.data.target.object3D),this.bbox.getCenter(this.bboxMesh.position),this.bbox.getSize(this.bboxMesh.scale),this.data.type==="footprint"&&(this.bboxMesh.scale.x*=1.04,this.bboxMesh.scale.z*=1.04,this.updateFootprint()),this.bboxMesh.position.y-=this.bboxMesh.scale.y/2,this.bboxOffset.copy(this.bboxMesh.position),this.bboxOffset.sub(this.data.target.object3D.position)):this.bboxMesh.scale.set(this.data.mapSize.x,1,this.data.mapSize.y)),this.hitTest&&(n=this.hitTest.doHit(e))&&(this.hasPosedOnce!==!0&&(this.hasPosedOnce=!0,this.el.emit("ar-hit-test-achieved")),this.bboxMesh.visible=!0,this.bboxMesh.position.copy(n.transform.position),this.bboxMesh.quaternion.copy(n.transform.orientation))}}),le("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},sceneOnly:!0,update:function(){var n=this.data,t=this.el.object3D;n.transparent?t.background=null:t.background=new M.Color(n.color)},remove:function(){this.el.object3D.background=null}}),le("debug",{schema:{default:!0},sceneOnly:!0});var fM="a-dialog-buttons-container",Xv="a-dialog-button";function pM(n,t){var e,i,r,a;return(e=document.createElement("div")).classList.add("a-modal"),e.setAttribute(ti,""),(i=document.createElement("div")).className="a-dialog",i.setAttribute(ti,""),e.appendChild(i),(r=document.createElement("div")).classList.add("a-dialog-text-container"),i.appendChild(r),(a=document.createElement("div")).classList.add("a-dialog-text"),a.innerHTML=n,r.appendChild(a),i.appendChild(t),e}le("device-orientation-permission-ui",{schema:{enabled:{default:!0},deviceMotionMessage:{default:"This immersive website requires access to your device motion sensors."},httpsMessage:{default:"Access this site over HTTPS to enter VR mode and grant access to the device sensors."},denyButtonText:{default:"Deny"},allowButtonText:{default:"Allow"},cancelButtonText:{default:"Cancel"}},sceneOnly:!0,init:function(){var n=this;this.data.enabled&&(window.isSecureContext||this.showHTTPAlert(),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission?(this.onDeviceMotionDialogAllowClicked=this.onDeviceMotionDialogAllowClicked.bind(this),this.onDeviceMotionDialogDenyClicked=this.onDeviceMotionDialogDenyClicked.bind(this),DeviceOrientationEvent.requestPermission().then((function(){n.el.emit("deviceorientationpermissiongranted"),n.permissionGranted=!0})).catch((function(){var t,e,i,r,a,l,c,u;n.devicePermissionDialogEl=(t=n.data.denyButtonText,e=n.data.allowButtonText,i=n.data.deviceMotionMessage,r=n.onDeviceMotionDialogAllowClicked,a=n.onDeviceMotionDialogDenyClicked,(l=document.createElement("div")).classList.add(fM),(c=document.createElement("button")).classList.add(Xv,"a-dialog-deny-button"),c.setAttribute(ti,""),c.innerHTML=t,l.appendChild(c),(u=document.createElement("button")).classList.add(Xv,"a-dialog-allow-button"),u.setAttribute(ti,""),u.innerHTML=e,l.appendChild(u),u.addEventListener("click",(function(d){d.stopPropagation(),r()})),c.addEventListener("click",(function(d){d.stopPropagation(),a()})),pM(i,l)),n.el.appendChild(n.devicePermissionDialogEl)}))):this.permissionGranted=!0)},remove:function(){this.devicePermissionDialogEl&&this.el.removeChild(this.devicePermissionDialogEl)},onDeviceMotionDialogDenyClicked:function(){this.remove()},showHTTPAlert:function(){var n,t,e,i,r,a=this,l=(n=a.data.cancelButtonText,t=a.data.httpsMessage,e=function(){a.el.removeChild(l)},(i=document.createElement("div")).classList.add(fM),(r=document.createElement("button")).classList.add(Xv,"a-dialog-ok-button"),r.setAttribute(ti,""),r.innerHTML=n,i.appendChild(r),r.addEventListener("click",(function(c){c.stopPropagation(),e()})),pM(t,i));this.el.appendChild(l)},onDeviceMotionDialogAllowClicked:function(){var n=this;this.el.emit("deviceorientationpermissionrequested"),DeviceOrientationEvent.requestPermission().then((function(t){t==="granted"?(n.el.emit("deviceorientationpermissiongranted"),n.permissionGranted=!0):n.el.emit("deviceorientationpermissionrejected"),n.remove()})).catch(console.error)}}),le("embedded",{dependencies:["xr-mode-ui"],schema:{default:!0},sceneOnly:!0,update:function(){var n=this.el,t=n.querySelector(".a-enter-vr");this.data===!0?(t&&t.classList.add("embedded"),n.removeFullScreenStyles()):(t&&t.classList.remove("embedded"),n.addFullScreenStyles())}});var Q5="https://unpkg.com/aframe-inspector@"+(function(){var n=jT.split(".");return n[2]="x",n.join(".")})()+"/dist/aframe-inspector.min.js";le("inspector",{schema:{url:{default:Q5}},sceneOnly:!0,init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var n;this.firstPlay&&(n=dh("inspector"))!=="false"&&n&&(this.openInspector(),this.firstPlay=!1)},initOverlay:function(){this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML='Loading Inspector<span class="dots"><span>.</span><span>.</span><span>.</span></span>'},remove:function(){this.removeEventListeners()},onKeydown:function(n){n.keyCode===73&&(n.ctrlKey&&n.altKey||n.getModifierState("AltGraph"))&&this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(n){n.data==="INJECT_AFRAME_INSPECTOR"&&this.openInspector()},openInspector:function(n){var t,e=this;AFRAME.INSPECTOR||AFRAME.inspectorInjected?AFRAME.INSPECTOR.open(n):(this.showLoader(),(t=document.createElement("script")).src=this.data.url,t.setAttribute("data-name","aframe-inspector"),t.setAttribute(ti,""),t.onload=function(){AFRAME.INSPECTOR.open(n),e.hideLoader(),e.removeEventListeners()},t.onerror=function(){e.loadingMessageEl.innerHTML="Error loading Inspector"},document.head.appendChild(t),AFRAME.inspectorInjected=!0)},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}}),le("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},sceneOnly:!0,update:function(){var n=this.data,t=this.el,e=this.el.object3D.fog;e&&n.type===e.name?Object.keys(this.schema).forEach((function(i){var r=n[i];i==="color"&&(r=new M.Color(r)),e[i]=r})):t.object3D.fog=(function(i){var r;return(r=i.type==="exponential"?new M.FogExp2(i.color,i.density):new M.Fog(i.color,i.near,i.far)).name=i.type,r})(n)},remove:function(){var n=this.el;this.el.object3D.fog&&(n.object3D.fog=null)}}),le("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},sceneOnly:!0,init:function(){this.onKeyup=this.onKeyup.bind(this)},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(n){var t=this.el;nb(n)&&(this.data.enterVR&&n.keyCode===70&&t.enterVR(),this.data.exitVR&&n.keyCode===27&&t.exitVR())}});var Bu=Ze("components:pool:warn");le("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},sceneOnly:!0,multiple:!0,initPool:function(){var n;for(this.availableEls=[],this.usedEls=[],this.data.mixin||Bu("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||Bu("Container "+this.data.container+" not found.")),this.container=this.container||this.el,n=0;n<this.data.size;++n)this.createEntity()},update:function(n){var t=this.data;n.mixin===t.mixin&&n.size===t.size||this.initPool()},createEntity:function(){var n;(n=document.createElement("a-entity")).play=this.wrapPlay(n.play),n.setAttribute("mixin",this.data.mixin),n.object3D.visible=!1,n.pause(),this.container.appendChild(n),this.availableEls.push(n);var t=this.usedEls;n.addEventListener("loaded",(function(){t.indexOf(n)===-1&&(n.object3DParent=n.object3D.parent,n.object3D.parent.remove(n.object3D))}))},wrapPlay:function(n){var t=this.usedEls;return function(){t.indexOf(this)!==-1&&n.call(this)}},requestEntity:function(){var n;if(this.availableEls.length===0){if(this.data.dynamic===!1)return void Bu("Requested entity from empty pool: "+this.attrName);Bu("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName),this.createEntity()}return n=this.availableEls.shift(),this.usedEls.push(n),n.object3DParent&&(n.object3DParent.add(n.object3D),this.updateRaycasters()),n.object3D.visible=!0,n},returnEntity:function(n){var t=this.usedEls.indexOf(n);if(t!==-1)return this.usedEls.splice(t,1),this.availableEls.push(n),n.object3DParent=n.object3D.parent,n.object3D.parent.remove(n.object3D),this.updateRaycasters(),n.object3D.visible=!1,n.pause(),n;Bu("The returned entity was not previously pooled from "+this.attrName)},updateRaycasters:function(){document.querySelectorAll("[raycaster]").forEach((function(n){n.components.raycaster.setDirty()}))}}),le("real-world-meshing",{schema:{filterLabels:{type:"array"},meshesEnabled:{default:!0},meshMixin:{default:!0},planesEnabled:{default:!0},planeMixin:{default:""}},sceneOnly:!0,init:function(){var n=this.el.getAttribute("webxr"),t=n.requiredFeatures;t.indexOf("mesh-detection")===-1&&(t.push("mesh-detection"),this.el.setAttribute("webxr",n)),t.indexOf("plane-detection")===-1&&(t.push("plane-detection"),this.el.setAttribute("webxr",n)),this.meshEntities=[],this.initWorldMeshEntity=this.initWorldMeshEntity.bind(this)},tick:function(){this.el.is("ar-mode")&&(this.detectMeshes(),this.updateMeshes())},detectMeshes:function(){var n,t,e,i=this.data,r=this.el,a=this.meshEntities,l=!1,c=[],u=this.data.filterLabels;n=(e=r.frame).detectedMeshes,t=e.detectedPlanes;for(var d=0;d<a.length;d++)a[d].present=!1;if(i.meshesEnabled){for(var f of n.values())if(!u.length||u.indexOf(f.semanticLabel)!==-1){for(d=0;d<a.length;d++)if(f===a[d].mesh){l=!0,a[d].present=!0,a[d].lastChangedTime<f.lastChangedTime&&this.updateMeshGeometry(a[d].el,f),a[d].lastChangedTime=f.lastChangedTime;break}l||c.push(f),l=!1}}if(i.planesEnabled){for(f of t.values())if(!u.length||u.indexOf(f.semanticLabel)!==-1){for(d=0;d<a.length;d++)if(f===a[d].mesh){l=!0,a[d].present=!0,a[d].lastChangedTime<f.lastChangedTime&&this.updateMeshGeometry(a[d].el,f),a[d].lastChangedTime=f.lastChangedTime;break}l||c.push(f),l=!1}}this.deleteMeshes(),this.createNewMeshes(c)},updateMeshes:(function(){var n=new M.Matrix4;return function(){for(var t,e,i,r=this.el,a=r.frame,l=this.meshEntities,c=r.renderer.xr.getReferenceSpace(),u=0;u<l.length;u++)i=l[u].mesh.meshSpace||l[u].mesh.planeSpace,t=a.getPose(i,c),(e=l[u].el).hasLoaded&&(n.fromArray(t.transform.matrix),n.decompose(e.object3D.position,e.object3D.quaternion,e.object3D.scale))}})(),deleteMeshes:function(){for(var n=this.meshEntities,t=[],e=0;e<n.length;e++)n[e].present?t.push(n[e]):this.el.removeChild(n[e]);this.meshEntities=t},createNewMeshes:function(n){for(var t,e=0;e<n.length;e++)t=document.createElement("a-entity"),this.meshEntities.push({mesh:n[e],el:t}),t.addEventListener("loaded",this.initWorldMeshEntity),this.el.appendChild(t)},initMeshGeometry:function(n){var t,e,i;if(n instanceof XRPlane){e=new M.Shape,i=n.polygon;for(var r=0;r<i.length;++r)r===0?e.moveTo(i[r].x,i[r].z):e.lineTo(i[r].x,i[r].z);return(t=new M.ShapeGeometry(e)).rotateX(Math.PI/2),t}return(t=new M.BufferGeometry).setAttribute("position",new M.BufferAttribute(n.vertices,3)),t.setIndex(new M.BufferAttribute(n.indices,1)),t},initWorldMeshEntity:function(n){for(var t,e,i,r=n.target,a=this.meshEntities,l=0;l<a.length;l++)if(a[l].el===r){i=a[l];break}t=this.initMeshGeometry(i.mesh),e=new M.Mesh(t,new M.MeshBasicMaterial({color:16777215*Math.random(),side:M.DoubleSide})),r.setObject3D("mesh",e),i.mesh instanceof XRPlane&&this.data.planeMixin?r.setAttribute("mixin",this.data.planeMixin):this.data.meshMixin&&r.setAttribute("mixin",this.data.meshMixin),r.setAttribute("data-world-mesh",i.mesh.semanticLabel)},updateMeshGeometry:function(n,t){var e=n.getObject3D("mesh");e.geometry.dispose(),e.geometry=this.initMeshGeometry(t)}}),le("reflection",{schema:{directionalLight:{type:"selector"}},sceneOnly:!0,init:function(){var n=this;this.cubeRenderTarget=new M.WebGLCubeRenderTarget(16),this.cubeCamera=new M.CubeCamera(.1,1e3,this.cubeRenderTarget),this.lightingEstimationTexture=new M.WebGLCubeRenderTarget(16).texture,this.needsVREnvironmentUpdate=!0;var t=this.el.getAttribute("webxr"),e=t.optionalFeatures;e.includes("light-estimation")||(e.push("light-estimation"),this.el.setAttribute("webxr",t)),this.el.addEventListener("enter-vr",(function(){n.el.is("ar-mode")&&n.el.renderer.xr.getSession().requestLightProbe&&n.startLightProbe()})),this.el.addEventListener("exit-vr",(function(){n.xrLightProbe&&n.stopLightProbe()})),this.el.object3D.environment=this.cubeRenderTarget.texture},stopLightProbe:function(){this.xrLightProbe=null,this.probeLight&&(this.probeLight.components.light.light.intensity=0),this.needsVREnvironmentUpdate=!0,this.el.object3D.environment=this.cubeRenderTarget.texture},startLightProbe:function(){this.needsLightProbeUpdate=!0},setupLightProbe:function(){var n=this.el.renderer,t=n.xr.getSession(),e=this,i=n.getContext();if(!this.probeLight){var r=document.createElement("a-light");r.setAttribute("type","probe"),r.setAttribute("intensity",0),this.el.appendChild(r),this.probeLight=r}switch(t.preferredReflectionFormat){case"srgba8":i.getExtension("EXT_sRGB");break;case"rgba16f":i.getExtension("OES_texture_half_float")}this.glBinding=new XRWebGLBinding(t,i),i.getExtension("EXT_sRGB"),i.getExtension("OES_texture_half_float"),t.requestLightProbe().then((function(a){e.xrLightProbe=a,a.addEventListener("reflectionchange",e.updateXRCubeMap.bind(e))})).catch((function(a){console.warn("Lighting estimation not supported: "+a.message),console.warn('Are you missing: webxr="optionalFeatures: light-estimation;" from <a-scene>?')}))},updateXRCubeMap:function(){var n=this.el.renderer,t=this.glBinding.getReflectionCubeMap(this.xrLightProbe);t&&(n.properties.get(this.lightingEstimationTexture).__webglTexture=t,this.lightingEstimationTexture.needsPMREMUpdate=!0,this.el.object3D.environment=this.lightingEstimationTexture)},tick:function(){var n=this.el.object3D,t=this.el.renderer,e=this.el.frame;if(e&&this.xrLightProbe){var i=e.getLightEstimate(this.xrLightProbe);i&&(function(r,a,l,c){var u=Math.max(r.primaryLightIntensity.x,Math.max(r.primaryLightIntensity.y,r.primaryLightIntensity.z));a.sh.fromArray(r.sphericalHarmonicsCoefficients),a.intensity=3.14,l&&(l.color.setRGB(r.primaryLightIntensity.x/u,r.primaryLightIntensity.y/u,r.primaryLightIntensity.z/u),l.intensity=u,c.copy(r.primaryLightDirection))})(i,this.probeLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.object3D.position)}this.needsVREnvironmentUpdate&&(n.environment=null,this.needsVREnvironmentUpdate=!1,this.cubeCamera.position.set(0,1.6,0),this.cubeCamera.update(t,n),n.environment=this.cubeRenderTarget.texture),this.needsLightProbeUpdate&&e&&(this.setupLightProbe(),this.needsLightProbeUpdate=!1)},remove:function(){this.el.object3D.environment=null,this.probeLight&&this.el.removeChild(this.probeLight)}});var z5=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),G5=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join(`
`),H5=(le("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},sceneOnly:!0,setup:function(){var n=this.el;if(!this.canvas){var t=n.renderer.getContext();t&&(this.cubeMapSize=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),this.material=new M.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:z5,fragmentShader:G5,side:M.DoubleSide}),this.quad=new M.Mesh(new M.PlaneGeometry(1,1),this.material),this.quad.visible=!1,this.camera=new M.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),n.object3D.add(this.quad),this.onKeyDown=this.onKeyDown.bind(this))}},getRenderTarget:function(n,t){return new M.WebGLRenderTarget(n,t,{colorSpace:this.el.sceneEl.renderer.outputColorSpace,minFilter:M.LinearFilter,magFilter:M.LinearFilter,wrapS:M.ClampToEdgeWrapping,wrapT:M.ClampToEdgeWrapping,format:M.RGBAFormat,type:M.UnsignedByteType})},resize:function(n,t){this.quad.scale.set(n,t,1),this.camera.left=-1*n/2,this.camera.right=n/2,this.camera.top=t/2,this.camera.bottom=-1*t/2,this.camera.updateProjectionMatrix(),this.canvas.width=n,this.canvas.height=t},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(n){var t=n.keyCode===83&&n.ctrlKey&&n.altKey;if(this.data&&t){var e=n.shiftKey?"equirectangular":"perspective";this.capture(e)}},setCapture:function(n){var t,e,i,r,a=this.el;return n==="perspective"?(this.quad.visible=!1,e=this.data.camera&&this.data.camera.components.camera.camera||a.camera,t={width:this.data.width,height:this.data.height}):(e=this.camera,r=new M.WebGLCubeRenderTarget(Math.min(this.cubeMapSize,2048),{format:M.RGBFormat,generateMipmaps:!0,minFilter:M.LinearMipmapLinearFilter,colorSpace:M.SRGBColorSpace}),i=new M.CubeCamera(a.camera.near,a.camera.far,r),a.camera.getWorldPosition(i.position),a.camera.getWorldQuaternion(i.quaternion),i.update(a.renderer,a.object3D),this.quad.material.uniforms.map.value=i.renderTarget.texture,t={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:e,size:t,projection:n}},capture:function(n){var t,e=this.el.renderer.xr.enabled,i=this.el.renderer;this.setup(),i.xr.enabled=!1,t=this.setCapture(n),this.renderCapture(t.camera,t.size,t.projection),this.saveCapture(),i.xr.enabled=e},getCanvas:function(n){var t=this.el.renderer.xr.enabled,e=this.el.renderer;this.setup();var i=this.setCapture(n);return e.xr.enabled=!1,this.renderCapture(i.camera,i.size,i.projection),e.xr.enabled=t,this.canvas},renderCapture:function(n,t,e){var i,r,a,l=this.el.renderer.autoClear,c=this.el,u=c.renderer;r=this.getRenderTarget(t.width,t.height),a=new Uint8Array(4*t.width*t.height),this.resize(t.width,t.height),u.autoClear=!0,u.clear(),u.setRenderTarget(r),u.render(c.object3D,n),u.autoClear=l,u.readRenderTargetPixels(r,0,0,t.width,t.height,a),u.setRenderTarget(null),e==="perspective"&&(a=this.flipPixelsVertically(a,t.width,t.height)),i=new ImageData(new Uint8ClampedArray(a),t.width,t.height),this.quad.visible=!1,this.ctx.putImageData(i,0,0)},flipPixelsVertically:function(n,t,e){for(var i=n.slice(0),r=0;r<t;++r)for(var a=0;a<e;++a)i[4*r+a*t*4]=n[4*r+(e-a)*t*4],i[4*r+1+a*t*4]=n[4*r+1+(e-a)*t*4],i[4*r+2+a*t*4]=n[4*r+2+(e-a)*t*4],i[4*r+3+a*t*4]=n[4*r+3+(e-a)*t*4];return i},saveCapture:function(){this.canvas.toBlob((function(n){var t="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",e=document.createElement("a"),i=URL.createObjectURL(n);e.href=i,e.setAttribute("download",t),e.innerHTML="downloading...",e.style.display="none",document.body.appendChild(e),setTimeout((function(){e.click(),document.body.removeChild(e)}),1)}),"image/png")}}),de(282)),V5=de.n(H5),q5=(de(3729),de(8132),window.aframeStats),AM="a-hidden",W5=window.threeStats;le("stats",{schema:{default:!0},sceneOnly:!0,init:function(){var n=this.el;dh("stats")!=="false"&&(this.stats=(function(t){var e=new W5(t.renderer),i=new q5(t),r=t.isMobile?[]:[e,i];return new(V5())({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:r})})(n),this.statsEl=document.querySelector(".rs-base"),this.hideBound=this.hide.bind(this),this.showBound=this.show.bind(this),n.addEventListener("enter-vr",this.hideBound),n.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var n=this.stats;n&&(n("rAF").tick(),n("FPS").frame(),n().update())},hide:function(){this.statsEl.classList.add(AM)},show:function(){this.statsEl.classList.remove(AM)}});var bo="a-hidden";function mM(n){n.addEventListener("touchstart",(function(){n.classList.remove("resethover")}),{passive:!0}),n.addEventListener("touchend",(function(){n.classList.add("resethover")}),{passive:!0})}le("xr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},enterVRButton:{default:""},enterVREnabled:{default:!0},enterARButton:{default:""},enterAREnabled:{default:!0},XRMode:{default:"vr",oneOf:["vr","ar","xr"]}},sceneOnly:!0,init:function(){var n=this,t=this.el;dh("ui")!=="false"&&(this.insideLoader=!1,this.enterVREl=null,this.enterAREl=null,this.orientationModalEl=null,this.bindMethods(),t.addEventListener("enter-vr",this.updateEnterInterfaces),t.addEventListener("exit-vr",this.updateEnterInterfaces),t.addEventListener("update-vr-devices",this.updateEnterInterfaces),window.addEventListener("message",(function(e){e.data.type==="loaderReady"&&(n.insideLoader=!0,n.remove())})),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=this.onEnterVRButtonClick.bind(this),this.onEnterARButtonClick=this.onEnterARButtonClick.bind(this),this.onModalClick=this.onModalClick.bind(this),this.toggleOrientationModalIfNeeded=this.toggleOrientationModalIfNeeded.bind(this),this.updateEnterInterfaces=this.updateEnterInterfaces.bind(this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},onEnterARButtonClick:function(){this.el.enterAR()},update:function(){var n,t,e,i=this.data,r=this.el;if(!i.enabled||this.insideLoader||dh("ui")==="false")return this.remove();this.enterVREl||this.enterAREl||this.orientationModalEl||(this.enterVREl||!i.enterVREnabled||i.XRMode!=="xr"&&i.XRMode!=="vr"||(i.enterVRButton?(this.enterVREl=document.querySelector(i.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=(n=this.onEnterVRButtonClick,(e=document.createElement("div")).classList.add("a-enter-vr"),e.setAttribute(ti,""),(t=document.createElement("button")).className="a-enter-vr-button",t.setAttribute("title","Enter VR mode with a headset or fullscreen without"),t.setAttribute(ti,""),Ia()&&mM(t),e.appendChild(t),t.addEventListener("click",(function(a){n(),a.stopPropagation()})),e),r.appendChild(this.enterVREl))),this.enterAREl||!i.enterAREnabled||i.XRMode!=="xr"&&i.XRMode!=="ar"||(i.enterARButton?(this.enterAREl=document.querySelector(i.enterARButton),this.enterAREl.addEventListener("click",this.onEnterARButtonClick)):(this.enterAREl=(function(a,l){var c,u;return(u=document.createElement("div")).classList.add("a-enter-ar"),l&&u.classList.add("xr"),u.setAttribute(ti,""),(c=document.createElement("button")).className="a-enter-ar-button",c.setAttribute("title","Enter AR mode with a headset or handheld device."),c.setAttribute(ti,""),Ia()&&mM(c),u.appendChild(c),c.addEventListener("click",(function(d){a(),d.stopPropagation()})),u})(this.onEnterARButtonClick,i.XRMode==="xr"),r.appendChild(this.enterAREl))),this.orientationModalEl=(function(a){var l=document.createElement("div");l.className="a-orientation-modal",l.classList.add(bo),l.setAttribute(ti,"");var c=document.createElement("button");return c.setAttribute(ti,""),c.innerHTML="Exit VR",c.addEventListener("click",a),l.appendChild(c),l})(this.onModalClick),r.appendChild(this.orientationModalEl),this.updateEnterInterfaces())},remove:function(){[this.enterVREl,this.enterAREl,this.orientationModalEl].forEach((function(n){n&&n.parentNode&&n.parentNode.removeChild(n)})),this.enterVREl=void 0,this.enterAREl=void 0,this.orientationModalEl=void 0},updateEnterInterfaces:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleEnterARButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var n=this.el;this.enterVREl&&(n.is("vr-mode")||(n.isMobile||zE())&&!Uy()?this.enterVREl.classList.add(bo):(Uy()||this.enterVREl.classList.add("fullscreen"),this.enterVREl.classList.remove(bo),n.enterVR(!1,!0)))},toggleEnterARButtonIfNeeded:function(){var n=this.el;this.enterAREl&&(n.is("vr-mode")||!QE()?this.enterAREl.classList.add(bo):(this.enterAREl.classList.remove(bo),n.enterVR(!0,!0)))},toggleOrientationModalIfNeeded:function(){var n=this.el,t=this.orientationModalEl;t&&n.isMobile&&(!xT()&&n.is("vr-mode")?t.classList.remove(bo):t.classList.add(bo))}}),gi("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(n){this.geometry=new M.BoxGeometry(n.width,n.height,n.depth,n.segmentsWidth,n.segmentsHeight,n.segmentsDepth)}});var gM=M.MathUtils.degToRad;gi("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(n){this.geometry=new M.CircleGeometry(n.radius,n.segments,gM(n.thetaStart),gM(n.thetaLength))}});var vM=M.MathUtils.degToRad;gi("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(n){this.geometry=new M.CylinderGeometry(n.radiusTop,n.radiusBottom,n.height,n.segmentsRadial,n.segmentsHeight,n.openEnded,vM(n.thetaStart),vM(n.thetaLength))}});var yM=M.MathUtils.degToRad;gi("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(n){this.geometry=new M.CylinderGeometry(n.radius,n.radius,n.height,n.segmentsRadial,n.segmentsHeight,n.openEnded,yM(n.thetaStart),yM(n.thetaLength))}}),gi("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(n){this.geometry=new M.DodecahedronGeometry(n.radius,n.detail)}}),gi("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(n){this.geometry=new M.IcosahedronGeometry(n.radius,n.detail)}}),gi("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(n){this.geometry=new M.OctahedronGeometry(n.radius,n.detail)}}),gi("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(n){this.geometry=new M.PlaneGeometry(n.width,n.height,n.segmentsWidth,n.segmentsHeight)}});var EM=M.MathUtils.degToRad;gi("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(n){this.geometry=new M.RingGeometry(n.radiusInner,n.radiusOuter,n.segmentsTheta,n.segmentsPhi,EM(n.thetaStart),EM(n.thetaLength))}});var Jf=M.MathUtils.degToRad;gi("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(n){this.geometry=new M.SphereGeometry(n.radius,n.segmentsWidth,n.segmentsHeight,Jf(n.phiStart),Jf(n.phiLength),Jf(n.thetaStart),Jf(n.thetaLength))}}),gi("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(n){this.geometry=new M.TetrahedronGeometry(n.radius,n.detail)}});var j5=M.MathUtils.degToRad;gi("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(n){this.geometry=new M.TorusGeometry(n.radius,2*n.radiusTubular,n.segmentsRadial,n.segmentsTubular,j5(n.arc))}}),gi("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(n){this.geometry=new M.TorusKnotGeometry(n.radius,2*n.radiusTubular,n.segmentsTubular,n.segmentsRadial,n.p,n.q)}});var Zf=new M.Quaternion,X5=new M.Vector3(0,0,1),Tu=new M.Vector2,bM=new M.Vector2,$f=new M.Vector2;function xM(n,t){return t.color.set(n.color),t.fog=n.fog,t.wireframe=n.wireframe,t.toneMapped=n.toneMapped,t.wireframeLinewidth=n.wireframeLinewidth,t}function CM(n,t){return t.color.set(n.color),t.emissive.set(n.emissive),t.emissiveIntensity=n.emissiveIntensity,t.fog=n.fog,t.metalness=n.metalness,t.roughness=n.roughness,t.wireframe=n.wireframe,t.wireframeLinewidth=n.wireframeLinewidth,n.normalMap&&(t.normalScale=n.normalScale),n.ambientOcclusionMap&&(t.aoMapIntensity=n.ambientOcclusionMapIntensity),n.displacementMap&&(t.displacementScale=n.displacementScale,t.displacementBias=n.displacementBias),t}function _M(n,t){switch(t.color.set(n.color),t.specular.set(n.specular),t.emissive.set(n.emissive),t.emissiveIntensity=n.emissiveIntensity,t.fog=n.fog,t.transparent=n.transparent,t.wireframe=n.wireframe,t.wireframeLinewidth=n.wireframeLinewidth,t.shininess=n.shininess,t.flatShading=n.flatShading,t.wireframe=n.wireframe,t.wireframeLinewidth=n.wireframeLinewidth,t.reflectivity=n.reflectivity,t.refractionRatio=n.refractionRatio,n.combine){case"mix":t.combine=M.MixOperation;break;case"multiply":t.combine=M.MultiplyOperation;break;case"add":t.combine=M.AddOperation}return n.normalMap&&(t.normalScale=n.normalScale),n.ambientOcclusionMap&&(t.aoMapIntensity=n.ambientOcclusionMapIntensity),n.bumpMap&&(t.bumpScale=n.bumpMapScale),n.displacementMap&&(t.displacementScale=n.displacementScale,t.displacementBias=n.displacementBias),t}gi("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(n){var t,e,i,r,a,l,c,u,d;(i=new M.Triangle).a.set(n.vertexA.x,n.vertexA.y,n.vertexA.z),i.b.set(n.vertexB.x,n.vertexB.y,n.vertexB.z),i.c.set(n.vertexC.x,n.vertexC.y,n.vertexC.z),e=i.getNormal(new M.Vector3),Zf.setFromUnitVectors(e,X5),r=i.a.clone().applyQuaternion(Zf),a=i.b.clone().applyQuaternion(Zf),l=i.c.clone().applyQuaternion(Zf),Tu.set(Math.min(r.x,a.x,l.x),Math.min(r.y,a.y,l.y)),bM.set(Math.max(r.x,a.x,l.x),Math.max(r.y,a.y,l.y)),$f.set(0,0).subVectors(bM,Tu),r=new M.Vector2().subVectors(r,Tu).divide($f),a=new M.Vector2().subVectors(a,Tu).divide($f),l=new M.Vector2().subVectors(l,Tu).divide($f),t=this.geometry=new M.BufferGeometry,c=[i.a.x,i.a.y,i.a.z,i.b.x,i.b.y,i.b.z,i.c.x,i.c.y,i.c.z],u=[e.x,e.y,e.z,e.x,e.y,e.z,e.x,e.y,e.z],d=[r.x,r.y,a.x,a.y,l.x,l.y],t.setAttribute("position",new M.Float32BufferAttribute(c,3)),t.setAttribute("normal",new M.Float32BufferAttribute(u,3)),t.setAttribute("uv",new M.Float32BufferAttribute(d,2))}}),Ca("flat",{schema:{color:{type:"color"},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},wireframe:{default:!1},wireframeLinewidth:{default:2},toneMapped:{default:!0}},init:function(n){this.materialData={color:new M.Color},xM(n,this.materialData),this.material=new M.MeshBasicMaterial(this.materialData)},update:function(n){this.updateMaterial(n),hp(this,n)},updateMaterial:function(n){var t;for(t in xM(n,this.materialData),this.materialData)this.material[t]=this.materialData[t]}}),Ca("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(n){this.materialData={color:new M.Color,emissive:new M.Color},CM(n,this.materialData),this.material=new M.MeshStandardMaterial(this.materialData)},update:function(n){this.updateMaterial(n),hp(this,n),Fr("normal",this,n),Fr("displacement",this,n),Fr("ambientOcclusion",this,n),Fr("metalness",this,n),Fr("roughness",this,n),Ny(this,n)},updateMaterial:function(n){var t,e=this.material;for(t in CM(n,this.materialData),this.materialData)e[t]=this.materialData[t]}}),Ca("phong",{schema:{color:{type:"color"},emissive:{type:"color",default:"black"},emissiveIntensity:{default:1},specular:{type:"color",default:"#111111"},transparent:{default:!1},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},envMap:{default:""},sphericalEnvMap:{type:"map"},shininess:{default:30},flatShading:{default:!1},wireframe:{default:!1},wireframeLinewidth:{default:2},combine:{oneOF:["multiply","mix","add"],default:"mix"},reflectivity:{default:.9},refractionRatio:{default:.98},refract:{default:!1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},bumpMap:{type:"map"},bumpMapScale:{default:1},bumpTextureOffset:{type:"vec2"},bumpTextureRepeat:{type:"vec2",default:{x:1,y:1}}},init:function(n){this.materialData={color:new M.Color,specular:new M.Color,emissive:new M.Color},_M(n,this.materialData),this.material=new M.MeshPhongMaterial(this.materialData);var t=this.el.sceneEl;Object.defineProperty(this.material,"envMap",{get:function(){return this._envMap||t.object3D.environment},set:function(e){this._envMap=e}})},update:function(n){this.updateMaterial(n),hp(this,n),Fr("normal",this,n),Fr("displacement",this,n),Fr("ambientOcclusion",this,n),Fr("bump",this,n),Ny(this,n)},updateMaterial:function(n){var t;for(t in _M(n,this.materialData),this.materialData)this.material[t]=this.materialData[t]}}),Ca("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join(`
`),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float contour(float width, float value) {","  return smoothstep(0.5 - value, 0.5 + value, width);","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec2 uv = vUV;","  vec4 texColor = texture(map, uv);","  float dist = texColor.a;","  float width = fwidth(dist);","  float alpha = contour(dist, width);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * dist;","  }","  if (isBigEnough <= BIG_ENOUGH) {","    vec4 box = vec4 (uv - duv, uv + duv);","    alpha = (alpha + 0.5 * (","      contour(texture(map, box.xy).a, width)","      + contour(texture(map, box.zw).a, width)","      + contour(texture(map, box.xw).a, width)","      + contour(texture(map, box.zy).a, width)","    )) / 3.0;","  }","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color, opacity * alpha);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join(`
`),init:function(){return this.uniforms=this.initUniforms(),M.UniformsUtils&&(this.uniforms=M.UniformsUtils.merge([M.UniformsLib.fog,this.uniforms])),this.material=new M.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}}),Ca("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join(`
`),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join(`
`),init:function(){return this.uniforms=this.initUniforms(),M.UniformsUtils&&(this.uniforms=M.UniformsUtils.merge([M.UniformsLib.fog,this.uniforms])),this.material=new M.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}}),Ca("shadow",{schema:{opacity:{default:.5},transparent:{default:!0},alphaToCoverage:{default:!0}},init:function(n){this.material=new M.ShadowMaterial},update:function(n){this.material.opacity=n.opacity,this.material.alphaToCoverage=n.alphaToCoverage,this.material.transparent=n.transparent}});var wM="data-aframe-default-camera";function MM(n){var t=n.primitive,e=Ra[t]&&Ra[t].Geometry,i=new e;if(!e)throw new Error("Unknown geometry `"+t+"`");return i.init(n),i.geometry}cr("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var n,t,e=this.sceneEl,i=this;if(!e.camera||e.camera.el.getAttribute("camera").spectator)if((n=e.querySelectorAll("a-camera, :not(a-mixin)[camera]")).length)for(this.numUserCameras=n.length,t=0;t<n.length;t++)n[t].addEventListener("object3dset",(function(r){r.detail.type==="camera"&&i.checkUserCamera(this)})),n[t].isANode?n[t].load():n[t].addEventListener("nodeready",(function(){this.load()}));else this.createDefaultCamera();else e.emit("cameraready",{cameraEl:e.camera.el})},checkUserCamera:function(n){var t,e=this.el.sceneEl;this.numUserCamerasChecked++,this.initialCameraFound||((t=n.getAttribute("camera")).active&&!t.spectator?(this.initialCameraFound=!0,e.camera=n.getObject3D("camera"),e.emit("cameraready",{cameraEl:n})):this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera())},createDefaultCamera:function(){var n,t=this.sceneEl;(n=document.createElement("a-entity")).setAttribute("camera",{active:!0}),n.setAttribute("position",{x:0,y:1.6,z:0}),n.setAttribute("wasd-controls",""),n.setAttribute("look-controls",""),n.setAttribute(ti,""),n.addEventListener("object3dset",(function(e){e.detail.type==="camera"&&(t.camera=e.detail.object,t.emit("cameraready",{cameraEl:n}))})),t.appendChild(n)},disableActiveCamera:function(){var n;(n=this.sceneEl.querySelectorAll(":not(a-mixin)[camera]"))[n.length-1].setAttribute("camera","active",!0)},setActiveCamera:function(n){var t,e,i,r,a=this.activeCameraEl,l=this.sceneEl;if((r=n.getObject3D("camera"))&&n!==this.activeCameraEl){var c=l.querySelector("["+wM+"]");for(n!==(c&&c.querySelector(":not(a-mixin)[camera]"))&&(function(u){var d;u.camera&&(d=u.querySelector("["+wM+"]"))&&u.removeChild(d)})(l),this.activeCameraEl=n,this.activeCameraEl.play(),l.camera=r,a&&a.setAttribute("camera","active",!1),e=l.querySelectorAll(":not(a-mixin)[camera]"),i=0;i<e.length;i++)(t=e[i]).isEntity&&n!==t&&(t.setAttribute("camera","active",!1),t.pause());l.emit("camera-set-active",{cameraEl:n})}},setSpectatorCamera:function(n){var t,e=this.spectatorCameraEl,i=this.sceneEl;n.getObject3D("camera")&&n!==this.spectatorCameraEl&&(e&&e.setAttribute("camera","spectator",!1),t=this.spectatorCameraEl=n,i.addEventListener("enter-vr",this.wrapRender),i.addEventListener("exit-vr",this.unwrapRender),t.setAttribute("camera","active",!1),t.play(),i.emit("camera-set-spectator",{cameraEl:n}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){this.spectatorCameraEl&&!this.originalRender&&(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){this.originalRender&&(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(n,t){var e,i,r=this.sceneEl;e=r.renderer.xr.enabled,this.originalRender.call(r.renderer,n,t),this.spectatorCameraEl&&!r.isMobile&&e&&(i=this.spectatorCameraEl.components.camera.camera,r.renderer.xr.enabled=!1,this.originalRender.call(r.renderer,n,i),r.renderer.xr.enabled=e)}}),cr("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(n){var t,e,i=this.cache;return n.skipCache?MM(n):(t=i[e=this.hash(n)],(function(r,a){r[a]=r[a]===void 0?1:r[a]+1})(this.cacheCount,e),t||(t=MM(n),i[e]=t,t))},unuseGeometry:function(n){var t,e=this.cache,i=this.cacheCount;n.skipCache||e[t=this.hash(n)]&&((function(r,a){r[a]--})(i,t),i[t]>0||(e[t].dispose(),delete e[t],delete i[t]))},hash:function(n){return JSON.stringify(n)}}),cr("gltf-model",{schema:{dracoDecoderPath:{default:"https://www.gstatic.com/draco/versioned/decoders/1.5.7/"},basisTranscoderPath:{default:""},meshoptDecoderPath:{default:""}},init:function(){this.update()},update:function(){var n=this.data.dracoDecoderPath,t=this.data.basisTranscoderPath,e=this.data.meshoptDecoderPath;!this.dracoLoader&&n&&(this.dracoLoader=new KB,this.dracoLoader.setDecoderPath(n)),!this.ktx2Loader&&t&&(this.ktx2Loader=new ji,this.ktx2Loader.setTranscoderPath(t).detectSupport(this.el.renderer)),!this.meshoptDecoder&&e&&(this.meshoptDecoder=(function(i){return new Promise((function(r,a){var l=document.createElement("script");document.body.appendChild(l),l.onload=r,l.onerror=a,l.async=!0,l.src=i}))})(e).then((function(){return window.MeshoptDecoder.ready})).then((function(){return window.MeshoptDecoder})))},getDRACOLoader:function(){return this.dracoLoader},getKTX2Loader:function(){return this.ktx2Loader},getMeshoptDecoder:function(){return this.meshoptDecoder}});var tp="data-aframe-default-light",KT=(cr("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",this.setupDefaultLights.bind(this))},registerLight:function(n){n.hasAttribute(tp)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var n,t=this.sceneEl;if(this.defaultLights){n=document.querySelectorAll("["+tp+"]");for(var e=0;e<n.length;e++)t.removeChild(n[e]);this.defaultLights=!1}},setupDefaultLights:function(){var n,t,e=this.sceneEl;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||((n=document.createElement("a-entity")).setAttribute("light",{color:"#BBB",type:"ambient"}),n.setAttribute(tp,""),n.setAttribute(ti,""),e.appendChild(n),(t=document.createElement("a-entity")).setAttribute("light",{color:"#FFF",intensity:1.884,castShadow:!0}),t.setAttribute("position",{x:-.5,y:1,z:1}),t.setAttribute(tp,""),t.setAttribute(ti,""),e.appendChild(t),this.defaultLights=!0)}}),Ze),Y5=KT("components:texture:error"),SM=KT("components:texture:warn"),K5=new M.ImageLoader;cr("material",{init:function(){this.materials={},this.sourceCache={}},clearTextureSourceCache:function(){this.sourceCache={}},loadTexture:function(n,t,e){this.loadTextureSource(n,(function(i){var r=JE(i);oA(r,t),e(r)}))},loadTextureSource:function(n,t){var e=this,i=this.sourceCache,r=this.hash(n);function a(l){i[r]=Promise.resolve(l),i[r].then(t)}i[r]?i[r].then(t):n.tagName!=="CANVAS"?a(new Promise((function(l,c){aA(n,(function(u){e.loadImage(u,l)}),(function(u){e.loadVideo(u,l)}))}))):a(new M.Source(n))},loadCubeMapTexture:function(n,t){var e=this,i=0,r=new M.CubeTexture;function a(c){e.loadTextureSource(n[c],(function(u){r.images[c]=u.data,++i==6&&(r.needsUpdate=!0,t(r))}))}if(r.colorSpace=M.SRGBColorSpace,n.length===6)for(var l=0;l<n.length;l++)a(l);else SM("Cube map texture requires exactly 6 sources, got only %s sources",n.length)},loadImage:function(n,t){t(typeof n=="string"?(function(e){return new Promise((function(i,r){K5.load(e,(function(a){i(new M.Source(a))}),(function(){}),(function(a){Y5("`$s` could not be fetched (Error code: %s; Response: %s)",a.status,a.statusText)}))}))})(n):new M.Source(n))},loadVideo:function(n,t){var e;typeof n!="string"&&(function(i){i.autoplay=i.hasAttribute("autoplay")&&i.getAttribute("autoplay")!=="false",i.controls=i.hasAttribute("controls")&&i.getAttribute("controls")!=="false",i.getAttribute("loop")==="false"&&i.removeAttribute("loop"),i.getAttribute("preload")==="false"&&(i.preload="none"),i.crossOrigin=i.crossOrigin||"anonymous",i.setAttribute("playsinline",""),i.setAttribute("webkit-playsinline","")})(e=n),e=e||(function(i){var r=document.createElement("video");return r.setAttribute("playsinline",""),r.setAttribute("webkit-playsinline",""),r.autoplay=!0,r.loop=!0,r.crossOrigin="anonymous",r.addEventListener("error",(function(){SM("`%s` is not a valid video",i)}),!0),r.src=i,r})(n),t(new M.Source(e))},hash:function(n){return n.tagName&&(n.id||n.src)||n},registerMaterial:function(n){this.materials[n.uuid]=n},unregisterMaterial:function(n){delete this.materials[n.uuid]}}),cr("obb-collider",{schema:{showColliders:{default:!1}},init:function(){this.collisions=[],this.colliderEls=[]},addCollider:function(n){this.colliderEls.push(n),this.data.showColliders?n.components["obb-collider"].showCollider():n.components["obb-collider"].hideCollider(),this.tick=this.detectCollisions},removeCollider:function(n){var t=this.colliderEls,e=t.indexOf(n);n.components["obb-collider"].hideCollider(),e>-1&&t.splice(e,1),t.length===0&&(this.tick=void 0)},registerCollision:function(n,t){var e=this.collisions,i=!1,r=n.obb,a=t.obb,l=n.renderColliderMesh,c=t.renderColliderMesh;l&&l.material.color.set(16711680),c&&c.material.color.set(16711680);for(var u=0;u<e.length;u++)if(e[u].componentA.obb===r&&e[u].componentB.obb===a||e[u].componentA.obb===a&&e[u].componentB.obb===r){i=!0,e[u].detected=!0;break}i||(e.push({componentA:n,componentB:t,detected:!0}),n.el.emit("obbcollisionstarted",{trackedObject3D:n.trackedObject3D,withEl:t.el}),t.el.emit("obbcollisionstarted",{trackedObject3D:t.trackedObject3D,withEl:n.el}))},resetCollisions:function(){for(var n=this.collisions,t=0;t<n.length;t++)n[t].detected=!1},clearCollisions:function(){for(var n,t,e,i,r=this.collisions,a=[],l=0;l<r.length;l++)r[l].detected?a.push(r[l]):(n=r[l].componentA,t=r[l].componentB,e=n.renderColliderMesh,i=t.renderColliderMesh,e&&e.material.color.set(65280),n.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:t.el}),i&&i.material.color.set(65280),t.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:n.el}));this.collisions=a},detectCollisions:function(){var n,t,e,i,r=this.colliderEls;if(!(r.length<2)){this.resetCollisions();for(var a=0;a<r.length;a++)if(e=r[a].components["obb-collider"],(n=r[a].components["obb-collider"].obb).halfSize.x!==0&&n.halfSize.y!==0&&n.halfSize.z!==0)for(var l=a+1;l<r.length;l++)(t=(i=r[l].components["obb-collider"]).obb).halfSize.x!==0&&t.halfSize.y!==0&&t.halfSize.z!==0&&n.intersectsOBB(t)&&this.registerCollision(e,i);this.clearCollisions()}}});var Yv=Ze("components:renderer:warn");function J5(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z-t.z}function Z5(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder-t.renderOrder}function $5(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:t.z-n.z}cr("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:GE()},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:-1},maxCanvasHeight:{default:-1},multiviewStereo:{default:!1},exposure:{default:1,if:{toneMapping:["ACESFilmic","linear","reinhard","cineon","AgX","neutral"]}},toneMapping:{default:"no",oneOf:["no","ACESFilmic","linear","reinhard","cineon","AgX","neutral"]},precision:{default:"high",oneOf:["high","medium","low"]},anisotropy:{default:1},sortTransparentObjects:{default:!1},colorManagement:{default:!0},alpha:{default:!0},stencil:{default:!1},foveationLevel:{default:1}},init:function(){var n=this.data,t=this.el,e=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1),i=t.renderer;i.toneMapping=M[e+"ToneMapping"],M.Texture.DEFAULT_ANISOTROPY=n.anisotropy,M.ColorManagement.enabled=n.colorManagement,i.outputColorSpace=n.colorManagement?M.SRGBColorSpace:M.LinearSRGBColorSpace,t.hasAttribute("antialias")&&Yv('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),t.hasAttribute("logarithmicDepthBuffer")&&Yv('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.'),i.sortObjects=!0,i.setOpaqueSort(J5)},update:function(){var n=this.data,t=this.el.renderer,e=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1);t.toneMapping=M[e+"ToneMapping"],t.toneMappingExposure=n.exposure,t.xr.setFoveation(n.foveationLevel),n.sortObjects&&Yv('`sortObjects` property is deprecated. Use `renderer="sortTransparentObjects: true"` instead.'),n.sortTransparentObjects?t.setTransparentSort($5):t.setTransparentSort(Z5)},applyColorCorrection:function(n){this.data.colorManagement&&n&&n.isTexture&&n.colorSpace!==M.SRGBColorSpace&&(n.colorSpace=M.SRGBColorSpace,n.needsUpdate=!0)},setWebXRFrameRate:function(n){var t,e=this.data,i=n.supportedFrameRates;i&&n.updateTargetFrameRate&&(t=i.includes(90)?e.highRefreshRate?90:72:e.highRefreshRate?72:60,n.updateTargetFrameRate(t).catch((function(r){console.warn("failed to set target frame rate of "+t+". Error info: "+r)})))}});var tz={basic:M.BasicShadowMap,pcf:M.PCFShadowMap,pcfsoft:M.PCFSoftShadowMap};cr("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var n=this.sceneEl,t=this.data;this.shadowMapEnabled=!1,n.renderer.shadowMap.type=tz[t.type],n.renderer.shadowMap.autoUpdate=t.autoUpdate},update:function(n){n.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.shadowMapEnabled)},setShadowMapEnabled:function(n){var t=this.sceneEl,e=this.sceneEl.renderer;this.shadowMapEnabled=n;var i=this.data.enabled&&this.shadowMapEnabled;e&&i!==e.shadowMap.enabled&&(e.shadowMap.enabled=i,(function(r){r.hasLoaded&&r.object3D.traverse((function(a){if(a.material)for(var l=Array.isArray(a.material)?a.material:[a.material],c=0;c<l.length;c++)l[c].needsUpdate=!0}))})(t))}}),cr("tracked-controls",{init:function(){this.controllers=[],this.onInputSourcesChange=this.onInputSourcesChange.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.el.addEventListener("enter-vr",this.onEnterVR),this.onExitVR=this.onExitVR.bind(this),this.el.addEventListener("exit-vr",this.onExitVR)},onEnterVR:function(){this.el.xrSession&&this.el.xrSession.addEventListener("inputsourceschange",this.onInputSourcesChange)},onExitVR:function(){this.referenceSpace=void 0,this.controllers=[],this.el.emit("controllersupdated",void 0,!1)},onInputSourcesChange:function(){var n=this,t=this.el.xrSession,e=this.el.sceneEl.systems.webxr.sessionReferenceSpaceType;t.requestReferenceSpace(e).then((function(i){n.referenceSpace=i})).catch((function(i){throw n.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(e,'tracked-controls uses reference space "'+e+'".'),i})),this.controllers=t.inputSources,this.el.emit("controllersupdated",void 0,!1)}});var ez=Ze("systems:webxr:warn"),JT=(cr("webxr",{schema:{referenceSpaceType:{type:"string",default:"local-floor"},requiredFeatures:{type:"array",default:["local-floor"]},optionalFeatures:{type:"array",default:["bounded-floor"]},overlayElement:{type:"selector"}},update:function(){var n=this.data;this.sessionConfiguration={requiredFeatures:n.requiredFeatures,optionalFeatures:n.optionalFeatures},this.sessionReferenceSpaceType=n.referenceSpaceType,n.overlayElement&&(n.overlayElement.classList.remove("a-dom-overlay"),n.optionalFeatures.includes("dom-overlay")||(n.optionalFeatures.push("dom-overlay"),this.el.setAttribute("webxr",n)),this.warnIfFeatureNotRequested("dom-overlay"),this.sessionConfiguration.domOverlay={root:n.overlayElement},n.overlayElement.classList.add("a-dom-overlay"))},wasFeatureRequested:function(n){return n==="viewer"||n==="local"||!(!this.sessionConfiguration.requiredFeatures.includes(n)&&!this.sessionConfiguration.optionalFeatures.includes(n))},warnIfFeatureNotRequested:function(n,t){this.wasFeatureRequested(n)||ez((t?t+" ":"")+'Please add the feature "'+n+`" to a-scene's webxr system options in requiredFeatures/optionalFeatures.`)}}),{});function BM(n){var t=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();n==="fog"&&(t="material-fog"),n==="visible"&&(t="material-visible"),JT[t]="material."+n}function Ts(){return{defaultComponents:{material:{}},mappings:Ui({},JT)}}Object.keys(Tn.material.schema).forEach(BM),Object.keys(Hr.standard.schema).forEach(BM);var ep=new M.Vector3,nz=new M.Vector3;le("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var n=this.data,t=this.el,e=t.object3D.parent,i=t.object3D,r=new M.Group;ep.copy(i.position),nz.copy(i.rotation),e.remove(i),r.add(i),e.add(r),t.object3D=r,i.position.set(-1*n.x,-1*n.y,-1*n.z),r.position.set(n.x+ep.x,n.y+ep.y,n.z+ep.z),r.rotation.copy(i.rotation),i.rotation.set(0,0,0)}}),pi("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}}),pi("a-cursor",Wi({},Ts(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}})),pi("a-curvedimage",Wi({},Ts(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}})),pi("a-gltf-model",{mappings:{src:"gltf-model"}}),pi("a-image",Wi({},Ts(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}})),pi("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target",envmap:"light.envMap","shadow-camera-automatic":"light.shadowCameraAutomatic"}}),pi("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}}),pi("a-obj-model",Wi({},Ts(),{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}));const ZT={},iz=ZT;function TM(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var Kv,np;rb.forEach((function(n){var t=Ra[n],e=TM(n),i={};Object.keys(t.schema).forEach((function(l){i[TM(l)]="geometry."+l}));var r="a-"+e,a=pi(r,Wi({},Ts(),{defaultComponents:{geometry:{primitive:n}},mappings:i}));ZT[r]=a})),pi("a-sky",Wi({},Ts(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:Wi({},iz["a-sphere"].mappings)})),pi("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}}),Kv={text:{anchor:"align",width:5}},np=np||{},Object.keys(Kv).forEach((function(n){(function(t,e){var i=Tn[t].schema;Object.keys(i).forEach((function(r){var a=r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();e[a]!==void 0&&(a=t+"-"+r),e[a]=t+"."+r}))})(n,np)})),pi("a-text",Wi({},null,{defaultComponents:Kv,mappings:np})),pi("a-video",Wi({},Ts(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}})),pi("a-videosphere",Wi({},Ts(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}));var ob=Ze,rz=ob("A-Frame:error"),sz=ob("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&sz("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),window.cordova||window.location.protocol!=="file:"||rz("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/1.4.0/introduction/installation.html#use-a-local-server."),qE&&(window.logs=ob,de(7180),de(9379)),console.log("A-Frame Version: 1.7.0 (Date 2025-03-12, Commit #1b9650f1)"),console.log("THREE Version (https://github.com/supermedium/three.js):",gT.REVISION),window.AFRAME_ASYNC||(document.readyState!=="complete"?document.addEventListener("readystatechange",(function n(){document.readyState==="complete"&&(document.removeEventListener("readystatechange",n),ky())})):ky());const az=globalThis.AFRAME={AComponent:fh,AEntity:zn,ANode:ei,ANIME:op,AScene:VT,components:Tn,coreComponents:Object.keys(Tn),geometries:Ra,registerComponent:le,registerGeometry:gi,registerPrimitive:pi,registerShader:Ca,registerSystem:cr,primitives:{getMeshMixin:Ts,primitives:qT},scenes:Do,schema:xy,shaders:Hr,systems:Bs,emitReady:ky,THREE:gT,utils:by,version:jT};OB.A;var bs={},IM;function oz(){if(IM)return bs;IM=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.Scene=bs.Entity=bs.options=void 0;var n=Object.assign||function(y){for(var _=1;_<arguments.length;_++){var w=arguments[_];for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(y[S]=w[S])}return y},t=(function(){function y(_,w){for(var S=0;S<w.length;S++){var R=w[S];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(_,R.key,R)}}return function(_,w,S){return w&&y(_.prototype,w),S&&y(_,S),_}})(),e=ph(),i=r(e);function r(y){return y&&y.__esModule?y:{default:y}}function a(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}function l(y,_){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:y}function c(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);y.prototype=Object.create(_&&_.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(y,_):y.__proto__=_)}var u=["children","events","primitive"],d=function(_){return u.indexOf(_)===-1},f={runSetAttributeOnUpdates:!0};bs.options=f;function A(y,_,w){if(w==="className")y.setAttribute("class",_.className);else{if(_[w]&&_[w].constructor===Function)return;y.setAttribute(w,_[w])}}function m(y,_,w){var S;if(!(!w||_===w)){for(S in w)d(S)&&A(y,w,S);if(_)for(S in _)d(S)&&w[S]===void 0&&y.removeAttribute(S)}}var g=bs.Entity=(function(y){c(_,y);function _(){var w,S,R,U;a(this,_);for(var L=arguments.length,F=Array(L),D=0;D<L;D++)F[D]=arguments[D];return U=(S=(R=l(this,(w=_.__proto__||Object.getPrototypeOf(_)).call.apply(w,[this].concat(F))),R),R.initEntity=function(O){var z=R.props,J;if(O){if(R.el=O,z.events)for(J in z.events)x(O,J,z.events[J]);m(O,null,z),z._ref&&z._ref(O)}},S),l(R,U)}return t(_,[{key:"componentDidUpdate",value:function(S,R){var U=this.el,L=this.props;b(U,S.events,L.events),f.runSetAttributeOnUpdates&&m(U,S,L)}},{key:"componentWillUnmount",value:function(){var S=this.el,R=this.props,U;if(R.events)for(U in R.events)E(S,U,R.events[U])}},{key:"render",value:function(){var S=this.props,R=this.isScene?"a-scene":S.primitive||"a-entity",U,L={};for(U in S)(["className","id","mixin"].indexOf(U)!==-1||U.indexOf("data-")===0)&&(L[U]=S[U]);return i.default.createElement(R,n({ref:this.initEntity},L),S.children)}}]),_})(i.default.Component);bs.Scene=(function(y){c(_,y);function _(w){a(this,_);var S=l(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,w));return S.isScene=!0,S}return _})(g);function b(y,_,w){var S;if(!(!_||!w||_===w)){for(S in w)_[S]!==w[S]&&(_[S]&&E(y,S,_[S]),x(y,S,w[S]));for(S in _)w[S]||E(y,S,_[S])}}function x(y,_,w){var S;if(w)for(w.constructor===Function&&(w=[w]),S=0;S<w.length;S++)y.addEventListener(_,w[S])}function E(y,_,w){var S;if(w)for(w.constructor===Function&&(w=[w]),S=0;S<w.length;S++)y.removeEventListener(_,w[S])}return bs}var RM=oz();function lz(){const n=mL.c(2),t=cz;let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e={margin:0,overflow:"hidden"},n[0]=e):e=n[0];let i;return n[1]===Symbol.for("react.memo_cache_sentinel")?(i=_o.jsx("div",{style:e,children:_o.jsxs(RM.Scene,{"vr-mode-ui":"enabled: false",renderer:"logarithmicDepthBuffer: true;",embedded:!0,arjs:"sourceType: webcam; debugUIEnabled: false;",children:[_o.jsx("a-marker",{type:"pattern",url:"marker.patt",onMarkerFound:t,children:_o.jsx(RM.Entity,{"gltf-model":"url(cod.glb)",scale:"0.5 0.5 0.5",position:"0 0.5 0",rotation:"-90 0 0"})}),_o.jsx("a-entity",{camera:!0})]})}),n[1]=i):i=n[1],i}function cz(){console.log("Marker gsit! Se trimite codul ctre Flutter:","VIITORUL_ESTE_AICI"),window.flutter_inappwebview?window.flutter_inappwebview.callHandler("arCodeHandler","VIITORUL_ESTE_AICI"):alert("Marker gsit! Codul este: VIITORUL_ESTE_AICI")}fL.createRoot(document.getElementById("root")).render(_o.jsx(aL.StrictMode,{children:_o.jsx(lz,{})}));
